const PrintElementConfig={echarts:{tabs:[{name:"\u57FA\u7840",options:[{name:"coordinate",hidden:!1},{name:"widthHeight",hidden:!1},{name:"fixed",hidden:!1}]},{name:"\u6837\u5F0F",options:[{name:"color",hidden:!1},{name:"backgroundColor",hidden:!1},{name:"transform",hidden:!1},{name:"zIndex",hidden:!1}]},{name:"\u9AD8\u7EA7",options:[{name:"pageBreak",hidden:!1},{name:"showInPage",hidden:!1},{name:"unShowInPage",hidden:!1},{name:"axis",hidden:!1},{name:"formatter",hidden:!1},{name:"eChartsOption",hidden:!1}]}],supportOptions:[{name:"coordinate",hidden:!1},{name:"widthHeight",hidden:!1},{name:"color",hidden:!1},{name:"backgroundColor",hidden:!1},{name:"fixed",hidden:!1},{name:"axis",hidden:!1},{name:"pageBreak",hidden:!1},{name:"showInPage",hidden:!1},{name:"unShowInPage",hidden:!1},{name:"transform",hidden:!1},{name:"zIndex",hidden:!1},{name:"formatter",hidden:!1},{name:"eChartsOption",hidden:!1}],default:{height:40,width:40}}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics=function(a,n){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])},extendStatics(a,n)};function __extends(a,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");extendStatics(a,n);function r(){this.constructor=a}a.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}var Browser=function(){function a(){this.firefox=!1,this.ie=!1,this.edge=!1,this.newEdge=!1,this.weChat=!1}return a}(),Env=function(){function a(){this.browser=new Browser,this.node=!1,this.wxa=!1,this.worker=!1,this.svgSupported=!1,this.touchEventsSupported=!1,this.pointerEventsSupported=!1,this.domSupported=!1,this.transformSupported=!1,this.transform3dSupported=!1,this.hasGlobalWindow=typeof window<"u"}return a}(),env=new Env;typeof wx=="object"&&typeof wx.getSystemInfoSync=="function"?(env.wxa=!0,env.touchEventsSupported=!0):typeof document>"u"&&typeof self<"u"?env.worker=!0:!env.hasGlobalWindow||"Deno"in window?(env.node=!0,env.svgSupported=!0):detect(navigator.userAgent,env);function detect(a,n){var r=n.browser,o=a.match(/Firefox\/([\d.]+)/),l=a.match(/MSIE\s([\d.]+)/)||a.match(/Trident\/.+?rv:(([\d.]+))/),u=a.match(/Edge?\/([\d.]+)/),c=/micromessenger/i.test(a);o&&(r.firefox=!0,r.version=o[1]),l&&(r.ie=!0,r.version=l[1]),u&&(r.edge=!0,r.version=u[1],r.newEdge=+u[1].split(".")[0]>18),c&&(r.weChat=!0),n.svgSupported=typeof SVGRect<"u",n.touchEventsSupported="ontouchstart"in window&&!r.ie&&!r.edge,n.pointerEventsSupported="onpointerdown"in window&&(r.edge||r.ie&&+r.version>=11),n.domSupported=typeof document<"u";var h=document.documentElement.style;n.transform3dSupported=(r.ie&&"transition"in h||r.edge||"WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix||"MozPerspective"in h)&&!("OTransition"in h),n.transformSupported=n.transform3dSupported||r.ie&&+r.version>=9}const env$1=env;var DEFAULT_FONT_SIZE=12,DEFAULT_FONT_FAMILY="sans-serif",DEFAULT_FONT=DEFAULT_FONT_SIZE+"px "+DEFAULT_FONT_FAMILY,OFFSET=20,SCALE=100,defaultWidthMapStr="007LLmW'55;N0500LLLLLLLLLL00NNNLzWW\\\\WQb\\0FWLg\\bWb\\WQ\\WrWWQ000CL5LLFLL0LL**F*gLLLL5F0LF\\FFF5.5N";function getTextWidthMap(a){var n={};if(typeof JSON>"u")return n;for(var r=0;r<a.length;r++){var o=String.fromCharCode(r+32),l=(a.charCodeAt(r)-OFFSET)/SCALE;n[o]=l}return n}var DEFAULT_TEXT_WIDTH_MAP=getTextWidthMap(defaultWidthMapStr),platformApi={createCanvas:function(){return typeof document<"u"&&document.createElement("canvas")},measureText:function(){var a,n;return function(r,o){if(!a){var l=platformApi.createCanvas();a=l&&l.getContext("2d")}if(a)return n!==o&&(n=a.font=o||DEFAULT_FONT),a.measureText(r);r=r||"",o=o||DEFAULT_FONT;var u=/((?:\d+)?\.?\d*)px/.exec(o),c=u&&+u[1]||DEFAULT_FONT_SIZE,h=0;if(o.indexOf("mono")>=0)h=c*r.length;else for(var d=0;d<r.length;d++){var p=DEFAULT_TEXT_WIDTH_MAP[r[d]];h+=p==null?c:p*c}return{width:h}}}(),loadImage:function(a,n,r){var o=new Image;return o.onload=n,o.onerror=r,o.src=a,o}};function setPlatformAPI(a){for(var n in platformApi)a[n]&&(platformApi[n]=a[n])}var BUILTIN_OBJECT=reduce(["Function","RegExp","Date","Error","CanvasGradient","CanvasPattern","Image","Canvas"],function(a,n){return a["[object "+n+"]"]=!0,a},{}),TYPED_ARRAY=reduce(["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64"],function(a,n){return a["[object "+n+"Array]"]=!0,a},{}),objToString=Object.prototype.toString,arrayProto=Array.prototype,nativeForEach=arrayProto.forEach,nativeFilter=arrayProto.filter,nativeSlice=arrayProto.slice,nativeMap=arrayProto.map,ctorFunction=function(){}.constructor,protoFunction=ctorFunction?ctorFunction.prototype:null,protoKey="__proto__",idStart=2311;function guid(){return idStart++}function logError(){for(var a=[],n=0;n<arguments.length;n++)a[n]=arguments[n];typeof console<"u"&&console.error.apply(console,a)}function clone$4(a){if(a==null||typeof a!="object")return a;var n=a,r=objToString.call(a);if(r==="[object Array]"){if(!isPrimitive(a)){n=[];for(var o=0,l=a.length;o<l;o++)n[o]=clone$4(a[o])}}else if(TYPED_ARRAY[r]){if(!isPrimitive(a)){var u=a.constructor;if(u.from)n=u.from(a);else{n=new u(a.length);for(var o=0,l=a.length;o<l;o++)n[o]=a[o]}}}else if(!BUILTIN_OBJECT[r]&&!isPrimitive(a)&&!isDom(a)){n={};for(var c in a)a.hasOwnProperty(c)&&c!==protoKey&&(n[c]=clone$4(a[c]))}return n}function merge(a,n,r){if(!isObject$3(n)||!isObject$3(a))return r?clone$4(n):a;for(var o in n)if(n.hasOwnProperty(o)&&o!==protoKey){var l=a[o],u=n[o];isObject$3(u)&&isObject$3(l)&&!isArray$1(u)&&!isArray$1(l)&&!isDom(u)&&!isDom(l)&&!isBuiltInObject(u)&&!isBuiltInObject(l)&&!isPrimitive(u)&&!isPrimitive(l)?merge(l,u,r):(r||!(o in a))&&(a[o]=clone$4(n[o]))}return a}function mergeAll(a,n){for(var r=a[0],o=1,l=a.length;o<l;o++)r=merge(r,a[o],n);return r}function extend(a,n){if(Object.assign)Object.assign(a,n);else for(var r in n)n.hasOwnProperty(r)&&r!==protoKey&&(a[r]=n[r]);return a}function defaults(a,n,r){for(var o=keys(n),l=0,u=o.length;l<u;l++){var c=o[l];(r?n[c]!=null:a[c]==null)&&(a[c]=n[c])}return a}var createCanvas=platformApi.createCanvas;function indexOf(a,n){if(a){if(a.indexOf)return a.indexOf(n);for(var r=0,o=a.length;r<o;r++)if(a[r]===n)return r}return-1}function inherits(a,n){var r=a.prototype;function o(){}o.prototype=n.prototype,a.prototype=new o;for(var l in r)r.hasOwnProperty(l)&&(a.prototype[l]=r[l]);a.prototype.constructor=a,a.superClass=n}function mixin(a,n,r){if(a="prototype"in a?a.prototype:a,n="prototype"in n?n.prototype:n,Object.getOwnPropertyNames)for(var o=Object.getOwnPropertyNames(n),l=0;l<o.length;l++){var u=o[l];u!=="constructor"&&(r?n[u]!=null:a[u]==null)&&(a[u]=n[u])}else defaults(a,n,r)}function isArrayLike(a){return!a||typeof a=="string"?!1:typeof a.length=="number"}function each$f(a,n,r){if(a&&n)if(a.forEach&&a.forEach===nativeForEach)a.forEach(n,r);else if(a.length===+a.length)for(var o=0,l=a.length;o<l;o++)n.call(r,a[o],o,a);else for(var u in a)a.hasOwnProperty(u)&&n.call(r,a[u],u,a)}function map$1(a,n,r){if(!a)return[];if(!n)return slice(a);if(a.map&&a.map===nativeMap)return a.map(n,r);for(var o=[],l=0,u=a.length;l<u;l++)o.push(n.call(r,a[l],l,a));return o}function reduce(a,n,r,o){if(a&&n){for(var l=0,u=a.length;l<u;l++)r=n.call(o,r,a[l],l,a);return r}}function filter(a,n,r){if(!a)return[];if(!n)return slice(a);if(a.filter&&a.filter===nativeFilter)return a.filter(n,r);for(var o=[],l=0,u=a.length;l<u;l++)n.call(r,a[l],l,a)&&o.push(a[l]);return o}function find(a,n,r){if(a&&n){for(var o=0,l=a.length;o<l;o++)if(n.call(r,a[o],o,a))return a[o]}}function keys(a){if(!a)return[];if(Object.keys)return Object.keys(a);var n=[];for(var r in a)a.hasOwnProperty(r)&&n.push(r);return n}function bindPolyfill(a,n){for(var r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];return function(){return a.apply(n,r.concat(nativeSlice.call(arguments)))}}var bind$1=protoFunction&&isFunction(protoFunction.bind)?protoFunction.call.bind(protoFunction.bind):bindPolyfill;function curry$1(a){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return function(){return a.apply(this,n.concat(nativeSlice.call(arguments)))}}function isArray$1(a){return Array.isArray?Array.isArray(a):objToString.call(a)==="[object Array]"}function isFunction(a){return typeof a=="function"}function isString(a){return typeof a=="string"}function isStringSafe(a){return objToString.call(a)==="[object String]"}function isNumber(a){return typeof a=="number"}function isObject$3(a){var n=typeof a;return n==="function"||!!a&&n==="object"}function isBuiltInObject(a){return!!BUILTIN_OBJECT[objToString.call(a)]}function isTypedArray(a){return!!TYPED_ARRAY[objToString.call(a)]}function isDom(a){return typeof a=="object"&&typeof a.nodeType=="number"&&typeof a.ownerDocument=="object"}function isGradientObject(a){return a.colorStops!=null}function isImagePatternObject(a){return a.image!=null}function isRegExp(a){return objToString.call(a)==="[object RegExp]"}function eqNaN(a){return a!==a}function retrieve(){for(var a=[],n=0;n<arguments.length;n++)a[n]=arguments[n];for(var r=0,o=a.length;r<o;r++)if(a[r]!=null)return a[r]}function retrieve2(a,n){return a!=null?a:n}function retrieve3(a,n,r){return a!=null?a:n!=null?n:r}function slice(a){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return nativeSlice.apply(a,n)}function normalizeCssArray$1(a){if(typeof a=="number")return[a,a,a,a];var n=a.length;return n===2?[a[0],a[1],a[0],a[1]]:n===3?[a[0],a[1],a[2],a[1]]:a}function assert(a,n){if(!a)throw new Error(n)}function trim$1(a){return a==null?null:typeof a.trim=="function"?a.trim():a.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}var primitiveKey="__ec_primitive__";function setAsPrimitive(a){a[primitiveKey]=!0}function isPrimitive(a){return a[primitiveKey]}var MapPolyfill=function(){function a(){this.data={}}return a.prototype.delete=function(n){var r=this.has(n);return r&&delete this.data[n],r},a.prototype.has=function(n){return this.data.hasOwnProperty(n)},a.prototype.get=function(n){return this.data[n]},a.prototype.set=function(n,r){return this.data[n]=r,this},a.prototype.keys=function(){return keys(this.data)},a.prototype.forEach=function(n){var r=this.data;for(var o in r)r.hasOwnProperty(o)&&n(r[o],o)},a}(),isNativeMapSupported=typeof Map=="function";function maybeNativeMap(){return isNativeMapSupported?new Map:new MapPolyfill}var HashMap=function(){function a(n){var r=isArray$1(n);this.data=maybeNativeMap();var o=this;n instanceof a?n.each(l):n&&each$f(n,l);function l(u,c){r?o.set(u,c):o.set(c,u)}}return a.prototype.hasKey=function(n){return this.data.has(n)},a.prototype.get=function(n){return this.data.get(n)},a.prototype.set=function(n,r){return this.data.set(n,r),r},a.prototype.each=function(n,r){this.data.forEach(function(o,l){n.call(r,o,l)})},a.prototype.keys=function(){var n=this.data.keys();return isNativeMapSupported?Array.from(n):n},a.prototype.removeKey=function(n){this.data.delete(n)},a}();function createHashMap(a){return new HashMap(a)}function concatArray(a,n){for(var r=new a.constructor(a.length+n.length),o=0;o<a.length;o++)r[o]=a[o];for(var l=a.length,o=0;o<n.length;o++)r[o+l]=n[o];return r}function createObject(a,n){var r;if(Object.create)r=Object.create(a);else{var o=function(){};o.prototype=a,r=new o}return n&&extend(r,n),r}function disableUserSelect(a){var n=a.style;n.webkitUserSelect="none",n.userSelect="none",n.webkitTapHighlightColor="rgba(0,0,0,0)",n["-webkit-touch-callout"]="none"}function hasOwn(a,n){return a.hasOwnProperty(n)}function noop(){}var RADIAN_TO_DEGREE=180/Math.PI;const util$1=Object.freeze(Object.defineProperty({__proto__:null,guid,logError,clone:clone$4,merge,mergeAll,extend,defaults,createCanvas,indexOf,inherits,mixin,isArrayLike,each:each$f,map:map$1,reduce,filter,find,keys,bind:bind$1,curry:curry$1,isArray:isArray$1,isFunction,isString,isStringSafe,isNumber,isObject:isObject$3,isBuiltInObject,isTypedArray,isDom,isGradientObject,isImagePatternObject,isRegExp,eqNaN,retrieve,retrieve2,retrieve3,slice,normalizeCssArray:normalizeCssArray$1,assert,trim:trim$1,setAsPrimitive,isPrimitive,HashMap,createHashMap,concatArray,createObject,disableUserSelect,hasOwn,noop,RADIAN_TO_DEGREE},Symbol.toStringTag,{value:"Module"}));function create$2(a,n){return a==null&&(a=0),n==null&&(n=0),[a,n]}function copy$1(a,n){return a[0]=n[0],a[1]=n[1],a}function clone$3(a){return[a[0],a[1]]}function set$1(a,n,r){return a[0]=n,a[1]=r,a}function add(a,n,r){return a[0]=n[0]+r[0],a[1]=n[1]+r[1],a}function scaleAndAdd$1(a,n,r,o){return a[0]=n[0]+r[0]*o,a[1]=n[1]+r[1]*o,a}function sub(a,n,r){return a[0]=n[0]-r[0],a[1]=n[1]-r[1],a}function len(a){return Math.sqrt(lenSquare(a))}var length=len;function lenSquare(a){return a[0]*a[0]+a[1]*a[1]}var lengthSquare=lenSquare;function mul$1(a,n,r){return a[0]=n[0]*r[0],a[1]=n[1]*r[1],a}function div(a,n,r){return a[0]=n[0]/r[0],a[1]=n[1]/r[1],a}function dot(a,n){return a[0]*n[0]+a[1]*n[1]}function scale$2(a,n,r){return a[0]=n[0]*r,a[1]=n[1]*r,a}function normalize$3(a,n){var r=len(n);return r===0?(a[0]=0,a[1]=0):(a[0]=n[0]/r,a[1]=n[1]/r),a}function distance(a,n){return Math.sqrt((a[0]-n[0])*(a[0]-n[0])+(a[1]-n[1])*(a[1]-n[1]))}var dist$1=distance;function distanceSquare(a,n){return(a[0]-n[0])*(a[0]-n[0])+(a[1]-n[1])*(a[1]-n[1])}var distSquare=distanceSquare;function negate(a,n){return a[0]=-n[0],a[1]=-n[1],a}function lerp$1(a,n,r,o){return a[0]=n[0]+o*(r[0]-n[0]),a[1]=n[1]+o*(r[1]-n[1]),a}function applyTransform$1(a,n,r){var o=n[0],l=n[1];return a[0]=r[0]*o+r[2]*l+r[4],a[1]=r[1]*o+r[3]*l+r[5],a}function min$1(a,n,r){return a[0]=Math.min(n[0],r[0]),a[1]=Math.min(n[1],r[1]),a}function max$1(a,n,r){return a[0]=Math.max(n[0],r[0]),a[1]=Math.max(n[1],r[1]),a}const vector=Object.freeze(Object.defineProperty({__proto__:null,create:create$2,copy:copy$1,clone:clone$3,set:set$1,add,scaleAndAdd:scaleAndAdd$1,sub,len,length,lenSquare,lengthSquare,mul:mul$1,div,dot,scale:scale$2,normalize:normalize$3,distance,dist:dist$1,distanceSquare,distSquare,negate,lerp:lerp$1,applyTransform:applyTransform$1,min:min$1,max:max$1},Symbol.toStringTag,{value:"Module"}));var Param=function(){function a(n,r){this.target=n,this.topTarget=r&&r.topTarget}return a}(),Draggable=function(){function a(n){this.handler=n,n.on("mousedown",this._dragStart,this),n.on("mousemove",this._drag,this),n.on("mouseup",this._dragEnd,this)}return a.prototype._dragStart=function(n){for(var r=n.target;r&&!r.draggable;)r=r.parent||r.__hostTarget;r&&(this._draggingTarget=r,r.dragging=!0,this._x=n.offsetX,this._y=n.offsetY,this.handler.dispatchToElement(new Param(r,n),"dragstart",n.event))},a.prototype._drag=function(n){var r=this._draggingTarget;if(r){var o=n.offsetX,l=n.offsetY,u=o-this._x,c=l-this._y;this._x=o,this._y=l,r.drift(u,c,n),this.handler.dispatchToElement(new Param(r,n),"drag",n.event);var h=this.handler.findHover(o,l,r).target,d=this._dropTarget;this._dropTarget=h,r!==h&&(d&&h!==d&&this.handler.dispatchToElement(new Param(d,n),"dragleave",n.event),h&&h!==d&&this.handler.dispatchToElement(new Param(h,n),"dragenter",n.event))}},a.prototype._dragEnd=function(n){var r=this._draggingTarget;r&&(r.dragging=!1),this.handler.dispatchToElement(new Param(r,n),"dragend",n.event),this._dropTarget&&this.handler.dispatchToElement(new Param(this._dropTarget,n),"drop",n.event),this._draggingTarget=null,this._dropTarget=null},a}();const Draggable$1=Draggable;var Eventful=function(){function a(n){n&&(this._$eventProcessor=n)}return a.prototype.on=function(n,r,o,l){this._$handlers||(this._$handlers={});var u=this._$handlers;if(typeof r=="function"&&(l=o,o=r,r=null),!o||!n)return this;var c=this._$eventProcessor;r!=null&&c&&c.normalizeQuery&&(r=c.normalizeQuery(r)),u[n]||(u[n]=[]);for(var h=0;h<u[n].length;h++)if(u[n][h].h===o)return this;var d={h:o,query:r,ctx:l||this,callAtLast:o.zrEventfulCallAtLast},p=u[n].length-1,f=u[n][p];return f&&f.callAtLast?u[n].splice(p,0,d):u[n].push(d),this},a.prototype.isSilent=function(n){var r=this._$handlers;return!r||!r[n]||!r[n].length},a.prototype.off=function(n,r){var o=this._$handlers;if(!o)return this;if(!n)return this._$handlers={},this;if(r){if(o[n]){for(var l=[],u=0,c=o[n].length;u<c;u++)o[n][u].h!==r&&l.push(o[n][u]);o[n]=l}o[n]&&o[n].length===0&&delete o[n]}else delete o[n];return this},a.prototype.trigger=function(n){for(var r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];if(!this._$handlers)return this;var l=this._$handlers[n],u=this._$eventProcessor;if(l)for(var c=r.length,h=l.length,d=0;d<h;d++){var p=l[d];if(!(u&&u.filter&&p.query!=null&&!u.filter(n,p.query)))switch(c){case 0:p.h.call(p.ctx);break;case 1:p.h.call(p.ctx,r[0]);break;case 2:p.h.call(p.ctx,r[0],r[1]);break;default:p.h.apply(p.ctx,r);break}}return u&&u.afterTrigger&&u.afterTrigger(n),this},a.prototype.triggerWithContext=function(n){for(var r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];if(!this._$handlers)return this;var l=this._$handlers[n],u=this._$eventProcessor;if(l)for(var c=r.length,h=r[c-1],d=l.length,p=0;p<d;p++){var f=l[p];if(!(u&&u.filter&&f.query!=null&&!u.filter(n,f.query)))switch(c){case 0:f.h.call(h);break;case 1:f.h.call(h,r[0]);break;case 2:f.h.call(h,r[0],r[1]);break;default:f.h.apply(h,r.slice(1,c-1));break}}return u&&u.afterTrigger&&u.afterTrigger(n),this},a}();const Eventful$1=Eventful;var LN2=Math.log(2);function determinant(a,n,r,o,l,u){var c=o+"-"+l,h=a.length;if(u.hasOwnProperty(c))return u[c];if(n===1){var d=Math.round(Math.log((1<<h)-1&~l)/LN2);return a[r][d]}for(var p=o|1<<r,f=r+1;o&1<<f;)f++;for(var g=0,y=0,v=0;y<h;y++){var _=1<<y;_&l||(g+=(v%2?-1:1)*a[r][y]*determinant(a,n-1,f,p,l|_,u),v++)}return u[c]=g,g}function buildTransformer(a,n){var r=[[a[0],a[1],1,0,0,0,-n[0]*a[0],-n[0]*a[1]],[0,0,0,a[0],a[1],1,-n[1]*a[0],-n[1]*a[1]],[a[2],a[3],1,0,0,0,-n[2]*a[2],-n[2]*a[3]],[0,0,0,a[2],a[3],1,-n[3]*a[2],-n[3]*a[3]],[a[4],a[5],1,0,0,0,-n[4]*a[4],-n[4]*a[5]],[0,0,0,a[4],a[5],1,-n[5]*a[4],-n[5]*a[5]],[a[6],a[7],1,0,0,0,-n[6]*a[6],-n[6]*a[7]],[0,0,0,a[6],a[7],1,-n[7]*a[6],-n[7]*a[7]]],o={},l=determinant(r,8,0,0,0,o);if(l!==0){for(var u=[],c=0;c<8;c++)for(var h=0;h<8;h++)u[h]==null&&(u[h]=0),u[h]+=((c+h)%2?-1:1)*determinant(r,7,c===0?1:0,1<<c,1<<h,o)/l*n[c];return function(d,p,f){var g=p*u[6]+f*u[7]+1;d[0]=(p*u[0]+f*u[1]+u[2])/g,d[1]=(p*u[3]+f*u[4]+u[5])/g}}}var EVENT_SAVED_PROP="___zrEVENTSAVED",_calcOut$1=[];function transformLocalCoord(a,n,r,o,l){return transformCoordWithViewport(_calcOut$1,n,o,l,!0)&&transformCoordWithViewport(a,r,_calcOut$1[0],_calcOut$1[1])}function transformCoordWithViewport(a,n,r,o,l){if(n.getBoundingClientRect&&env$1.domSupported&&!isCanvasEl(n)){var u=n[EVENT_SAVED_PROP]||(n[EVENT_SAVED_PROP]={}),c=prepareCoordMarkers(n,u),h=preparePointerTransformer(c,u,l);if(h)return h(a,r,o),!0}return!1}function prepareCoordMarkers(a,n){var r=n.markers;if(r)return r;r=n.markers=[];for(var o=["left","right"],l=["top","bottom"],u=0;u<4;u++){var c=document.createElement("div"),h=c.style,d=u%2,p=(u>>1)%2;h.cssText=["position: absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","user-select: none","width:0","height:0",o[d]+":0",l[p]+":0",o[1-d]+":auto",l[1-p]+":auto",""].join("!important;"),a.appendChild(c),r.push(c)}return r}function preparePointerTransformer(a,n,r){for(var o=r?"invTrans":"trans",l=n[o],u=n.srcCoords,c=[],h=[],d=!0,p=0;p<4;p++){var f=a[p].getBoundingClientRect(),g=2*p,y=f.left,v=f.top;c.push(y,v),d=d&&u&&y===u[g]&&v===u[g+1],h.push(a[p].offsetLeft,a[p].offsetTop)}return d&&l?l:(n.srcCoords=c,n[o]=r?buildTransformer(h,c):buildTransformer(c,h))}function isCanvasEl(a){return a.nodeName.toUpperCase()==="CANVAS"}var replaceReg=/([&<>"'])/g,replaceMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function encodeHTML(a){return a==null?"":(a+"").replace(replaceReg,function(n,r){return replaceMap[r]})}var MOUSE_EVENT_REG=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,_calcOut=[],firefoxNotSupportOffsetXY=env$1.browser.firefox&&+env$1.browser.version.split(".")[0]<39;function clientToLocal(a,n,r,o){return r=r||{},o?calculateZrXY(a,n,r):firefoxNotSupportOffsetXY&&n.layerX!=null&&n.layerX!==n.offsetX?(r.zrX=n.layerX,r.zrY=n.layerY):n.offsetX!=null?(r.zrX=n.offsetX,r.zrY=n.offsetY):calculateZrXY(a,n,r),r}function calculateZrXY(a,n,r){if(env$1.domSupported&&a.getBoundingClientRect){var o=n.clientX,l=n.clientY;if(isCanvasEl(a)){var u=a.getBoundingClientRect();r.zrX=o-u.left,r.zrY=l-u.top;return}else if(transformCoordWithViewport(_calcOut,a,o,l)){r.zrX=_calcOut[0],r.zrY=_calcOut[1];return}}r.zrX=r.zrY=0}function getNativeEvent(a){return a||window.event}function normalizeEvent(a,n,r){if(n=getNativeEvent(n),n.zrX!=null)return n;var o=n.type,l=o&&o.indexOf("touch")>=0;if(l){var u=o!=="touchend"?n.targetTouches[0]:n.changedTouches[0];u&&clientToLocal(a,u,n,r)}else{clientToLocal(a,n,n,r);var c=getWheelDeltaMayPolyfill(n);n.zrDelta=c?c/120:-(n.detail||0)/3}var h=n.button;return n.which==null&&h!==void 0&&MOUSE_EVENT_REG.test(n.type)&&(n.which=h&1?1:h&2?3:h&4?2:0),n}function getWheelDeltaMayPolyfill(a){var n=a.wheelDelta;if(n)return n;var r=a.deltaX,o=a.deltaY;if(r==null||o==null)return n;var l=Math.abs(o!==0?o:r),u=o>0?-1:o<0?1:r>0?-1:1;return 3*l*u}function addEventListener(a,n,r,o){a.addEventListener(n,r,o)}function removeEventListener(a,n,r,o){a.removeEventListener(n,r,o)}var stop=function(a){a.preventDefault(),a.stopPropagation(),a.cancelBubble=!0};function isMiddleOrRightButtonOnMouseUpDown(a){return a.which===2||a.which===3}var GestureMgr=function(){function a(){this._track=[]}return a.prototype.recognize=function(n,r,o){return this._doTrack(n,r,o),this._recognize(n)},a.prototype.clear=function(){return this._track.length=0,this},a.prototype._doTrack=function(n,r,o){var l=n.touches;if(l){for(var u={points:[],touches:[],target:r,event:n},c=0,h=l.length;c<h;c++){var d=l[c],p=clientToLocal(o,d,{});u.points.push([p.zrX,p.zrY]),u.touches.push(d)}this._track.push(u)}},a.prototype._recognize=function(n){for(var r in recognizers)if(recognizers.hasOwnProperty(r)){var o=recognizers[r](this._track,n);if(o)return o}},a}();function dist(a){var n=a[1][0]-a[0][0],r=a[1][1]-a[0][1];return Math.sqrt(n*n+r*r)}function center$1(a){return[(a[0][0]+a[1][0])/2,(a[0][1]+a[1][1])/2]}var recognizers={pinch:function(a,n){var r=a.length;if(r){var o=(a[r-1]||{}).points,l=(a[r-2]||{}).points||o;if(l&&l.length>1&&o&&o.length>1){var u=dist(o)/dist(l);!isFinite(u)&&(u=1),n.pinchScale=u;var c=center$1(o);return n.pinchX=c[0],n.pinchY=c[1],{type:"pinch",target:a[0].target,event:n}}}}};function create$1(){return[1,0,0,1,0,0]}function identity(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a[4]=0,a[5]=0,a}function copy(a,n){return a[0]=n[0],a[1]=n[1],a[2]=n[2],a[3]=n[3],a[4]=n[4],a[5]=n[5],a}function mul(a,n,r){var o=n[0]*r[0]+n[2]*r[1],l=n[1]*r[0]+n[3]*r[1],u=n[0]*r[2]+n[2]*r[3],c=n[1]*r[2]+n[3]*r[3],h=n[0]*r[4]+n[2]*r[5]+n[4],d=n[1]*r[4]+n[3]*r[5]+n[5];return a[0]=o,a[1]=l,a[2]=u,a[3]=c,a[4]=h,a[5]=d,a}function translate(a,n,r){return a[0]=n[0],a[1]=n[1],a[2]=n[2],a[3]=n[3],a[4]=n[4]+r[0],a[5]=n[5]+r[1],a}function rotate(a,n,r,o){o===void 0&&(o=[0,0]);var l=n[0],u=n[2],c=n[4],h=n[1],d=n[3],p=n[5],f=Math.sin(r),g=Math.cos(r);return a[0]=l*g+h*f,a[1]=-l*f+h*g,a[2]=u*g+d*f,a[3]=-u*f+g*d,a[4]=g*(c-o[0])+f*(p-o[1])+o[0],a[5]=g*(p-o[1])-f*(c-o[0])+o[1],a}function scale$1(a,n,r){var o=r[0],l=r[1];return a[0]=n[0]*o,a[1]=n[1]*l,a[2]=n[2]*o,a[3]=n[3]*l,a[4]=n[4]*o,a[5]=n[5]*l,a}function invert(a,n){var r=n[0],o=n[2],l=n[4],u=n[1],c=n[3],h=n[5],d=r*c-u*o;return d?(d=1/d,a[0]=c*d,a[1]=-u*d,a[2]=-o*d,a[3]=r*d,a[4]=(o*h-c*l)*d,a[5]=(u*l-r*h)*d,a):null}function clone$2(a){var n=create$1();return copy(n,a),n}const matrix=Object.freeze(Object.defineProperty({__proto__:null,create:create$1,identity,copy,mul,translate,rotate,scale:scale$1,invert,clone:clone$2},Symbol.toStringTag,{value:"Module"}));var Point=function(){function a(n,r){this.x=n||0,this.y=r||0}return a.prototype.copy=function(n){return this.x=n.x,this.y=n.y,this},a.prototype.clone=function(){return new a(this.x,this.y)},a.prototype.set=function(n,r){return this.x=n,this.y=r,this},a.prototype.equal=function(n){return n.x===this.x&&n.y===this.y},a.prototype.add=function(n){return this.x+=n.x,this.y+=n.y,this},a.prototype.scale=function(n){this.x*=n,this.y*=n},a.prototype.scaleAndAdd=function(n,r){this.x+=n.x*r,this.y+=n.y*r},a.prototype.sub=function(n){return this.x-=n.x,this.y-=n.y,this},a.prototype.dot=function(n){return this.x*n.x+this.y*n.y},a.prototype.len=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},a.prototype.lenSquare=function(){return this.x*this.x+this.y*this.y},a.prototype.normalize=function(){var n=this.len();return this.x/=n,this.y/=n,this},a.prototype.distance=function(n){var r=this.x-n.x,o=this.y-n.y;return Math.sqrt(r*r+o*o)},a.prototype.distanceSquare=function(n){var r=this.x-n.x,o=this.y-n.y;return r*r+o*o},a.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},a.prototype.transform=function(n){if(n){var r=this.x,o=this.y;return this.x=n[0]*r+n[2]*o+n[4],this.y=n[1]*r+n[3]*o+n[5],this}},a.prototype.toArray=function(n){return n[0]=this.x,n[1]=this.y,n},a.prototype.fromArray=function(n){this.x=n[0],this.y=n[1]},a.set=function(n,r,o){n.x=r,n.y=o},a.copy=function(n,r){n.x=r.x,n.y=r.y},a.len=function(n){return Math.sqrt(n.x*n.x+n.y*n.y)},a.lenSquare=function(n){return n.x*n.x+n.y*n.y},a.dot=function(n,r){return n.x*r.x+n.y*r.y},a.add=function(n,r,o){n.x=r.x+o.x,n.y=r.y+o.y},a.sub=function(n,r,o){n.x=r.x-o.x,n.y=r.y-o.y},a.scale=function(n,r,o){n.x=r.x*o,n.y=r.y*o},a.scaleAndAdd=function(n,r,o,l){n.x=r.x+o.x*l,n.y=r.y+o.y*l},a.lerp=function(n,r,o,l){var u=1-l;n.x=u*r.x+l*o.x,n.y=u*r.y+l*o.y},a}();const Point$1=Point;var mathMin$a=Math.min,mathMax$a=Math.max,lt=new Point$1,rb=new Point$1,lb=new Point$1,rt=new Point$1,minTv$1=new Point$1,maxTv$1=new Point$1,BoundingRect=function(){function a(n,r,o,l){o<0&&(n=n+o,o=-o),l<0&&(r=r+l,l=-l),this.x=n,this.y=r,this.width=o,this.height=l}return a.prototype.union=function(n){var r=mathMin$a(n.x,this.x),o=mathMin$a(n.y,this.y);isFinite(this.x)&&isFinite(this.width)?this.width=mathMax$a(n.x+n.width,this.x+this.width)-r:this.width=n.width,isFinite(this.y)&&isFinite(this.height)?this.height=mathMax$a(n.y+n.height,this.y+this.height)-o:this.height=n.height,this.x=r,this.y=o},a.prototype.applyTransform=function(n){a.applyTransform(this,this,n)},a.prototype.calculateTransform=function(n){var r=this,o=n.width/r.width,l=n.height/r.height,u=create$1();return translate(u,u,[-r.x,-r.y]),scale$1(u,u,[o,l]),translate(u,u,[n.x,n.y]),u},a.prototype.intersect=function(n,r){if(!n)return!1;n instanceof a||(n=a.create(n));var o=this,l=o.x,u=o.x+o.width,c=o.y,h=o.y+o.height,d=n.x,p=n.x+n.width,f=n.y,g=n.y+n.height,y=!(u<d||p<l||h<f||g<c);if(r){var v=1/0,_=0,x=Math.abs(u-d),S=Math.abs(p-l),T=Math.abs(h-f),M=Math.abs(g-c),b=Math.min(x,S),A=Math.min(T,M);u<d||p<l?b>_&&(_=b,x<S?Point$1.set(maxTv$1,-x,0):Point$1.set(maxTv$1,S,0)):b<v&&(v=b,x<S?Point$1.set(minTv$1,x,0):Point$1.set(minTv$1,-S,0)),h<f||g<c?A>_&&(_=A,T<M?Point$1.set(maxTv$1,0,-T):Point$1.set(maxTv$1,0,M)):b<v&&(v=b,T<M?Point$1.set(minTv$1,0,T):Point$1.set(minTv$1,0,-M))}return r&&Point$1.copy(r,y?minTv$1:maxTv$1),y},a.prototype.contain=function(n,r){var o=this;return n>=o.x&&n<=o.x+o.width&&r>=o.y&&r<=o.y+o.height},a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height)},a.prototype.copy=function(n){a.copy(this,n)},a.prototype.plain=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},a.prototype.isFinite=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},a.prototype.isZero=function(){return this.width===0||this.height===0},a.create=function(n){return new a(n.x,n.y,n.width,n.height)},a.copy=function(n,r){n.x=r.x,n.y=r.y,n.width=r.width,n.height=r.height},a.applyTransform=function(n,r,o){if(!o){n!==r&&a.copy(n,r);return}if(o[1]<1e-5&&o[1]>-1e-5&&o[2]<1e-5&&o[2]>-1e-5){var l=o[0],u=o[3],c=o[4],h=o[5];n.x=r.x*l+c,n.y=r.y*u+h,n.width=r.width*l,n.height=r.height*u,n.width<0&&(n.x+=n.width,n.width=-n.width),n.height<0&&(n.y+=n.height,n.height=-n.height);return}lt.x=lb.x=r.x,lt.y=rt.y=r.y,rb.x=rt.x=r.x+r.width,rb.y=lb.y=r.y+r.height,lt.transform(o),rt.transform(o),rb.transform(o),lb.transform(o),n.x=mathMin$a(lt.x,rb.x,lb.x,rt.x),n.y=mathMin$a(lt.y,rb.y,lb.y,rt.y);var d=mathMax$a(lt.x,rb.x,lb.x,rt.x),p=mathMax$a(lt.y,rb.y,lb.y,rt.y);n.width=d-n.x,n.height=p-n.y},a}();const BoundingRect$1=BoundingRect;var SILENT="silent";function makeEventPacket(a,n,r){return{type:a,event:r,target:n.target,topTarget:n.topTarget,cancelBubble:!1,offsetX:r.zrX,offsetY:r.zrY,gestureEvent:r.gestureEvent,pinchX:r.pinchX,pinchY:r.pinchY,pinchScale:r.pinchScale,wheelDelta:r.zrDelta,zrByTouch:r.zrByTouch,which:r.which,stop:stopEvent}}function stopEvent(){stop(this.event)}var EmptyProxy=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.handler=null,r}return n.prototype.dispose=function(){},n.prototype.setCursor=function(){},n}(Eventful$1),HoveredResult=function(){function a(n,r){this.x=n,this.y=r}return a}(),handlerNames=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],tmpRect$1=new BoundingRect$1(0,0,0,0),Handler=function(a){__extends(n,a);function n(r,o,l,u,c){var h=a.call(this)||this;return h._hovered=new HoveredResult(0,0),h.storage=r,h.painter=o,h.painterRoot=u,h._pointerSize=c,l=l||new EmptyProxy,h.proxy=null,h.setHandlerProxy(l),h._draggingMgr=new Draggable$1(h),h}return n.prototype.setHandlerProxy=function(r){this.proxy&&this.proxy.dispose(),r&&(each$f(handlerNames,function(o){r.on&&r.on(o,this[o],this)},this),r.handler=this),this.proxy=r},n.prototype.mousemove=function(r){var o=r.zrX,l=r.zrY,u=isOutsideBoundary(this,o,l),c=this._hovered,h=c.target;h&&!h.__zr&&(c=this.findHover(c.x,c.y),h=c.target);var d=this._hovered=u?new HoveredResult(o,l):this.findHover(o,l),p=d.target,f=this.proxy;f.setCursor&&f.setCursor(p?p.cursor:"default"),h&&p!==h&&this.dispatchToElement(c,"mouseout",r),this.dispatchToElement(d,"mousemove",r),p&&p!==h&&this.dispatchToElement(d,"mouseover",r)},n.prototype.mouseout=function(r){var o=r.zrEventControl;o!=="only_globalout"&&this.dispatchToElement(this._hovered,"mouseout",r),o!=="no_globalout"&&this.trigger("globalout",{type:"globalout",event:r})},n.prototype.resize=function(){this._hovered=new HoveredResult(0,0)},n.prototype.dispatch=function(r,o){var l=this[r];l&&l.call(this,o)},n.prototype.dispose=function(){this.proxy.dispose(),this.storage=null,this.proxy=null,this.painter=null},n.prototype.setCursorStyle=function(r){var o=this.proxy;o.setCursor&&o.setCursor(r)},n.prototype.dispatchToElement=function(r,o,l){r=r||{};var u=r.target;if(!(u&&u.silent)){for(var c="on"+o,h=makeEventPacket(o,r,l);u&&(u[c]&&(h.cancelBubble=!!u[c].call(u,h)),u.trigger(o,h),u=u.__hostTarget?u.__hostTarget:u.parent,!h.cancelBubble););h.cancelBubble||(this.trigger(o,h),this.painter&&this.painter.eachOtherLayer&&this.painter.eachOtherLayer(function(d){typeof d[c]=="function"&&d[c].call(d,h),d.trigger&&d.trigger(o,h)}))}},n.prototype.findHover=function(r,o,l){var u=this.storage.getDisplayList(),c=new HoveredResult(r,o);if(setHoverTarget(u,c,r,o,l),this._pointerSize&&!c.target){for(var h=[],d=this._pointerSize,p=d/2,f=new BoundingRect$1(r-p,o-p,d,d),g=u.length-1;g>=0;g--){var y=u[g];y!==l&&!y.ignore&&!y.ignoreCoarsePointer&&(!y.parent||!y.parent.ignoreCoarsePointer)&&(tmpRect$1.copy(y.getBoundingRect()),y.transform&&tmpRect$1.applyTransform(y.transform),tmpRect$1.intersect(f)&&h.push(y))}if(h.length)for(var v=4,_=Math.PI/12,x=Math.PI*2,S=0;S<p;S+=v)for(var T=0;T<x;T+=_){var M=r+S*Math.cos(T),b=o+S*Math.sin(T);if(setHoverTarget(h,c,M,b,l),c.target)return c}}return c},n.prototype.processGesture=function(r,o){this._gestureMgr||(this._gestureMgr=new GestureMgr);var l=this._gestureMgr;o==="start"&&l.clear();var u=l.recognize(r,this.findHover(r.zrX,r.zrY,null).target,this.proxy.dom);if(o==="end"&&l.clear(),u){var c=u.type;r.gestureEvent=c;var h=new HoveredResult;h.target=u.target,this.dispatchToElement(h,c,u.event)}},n}(Eventful$1);each$f(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(a){Handler.prototype[a]=function(n){var r=n.zrX,o=n.zrY,l=isOutsideBoundary(this,r,o),u,c;if((a!=="mouseup"||!l)&&(u=this.findHover(r,o),c=u.target),a==="mousedown")this._downEl=c,this._downPoint=[n.zrX,n.zrY],this._upEl=c;else if(a==="mouseup")this._upEl=c;else if(a==="click"){if(this._downEl!==this._upEl||!this._downPoint||dist$1(this._downPoint,[n.zrX,n.zrY])>4)return;this._downPoint=null}this.dispatchToElement(u,a,n)}});function isHover(a,n,r){if(a[a.rectHover?"rectContain":"contain"](n,r)){for(var o=a,l=void 0,u=!1;o;){if(o.ignoreClip&&(u=!0),!u){var c=o.getClipPath();if(c&&!c.contain(n,r))return!1}o.silent&&(l=!0);var h=o.__hostTarget;o=h||o.parent}return l?SILENT:!0}return!1}function setHoverTarget(a,n,r,o,l){for(var u=a.length-1;u>=0;u--){var c=a[u],h=void 0;if(c!==l&&!c.ignore&&(h=isHover(c,r,o))&&(!n.topTarget&&(n.topTarget=c),h!==SILENT)){n.target=c;break}}}function isOutsideBoundary(a,n,r){var o=a.painter;return n<0||n>o.getWidth()||r<0||r>o.getHeight()}const Handler$1=Handler;var DEFAULT_MIN_MERGE=32,DEFAULT_MIN_GALLOPING=7;function minRunLength(a){for(var n=0;a>=DEFAULT_MIN_MERGE;)n|=a&1,a>>=1;return a+n}function makeAscendingRun(a,n,r,o){var l=n+1;if(l===r)return 1;if(o(a[l++],a[n])<0){for(;l<r&&o(a[l],a[l-1])<0;)l++;reverseRun(a,n,l)}else for(;l<r&&o(a[l],a[l-1])>=0;)l++;return l-n}function reverseRun(a,n,r){for(r--;n<r;){var o=a[n];a[n++]=a[r],a[r--]=o}}function binaryInsertionSort(a,n,r,o,l){for(o===n&&o++;o<r;o++){for(var u=a[o],c=n,h=o,d;c<h;)d=c+h>>>1,l(u,a[d])<0?h=d:c=d+1;var p=o-c;switch(p){case 3:a[c+3]=a[c+2];case 2:a[c+2]=a[c+1];case 1:a[c+1]=a[c];break;default:for(;p>0;)a[c+p]=a[c+p-1],p--}a[c]=u}}function gallopLeft(a,n,r,o,l,u){var c=0,h=0,d=1;if(u(a,n[r+l])>0){for(h=o-l;d<h&&u(a,n[r+l+d])>0;)c=d,d=(d<<1)+1,d<=0&&(d=h);d>h&&(d=h),c+=l,d+=l}else{for(h=l+1;d<h&&u(a,n[r+l-d])<=0;)c=d,d=(d<<1)+1,d<=0&&(d=h);d>h&&(d=h);var p=c;c=l-d,d=l-p}for(c++;c<d;){var f=c+(d-c>>>1);u(a,n[r+f])>0?c=f+1:d=f}return d}function gallopRight(a,n,r,o,l,u){var c=0,h=0,d=1;if(u(a,n[r+l])<0){for(h=l+1;d<h&&u(a,n[r+l-d])<0;)c=d,d=(d<<1)+1,d<=0&&(d=h);d>h&&(d=h);var p=c;c=l-d,d=l-p}else{for(h=o-l;d<h&&u(a,n[r+l+d])>=0;)c=d,d=(d<<1)+1,d<=0&&(d=h);d>h&&(d=h),c+=l,d+=l}for(c++;c<d;){var f=c+(d-c>>>1);u(a,n[r+f])<0?d=f:c=f+1}return d}function TimSort(a,n){var r=DEFAULT_MIN_GALLOPING,o,l,u=0,c=[];o=[],l=[];function h(v,_){o[u]=v,l[u]=_,u+=1}function d(){for(;u>1;){var v=u-2;if(v>=1&&l[v-1]<=l[v]+l[v+1]||v>=2&&l[v-2]<=l[v]+l[v-1])l[v-1]<l[v+1]&&v--;else if(l[v]>l[v+1])break;f(v)}}function p(){for(;u>1;){var v=u-2;v>0&&l[v-1]<l[v+1]&&v--,f(v)}}function f(v){var _=o[v],x=l[v],S=o[v+1],T=l[v+1];l[v]=x+T,v===u-3&&(o[v+1]=o[v+2],l[v+1]=l[v+2]),u--;var M=gallopRight(a[S],a,_,x,0,n);_+=M,x-=M,x!==0&&(T=gallopLeft(a[_+x-1],a,S,T,T-1,n),T!==0&&(x<=T?g(_,x,S,T):y(_,x,S,T)))}function g(v,_,x,S){var T=0;for(T=0;T<_;T++)c[T]=a[v+T];var M=0,b=x,A=v;if(a[A++]=a[b++],--S===0){for(T=0;T<_;T++)a[A+T]=c[M+T];return}if(_===1){for(T=0;T<S;T++)a[A+T]=a[b+T];a[A+S]=c[M];return}for(var I=r,w,C,E;;){w=0,C=0,E=!1;do if(n(a[b],c[M])<0){if(a[A++]=a[b++],C++,w=0,--S===0){E=!0;break}}else if(a[A++]=c[M++],w++,C=0,--_===1){E=!0;break}while((w|C)<I);if(E)break;do{if(w=gallopRight(a[b],c,M,_,0,n),w!==0){for(T=0;T<w;T++)a[A+T]=c[M+T];if(A+=w,M+=w,_-=w,_<=1){E=!0;break}}if(a[A++]=a[b++],--S===0){E=!0;break}if(C=gallopLeft(c[M],a,b,S,0,n),C!==0){for(T=0;T<C;T++)a[A+T]=a[b+T];if(A+=C,b+=C,S-=C,S===0){E=!0;break}}if(a[A++]=c[M++],--_===1){E=!0;break}I--}while(w>=DEFAULT_MIN_GALLOPING||C>=DEFAULT_MIN_GALLOPING);if(E)break;I<0&&(I=0),I+=2}if(r=I,r<1&&(r=1),_===1){for(T=0;T<S;T++)a[A+T]=a[b+T];a[A+S]=c[M]}else{if(_===0)throw new Error;for(T=0;T<_;T++)a[A+T]=c[M+T]}}function y(v,_,x,S){var T=0;for(T=0;T<S;T++)c[T]=a[x+T];var M=v+_-1,b=S-1,A=x+S-1,I=0,w=0;if(a[A--]=a[M--],--_===0){for(I=A-(S-1),T=0;T<S;T++)a[I+T]=c[T];return}if(S===1){for(A-=_,M-=_,w=A+1,I=M+1,T=_-1;T>=0;T--)a[w+T]=a[I+T];a[A]=c[b];return}for(var C=r;;){var E=0,P=0,D=!1;do if(n(c[b],a[M])<0){if(a[A--]=a[M--],E++,P=0,--_===0){D=!0;break}}else if(a[A--]=c[b--],P++,E=0,--S===1){D=!0;break}while((E|P)<C);if(D)break;do{if(E=_-gallopRight(c[b],a,v,_,_-1,n),E!==0){for(A-=E,M-=E,_-=E,w=A+1,I=M+1,T=E-1;T>=0;T--)a[w+T]=a[I+T];if(_===0){D=!0;break}}if(a[A--]=c[b--],--S===1){D=!0;break}if(P=S-gallopLeft(a[M],c,0,S,S-1,n),P!==0){for(A-=P,b-=P,S-=P,w=A+1,I=b+1,T=0;T<P;T++)a[w+T]=c[I+T];if(S<=1){D=!0;break}}if(a[A--]=a[M--],--_===0){D=!0;break}C--}while(E>=DEFAULT_MIN_GALLOPING||P>=DEFAULT_MIN_GALLOPING);if(D)break;C<0&&(C=0),C+=2}if(r=C,r<1&&(r=1),S===1){for(A-=_,M-=_,w=A+1,I=M+1,T=_-1;T>=0;T--)a[w+T]=a[I+T];a[A]=c[b]}else{if(S===0)throw new Error;for(I=A-(S-1),T=0;T<S;T++)a[I+T]=c[T]}}return{mergeRuns:d,forceMergeRuns:p,pushRun:h}}function sort$2(a,n,r,o){r||(r=0),o||(o=a.length);var l=o-r;if(!(l<2)){var u=0;if(l<DEFAULT_MIN_MERGE){u=makeAscendingRun(a,r,o,n),binaryInsertionSort(a,r,o,r+u,n);return}var c=TimSort(a,n),h=minRunLength(l);do{if(u=makeAscendingRun(a,r,o,n),u<h){var d=l;d>h&&(d=h),binaryInsertionSort(a,r,r+d,r+u,n),u=d}c.pushRun(r,u),c.mergeRuns(),l-=u,r+=u}while(l!==0);c.forceMergeRuns()}}var REDRAW_BIT=1,STYLE_CHANGED_BIT=2,SHAPE_CHANGED_BIT=4,invalidZErrorLogged=!1;function logInvalidZError(){invalidZErrorLogged||(invalidZErrorLogged=!0,console.warn("z / z2 / zlevel of displayable is invalid, which may cause unexpected errors"))}function shapeCompareFunc(a,n){return a.zlevel===n.zlevel?a.z===n.z?a.z2-n.z2:a.z-n.z:a.zlevel-n.zlevel}var Storage=function(){function a(){this._roots=[],this._displayList=[],this._displayListLen=0,this.displayableSortFunc=shapeCompareFunc}return a.prototype.traverse=function(n,r){for(var o=0;o<this._roots.length;o++)this._roots[o].traverse(n,r)},a.prototype.getDisplayList=function(n,r){r=r||!1;var o=this._displayList;return(n||!o.length)&&this.updateDisplayList(r),o},a.prototype.updateDisplayList=function(n){this._displayListLen=0;for(var r=this._roots,o=this._displayList,l=0,u=r.length;l<u;l++)this._updateAndAddDisplayable(r[l],null,n);o.length=this._displayListLen,sort$2(o,shapeCompareFunc)},a.prototype._updateAndAddDisplayable=function(n,r,o){if(!(n.ignore&&!o)){n.beforeUpdate(),n.update(),n.afterUpdate();var l=n.getClipPath();if(n.ignoreClip)r=null;else if(l){r?r=r.slice():r=[];for(var u=l,c=n;u;)u.parent=c,u.updateTransform(),r.push(u),c=u,u=u.getClipPath()}if(n.childrenRef){for(var h=n.childrenRef(),d=0;d<h.length;d++){var p=h[d];n.__dirty&&(p.__dirty|=REDRAW_BIT),this._updateAndAddDisplayable(p,r,o)}n.__dirty=0}else{var f=n;r&&r.length?f.__clipPaths=r:f.__clipPaths&&f.__clipPaths.length>0&&(f.__clipPaths=[]),isNaN(f.z)&&(logInvalidZError(),f.z=0),isNaN(f.z2)&&(logInvalidZError(),f.z2=0),isNaN(f.zlevel)&&(logInvalidZError(),f.zlevel=0),this._displayList[this._displayListLen++]=f}var g=n.getDecalElement&&n.getDecalElement();g&&this._updateAndAddDisplayable(g,r,o);var y=n.getTextGuideLine();y&&this._updateAndAddDisplayable(y,r,o);var v=n.getTextContent();v&&this._updateAndAddDisplayable(v,r,o)}},a.prototype.addRoot=function(n){n.__zr&&n.__zr.storage===this||this._roots.push(n)},a.prototype.delRoot=function(n){if(n instanceof Array){for(var r=0,o=n.length;r<o;r++)this.delRoot(n[r]);return}var l=indexOf(this._roots,n);l>=0&&this._roots.splice(l,1)},a.prototype.delAllRoots=function(){this._roots=[],this._displayList=[],this._displayListLen=0},a.prototype.getRoots=function(){return this._roots},a.prototype.dispose=function(){this._displayList=null,this._roots=null},a}();const Storage$1=Storage;var requestAnimationFrame;requestAnimationFrame=env$1.hasGlobalWindow&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(a){return setTimeout(a,16)};const requestAnimationFrame$1=requestAnimationFrame;var easingFuncs={linear:function(a){return a},quadraticIn:function(a){return a*a},quadraticOut:function(a){return a*(2-a)},quadraticInOut:function(a){return(a*=2)<1?.5*a*a:-.5*(--a*(a-2)-1)},cubicIn:function(a){return a*a*a},cubicOut:function(a){return--a*a*a+1},cubicInOut:function(a){return(a*=2)<1?.5*a*a*a:.5*((a-=2)*a*a+2)},quarticIn:function(a){return a*a*a*a},quarticOut:function(a){return 1- --a*a*a*a},quarticInOut:function(a){return(a*=2)<1?.5*a*a*a*a:-.5*((a-=2)*a*a*a-2)},quinticIn:function(a){return a*a*a*a*a},quinticOut:function(a){return--a*a*a*a*a+1},quinticInOut:function(a){return(a*=2)<1?.5*a*a*a*a*a:.5*((a-=2)*a*a*a*a+2)},sinusoidalIn:function(a){return 1-Math.cos(a*Math.PI/2)},sinusoidalOut:function(a){return Math.sin(a*Math.PI/2)},sinusoidalInOut:function(a){return .5*(1-Math.cos(Math.PI*a))},exponentialIn:function(a){return a===0?0:Math.pow(1024,a-1)},exponentialOut:function(a){return a===1?1:1-Math.pow(2,-10*a)},exponentialInOut:function(a){return a===0?0:a===1?1:(a*=2)<1?.5*Math.pow(1024,a-1):.5*(-Math.pow(2,-10*(a-1))+2)},circularIn:function(a){return 1-Math.sqrt(1-a*a)},circularOut:function(a){return Math.sqrt(1- --a*a)},circularInOut:function(a){return(a*=2)<1?-.5*(Math.sqrt(1-a*a)-1):.5*(Math.sqrt(1-(a-=2)*a)+1)},elasticIn:function(a){var n,r=.1,o=.4;return a===0?0:a===1?1:(!r||r<1?(r=1,n=o/4):n=o*Math.asin(1/r)/(2*Math.PI),-(r*Math.pow(2,10*(a-=1))*Math.sin((a-n)*(2*Math.PI)/o)))},elasticOut:function(a){var n,r=.1,o=.4;return a===0?0:a===1?1:(!r||r<1?(r=1,n=o/4):n=o*Math.asin(1/r)/(2*Math.PI),r*Math.pow(2,-10*a)*Math.sin((a-n)*(2*Math.PI)/o)+1)},elasticInOut:function(a){var n,r=.1,o=.4;return a===0?0:a===1?1:(!r||r<1?(r=1,n=o/4):n=o*Math.asin(1/r)/(2*Math.PI),(a*=2)<1?-.5*(r*Math.pow(2,10*(a-=1))*Math.sin((a-n)*(2*Math.PI)/o)):r*Math.pow(2,-10*(a-=1))*Math.sin((a-n)*(2*Math.PI)/o)*.5+1)},backIn:function(a){var n=1.70158;return a*a*((n+1)*a-n)},backOut:function(a){var n=1.70158;return--a*a*((n+1)*a+n)+1},backInOut:function(a){var n=2.5949095;return(a*=2)<1?.5*(a*a*((n+1)*a-n)):.5*((a-=2)*a*((n+1)*a+n)+2)},bounceIn:function(a){return 1-easingFuncs.bounceOut(1-a)},bounceOut:function(a){return a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375},bounceInOut:function(a){return a<.5?easingFuncs.bounceIn(a*2)*.5:easingFuncs.bounceOut(a*2-1)*.5+.5}};const easingFuncs$1=easingFuncs;var mathPow$2=Math.pow,mathSqrt$3=Math.sqrt,EPSILON$4=1e-8,EPSILON_NUMERIC=1e-4,THREE_SQRT=mathSqrt$3(3),ONE_THIRD=1/3,_v0=create$2(),_v1=create$2(),_v2=create$2();function isAroundZero$1(a){return a>-EPSILON$4&&a<EPSILON$4}function isNotAroundZero$1(a){return a>EPSILON$4||a<-EPSILON$4}function cubicAt(a,n,r,o,l){var u=1-l;return u*u*(u*a+3*l*n)+l*l*(l*o+3*u*r)}function cubicDerivativeAt(a,n,r,o,l){var u=1-l;return 3*(((n-a)*u+2*(r-n)*l)*u+(o-r)*l*l)}function cubicRootAt(a,n,r,o,l,u){var c=o+3*(n-r)-a,h=3*(r-n*2+a),d=3*(n-a),p=a-l,f=h*h-3*c*d,g=h*d-9*c*p,y=d*d-3*h*p,v=0;if(isAroundZero$1(f)&&isAroundZero$1(g))if(isAroundZero$1(h))u[0]=0;else{var _=-d/h;_>=0&&_<=1&&(u[v++]=_)}else{var x=g*g-4*f*y;if(isAroundZero$1(x)){var S=g/f,_=-h/c+S,T=-S/2;_>=0&&_<=1&&(u[v++]=_),T>=0&&T<=1&&(u[v++]=T)}else if(x>0){var M=mathSqrt$3(x),b=f*h+1.5*c*(-g+M),A=f*h+1.5*c*(-g-M);b<0?b=-mathPow$2(-b,ONE_THIRD):b=mathPow$2(b,ONE_THIRD),A<0?A=-mathPow$2(-A,ONE_THIRD):A=mathPow$2(A,ONE_THIRD);var _=(-h-(b+A))/(3*c);_>=0&&_<=1&&(u[v++]=_)}else{var I=(2*f*h-3*c*g)/(2*mathSqrt$3(f*f*f)),w=Math.acos(I)/3,C=mathSqrt$3(f),E=Math.cos(w),_=(-h-2*C*E)/(3*c),T=(-h+C*(E+THREE_SQRT*Math.sin(w)))/(3*c),P=(-h+C*(E-THREE_SQRT*Math.sin(w)))/(3*c);_>=0&&_<=1&&(u[v++]=_),T>=0&&T<=1&&(u[v++]=T),P>=0&&P<=1&&(u[v++]=P)}}return v}function cubicExtrema(a,n,r,o,l){var u=6*r-12*n+6*a,c=9*n+3*o-3*a-9*r,h=3*n-3*a,d=0;if(isAroundZero$1(c)){if(isNotAroundZero$1(u)){var p=-h/u;p>=0&&p<=1&&(l[d++]=p)}}else{var f=u*u-4*c*h;if(isAroundZero$1(f))l[0]=-u/(2*c);else if(f>0){var g=mathSqrt$3(f),p=(-u+g)/(2*c),y=(-u-g)/(2*c);p>=0&&p<=1&&(l[d++]=p),y>=0&&y<=1&&(l[d++]=y)}}return d}function cubicSubdivide(a,n,r,o,l,u){var c=(n-a)*l+a,h=(r-n)*l+n,d=(o-r)*l+r,p=(h-c)*l+c,f=(d-h)*l+h,g=(f-p)*l+p;u[0]=a,u[1]=c,u[2]=p,u[3]=g,u[4]=g,u[5]=f,u[6]=d,u[7]=o}function cubicProjectPoint(a,n,r,o,l,u,c,h,d,p,f){var g,y=.005,v=1/0,_,x,S,T;_v0[0]=d,_v0[1]=p;for(var M=0;M<1;M+=.05)_v1[0]=cubicAt(a,r,l,c,M),_v1[1]=cubicAt(n,o,u,h,M),S=distSquare(_v0,_v1),S<v&&(g=M,v=S);v=1/0;for(var b=0;b<32&&!(y<EPSILON_NUMERIC);b++)_=g-y,x=g+y,_v1[0]=cubicAt(a,r,l,c,_),_v1[1]=cubicAt(n,o,u,h,_),S=distSquare(_v1,_v0),_>=0&&S<v?(g=_,v=S):(_v2[0]=cubicAt(a,r,l,c,x),_v2[1]=cubicAt(n,o,u,h,x),T=distSquare(_v2,_v0),x<=1&&T<v?(g=x,v=T):y*=.5);return f&&(f[0]=cubicAt(a,r,l,c,g),f[1]=cubicAt(n,o,u,h,g)),mathSqrt$3(v)}function cubicLength(a,n,r,o,l,u,c,h,d){for(var p=a,f=n,g=0,y=1/d,v=1;v<=d;v++){var _=v*y,x=cubicAt(a,r,l,c,_),S=cubicAt(n,o,u,h,_),T=x-p,M=S-f;g+=Math.sqrt(T*T+M*M),p=x,f=S}return g}function quadraticAt$1(a,n,r,o){var l=1-o;return l*(l*a+2*o*n)+o*o*r}function quadraticDerivativeAt(a,n,r,o){return 2*((1-o)*(n-a)+o*(r-n))}function quadraticRootAt(a,n,r,o,l){var u=a-2*n+r,c=2*(n-a),h=a-o,d=0;if(isAroundZero$1(u)){if(isNotAroundZero$1(c)){var p=-h/c;p>=0&&p<=1&&(l[d++]=p)}}else{var f=c*c-4*u*h;if(isAroundZero$1(f)){var p=-c/(2*u);p>=0&&p<=1&&(l[d++]=p)}else if(f>0){var g=mathSqrt$3(f),p=(-c+g)/(2*u),y=(-c-g)/(2*u);p>=0&&p<=1&&(l[d++]=p),y>=0&&y<=1&&(l[d++]=y)}}return d}function quadraticExtremum(a,n,r){var o=a+r-2*n;return o===0?.5:(a-n)/o}function quadraticSubdivide(a,n,r,o,l){var u=(n-a)*o+a,c=(r-n)*o+n,h=(c-u)*o+u;l[0]=a,l[1]=u,l[2]=h,l[3]=h,l[4]=c,l[5]=r}function quadraticProjectPoint(a,n,r,o,l,u,c,h,d){var p,f=.005,g=1/0;_v0[0]=c,_v0[1]=h;for(var y=0;y<1;y+=.05){_v1[0]=quadraticAt$1(a,r,l,y),_v1[1]=quadraticAt$1(n,o,u,y);var v=distSquare(_v0,_v1);v<g&&(p=y,g=v)}g=1/0;for(var _=0;_<32&&!(f<EPSILON_NUMERIC);_++){var x=p-f,S=p+f;_v1[0]=quadraticAt$1(a,r,l,x),_v1[1]=quadraticAt$1(n,o,u,x);var v=distSquare(_v1,_v0);if(x>=0&&v<g)p=x,g=v;else{_v2[0]=quadraticAt$1(a,r,l,S),_v2[1]=quadraticAt$1(n,o,u,S);var T=distSquare(_v2,_v0);S<=1&&T<g?(p=S,g=T):f*=.5}}return d&&(d[0]=quadraticAt$1(a,r,l,p),d[1]=quadraticAt$1(n,o,u,p)),mathSqrt$3(g)}function quadraticLength(a,n,r,o,l,u,c){for(var h=a,d=n,p=0,f=1/c,g=1;g<=c;g++){var y=g*f,v=quadraticAt$1(a,r,l,y),_=quadraticAt$1(n,o,u,y),x=v-h,S=_-d;p+=Math.sqrt(x*x+S*S),h=v,d=_}return p}var regexp=/cubic-bezier\(([0-9,\.e ]+)\)/;function createCubicEasingFunc(a){var n=a&&regexp.exec(a);if(n){var r=n[1].split(","),o=+trim$1(r[0]),l=+trim$1(r[1]),u=+trim$1(r[2]),c=+trim$1(r[3]);if(isNaN(o+l+u+c))return;var h=[];return function(d){return d<=0?0:d>=1?1:cubicRootAt(0,o,u,1,d,h)&&cubicAt(0,l,c,1,h[0])}}}var Clip=function(){function a(n){this._inited=!1,this._startTime=0,this._pausedTime=0,this._paused=!1,this._life=n.life||1e3,this._delay=n.delay||0,this.loop=n.loop||!1,this.onframe=n.onframe||noop,this.ondestroy=n.ondestroy||noop,this.onrestart=n.onrestart||noop,n.easing&&this.setEasing(n.easing)}return a.prototype.step=function(n,r){if(this._inited||(this._startTime=n+this._delay,this._inited=!0),this._paused){this._pausedTime+=r;return}var o=this._life,l=n-this._startTime-this._pausedTime,u=l/o;u<0&&(u=0),u=Math.min(u,1);var c=this.easingFunc,h=c?c(u):u;if(this.onframe(h),u===1)if(this.loop){var d=l%o;this._startTime=n-d,this._pausedTime=0,this.onrestart()}else return!0;return!1},a.prototype.pause=function(){this._paused=!0},a.prototype.resume=function(){this._paused=!1},a.prototype.setEasing=function(n){this.easing=n,this.easingFunc=isFunction(n)?n:easingFuncs$1[n]||createCubicEasingFunc(n)},a}();const Clip$1=Clip;var Entry=function(){function a(n){this.value=n}return a}(),LinkedList=function(){function a(){this._len=0}return a.prototype.insert=function(n){var r=new Entry(n);return this.insertEntry(r),r},a.prototype.insertEntry=function(n){this.head?(this.tail.next=n,n.prev=this.tail,n.next=null,this.tail=n):this.head=this.tail=n,this._len++},a.prototype.remove=function(n){var r=n.prev,o=n.next;r?r.next=o:this.head=o,o?o.prev=r:this.tail=r,n.next=n.prev=null,this._len--},a.prototype.len=function(){return this._len},a.prototype.clear=function(){this.head=this.tail=null,this._len=0},a}(),LRU=function(){function a(n){this._list=new LinkedList,this._maxSize=10,this._map={},this._maxSize=n}return a.prototype.put=function(n,r){var o=this._list,l=this._map,u=null;if(l[n]==null){var c=o.len(),h=this._lastRemovedEntry;if(c>=this._maxSize&&c>0){var d=o.head;o.remove(d),delete l[d.key],u=d.value,this._lastRemovedEntry=d}h?h.value=r:h=new Entry(r),h.key=n,o.insertEntry(h),l[n]=h}return u},a.prototype.get=function(n){var r=this._map[n],o=this._list;if(r!=null)return r!==o.tail&&(o.remove(r),o.insertEntry(r)),r.value},a.prototype.clear=function(){this._list.clear(),this._map={}},a.prototype.len=function(){return this._list.len()},a}();const LRU$1=LRU;var kCSSColorTable={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function clampCssByte(a){return a=Math.round(a),a<0?0:a>255?255:a}function clampCssAngle(a){return a=Math.round(a),a<0?0:a>360?360:a}function clampCssFloat(a){return a<0?0:a>1?1:a}function parseCssInt(a){var n=a;return n.length&&n.charAt(n.length-1)==="%"?clampCssByte(parseFloat(n)/100*255):clampCssByte(parseInt(n,10))}function parseCssFloat(a){var n=a;return n.length&&n.charAt(n.length-1)==="%"?clampCssFloat(parseFloat(n)/100):clampCssFloat(parseFloat(n))}function cssHueToRgb(a,n,r){return r<0?r+=1:r>1&&(r-=1),r*6<1?a+(n-a)*r*6:r*2<1?n:r*3<2?a+(n-a)*(2/3-r)*6:a}function lerpNumber(a,n,r){return a+(n-a)*r}function setRgba(a,n,r,o,l){return a[0]=n,a[1]=r,a[2]=o,a[3]=l,a}function copyRgba(a,n){return a[0]=n[0],a[1]=n[1],a[2]=n[2],a[3]=n[3],a}var colorCache=new LRU$1(20),lastRemovedArr=null;function putToCache(a,n){lastRemovedArr&&copyRgba(lastRemovedArr,n),lastRemovedArr=colorCache.put(a,lastRemovedArr||n.slice())}function parse(a,n){if(a){n=n||[];var r=colorCache.get(a);if(r)return copyRgba(n,r);a=a+"";var o=a.replace(/ /g,"").toLowerCase();if(o in kCSSColorTable)return copyRgba(n,kCSSColorTable[o]),putToCache(a,n),n;var l=o.length;if(o.charAt(0)==="#"){if(l===4||l===5){var u=parseInt(o.slice(1,4),16);if(!(u>=0&&u<=4095)){setRgba(n,0,0,0,1);return}return setRgba(n,(u&3840)>>4|(u&3840)>>8,u&240|(u&240)>>4,u&15|(u&15)<<4,l===5?parseInt(o.slice(4),16)/15:1),putToCache(a,n),n}else if(l===7||l===9){var u=parseInt(o.slice(1,7),16);if(!(u>=0&&u<=16777215)){setRgba(n,0,0,0,1);return}return setRgba(n,(u&16711680)>>16,(u&65280)>>8,u&255,l===9?parseInt(o.slice(7),16)/255:1),putToCache(a,n),n}return}var c=o.indexOf("("),h=o.indexOf(")");if(c!==-1&&h+1===l){var d=o.substr(0,c),p=o.substr(c+1,h-(c+1)).split(","),f=1;switch(d){case"rgba":if(p.length!==4)return p.length===3?setRgba(n,+p[0],+p[1],+p[2],1):setRgba(n,0,0,0,1);f=parseCssFloat(p.pop());case"rgb":if(p.length>=3)return setRgba(n,parseCssInt(p[0]),parseCssInt(p[1]),parseCssInt(p[2]),p.length===3?f:parseCssFloat(p[3])),putToCache(a,n),n;setRgba(n,0,0,0,1);return;case"hsla":if(p.length!==4){setRgba(n,0,0,0,1);return}return p[3]=parseCssFloat(p[3]),hsla2rgba(p,n),putToCache(a,n),n;case"hsl":if(p.length!==3){setRgba(n,0,0,0,1);return}return hsla2rgba(p,n),putToCache(a,n),n;default:return}}setRgba(n,0,0,0,1)}}function hsla2rgba(a,n){var r=(parseFloat(a[0])%360+360)%360/360,o=parseCssFloat(a[1]),l=parseCssFloat(a[2]),u=l<=.5?l*(o+1):l+o-l*o,c=l*2-u;return n=n||[],setRgba(n,clampCssByte(cssHueToRgb(c,u,r+1/3)*255),clampCssByte(cssHueToRgb(c,u,r)*255),clampCssByte(cssHueToRgb(c,u,r-1/3)*255),1),a.length===4&&(n[3]=a[3]),n}function rgba2hsla(a){if(a){var n=a[0]/255,r=a[1]/255,o=a[2]/255,l=Math.min(n,r,o),u=Math.max(n,r,o),c=u-l,h=(u+l)/2,d,p;if(c===0)d=0,p=0;else{h<.5?p=c/(u+l):p=c/(2-u-l);var f=((u-n)/6+c/2)/c,g=((u-r)/6+c/2)/c,y=((u-o)/6+c/2)/c;n===u?d=y-g:r===u?d=1/3+f-y:o===u&&(d=2/3+g-f),d<0&&(d+=1),d>1&&(d-=1)}var v=[d*360,p,h];return a[3]!=null&&v.push(a[3]),v}}function lift(a,n){var r=parse(a);if(r){for(var o=0;o<3;o++)n<0?r[o]=r[o]*(1-n)|0:r[o]=(255-r[o])*n+r[o]|0,r[o]>255?r[o]=255:r[o]<0&&(r[o]=0);return stringify(r,r.length===4?"rgba":"rgb")}}function toHex(a){var n=parse(a);if(n)return((1<<24)+(n[0]<<16)+(n[1]<<8)+ +n[2]).toString(16).slice(1)}function fastLerp(a,n,r){if(!(!(n&&n.length)||!(a>=0&&a<=1))){r=r||[];var o=a*(n.length-1),l=Math.floor(o),u=Math.ceil(o),c=n[l],h=n[u],d=o-l;return r[0]=clampCssByte(lerpNumber(c[0],h[0],d)),r[1]=clampCssByte(lerpNumber(c[1],h[1],d)),r[2]=clampCssByte(lerpNumber(c[2],h[2],d)),r[3]=clampCssFloat(lerpNumber(c[3],h[3],d)),r}}var fastMapToColor=fastLerp;function lerp(a,n,r){if(!(!(n&&n.length)||!(a>=0&&a<=1))){var o=a*(n.length-1),l=Math.floor(o),u=Math.ceil(o),c=parse(n[l]),h=parse(n[u]),d=o-l,p=stringify([clampCssByte(lerpNumber(c[0],h[0],d)),clampCssByte(lerpNumber(c[1],h[1],d)),clampCssByte(lerpNumber(c[2],h[2],d)),clampCssFloat(lerpNumber(c[3],h[3],d))],"rgba");return r?{color:p,leftIndex:l,rightIndex:u,value:o}:p}}var mapToColor=lerp;function modifyHSL(a,n,r,o){var l=parse(a);if(a)return l=rgba2hsla(l),n!=null&&(l[0]=clampCssAngle(n)),r!=null&&(l[1]=parseCssFloat(r)),o!=null&&(l[2]=parseCssFloat(o)),stringify(hsla2rgba(l),"rgba")}function modifyAlpha(a,n){var r=parse(a);if(r&&n!=null)return r[3]=clampCssFloat(n),stringify(r,"rgba")}function stringify(a,n){if(!(!a||!a.length)){var r=a[0]+","+a[1]+","+a[2];return(n==="rgba"||n==="hsva"||n==="hsla")&&(r+=","+a[3]),n+"("+r+")"}}function lum(a,n){var r=parse(a);return r?(.299*r[0]+.587*r[1]+.114*r[2])*r[3]/255+(1-r[3])*n:0}function random(){return stringify([Math.round(Math.random()*255),Math.round(Math.random()*255),Math.round(Math.random()*255)],"rgb")}var liftedColorCache=new LRU$1(100);function liftColor(a){if(isString(a)){var n=liftedColorCache.get(a);return n||(n=lift(a,-.1),liftedColorCache.put(a,n)),n}else if(isGradientObject(a)){var r=extend({},a);return r.colorStops=map$1(a.colorStops,function(o){return{offset:o.offset,color:lift(o.color,-.1)}}),r}return a}const color=Object.freeze(Object.defineProperty({__proto__:null,parse,lift,toHex,fastLerp,fastMapToColor,lerp,mapToColor,modifyHSL,modifyAlpha,stringify,lum,random,liftColor},Symbol.toStringTag,{value:"Module"}));var mathRound$1=Math.round;function normalizeColor(a){var n;if(!a||a==="transparent")a="none";else if(typeof a=="string"&&a.indexOf("rgba")>-1){var r=parse(a);r&&(a="rgb("+r[0]+","+r[1]+","+r[2]+")",n=r[3])}return{color:a,opacity:n==null?1:n}}var EPSILON$3=1e-4;function isAroundZero(a){return a<EPSILON$3&&a>-EPSILON$3}function round3(a){return mathRound$1(a*1e3)/1e3}function round4(a){return mathRound$1(a*1e4)/1e4}function getMatrixStr(a){return"matrix("+round3(a[0])+","+round3(a[1])+","+round3(a[2])+","+round3(a[3])+","+round4(a[4])+","+round4(a[5])+")"}var TEXT_ALIGN_TO_ANCHOR={left:"start",right:"end",center:"middle",middle:"middle"};function adjustTextY$1(a,n,r){return r==="top"?a+=n/2:r==="bottom"&&(a-=n/2),a}function hasShadow(a){return a&&(a.shadowBlur||a.shadowOffsetX||a.shadowOffsetY)}function getShadowKey(a){var n=a.style,r=a.getGlobalScale();return[n.shadowColor,(n.shadowBlur||0).toFixed(2),(n.shadowOffsetX||0).toFixed(2),(n.shadowOffsetY||0).toFixed(2),r[0],r[1]].join(",")}function isImagePattern(a){return a&&!!a.image}function isSVGPattern(a){return a&&!!a.svgElement}function isPattern(a){return isImagePattern(a)||isSVGPattern(a)}function isLinearGradient(a){return a.type==="linear"}function isRadialGradient(a){return a.type==="radial"}function isGradient(a){return a&&(a.type==="linear"||a.type==="radial")}function getIdURL(a){return"url(#"+a+")"}function getPathPrecision(a){var n=a.getGlobalScale(),r=Math.max(n[0],n[1]);return Math.max(Math.ceil(Math.log(r)/Math.log(10)),1)}function getSRTTransformString(a){var n=a.x||0,r=a.y||0,o=(a.rotation||0)*RADIAN_TO_DEGREE,l=retrieve2(a.scaleX,1),u=retrieve2(a.scaleY,1),c=a.skewX||0,h=a.skewY||0,d=[];return(n||r)&&d.push("translate("+n+"px,"+r+"px)"),o&&d.push("rotate("+o+")"),(l!==1||u!==1)&&d.push("scale("+l+","+u+")"),(c||h)&&d.push("skew("+mathRound$1(c*RADIAN_TO_DEGREE)+"deg, "+mathRound$1(h*RADIAN_TO_DEGREE)+"deg)"),d.join(" ")}var encodeBase64=function(){return env$1.hasGlobalWindow&&isFunction(window.btoa)?function(a){return window.btoa(unescape(encodeURIComponent(a)))}:typeof Buffer<"u"?function(a){return Buffer.from(a).toString("base64")}:function(a){return logError("Base64 isn't natively supported in the current environment."),null}}(),arraySlice=Array.prototype.slice;function interpolateNumber$1(a,n,r){return(n-a)*r+a}function interpolate1DArray(a,n,r,o){for(var l=n.length,u=0;u<l;u++)a[u]=interpolateNumber$1(n[u],r[u],o);return a}function interpolate2DArray(a,n,r,o){for(var l=n.length,u=l&&n[0].length,c=0;c<l;c++){a[c]||(a[c]=[]);for(var h=0;h<u;h++)a[c][h]=interpolateNumber$1(n[c][h],r[c][h],o)}return a}function add1DArray(a,n,r,o){for(var l=n.length,u=0;u<l;u++)a[u]=n[u]+r[u]*o;return a}function add2DArray(a,n,r,o){for(var l=n.length,u=l&&n[0].length,c=0;c<l;c++){a[c]||(a[c]=[]);for(var h=0;h<u;h++)a[c][h]=n[c][h]+r[c][h]*o}return a}function fillColorStops(a,n){for(var r=a.length,o=n.length,l=r>o?n:a,u=Math.min(r,o),c=l[u-1]||{color:[0,0,0,0],offset:0},h=u;h<Math.max(r,o);h++)l.push({offset:c.offset,color:c.color.slice()})}function fillArray(a,n,r){var o=a,l=n;if(!(!o.push||!l.push)){var u=o.length,c=l.length;if(u!==c){var h=u>c;if(h)o.length=c;else for(var d=u;d<c;d++)o.push(r===1?l[d]:arraySlice.call(l[d]))}for(var p=o[0]&&o[0].length,d=0;d<o.length;d++)if(r===1)isNaN(o[d])&&(o[d]=l[d]);else for(var f=0;f<p;f++)isNaN(o[d][f])&&(o[d][f]=l[d][f])}}function cloneValue(a){if(isArrayLike(a)){var n=a.length;if(isArrayLike(a[0])){for(var r=[],o=0;o<n;o++)r.push(arraySlice.call(a[o]));return r}return arraySlice.call(a)}return a}function rgba2String(a){return a[0]=Math.floor(a[0])||0,a[1]=Math.floor(a[1])||0,a[2]=Math.floor(a[2])||0,a[3]=a[3]==null?1:a[3],"rgba("+a.join(",")+")"}function guessArrayDim(a){return isArrayLike(a&&a[0])?2:1}var VALUE_TYPE_NUMBER=0,VALUE_TYPE_1D_ARRAY=1,VALUE_TYPE_2D_ARRAY=2,VALUE_TYPE_COLOR=3,VALUE_TYPE_LINEAR_GRADIENT=4,VALUE_TYPE_RADIAL_GRADIENT=5,VALUE_TYPE_UNKOWN=6;function isGradientValueType(a){return a===VALUE_TYPE_LINEAR_GRADIENT||a===VALUE_TYPE_RADIAL_GRADIENT}function isArrayValueType(a){return a===VALUE_TYPE_1D_ARRAY||a===VALUE_TYPE_2D_ARRAY}var tmpRgba=[0,0,0,0],Track=function(){function a(n){this.keyframes=[],this.discrete=!1,this._invalid=!1,this._needsSort=!1,this._lastFr=0,this._lastFrP=0,this.propName=n}return a.prototype.isFinished=function(){return this._finished},a.prototype.setFinished=function(){this._finished=!0,this._additiveTrack&&this._additiveTrack.setFinished()},a.prototype.needsAnimate=function(){return this.keyframes.length>=1},a.prototype.getAdditiveTrack=function(){return this._additiveTrack},a.prototype.addKeyframe=function(n,r,o){this._needsSort=!0;var l=this.keyframes,u=l.length,c=!1,h=VALUE_TYPE_UNKOWN,d=r;if(isArrayLike(r)){var p=guessArrayDim(r);h=p,(p===1&&!isNumber(r[0])||p===2&&!isNumber(r[0][0]))&&(c=!0)}else if(isNumber(r)&&!eqNaN(r))h=VALUE_TYPE_NUMBER;else if(isString(r))if(!isNaN(+r))h=VALUE_TYPE_NUMBER;else{var f=parse(r);f&&(d=f,h=VALUE_TYPE_COLOR)}else if(isGradientObject(r)){var g=extend({},d);g.colorStops=map$1(r.colorStops,function(v){return{offset:v.offset,color:parse(v.color)}}),isLinearGradient(r)?h=VALUE_TYPE_LINEAR_GRADIENT:isRadialGradient(r)&&(h=VALUE_TYPE_RADIAL_GRADIENT),d=g}u===0?this.valType=h:(h!==this.valType||h===VALUE_TYPE_UNKOWN)&&(c=!0),this.discrete=this.discrete||c;var y={time:n,value:d,rawValue:r,percent:0};return o&&(y.easing=o,y.easingFunc=isFunction(o)?o:easingFuncs$1[o]||createCubicEasingFunc(o)),l.push(y),y},a.prototype.prepare=function(n,r){var o=this.keyframes;this._needsSort&&o.sort(function(x,S){return x.time-S.time});for(var l=this.valType,u=o.length,c=o[u-1],h=this.discrete,d=isArrayValueType(l),p=isGradientValueType(l),f=0;f<u;f++){var g=o[f],y=g.value,v=c.value;g.percent=g.time/n,h||(d&&f!==u-1?fillArray(y,v,l):p&&fillColorStops(y.colorStops,v.colorStops))}if(!h&&l!==VALUE_TYPE_RADIAL_GRADIENT&&r&&this.needsAnimate()&&r.needsAnimate()&&l===r.valType&&!r._finished){this._additiveTrack=r;for(var _=o[0].value,f=0;f<u;f++)l===VALUE_TYPE_NUMBER?o[f].additiveValue=o[f].value-_:l===VALUE_TYPE_COLOR?o[f].additiveValue=add1DArray([],o[f].value,_,-1):isArrayValueType(l)&&(o[f].additiveValue=l===VALUE_TYPE_1D_ARRAY?add1DArray([],o[f].value,_,-1):add2DArray([],o[f].value,_,-1))}},a.prototype.step=function(n,r){if(!this._finished){this._additiveTrack&&this._additiveTrack._finished&&(this._additiveTrack=null);var o=this._additiveTrack!=null,l=o?"additiveValue":"value",u=this.valType,c=this.keyframes,h=c.length,d=this.propName,p=u===VALUE_TYPE_COLOR,f,g=this._lastFr,y=Math.min,v,_;if(h===1)v=_=c[0];else{if(r<0)f=0;else if(r<this._lastFrP){var x=y(g+1,h-1);for(f=x;f>=0&&!(c[f].percent<=r);f--);f=y(f,h-2)}else{for(f=g;f<h&&!(c[f].percent>r);f++);f=y(f-1,h-2)}_=c[f+1],v=c[f]}if(v&&_){this._lastFr=f,this._lastFrP=r;var S=_.percent-v.percent,T=S===0?1:y((r-v.percent)/S,1);_.easingFunc&&(T=_.easingFunc(T));var M=o?this._additiveValue:p?tmpRgba:n[d];if((isArrayValueType(u)||p)&&!M&&(M=this._additiveValue=[]),this.discrete)n[d]=T<1?v.rawValue:_.rawValue;else if(isArrayValueType(u))u===VALUE_TYPE_1D_ARRAY?interpolate1DArray(M,v[l],_[l],T):interpolate2DArray(M,v[l],_[l],T);else if(isGradientValueType(u)){var b=v[l],A=_[l],I=u===VALUE_TYPE_LINEAR_GRADIENT;n[d]={type:I?"linear":"radial",x:interpolateNumber$1(b.x,A.x,T),y:interpolateNumber$1(b.y,A.y,T),colorStops:map$1(b.colorStops,function(C,E){var P=A.colorStops[E];return{offset:interpolateNumber$1(C.offset,P.offset,T),color:rgba2String(interpolate1DArray([],C.color,P.color,T))}}),global:A.global},I?(n[d].x2=interpolateNumber$1(b.x2,A.x2,T),n[d].y2=interpolateNumber$1(b.y2,A.y2,T)):n[d].r=interpolateNumber$1(b.r,A.r,T)}else if(p)interpolate1DArray(M,v[l],_[l],T),o||(n[d]=rgba2String(M));else{var w=interpolateNumber$1(v[l],_[l],T);o?this._additiveValue=w:n[d]=w}o&&this._addToTarget(n)}}},a.prototype._addToTarget=function(n){var r=this.valType,o=this.propName,l=this._additiveValue;r===VALUE_TYPE_NUMBER?n[o]=n[o]+l:r===VALUE_TYPE_COLOR?(parse(n[o],tmpRgba),add1DArray(tmpRgba,tmpRgba,l,1),n[o]=rgba2String(tmpRgba)):r===VALUE_TYPE_1D_ARRAY?add1DArray(n[o],n[o],l,1):r===VALUE_TYPE_2D_ARRAY&&add2DArray(n[o],n[o],l,1)},a}(),Animator=function(){function a(n,r,o,l){if(this._tracks={},this._trackKeys=[],this._maxTime=0,this._started=0,this._clip=null,this._target=n,this._loop=r,r&&l){logError("Can' use additive animation on looped animation.");return}this._additiveAnimators=l,this._allowDiscrete=o}return a.prototype.getMaxTime=function(){return this._maxTime},a.prototype.getDelay=function(){return this._delay},a.prototype.getLoop=function(){return this._loop},a.prototype.getTarget=function(){return this._target},a.prototype.changeTarget=function(n){this._target=n},a.prototype.when=function(n,r,o){return this.whenWithKeys(n,r,keys(r),o)},a.prototype.whenWithKeys=function(n,r,o,l){for(var u=this._tracks,c=0;c<o.length;c++){var h=o[c],d=u[h];if(!d){d=u[h]=new Track(h);var p=void 0,f=this._getAdditiveTrack(h);if(f){var g=f.keyframes,y=g[g.length-1];p=y&&y.value,f.valType===VALUE_TYPE_COLOR&&p&&(p=rgba2String(p))}else p=this._target[h];if(p==null)continue;n>0&&d.addKeyframe(0,cloneValue(p),l),this._trackKeys.push(h)}d.addKeyframe(n,cloneValue(r[h]),l)}return this._maxTime=Math.max(this._maxTime,n),this},a.prototype.pause=function(){this._clip.pause(),this._paused=!0},a.prototype.resume=function(){this._clip.resume(),this._paused=!1},a.prototype.isPaused=function(){return!!this._paused},a.prototype.duration=function(n){return this._maxTime=n,this._force=!0,this},a.prototype._doneCallback=function(){this._setTracksFinished(),this._clip=null;var n=this._doneCbs;if(n)for(var r=n.length,o=0;o<r;o++)n[o].call(this)},a.prototype._abortedCallback=function(){this._setTracksFinished();var n=this.animation,r=this._abortedCbs;if(n&&n.removeClip(this._clip),this._clip=null,r)for(var o=0;o<r.length;o++)r[o].call(this)},a.prototype._setTracksFinished=function(){for(var n=this._tracks,r=this._trackKeys,o=0;o<r.length;o++)n[r[o]].setFinished()},a.prototype._getAdditiveTrack=function(n){var r,o=this._additiveAnimators;if(o)for(var l=0;l<o.length;l++){var u=o[l].getTrack(n);u&&(r=u)}return r},a.prototype.start=function(n){if(!(this._started>0)){this._started=1;for(var r=this,o=[],l=this._maxTime||0,u=0;u<this._trackKeys.length;u++){var c=this._trackKeys[u],h=this._tracks[c],d=this._getAdditiveTrack(c),p=h.keyframes,f=p.length;if(h.prepare(l,d),h.needsAnimate())if(!this._allowDiscrete&&h.discrete){var g=p[f-1];g&&(r._target[h.propName]=g.rawValue),h.setFinished()}else o.push(h)}if(o.length||this._force){var y=new Clip$1({life:l,loop:this._loop,delay:this._delay||0,onframe:function(v){r._started=2;var _=r._additiveAnimators;if(_){for(var x=!1,S=0;S<_.length;S++)if(_[S]._clip){x=!0;break}x||(r._additiveAnimators=null)}for(var S=0;S<o.length;S++)o[S].step(r._target,v);var T=r._onframeCbs;if(T)for(var S=0;S<T.length;S++)T[S](r._target,v)},ondestroy:function(){r._doneCallback()}});this._clip=y,this.animation&&this.animation.addClip(y),n&&y.setEasing(n)}else this._doneCallback();return this}},a.prototype.stop=function(n){if(this._clip){var r=this._clip;n&&r.onframe(1),this._abortedCallback()}},a.prototype.delay=function(n){return this._delay=n,this},a.prototype.during=function(n){return n&&(this._onframeCbs||(this._onframeCbs=[]),this._onframeCbs.push(n)),this},a.prototype.done=function(n){return n&&(this._doneCbs||(this._doneCbs=[]),this._doneCbs.push(n)),this},a.prototype.aborted=function(n){return n&&(this._abortedCbs||(this._abortedCbs=[]),this._abortedCbs.push(n)),this},a.prototype.getClip=function(){return this._clip},a.prototype.getTrack=function(n){return this._tracks[n]},a.prototype.getTracks=function(){var n=this;return map$1(this._trackKeys,function(r){return n._tracks[r]})},a.prototype.stopTracks=function(n,r){if(!n.length||!this._clip)return!0;for(var o=this._tracks,l=this._trackKeys,u=0;u<n.length;u++){var c=o[n[u]];c&&!c.isFinished()&&(r?c.step(this._target,1):this._started===1&&c.step(this._target,0),c.setFinished())}for(var h=!0,u=0;u<l.length;u++)if(!o[l[u]].isFinished()){h=!1;break}return h&&this._abortedCallback(),h},a.prototype.saveTo=function(n,r,o){if(n){r=r||this._trackKeys;for(var l=0;l<r.length;l++){var u=r[l],c=this._tracks[u];if(!(!c||c.isFinished())){var h=c.keyframes,d=h[o?0:h.length-1];d&&(n[u]=cloneValue(d.rawValue))}}}},a.prototype.__changeFinalValue=function(n,r){r=r||keys(n);for(var o=0;o<r.length;o++){var l=r[o],u=this._tracks[l];if(u){var c=u.keyframes;if(c.length>1){var h=c.pop();u.addKeyframe(h.time,n[l]),u.prepare(this._maxTime,u.getAdditiveTrack())}}}},a}();const Animator$1=Animator;function getTime(){return new Date().getTime()}var Animation=function(a){__extends(n,a);function n(r){var o=a.call(this)||this;return o._running=!1,o._time=0,o._pausedTime=0,o._pauseStart=0,o._paused=!1,r=r||{},o.stage=r.stage||{},o}return n.prototype.addClip=function(r){r.animation&&this.removeClip(r),this._head?(this._tail.next=r,r.prev=this._tail,r.next=null,this._tail=r):this._head=this._tail=r,r.animation=this},n.prototype.addAnimator=function(r){r.animation=this;var o=r.getClip();o&&this.addClip(o)},n.prototype.removeClip=function(r){if(r.animation){var o=r.prev,l=r.next;o?o.next=l:this._head=l,l?l.prev=o:this._tail=o,r.next=r.prev=r.animation=null}},n.prototype.removeAnimator=function(r){var o=r.getClip();o&&this.removeClip(o),r.animation=null},n.prototype.update=function(r){for(var o=getTime()-this._pausedTime,l=o-this._time,u=this._head;u;){var c=u.next,h=u.step(o,l);h&&(u.ondestroy(),this.removeClip(u)),u=c}this._time=o,r||(this.trigger("frame",l),this.stage.update&&this.stage.update())},n.prototype._startLoop=function(){var r=this;this._running=!0;function o(){r._running&&(requestAnimationFrame$1(o),!r._paused&&r.update())}requestAnimationFrame$1(o)},n.prototype.start=function(){this._running||(this._time=getTime(),this._pausedTime=0,this._startLoop())},n.prototype.stop=function(){this._running=!1},n.prototype.pause=function(){this._paused||(this._pauseStart=getTime(),this._paused=!0)},n.prototype.resume=function(){this._paused&&(this._pausedTime+=getTime()-this._pauseStart,this._paused=!1)},n.prototype.clear=function(){for(var r=this._head;r;){var o=r.next;r.prev=r.next=r.animation=null,r=o}this._head=this._tail=null},n.prototype.isFinished=function(){return this._head==null},n.prototype.animate=function(r,o){o=o||{},this.start();var l=new Animator$1(r,o.loop);return this.addAnimator(l),l},n}(Eventful$1);const Animation$1=Animation;var TOUCH_CLICK_DELAY=300,globalEventSupported=env$1.domSupported,localNativeListenerNames=function(){var a=["click","dblclick","mousewheel","wheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],n=["touchstart","touchend","touchmove"],r={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},o=map$1(a,function(l){var u=l.replace("mouse","pointer");return r.hasOwnProperty(u)?u:l});return{mouse:a,touch:n,pointer:o}}(),globalNativeListenerNames={mouse:["mousemove","mouseup"],pointer:["pointermove","pointerup"]},wheelEventSupported=!1;function isPointerFromTouch(a){var n=a.pointerType;return n==="pen"||n==="touch"}function setTouchTimer(a){a.touching=!0,a.touchTimer!=null&&(clearTimeout(a.touchTimer),a.touchTimer=null),a.touchTimer=setTimeout(function(){a.touching=!1,a.touchTimer=null},700)}function markTouch(a){a&&(a.zrByTouch=!0)}function normalizeGlobalEvent(a,n){return normalizeEvent(a.dom,new FakeGlobalEvent(a,n),!0)}function isLocalEl(a,n){for(var r=n,o=!1;r&&r.nodeType!==9&&!(o=r.domBelongToZr||r!==n&&r===a.painterRoot);)r=r.parentNode;return o}var FakeGlobalEvent=function(){function a(n,r){this.stopPropagation=noop,this.stopImmediatePropagation=noop,this.preventDefault=noop,this.type=r.type,this.target=this.currentTarget=n.dom,this.pointerType=r.pointerType,this.clientX=r.clientX,this.clientY=r.clientY}return a}(),localDOMHandlers={mousedown:function(a){a=normalizeEvent(this.dom,a),this.__mayPointerCapture=[a.zrX,a.zrY],this.trigger("mousedown",a)},mousemove:function(a){a=normalizeEvent(this.dom,a);var n=this.__mayPointerCapture;n&&(a.zrX!==n[0]||a.zrY!==n[1])&&this.__togglePointerCapture(!0),this.trigger("mousemove",a)},mouseup:function(a){a=normalizeEvent(this.dom,a),this.__togglePointerCapture(!1),this.trigger("mouseup",a)},mouseout:function(a){a=normalizeEvent(this.dom,a);var n=a.toElement||a.relatedTarget;isLocalEl(this,n)||(this.__pointerCapturing&&(a.zrEventControl="no_globalout"),this.trigger("mouseout",a))},wheel:function(a){wheelEventSupported=!0,a=normalizeEvent(this.dom,a),this.trigger("mousewheel",a)},mousewheel:function(a){wheelEventSupported||(a=normalizeEvent(this.dom,a),this.trigger("mousewheel",a))},touchstart:function(a){a=normalizeEvent(this.dom,a),markTouch(a),this.__lastTouchMoment=new Date,this.handler.processGesture(a,"start"),localDOMHandlers.mousemove.call(this,a),localDOMHandlers.mousedown.call(this,a)},touchmove:function(a){a=normalizeEvent(this.dom,a),markTouch(a),this.handler.processGesture(a,"change"),localDOMHandlers.mousemove.call(this,a)},touchend:function(a){a=normalizeEvent(this.dom,a),markTouch(a),this.handler.processGesture(a,"end"),localDOMHandlers.mouseup.call(this,a),+new Date-+this.__lastTouchMoment<TOUCH_CLICK_DELAY&&localDOMHandlers.click.call(this,a)},pointerdown:function(a){localDOMHandlers.mousedown.call(this,a)},pointermove:function(a){isPointerFromTouch(a)||localDOMHandlers.mousemove.call(this,a)},pointerup:function(a){localDOMHandlers.mouseup.call(this,a)},pointerout:function(a){isPointerFromTouch(a)||localDOMHandlers.mouseout.call(this,a)}};each$f(["click","dblclick","contextmenu"],function(a){localDOMHandlers[a]=function(n){n=normalizeEvent(this.dom,n),this.trigger(a,n)}});var globalDOMHandlers={pointermove:function(a){isPointerFromTouch(a)||globalDOMHandlers.mousemove.call(this,a)},pointerup:function(a){globalDOMHandlers.mouseup.call(this,a)},mousemove:function(a){this.trigger("mousemove",a)},mouseup:function(a){var n=this.__pointerCapturing;this.__togglePointerCapture(!1),this.trigger("mouseup",a),n&&(a.zrEventControl="only_globalout",this.trigger("mouseout",a))}};function mountLocalDOMEventListeners(a,n){var r=n.domHandlers;env$1.pointerEventsSupported?each$f(localNativeListenerNames.pointer,function(o){mountSingleDOMEventListener(n,o,function(l){r[o].call(a,l)})}):(env$1.touchEventsSupported&&each$f(localNativeListenerNames.touch,function(o){mountSingleDOMEventListener(n,o,function(l){r[o].call(a,l),setTouchTimer(n)})}),each$f(localNativeListenerNames.mouse,function(o){mountSingleDOMEventListener(n,o,function(l){l=getNativeEvent(l),n.touching||r[o].call(a,l)})}))}function mountGlobalDOMEventListeners(a,n){env$1.pointerEventsSupported?each$f(globalNativeListenerNames.pointer,r):env$1.touchEventsSupported||each$f(globalNativeListenerNames.mouse,r);function r(o){function l(u){u=getNativeEvent(u),isLocalEl(a,u.target)||(u=normalizeGlobalEvent(a,u),n.domHandlers[o].call(a,u))}mountSingleDOMEventListener(n,o,l,{capture:!0})}}function mountSingleDOMEventListener(a,n,r,o){a.mounted[n]=r,a.listenerOpts[n]=o,addEventListener(a.domTarget,n,r,o)}function unmountDOMEventListeners(a){var n=a.mounted;for(var r in n)n.hasOwnProperty(r)&&removeEventListener(a.domTarget,r,n[r],a.listenerOpts[r]);a.mounted={}}var DOMHandlerScope=function(){function a(n,r){this.mounted={},this.listenerOpts={},this.touching=!1,this.domTarget=n,this.domHandlers=r}return a}(),HandlerDomProxy=function(a){__extends(n,a);function n(r,o){var l=a.call(this)||this;return l.__pointerCapturing=!1,l.dom=r,l.painterRoot=o,l._localHandlerScope=new DOMHandlerScope(r,localDOMHandlers),globalEventSupported&&(l._globalHandlerScope=new DOMHandlerScope(document,globalDOMHandlers)),mountLocalDOMEventListeners(l,l._localHandlerScope),l}return n.prototype.dispose=function(){unmountDOMEventListeners(this._localHandlerScope),globalEventSupported&&unmountDOMEventListeners(this._globalHandlerScope)},n.prototype.setCursor=function(r){this.dom.style&&(this.dom.style.cursor=r||"default")},n.prototype.__togglePointerCapture=function(r){if(this.__mayPointerCapture=null,globalEventSupported&&+this.__pointerCapturing^+r){this.__pointerCapturing=r;var o=this._globalHandlerScope;r?mountGlobalDOMEventListeners(this,o):unmountDOMEventListeners(o)}},n}(Eventful$1);const HandlerProxy=HandlerDomProxy;var dpr=1;env$1.hasGlobalWindow&&(dpr=Math.max(window.devicePixelRatio||window.screen&&window.screen.deviceXDPI/window.screen.logicalXDPI||1,1));var devicePixelRatio=dpr,DARK_MODE_THRESHOLD=.4,DARK_LABEL_COLOR="#333",LIGHT_LABEL_COLOR="#ccc",LIGHTER_LABEL_COLOR="#eee",mIdentity=identity,EPSILON$2=5e-5;function isNotAroundZero(a){return a>EPSILON$2||a<-EPSILON$2}var scaleTmp=[],tmpTransform=[],originTransform=create$1(),abs=Math.abs,Transformable=function(){function a(){}return a.prototype.getLocalTransform=function(n){return a.getLocalTransform(this,n)},a.prototype.setPosition=function(n){this.x=n[0],this.y=n[1]},a.prototype.setScale=function(n){this.scaleX=n[0],this.scaleY=n[1]},a.prototype.setSkew=function(n){this.skewX=n[0],this.skewY=n[1]},a.prototype.setOrigin=function(n){this.originX=n[0],this.originY=n[1]},a.prototype.needLocalTransform=function(){return isNotAroundZero(this.rotation)||isNotAroundZero(this.x)||isNotAroundZero(this.y)||isNotAroundZero(this.scaleX-1)||isNotAroundZero(this.scaleY-1)||isNotAroundZero(this.skewX)||isNotAroundZero(this.skewY)},a.prototype.updateTransform=function(){var n=this.parent&&this.parent.transform,r=this.needLocalTransform(),o=this.transform;if(!(r||n)){o&&(mIdentity(o),this.invTransform=null);return}o=o||create$1(),r?this.getLocalTransform(o):mIdentity(o),n&&(r?mul(o,n,o):copy(o,n)),this.transform=o,this._resolveGlobalScaleRatio(o)},a.prototype._resolveGlobalScaleRatio=function(n){var r=this.globalScaleRatio;if(r!=null&&r!==1){this.getGlobalScale(scaleTmp);var o=scaleTmp[0]<0?-1:1,l=scaleTmp[1]<0?-1:1,u=((scaleTmp[0]-o)*r+o)/scaleTmp[0]||0,c=((scaleTmp[1]-l)*r+l)/scaleTmp[1]||0;n[0]*=u,n[1]*=u,n[2]*=c,n[3]*=c}this.invTransform=this.invTransform||create$1(),invert(this.invTransform,n)},a.prototype.getComputedTransform=function(){for(var n=this,r=[];n;)r.push(n),n=n.parent;for(;n=r.pop();)n.updateTransform();return this.transform},a.prototype.setLocalTransform=function(n){if(n){var r=n[0]*n[0]+n[1]*n[1],o=n[2]*n[2]+n[3]*n[3],l=Math.atan2(n[1],n[0]),u=Math.PI/2+l-Math.atan2(n[3],n[2]);o=Math.sqrt(o)*Math.cos(u),r=Math.sqrt(r),this.skewX=u,this.skewY=0,this.rotation=-l,this.x=+n[4],this.y=+n[5],this.scaleX=r,this.scaleY=o,this.originX=0,this.originY=0}},a.prototype.decomposeTransform=function(){if(this.transform){var n=this.parent,r=this.transform;n&&n.transform&&(n.invTransform=n.invTransform||create$1(),mul(tmpTransform,n.invTransform,r),r=tmpTransform);var o=this.originX,l=this.originY;(o||l)&&(originTransform[4]=o,originTransform[5]=l,mul(tmpTransform,r,originTransform),tmpTransform[4]-=o,tmpTransform[5]-=l,r=tmpTransform),this.setLocalTransform(r)}},a.prototype.getGlobalScale=function(n){var r=this.transform;return n=n||[],r?(n[0]=Math.sqrt(r[0]*r[0]+r[1]*r[1]),n[1]=Math.sqrt(r[2]*r[2]+r[3]*r[3]),r[0]<0&&(n[0]=-n[0]),r[3]<0&&(n[1]=-n[1]),n):(n[0]=1,n[1]=1,n)},a.prototype.transformCoordToLocal=function(n,r){var o=[n,r],l=this.invTransform;return l&&applyTransform$1(o,o,l),o},a.prototype.transformCoordToGlobal=function(n,r){var o=[n,r],l=this.transform;return l&&applyTransform$1(o,o,l),o},a.prototype.getLineScale=function(){var n=this.transform;return n&&abs(n[0]-1)>1e-10&&abs(n[3]-1)>1e-10?Math.sqrt(abs(n[0]*n[3]-n[2]*n[1])):1},a.prototype.copyTransform=function(n){copyTransform(this,n)},a.getLocalTransform=function(n,r){r=r||[];var o=n.originX||0,l=n.originY||0,u=n.scaleX,c=n.scaleY,h=n.anchorX,d=n.anchorY,p=n.rotation||0,f=n.x,g=n.y,y=n.skewX?Math.tan(n.skewX):0,v=n.skewY?Math.tan(-n.skewY):0;if(o||l||h||d){var _=o+h,x=l+d;r[4]=-_*u-y*x*c,r[5]=-x*c-v*_*u}else r[4]=r[5]=0;return r[0]=u,r[3]=c,r[1]=v*u,r[2]=y*c,p&&rotate(r,r,p),r[4]+=o+f,r[5]+=l+g,r},a.initDefaultProps=function(){var n=a.prototype;n.scaleX=n.scaleY=n.globalScaleRatio=1,n.x=n.y=n.originX=n.originY=n.skewX=n.skewY=n.rotation=n.anchorX=n.anchorY=0}(),a}(),TRANSFORMABLE_PROPS=["x","y","originX","originY","anchorX","anchorY","rotation","scaleX","scaleY","skewX","skewY"];function copyTransform(a,n){for(var r=0;r<TRANSFORMABLE_PROPS.length;r++){var o=TRANSFORMABLE_PROPS[r];a[o]=n[o]}}const Transformable$1=Transformable;var textWidthCache={};function getWidth(a,n){n=n||DEFAULT_FONT;var r=textWidthCache[n];r||(r=textWidthCache[n]=new LRU$1(500));var o=r.get(a);return o==null&&(o=platformApi.measureText(a,n).width,r.put(a,o)),o}function innerGetBoundingRect(a,n,r,o){var l=getWidth(a,n),u=getLineHeight(n),c=adjustTextX(0,l,r),h=adjustTextY(0,u,o),d=new BoundingRect$1(c,h,l,u);return d}function getBoundingRect(a,n,r,o){var l=((a||"")+"").split(`
`),u=l.length;if(u===1)return innerGetBoundingRect(l[0],n,r,o);for(var c=new BoundingRect$1(0,0,0,0),h=0;h<l.length;h++){var d=innerGetBoundingRect(l[h],n,r,o);h===0?c.copy(d):c.union(d)}return c}function adjustTextX(a,n,r){return r==="right"?a-=n:r==="center"&&(a-=n/2),a}function adjustTextY(a,n,r){return r==="middle"?a-=n/2:r==="bottom"&&(a-=n),a}function getLineHeight(a){return getWidth("\u56FD",a)}function parsePercent$1(a,n){return typeof a=="string"?a.lastIndexOf("%")>=0?parseFloat(a)/100*n:parseFloat(a):a}function calculateTextPosition(a,n,r){var o=n.position||"inside",l=n.distance!=null?n.distance:5,u=r.height,c=r.width,h=u/2,d=r.x,p=r.y,f="left",g="top";if(o instanceof Array)d+=parsePercent$1(o[0],r.width),p+=parsePercent$1(o[1],r.height),f=null,g=null;else switch(o){case"left":d-=l,p+=h,f="right",g="middle";break;case"right":d+=l+c,p+=h,g="middle";break;case"top":d+=c/2,p-=l,f="center",g="bottom";break;case"bottom":d+=c/2,p+=u+l,f="center";break;case"inside":d+=c/2,p+=h,f="center",g="middle";break;case"insideLeft":d+=l,p+=h,g="middle";break;case"insideRight":d+=c-l,p+=h,f="right",g="middle";break;case"insideTop":d+=c/2,p+=l,f="center";break;case"insideBottom":d+=c/2,p+=u-l,f="center",g="bottom";break;case"insideTopLeft":d+=l,p+=l;break;case"insideTopRight":d+=c-l,p+=l,f="right";break;case"insideBottomLeft":d+=l,p+=u-l,g="bottom";break;case"insideBottomRight":d+=c-l,p+=u-l,f="right",g="bottom";break}return a=a||{},a.x=d,a.y=p,a.align=f,a.verticalAlign=g,a}var PRESERVED_NORMAL_STATE="__zr_normal__",PRIMARY_STATES_KEYS$1=TRANSFORMABLE_PROPS.concat(["ignore"]),DEFAULT_ANIMATABLE_MAP=reduce(TRANSFORMABLE_PROPS,function(a,n){return a[n]=!0,a},{ignore:!1}),tmpTextPosCalcRes={},tmpBoundingRect=new BoundingRect$1(0,0,0,0),Element=function(){function a(n){this.id=guid(),this.animators=[],this.currentStates=[],this.states={},this._init(n)}return a.prototype._init=function(n){this.attr(n)},a.prototype.drift=function(n,r,o){switch(this.draggable){case"horizontal":r=0;break;case"vertical":n=0;break}var l=this.transform;l||(l=this.transform=[1,0,0,1,0,0]),l[4]+=n,l[5]+=r,this.decomposeTransform(),this.markRedraw()},a.prototype.beforeUpdate=function(){},a.prototype.afterUpdate=function(){},a.prototype.update=function(){this.updateTransform(),this.__dirty&&this.updateInnerText()},a.prototype.updateInnerText=function(n){var r=this._textContent;if(r&&(!r.ignore||n)){this.textConfig||(this.textConfig={});var o=this.textConfig,l=o.local,u=r.innerTransformable,c=void 0,h=void 0,d=!1;u.parent=l?this:null;var p=!1;if(u.copyTransform(r),o.position!=null){var f=tmpBoundingRect;o.layoutRect?f.copy(o.layoutRect):f.copy(this.getBoundingRect()),l||f.applyTransform(this.transform),this.calculateTextPosition?this.calculateTextPosition(tmpTextPosCalcRes,o,f):calculateTextPosition(tmpTextPosCalcRes,o,f),u.x=tmpTextPosCalcRes.x,u.y=tmpTextPosCalcRes.y,c=tmpTextPosCalcRes.align,h=tmpTextPosCalcRes.verticalAlign;var g=o.origin;if(g&&o.rotation!=null){var y=void 0,v=void 0;g==="center"?(y=f.width*.5,v=f.height*.5):(y=parsePercent$1(g[0],f.width),v=parsePercent$1(g[1],f.height)),p=!0,u.originX=-u.x+y+(l?0:f.x),u.originY=-u.y+v+(l?0:f.y)}}o.rotation!=null&&(u.rotation=o.rotation);var _=o.offset;_&&(u.x+=_[0],u.y+=_[1],p||(u.originX=-_[0],u.originY=-_[1]));var x=o.inside==null?typeof o.position=="string"&&o.position.indexOf("inside")>=0:o.inside,S=this._innerTextDefaultStyle||(this._innerTextDefaultStyle={}),T=void 0,M=void 0,b=void 0;x&&this.canBeInsideText()?(T=o.insideFill,M=o.insideStroke,(T==null||T==="auto")&&(T=this.getInsideTextFill()),(M==null||M==="auto")&&(M=this.getInsideTextStroke(T),b=!0)):(T=o.outsideFill,M=o.outsideStroke,(T==null||T==="auto")&&(T=this.getOutsideFill()),(M==null||M==="auto")&&(M=this.getOutsideStroke(T),b=!0)),T=T||"#000",(T!==S.fill||M!==S.stroke||b!==S.autoStroke||c!==S.align||h!==S.verticalAlign)&&(d=!0,S.fill=T,S.stroke=M,S.autoStroke=b,S.align=c,S.verticalAlign=h,r.setDefaultTextStyle(S)),r.__dirty|=REDRAW_BIT,d&&r.dirtyStyle(!0)}},a.prototype.canBeInsideText=function(){return!0},a.prototype.getInsideTextFill=function(){return"#fff"},a.prototype.getInsideTextStroke=function(n){return"#000"},a.prototype.getOutsideFill=function(){return this.__zr&&this.__zr.isDarkMode()?LIGHT_LABEL_COLOR:DARK_LABEL_COLOR},a.prototype.getOutsideStroke=function(n){var r=this.__zr&&this.__zr.getBackgroundColor(),o=typeof r=="string"&&parse(r);o||(o=[255,255,255,1]);for(var l=o[3],u=this.__zr.isDarkMode(),c=0;c<3;c++)o[c]=o[c]*l+(u?0:255)*(1-l);return o[3]=1,stringify(o,"rgba")},a.prototype.traverse=function(n,r){},a.prototype.attrKV=function(n,r){n==="textConfig"?this.setTextConfig(r):n==="textContent"?this.setTextContent(r):n==="clipPath"?this.setClipPath(r):n==="extra"?(this.extra=this.extra||{},extend(this.extra,r)):this[n]=r},a.prototype.hide=function(){this.ignore=!0,this.markRedraw()},a.prototype.show=function(){this.ignore=!1,this.markRedraw()},a.prototype.attr=function(n,r){if(typeof n=="string")this.attrKV(n,r);else if(isObject$3(n))for(var o=n,l=keys(o),u=0;u<l.length;u++){var c=l[u];this.attrKV(c,n[c])}return this.markRedraw(),this},a.prototype.saveCurrentToNormalState=function(n){this._innerSaveToNormal(n);for(var r=this._normalState,o=0;o<this.animators.length;o++){var l=this.animators[o],u=l.__fromStateTransition;if(!(l.getLoop()||u&&u!==PRESERVED_NORMAL_STATE)){var c=l.targetName,h=c?r[c]:r;l.saveTo(h)}}},a.prototype._innerSaveToNormal=function(n){var r=this._normalState;r||(r=this._normalState={}),n.textConfig&&!r.textConfig&&(r.textConfig=this.textConfig),this._savePrimaryToNormal(n,r,PRIMARY_STATES_KEYS$1)},a.prototype._savePrimaryToNormal=function(n,r,o){for(var l=0;l<o.length;l++){var u=o[l];n[u]!=null&&!(u in r)&&(r[u]=this[u])}},a.prototype.hasState=function(){return this.currentStates.length>0},a.prototype.getState=function(n){return this.states[n]},a.prototype.ensureState=function(n){var r=this.states;return r[n]||(r[n]={}),r[n]},a.prototype.clearStates=function(n){this.useState(PRESERVED_NORMAL_STATE,!1,n)},a.prototype.useState=function(n,r,o,l){var u=n===PRESERVED_NORMAL_STATE,c=this.hasState();if(!(!c&&u)){var h=this.currentStates,d=this.stateTransition;if(!(indexOf(h,n)>=0&&(r||h.length===1))){var p;if(this.stateProxy&&!u&&(p=this.stateProxy(n)),p||(p=this.states&&this.states[n]),!p&&!u){logError("State "+n+" not exists.");return}u||this.saveCurrentToNormalState(p);var f=!!(p&&p.hoverLayer||l);f&&this._toggleHoverLayerFlag(!0),this._applyStateObj(n,p,this._normalState,r,!o&&!this.__inHover&&d&&d.duration>0,d);var g=this._textContent,y=this._textGuide;return g&&g.useState(n,r,o,f),y&&y.useState(n,r,o,f),u?(this.currentStates=[],this._normalState={}):r?this.currentStates.push(n):this.currentStates=[n],this._updateAnimationTargets(),this.markRedraw(),!f&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~REDRAW_BIT),p}}},a.prototype.useStates=function(n,r,o){if(!n.length)this.clearStates();else{var l=[],u=this.currentStates,c=n.length,h=c===u.length;if(h){for(var d=0;d<c;d++)if(n[d]!==u[d]){h=!1;break}}if(h)return;for(var d=0;d<c;d++){var p=n[d],f=void 0;this.stateProxy&&(f=this.stateProxy(p,n)),f||(f=this.states[p]),f&&l.push(f)}var g=l[c-1],y=!!(g&&g.hoverLayer||o);y&&this._toggleHoverLayerFlag(!0);var v=this._mergeStates(l),_=this.stateTransition;this.saveCurrentToNormalState(v),this._applyStateObj(n.join(","),v,this._normalState,!1,!r&&!this.__inHover&&_&&_.duration>0,_);var x=this._textContent,S=this._textGuide;x&&x.useStates(n,r,y),S&&S.useStates(n,r,y),this._updateAnimationTargets(),this.currentStates=n.slice(),this.markRedraw(),!y&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~REDRAW_BIT)}},a.prototype.isSilent=function(){for(var n=this.silent,r=this.parent;!n&&r;){if(r.silent){n=!0;break}r=r.parent}return n},a.prototype._updateAnimationTargets=function(){for(var n=0;n<this.animators.length;n++){var r=this.animators[n];r.targetName&&r.changeTarget(this[r.targetName])}},a.prototype.removeState=function(n){var r=indexOf(this.currentStates,n);if(r>=0){var o=this.currentStates.slice();o.splice(r,1),this.useStates(o)}},a.prototype.replaceState=function(n,r,o){var l=this.currentStates.slice(),u=indexOf(l,n),c=indexOf(l,r)>=0;u>=0?c?l.splice(u,1):l[u]=r:o&&!c&&l.push(r),this.useStates(l)},a.prototype.toggleState=function(n,r){r?this.useState(n,!0):this.removeState(n)},a.prototype._mergeStates=function(n){for(var r={},o,l=0;l<n.length;l++){var u=n[l];extend(r,u),u.textConfig&&(o=o||{},extend(o,u.textConfig))}return o&&(r.textConfig=o),r},a.prototype._applyStateObj=function(n,r,o,l,u,c){var h=!(r&&l);r&&r.textConfig?(this.textConfig=extend({},l?this.textConfig:o.textConfig),extend(this.textConfig,r.textConfig)):h&&o.textConfig&&(this.textConfig=o.textConfig);for(var d={},p=!1,f=0;f<PRIMARY_STATES_KEYS$1.length;f++){var g=PRIMARY_STATES_KEYS$1[f],y=u&&DEFAULT_ANIMATABLE_MAP[g];r&&r[g]!=null?y?(p=!0,d[g]=r[g]):this[g]=r[g]:h&&o[g]!=null&&(y?(p=!0,d[g]=o[g]):this[g]=o[g])}if(!u)for(var f=0;f<this.animators.length;f++){var v=this.animators[f],_=v.targetName;v.getLoop()||v.__changeFinalValue(_?(r||o)[_]:r||o)}p&&this._transitionState(n,d,c)},a.prototype._attachComponent=function(n){if(n.__zr&&!n.__hostTarget)throw new Error("Text element has been added to zrender.");if(n===this)throw new Error("Recursive component attachment.");var r=this.__zr;r&&n.addSelfToZr(r),n.__zr=r,n.__hostTarget=this},a.prototype._detachComponent=function(n){n.__zr&&n.removeSelfFromZr(n.__zr),n.__zr=null,n.__hostTarget=null},a.prototype.getClipPath=function(){return this._clipPath},a.prototype.setClipPath=function(n){this._clipPath&&this._clipPath!==n&&this.removeClipPath(),this._attachComponent(n),this._clipPath=n,this.markRedraw()},a.prototype.removeClipPath=function(){var n=this._clipPath;n&&(this._detachComponent(n),this._clipPath=null,this.markRedraw())},a.prototype.getTextContent=function(){return this._textContent},a.prototype.setTextContent=function(n){var r=this._textContent;if(r!==n){if(r&&r!==n&&this.removeTextContent(),n.__zr&&!n.__hostTarget)throw new Error("Text element has been added to zrender.");n.innerTransformable=new Transformable$1,this._attachComponent(n),this._textContent=n,this.markRedraw()}},a.prototype.setTextConfig=function(n){this.textConfig||(this.textConfig={}),extend(this.textConfig,n),this.markRedraw()},a.prototype.removeTextConfig=function(){this.textConfig=null,this.markRedraw()},a.prototype.removeTextContent=function(){var n=this._textContent;n&&(n.innerTransformable=null,this._detachComponent(n),this._textContent=null,this._innerTextDefaultStyle=null,this.markRedraw())},a.prototype.getTextGuideLine=function(){return this._textGuide},a.prototype.setTextGuideLine=function(n){this._textGuide&&this._textGuide!==n&&this.removeTextGuideLine(),this._attachComponent(n),this._textGuide=n,this.markRedraw()},a.prototype.removeTextGuideLine=function(){var n=this._textGuide;n&&(this._detachComponent(n),this._textGuide=null,this.markRedraw())},a.prototype.markRedraw=function(){this.__dirty|=REDRAW_BIT;var n=this.__zr;n&&(this.__inHover?n.refreshHover():n.refresh()),this.__hostTarget&&this.__hostTarget.markRedraw()},a.prototype.dirty=function(){this.markRedraw()},a.prototype._toggleHoverLayerFlag=function(n){this.__inHover=n;var r=this._textContent,o=this._textGuide;r&&(r.__inHover=n),o&&(o.__inHover=n)},a.prototype.addSelfToZr=function(n){if(this.__zr!==n){this.__zr=n;var r=this.animators;if(r)for(var o=0;o<r.length;o++)n.animation.addAnimator(r[o]);this._clipPath&&this._clipPath.addSelfToZr(n),this._textContent&&this._textContent.addSelfToZr(n),this._textGuide&&this._textGuide.addSelfToZr(n)}},a.prototype.removeSelfFromZr=function(n){if(this.__zr){this.__zr=null;var r=this.animators;if(r)for(var o=0;o<r.length;o++)n.animation.removeAnimator(r[o]);this._clipPath&&this._clipPath.removeSelfFromZr(n),this._textContent&&this._textContent.removeSelfFromZr(n),this._textGuide&&this._textGuide.removeSelfFromZr(n)}},a.prototype.animate=function(n,r,o){var l=n?this[n]:this;if(!l){logError('Property "'+n+'" is not existed in element '+this.id);return}var u=new Animator$1(l,r,o);return n&&(u.targetName=n),this.addAnimator(u,n),u},a.prototype.addAnimator=function(n,r){var o=this.__zr,l=this;n.during(function(){l.updateDuringAnimation(r)}).done(function(){var u=l.animators,c=indexOf(u,n);c>=0&&u.splice(c,1)}),this.animators.push(n),o&&o.animation.addAnimator(n),o&&o.wakeUp()},a.prototype.updateDuringAnimation=function(n){this.markRedraw()},a.prototype.stopAnimation=function(n,r){for(var o=this.animators,l=o.length,u=[],c=0;c<l;c++){var h=o[c];!n||n===h.scope?h.stop(r):u.push(h)}return this.animators=u,this},a.prototype.animateTo=function(n,r,o){animateTo(this,n,r,o)},a.prototype.animateFrom=function(n,r,o){animateTo(this,n,r,o,!0)},a.prototype._transitionState=function(n,r,o,l){for(var u=animateTo(this,r,o,l),c=0;c<u.length;c++)u[c].__fromStateTransition=n},a.prototype.getBoundingRect=function(){return null},a.prototype.getPaintRect=function(){return null},a.initDefaultProps=function(){var n=a.prototype;n.type="element",n.name="",n.ignore=n.silent=n.isGroup=n.draggable=n.dragging=n.ignoreClip=n.__inHover=!1,n.__dirty=REDRAW_BIT;var r={};function o(u,c,h){r[u+c+h]||(console.warn("DEPRECATED: '"+u+"' has been deprecated. use '"+c+"', '"+h+"' instead"),r[u+c+h]=!0)}function l(u,c,h,d){Object.defineProperty(n,u,{get:function(){if(o(u,h,d),!this[c]){var f=this[c]=[];p(this,f)}return this[c]},set:function(f){o(u,h,d),this[h]=f[0],this[d]=f[1],this[c]=f,p(this,f)}});function p(f,g){Object.defineProperty(g,0,{get:function(){return f[h]},set:function(y){f[h]=y}}),Object.defineProperty(g,1,{get:function(){return f[d]},set:function(y){f[d]=y}})}}Object.defineProperty&&(l("position","_legacyPos","x","y"),l("scale","_legacyScale","scaleX","scaleY"),l("origin","_legacyOrigin","originX","originY"))}(),a}();mixin(Element,Eventful$1);mixin(Element,Transformable$1);function animateTo(a,n,r,o,l){r=r||{};var u=[];animateToShallow(a,"",a,n,r,o,u,l);var c=u.length,h=!1,d=r.done,p=r.aborted,f=function(){h=!0,c--,c<=0&&(h?d&&d():p&&p())},g=function(){c--,c<=0&&(h?d&&d():p&&p())};c||d&&d(),u.length>0&&r.during&&u[0].during(function(_,x){r.during(x)});for(var y=0;y<u.length;y++){var v=u[y];f&&v.done(f),g&&v.aborted(g),r.force&&v.duration(r.duration),v.start(r.easing)}return u}function copyArrShallow(a,n,r){for(var o=0;o<r;o++)a[o]=n[o]}function is2DArray(a){return isArrayLike(a[0])}function copyValue(a,n,r){if(isArrayLike(n[r]))if(isArrayLike(a[r])||(a[r]=[]),isTypedArray(n[r])){var o=n[r].length;a[r].length!==o&&(a[r]=new n[r].constructor(o),copyArrShallow(a[r],n[r],o))}else{var l=n[r],u=a[r],c=l.length;if(is2DArray(l))for(var h=l[0].length,d=0;d<c;d++)u[d]?copyArrShallow(u[d],l[d],h):u[d]=Array.prototype.slice.call(l[d]);else copyArrShallow(u,l,c);u.length=l.length}else a[r]=n[r]}function isValueSame(a,n){return a===n||isArrayLike(a)&&isArrayLike(n)&&is1DArraySame(a,n)}function is1DArraySame(a,n){var r=a.length;if(r!==n.length)return!1;for(var o=0;o<r;o++)if(a[o]!==n[o])return!1;return!0}function animateToShallow(a,n,r,o,l,u,c,h){for(var d=keys(o),p=l.duration,f=l.delay,g=l.additive,y=l.setToFinal,v=!isObject$3(u),_=a.animators,x=[],S=0;S<d.length;S++){var T=d[S],M=o[T];if(M!=null&&r[T]!=null&&(v||u[T]))if(isObject$3(M)&&!isArrayLike(M)&&!isGradientObject(M)){if(n){h||(r[T]=M,a.updateDuringAnimation(n));continue}animateToShallow(a,T,r[T],M,l,u&&u[T],c,h)}else x.push(T);else h||(r[T]=M,a.updateDuringAnimation(n),x.push(T))}var b=x.length;if(!g&&b)for(var A=0;A<_.length;A++){var I=_[A];if(I.targetName===n){var w=I.stopTracks(x);if(w){var C=indexOf(_,I);_.splice(C,1)}}}if(l.force||(x=filter(x,function(L){return!isValueSame(o[L],r[L])}),b=x.length),b>0||l.force&&!c.length){var E=void 0,P=void 0,D=void 0;if(h){P={},y&&(E={});for(var A=0;A<b;A++){var T=x[A];P[T]=r[T],y?E[T]=o[T]:r[T]=o[T]}}else if(y){D={};for(var A=0;A<b;A++){var T=x[A];D[T]=cloneValue(r[T]),copyValue(r,o,T)}}var I=new Animator$1(r,!1,!1,g?filter(_,function(R){return R.targetName===n}):null);I.targetName=n,l.scope&&(I.scope=l.scope),y&&E&&I.whenWithKeys(0,E,x),D&&I.whenWithKeys(0,D,x),I.whenWithKeys(p==null?500:p,h?P:o,x).delay(f||0),a.addAnimator(I,n),c.push(I)}}const Element$1=Element;var Group$3=function(a){__extends(n,a);function n(r){var o=a.call(this)||this;return o.isGroup=!0,o._children=[],o.attr(r),o}return n.prototype.childrenRef=function(){return this._children},n.prototype.children=function(){return this._children.slice()},n.prototype.childAt=function(r){return this._children[r]},n.prototype.childOfName=function(r){for(var o=this._children,l=0;l<o.length;l++)if(o[l].name===r)return o[l]},n.prototype.childCount=function(){return this._children.length},n.prototype.add=function(r){if(r&&(r!==this&&r.parent!==this&&(this._children.push(r),this._doAdd(r)),r.__hostTarget))throw"This elemenet has been used as an attachment";return this},n.prototype.addBefore=function(r,o){if(r&&r!==this&&r.parent!==this&&o&&o.parent===this){var l=this._children,u=l.indexOf(o);u>=0&&(l.splice(u,0,r),this._doAdd(r))}return this},n.prototype.replace=function(r,o){var l=indexOf(this._children,r);return l>=0&&this.replaceAt(o,l),this},n.prototype.replaceAt=function(r,o){var l=this._children,u=l[o];if(r&&r!==this&&r.parent!==this&&r!==u){l[o]=r,u.parent=null;var c=this.__zr;c&&u.removeSelfFromZr(c),this._doAdd(r)}return this},n.prototype._doAdd=function(r){r.parent&&r.parent.remove(r),r.parent=this;var o=this.__zr;o&&o!==r.__zr&&r.addSelfToZr(o),o&&o.refresh()},n.prototype.remove=function(r){var o=this.__zr,l=this._children,u=indexOf(l,r);return u<0?this:(l.splice(u,1),r.parent=null,o&&r.removeSelfFromZr(o),o&&o.refresh(),this)},n.prototype.removeAll=function(){for(var r=this._children,o=this.__zr,l=0;l<r.length;l++){var u=r[l];o&&u.removeSelfFromZr(o),u.parent=null}return r.length=0,this},n.prototype.eachChild=function(r,o){for(var l=this._children,u=0;u<l.length;u++){var c=l[u];r.call(o,c,u)}return this},n.prototype.traverse=function(r,o){for(var l=0;l<this._children.length;l++){var u=this._children[l],c=r.call(o,u);u.isGroup&&!c&&u.traverse(r,o)}return this},n.prototype.addSelfToZr=function(r){a.prototype.addSelfToZr.call(this,r);for(var o=0;o<this._children.length;o++){var l=this._children[o];l.addSelfToZr(r)}},n.prototype.removeSelfFromZr=function(r){a.prototype.removeSelfFromZr.call(this,r);for(var o=0;o<this._children.length;o++){var l=this._children[o];l.removeSelfFromZr(r)}},n.prototype.getBoundingRect=function(r){for(var o=new BoundingRect$1(0,0,0,0),l=r||this._children,u=[],c=null,h=0;h<l.length;h++){var d=l[h];if(!(d.ignore||d.invisible)){var p=d.getBoundingRect(),f=d.getLocalTransform(u);f?(BoundingRect$1.applyTransform(o,p,f),c=c||o.clone(),c.union(o)):(c=c||p.clone(),c.union(p))}}return c||o},n}(Element$1);Group$3.prototype.type="group";const Group$4=Group$3;/*!
* ZRender, a high performance 2d drawing library.
*
* Copyright (c) 2013, Baidu Inc.
* All rights reserved.
*
* LICENSE
* https://github.com/ecomfe/zrender/blob/master/LICENSE.txt
*/var painterCtors={},instances$1={};function delInstance(a){delete instances$1[a]}function isDarkMode(a){if(!a)return!1;if(typeof a=="string")return lum(a,1)<DARK_MODE_THRESHOLD;if(a.colorStops){for(var n=a.colorStops,r=0,o=n.length,l=0;l<o;l++)r+=lum(n[l].color,1);return r/=o,r<DARK_MODE_THRESHOLD}return!1}var ZRender=function(){function a(n,r,o){var l=this;this._sleepAfterStill=10,this._stillFrameAccum=0,this._needsRefresh=!0,this._needsRefreshHover=!0,this._darkMode=!1,o=o||{},this.dom=r,this.id=n;var u=new Storage$1,c=o.renderer||"canvas";if(painterCtors[c]||(c=keys(painterCtors)[0]),!painterCtors[c])throw new Error("Renderer '"+c+"' is not imported. Please import it first.");o.useDirtyRect=o.useDirtyRect==null?!1:o.useDirtyRect;var h=new painterCtors[c](r,u,o,n),d=o.ssr||h.ssrOnly;this.storage=u,this.painter=h;var p=!env$1.node&&!env$1.worker&&!d?new HandlerProxy(h.getViewportRoot(),h.root):null,f=o.useCoarsePointer,g=f==null||f==="auto"?env$1.touchEventsSupported:!!f,y=44,v;g&&(v=retrieve2(o.pointerSize,y)),this.handler=new Handler$1(u,h,p,h.root,v),this.animation=new Animation$1({stage:{update:d?null:function(){return l._flush(!0)}}}),d||this.animation.start()}return a.prototype.add=function(n){this._disposed||!n||(this.storage.addRoot(n),n.addSelfToZr(this),this.refresh())},a.prototype.remove=function(n){this._disposed||!n||(this.storage.delRoot(n),n.removeSelfFromZr(this),this.refresh())},a.prototype.configLayer=function(n,r){this._disposed||(this.painter.configLayer&&this.painter.configLayer(n,r),this.refresh())},a.prototype.setBackgroundColor=function(n){this._disposed||(this.painter.setBackgroundColor&&this.painter.setBackgroundColor(n),this.refresh(),this._backgroundColor=n,this._darkMode=isDarkMode(n))},a.prototype.getBackgroundColor=function(){return this._backgroundColor},a.prototype.setDarkMode=function(n){this._darkMode=n},a.prototype.isDarkMode=function(){return this._darkMode},a.prototype.refreshImmediately=function(n){this._disposed||(n||this.animation.update(!0),this._needsRefresh=!1,this.painter.refresh(),this._needsRefresh=!1)},a.prototype.refresh=function(){this._disposed||(this._needsRefresh=!0,this.animation.start())},a.prototype.flush=function(){this._disposed||this._flush(!1)},a.prototype._flush=function(n){var r,o=getTime();this._needsRefresh&&(r=!0,this.refreshImmediately(n)),this._needsRefreshHover&&(r=!0,this.refreshHoverImmediately());var l=getTime();r?(this._stillFrameAccum=0,this.trigger("rendered",{elapsedTime:l-o})):this._sleepAfterStill>0&&(this._stillFrameAccum++,this._stillFrameAccum>this._sleepAfterStill&&this.animation.stop())},a.prototype.setSleepAfterStill=function(n){this._sleepAfterStill=n},a.prototype.wakeUp=function(){this._disposed||(this.animation.start(),this._stillFrameAccum=0)},a.prototype.refreshHover=function(){this._needsRefreshHover=!0},a.prototype.refreshHoverImmediately=function(){this._disposed||(this._needsRefreshHover=!1,this.painter.refreshHover&&this.painter.getType()==="canvas"&&this.painter.refreshHover())},a.prototype.resize=function(n){this._disposed||(n=n||{},this.painter.resize(n.width,n.height),this.handler.resize())},a.prototype.clearAnimation=function(){this._disposed||this.animation.clear()},a.prototype.getWidth=function(){if(!this._disposed)return this.painter.getWidth()},a.prototype.getHeight=function(){if(!this._disposed)return this.painter.getHeight()},a.prototype.setCursorStyle=function(n){this._disposed||this.handler.setCursorStyle(n)},a.prototype.findHover=function(n,r){if(!this._disposed)return this.handler.findHover(n,r)},a.prototype.on=function(n,r,o){return this._disposed||this.handler.on(n,r,o),this},a.prototype.off=function(n,r){this._disposed||this.handler.off(n,r)},a.prototype.trigger=function(n,r){this._disposed||this.handler.trigger(n,r)},a.prototype.clear=function(){if(!this._disposed){for(var n=this.storage.getRoots(),r=0;r<n.length;r++)n[r]instanceof Group$4&&n[r].removeSelfFromZr(this);this.storage.delAllRoots(),this.painter.clear()}},a.prototype.dispose=function(){this._disposed||(this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,this._disposed=!0,delInstance(this.id))},a}();function init$2(a,n){var r=new ZRender(guid(),a,n);return instances$1[r.id]=r,r}function dispose$1(a){a.dispose()}function disposeAll(){for(var a in instances$1)instances$1.hasOwnProperty(a)&&instances$1[a].dispose();instances$1={}}function getInstance(a){return instances$1[a]}function registerPainter(a,n){painterCtors[a]=n}var ssrDataGetter;function getElementSSRData(a){if(typeof ssrDataGetter=="function")return ssrDataGetter(a)}function registerSSRDataGetter(a){ssrDataGetter=a}var version$1="5.6.1";const zrender=Object.freeze(Object.defineProperty({__proto__:null,init:init$2,dispose:dispose$1,disposeAll,getInstance,registerPainter,getElementSSRData,registerSSRDataGetter,version:version$1},Symbol.toStringTag,{value:"Module"}));var RADIAN_EPSILON=1e-4,ROUND_SUPPORTED_PRECISION_MAX=20;function _trim(a){return a.replace(/^\s+|\s+$/g,"")}function linearMap$2(a,n,r,o){var l=n[0],u=n[1],c=r[0],h=r[1],d=u-l,p=h-c;if(d===0)return p===0?c:(c+h)/2;if(o)if(d>0){if(a<=l)return c;if(a>=u)return h}else{if(a>=l)return c;if(a<=u)return h}else{if(a===l)return c;if(a===u)return h}return(a-l)/d*p+c}function parsePercent(a,n){switch(a){case"center":case"middle":a="50%";break;case"left":case"top":a="0%";break;case"right":case"bottom":a="100%";break}return isString(a)?_trim(a).match(/%$/)?parseFloat(a)/100*n:parseFloat(a):a==null?NaN:+a}function round$3(a,n,r){return n==null&&(n=10),n=Math.min(Math.max(0,n),ROUND_SUPPORTED_PRECISION_MAX),a=(+a).toFixed(n),r?a:+a}function asc$2(a){return a.sort(function(n,r){return n-r}),a}function getPrecision(a){if(a=+a,isNaN(a))return 0;if(a>1e-14){for(var n=1,r=0;r<15;r++,n*=10)if(Math.round(a*n)/n===a)return r}return getPrecisionSafe(a)}function getPrecisionSafe(a){var n=a.toString().toLowerCase(),r=n.indexOf("e"),o=r>0?+n.slice(r+1):0,l=r>0?r:n.length,u=n.indexOf("."),c=u<0?0:l-1-u;return Math.max(0,c-o)}function getPixelPrecision(a,n){var r=Math.log,o=Math.LN10,l=Math.floor(r(a[1]-a[0])/o),u=Math.round(r(Math.abs(n[1]-n[0]))/o),c=Math.min(Math.max(-l+u,0),20);return isFinite(c)?c:20}function getPercentWithPrecision(a,n,r){if(!a[n])return 0;var o=getPercentSeats(a,r);return o[n]||0}function getPercentSeats(a,n){var r=reduce(a,function(v,_){return v+(isNaN(_)?0:_)},0);if(r===0)return[];for(var o=Math.pow(10,n),l=map$1(a,function(v){return(isNaN(v)?0:v)/r*o*100}),u=o*100,c=map$1(l,function(v){return Math.floor(v)}),h=reduce(c,function(v,_){return v+_},0),d=map$1(l,function(v,_){return v-c[_]});h<u;){for(var p=Number.NEGATIVE_INFINITY,f=null,g=0,y=d.length;g<y;++g)d[g]>p&&(p=d[g],f=g);++c[f],d[f]=0,++h}return map$1(c,function(v){return v/o})}function addSafe(a,n){var r=Math.max(getPrecision(a),getPrecision(n)),o=a+n;return r>ROUND_SUPPORTED_PRECISION_MAX?o:round$3(o,r)}var MAX_SAFE_INTEGER=9007199254740991;function remRadian(a){var n=Math.PI*2;return(a%n+n)%n}function isRadianAroundZero(a){return a>-RADIAN_EPSILON&&a<RADIAN_EPSILON}var TIME_REG=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d{1,2})(?::(\d{1,2})(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function parseDate(a){if(a instanceof Date)return a;if(isString(a)){var n=TIME_REG.exec(a);if(!n)return new Date(NaN);if(n[8]){var r=+n[4]||0;return n[8].toUpperCase()!=="Z"&&(r-=+n[8].slice(0,3)),new Date(Date.UTC(+n[1],+(n[2]||1)-1,+n[3]||1,r,+(n[5]||0),+n[6]||0,n[7]?+n[7].substring(0,3):0))}else return new Date(+n[1],+(n[2]||1)-1,+n[3]||1,+n[4]||0,+(n[5]||0),+n[6]||0,n[7]?+n[7].substring(0,3):0)}else if(a==null)return new Date(NaN);return new Date(Math.round(a))}function quantity(a){return Math.pow(10,quantityExponent(a))}function quantityExponent(a){if(a===0)return 0;var n=Math.floor(Math.log(a)/Math.LN10);return a/Math.pow(10,n)>=10&&n++,n}function nice(a,n){var r=quantityExponent(a),o=Math.pow(10,r),l=a/o,u;return n?l<1.5?u=1:l<2.5?u=2:l<4?u=3:l<7?u=5:u=10:l<1?u=1:l<2?u=2:l<3?u=3:l<5?u=5:u=10,a=u*o,r>=-20?+a.toFixed(r<0?-r:0):a}function quantile(a,n){var r=(a.length-1)*n+1,o=Math.floor(r),l=+a[o-1],u=r-o;return u?l+u*(a[o]-l):l}function reformIntervals(a){a.sort(function(d,p){return h(d,p,0)?-1:1});for(var n=-1/0,r=1,o=0;o<a.length;){for(var l=a[o].interval,u=a[o].close,c=0;c<2;c++)l[c]<=n&&(l[c]=n,u[c]=c?1:1-r),n=l[c],r=u[c];l[0]===l[1]&&u[0]*u[1]!==1?a.splice(o,1):o++}return a;function h(d,p,f){return d.interval[f]<p.interval[f]||d.interval[f]===p.interval[f]&&(d.close[f]-p.close[f]===(f?-1:1)||!f&&h(d,p,1))}}function numericToNumber(a){var n=parseFloat(a);return n==a&&(n!==0||!isString(a)||a.indexOf("x")<=0)?n:NaN}function isNumeric(a){return!isNaN(numericToNumber(a))}function getRandomIdBase(){return Math.round(Math.random()*9)}function getGreatestCommonDividor(a,n){return n===0?a:getGreatestCommonDividor(n,a%n)}function getLeastCommonMultiple(a,n){return a==null?n:n==null?a:a*n/getGreatestCommonDividor(a,n)}var ECHARTS_PREFIX="[ECharts] ",storedLogs={},hasConsole=typeof console<"u"&&console.warn&&console.log;function outputLog(a,n,r){if(hasConsole){if(r){if(storedLogs[n])return;storedLogs[n]=!0}console[a](ECHARTS_PREFIX+n)}}function log(a,n){outputLog("log",a,n)}function warn(a,n){outputLog("warn",a,n)}function error(a,n){outputLog("error",a,n)}function deprecateLog(a){outputLog("warn","DEPRECATED: "+a,!0)}function deprecateReplaceLog(a,n,r){deprecateLog((r?"["+r+"]":"")+(a+" is deprecated, use "+n+" instead."))}function makePrintable(){for(var a=[],n=0;n<arguments.length;n++)a[n]=arguments[n];var r="";{var o=function(l){return l===void 0?"undefined":l===1/0?"Infinity":l===-1/0?"-Infinity":eqNaN(l)?"NaN":l instanceof Date?"Date("+l.toISOString()+")":isFunction(l)?"function () { ... }":isRegExp(l)?l+"":null};r=map$1(a,function(l){if(isString(l))return l;var u=o(l);if(u!=null)return u;if(typeof JSON<"u"&&JSON.stringify)try{return JSON.stringify(l,function(c,h){var d=o(h);return d==null?h:d})}catch{return"?"}else return"?"}).join(" ")}return r}function throwError(a){throw new Error(a)}function interpolateNumber(a,n,r){return(n-a)*r+a}var DUMMY_COMPONENT_NAME_PREFIX="series\0",INTERNAL_COMPONENT_ID_PREFIX="\0_ec_\0";function normalizeToArray(a){return a instanceof Array?a:a==null?[]:[a]}function defaultEmphasis(a,n,r){if(a){a[n]=a[n]||{},a.emphasis=a.emphasis||{},a.emphasis[n]=a.emphasis[n]||{};for(var o=0,l=r.length;o<l;o++){var u=r[o];!a.emphasis[n].hasOwnProperty(u)&&a[n].hasOwnProperty(u)&&(a.emphasis[n][u]=a[n][u])}}}var TEXT_STYLE_OPTIONS=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function getDataItemValue(a){return isObject$3(a)&&!isArray$1(a)&&!(a instanceof Date)?a.value:a}function isDataItemOption(a){return isObject$3(a)&&!(a instanceof Array)}function mappingToExists(a,n,r){var o=r==="normalMerge",l=r==="replaceMerge",u=r==="replaceAll";a=a||[],n=(n||[]).slice();var c=createHashMap();each$f(n,function(d,p){if(!isObject$3(d)){n[p]=null;return}d.id!=null&&!isValidIdOrName(d.id)&&warnInvalidateIdOrName(d.id),d.name!=null&&!isValidIdOrName(d.name)&&warnInvalidateIdOrName(d.name)});var h=prepareResult(a,c,r);return(o||l)&&mappingById(h,a,c,n),o&&mappingByName(h,n),o||l?mappingByIndex(h,n,l):u&&mappingInReplaceAllMode(h,n),makeIdAndName(h),h}function prepareResult(a,n,r){var o=[];if(r==="replaceAll")return o;for(var l=0;l<a.length;l++){var u=a[l];u&&u.id!=null&&n.set(u.id,l),o.push({existing:r==="replaceMerge"||isComponentIdInternal(u)?null:u,newOption:null,keyInfo:null,brandNew:null})}return o}function mappingById(a,n,r,o){each$f(o,function(l,u){if(!(!l||l.id==null)){var c=makeComparableKey(l.id),h=r.get(c);if(h!=null){var d=a[h];assert(!d.newOption,'Duplicated option on id "'+c+'".'),d.newOption=l,d.existing=n[h],o[u]=null}}})}function mappingByName(a,n){each$f(n,function(r,o){if(!(!r||r.name==null))for(var l=0;l<a.length;l++){var u=a[l].existing;if(!a[l].newOption&&u&&(u.id==null||r.id==null)&&!isComponentIdInternal(r)&&!isComponentIdInternal(u)&&keyExistAndEqual("name",u,r)){a[l].newOption=r,n[o]=null;return}}})}function mappingByIndex(a,n,r){each$f(n,function(o){if(o){for(var l,u=0;(l=a[u])&&(l.newOption||isComponentIdInternal(l.existing)||l.existing&&o.id!=null&&!keyExistAndEqual("id",o,l.existing));)u++;l?(l.newOption=o,l.brandNew=r):a.push({newOption:o,brandNew:r,existing:null,keyInfo:null}),u++}})}function mappingInReplaceAllMode(a,n){each$f(n,function(r){a.push({newOption:r,brandNew:!0,existing:null,keyInfo:null})})}function makeIdAndName(a){var n=createHashMap();each$f(a,function(r){var o=r.existing;o&&n.set(o.id,r)}),each$f(a,function(r){var o=r.newOption;assert(!o||o.id==null||!n.get(o.id)||n.get(o.id)===r,"id duplicates: "+(o&&o.id)),o&&o.id!=null&&n.set(o.id,r),!r.keyInfo&&(r.keyInfo={})}),each$f(a,function(r,o){var l=r.existing,u=r.newOption,c=r.keyInfo;if(isObject$3(u)){if(c.name=u.name!=null?makeComparableKey(u.name):l?l.name:DUMMY_COMPONENT_NAME_PREFIX+o,l)c.id=makeComparableKey(l.id);else if(u.id!=null)c.id=makeComparableKey(u.id);else{var h=0;do c.id="\0"+c.name+"\0"+h++;while(n.get(c.id))}n.set(c.id,r)}})}function keyExistAndEqual(a,n,r){var o=convertOptionIdName(n[a],null),l=convertOptionIdName(r[a],null);return o!=null&&l!=null&&o===l}function makeComparableKey(a){if(a==null)throw new Error;return convertOptionIdName(a,"")}function convertOptionIdName(a,n){return a==null?n:isString(a)?a:isNumber(a)||isStringSafe(a)?a+"":n}function warnInvalidateIdOrName(a){warn("`"+a+"` is invalid id or name. Must be a string or number.")}function isValidIdOrName(a){return isStringSafe(a)||isNumeric(a)}function isNameSpecified(a){var n=a.name;return!!(n&&n.indexOf(DUMMY_COMPONENT_NAME_PREFIX))}function isComponentIdInternal(a){return a&&a.id!=null&&makeComparableKey(a.id).indexOf(INTERNAL_COMPONENT_ID_PREFIX)===0}function makeInternalComponentId(a){return INTERNAL_COMPONENT_ID_PREFIX+a}function setComponentTypeToKeyInfo(a,n,r){each$f(a,function(o){var l=o.newOption;isObject$3(l)&&(o.keyInfo.mainType=n,o.keyInfo.subType=determineSubType(n,l,o.existing,r))})}function determineSubType(a,n,r,o){var l=n.type?n.type:r?r.subType:o.determineSubType(a,n);return l}function compressBatches(a,n){var r={},o={};return l(a||[],r),l(n||[],o,r),[u(r),u(o)];function l(c,h,d){for(var p=0,f=c.length;p<f;p++){var g=convertOptionIdName(c[p].seriesId,null);if(g==null)return;for(var y=normalizeToArray(c[p].dataIndex),v=d&&d[g],_=0,x=y.length;_<x;_++){var S=y[_];v&&v[S]?v[S]=null:(h[g]||(h[g]={}))[S]=1}}}function u(c,h){var d=[];for(var p in c)if(c.hasOwnProperty(p)&&c[p]!=null)if(h)d.push(+p);else{var f=u(c[p],!0);f.length&&d.push({seriesId:p,dataIndex:f})}return d}}function queryDataIndex(a,n){if(n.dataIndexInside!=null)return n.dataIndexInside;if(n.dataIndex!=null)return isArray$1(n.dataIndex)?map$1(n.dataIndex,function(r){return a.indexOfRawIndex(r)}):a.indexOfRawIndex(n.dataIndex);if(n.name!=null)return isArray$1(n.name)?map$1(n.name,function(r){return a.indexOfName(r)}):a.indexOfName(n.name)}function makeInner(){var a="__ec_inner_"+innerUniqueIndex++;return function(n){return n[a]||(n[a]={})}}var innerUniqueIndex=getRandomIdBase();function parseFinder$1(a,n,r){var o=preParseFinder(n,r),l=o.mainTypeSpecified,u=o.queryOptionMap,c=o.others,h=c,d=r?r.defaultMainType:null;return!l&&d&&u.set(d,{}),u.each(function(p,f){var g=queryReferringComponents(a,f,p,{useDefault:d===f,enableAll:r&&r.enableAll!=null?r.enableAll:!0,enableNone:r&&r.enableNone!=null?r.enableNone:!0});h[f+"Models"]=g.models,h[f+"Model"]=g.models[0]}),h}function preParseFinder(a,n){var r;if(isString(a)){var o={};o[a+"Index"]=0,r=o}else r=a;var l=createHashMap(),u={},c=!1;return each$f(r,function(h,d){if(d==="dataIndex"||d==="dataIndexInside"){u[d]=h;return}var p=d.match(/^(\w+)(Index|Id|Name)$/)||[],f=p[1],g=(p[2]||"").toLowerCase();if(!(!f||!g||n&&n.includeMainTypes&&indexOf(n.includeMainTypes,f)<0)){c=c||!!f;var y=l.get(f)||l.set(f,{});y[g]=h}}),{mainTypeSpecified:c,queryOptionMap:l,others:u}}var SINGLE_REFERRING={useDefault:!0,enableAll:!1,enableNone:!1},MULTIPLE_REFERRING={useDefault:!1,enableAll:!0,enableNone:!0};function queryReferringComponents(a,n,r,o){o=o||SINGLE_REFERRING;var l=r.index,u=r.id,c=r.name,h={models:null,specified:l!=null||u!=null||c!=null};if(!h.specified){var d=void 0;return h.models=o.useDefault&&(d=a.getComponent(n))?[d]:[],h}return l==="none"||l===!1?(assert(o.enableNone,'`"none"` or `false` is not a valid value on index option.'),h.models=[],h):(l==="all"&&(assert(o.enableAll,'`"all"` is not a valid value on index option.'),l=u=c=null),h.models=a.queryComponents({mainType:n,index:l,id:u,name:c}),h)}function setAttribute(a,n,r){a.setAttribute?a.setAttribute(n,r):a[n]=r}function getAttribute(a,n){return a.getAttribute?a.getAttribute(n):a[n]}function getTooltipRenderMode(a){return a==="auto"?env$1.domSupported?"html":"richText":a||"html"}function groupData(a,n){var r=createHashMap(),o=[];return each$f(a,function(l){var u=n(l);(r.get(u)||(o.push(u),r.set(u,[]))).push(l)}),{keys:o,buckets:r}}function interpolateRawValues(a,n,r,o,l){var u=n==null||n==="auto";if(o==null)return o;if(isNumber(o)){var c=interpolateNumber(r||0,o,l);return round$3(c,u?Math.max(getPrecision(r||0),getPrecision(o)):n)}else{if(isString(o))return l<1?r:o;for(var h=[],d=r,p=o,f=Math.max(d?d.length:0,p.length),g=0;g<f;++g){var y=a.getDimensionInfo(g);if(y&&y.type==="ordinal")h[g]=(l<1&&d?d:p)[g];else{var v=d&&d[g]?d[g]:0,_=p[g],c=interpolateNumber(v,_,l);h[g]=round$3(c,u?Math.max(getPrecision(v),getPrecision(_)):n)}}return h}}var TYPE_DELIMITER=".",IS_CONTAINER="___EC__COMPONENT__CONTAINER___",IS_EXTENDED_CLASS="___EC__EXTENDED_CLASS___";function parseClassType(a){var n={main:"",sub:""};if(a){var r=a.split(TYPE_DELIMITER);n.main=r[0]||"",n.sub=r[1]||""}return n}function checkClassType(a){assert(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(a),'componentType "'+a+'" illegal')}function isExtendedClass(a){return!!(a&&a[IS_EXTENDED_CLASS])}function enableClassExtend(a,n){a.$constructor=a,a.extend=function(r){each$f(n,function(u){r[u]||console.warn("Method `"+u+"` should be implemented"+(r.type?" in "+r.type:"")+".")});var o=this,l;return isESClass(o)?l=function(u){__extends(c,u);function c(){return u.apply(this,arguments)||this}return c}(o):(l=function(){(r.$constructor||o).apply(this,arguments)},inherits(l,this)),extend(l.prototype,r),l[IS_EXTENDED_CLASS]=!0,l.extend=this.extend,l.superCall=superCall,l.superApply=superApply,l.superClass=o,l}}function isESClass(a){return isFunction(a)&&/^class\s/.test(Function.prototype.toString.call(a))}function mountExtend(a,n){a.extend=n.extend}var classBase=Math.round(Math.random()*10);function enableClassCheck(a){var n=["__\0is_clz",classBase++].join("_");a.prototype[n]=!0,assert(!a.isInstance,'The method "is" can not be defined.'),a.isInstance=function(r){return!!(r&&r[n])}}function superCall(a,n){for(var r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];return this.superClass.prototype[n].apply(a,r)}function superApply(a,n,r){return this.superClass.prototype[n].apply(a,r)}function enableClassManagement(a){var n={};a.registerClass=function(o){var l=o.type||o.prototype.type;if(l){checkClassType(l),o.prototype.type=l;var u=parseClassType(l);if(!u.sub)n[u.main]&&console.warn(u.main+" exists."),n[u.main]=o;else if(u.sub!==IS_CONTAINER){var c=r(u);c[u.sub]=o}}return o},a.getClass=function(o,l,u){var c=n[o];if(c&&c[IS_CONTAINER]&&(c=l?c[l]:null),u&&!c)throw new Error(l?"Component "+o+"."+(l||"")+" is used but not imported.":o+".type should be specified.");return c},a.getClassesByMainType=function(o){var l=parseClassType(o),u=[],c=n[l.main];return c&&c[IS_CONTAINER]?each$f(c,function(h,d){d!==IS_CONTAINER&&u.push(h)}):u.push(c),u},a.hasClass=function(o){var l=parseClassType(o);return!!n[l.main]},a.getAllClassMainTypes=function(){var o=[];return each$f(n,function(l,u){o.push(u)}),o},a.hasSubTypes=function(o){var l=parseClassType(o),u=n[l.main];return u&&u[IS_CONTAINER]};function r(o){var l=n[o.main];return(!l||!l[IS_CONTAINER])&&(l=n[o.main]={},l[IS_CONTAINER]=!0),l}}function makeStyleMapper(a,n){for(var r=0;r<a.length;r++)a[r][1]||(a[r][1]=a[r][0]);return n=n||!1,function(o,l,u){for(var c={},h=0;h<a.length;h++){var d=a[h][1];if(!(l&&indexOf(l,d)>=0||u&&indexOf(u,d)<0)){var p=o.getShallow(d,n);p!=null&&(c[a[h][0]]=p)}}return c}}var AREA_STYLE_KEY_MAP=[["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]],getAreaStyle=makeStyleMapper(AREA_STYLE_KEY_MAP),AreaStyleMixin=function(){function a(){}return a.prototype.getAreaStyle=function(n,r){return getAreaStyle(this,n,r)},a}(),globalImageCache=new LRU$1(50);function findExistImage(a){if(typeof a=="string"){var n=globalImageCache.get(a);return n&&n.image}else return a}function createOrUpdateImage(a,n,r,o,l){if(a)if(typeof a=="string"){if(n&&n.__zrImageSrc===a||!r)return n;var u=globalImageCache.get(a),c={hostEl:r,cb:o,cbPayload:l};return u?(n=u.image,!isImageReady(n)&&u.pending.push(c)):(n=platformApi.loadImage(a,imageOnLoad,imageOnLoad),n.__zrImageSrc=a,globalImageCache.put(a,n.__cachedImgObj={image:n,pending:[c]})),n}else return a;else return n}function imageOnLoad(){var a=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var n=0;n<a.pending.length;n++){var r=a.pending[n],o=r.cb;o&&o(this,r.cbPayload),r.hostEl.dirty()}a.pending.length=0}function isImageReady(a){return a&&a.width&&a.height}var STYLE_REG=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g;function truncateText(a,n,r,o,l){var u={};return truncateText2(u,a,n,r,o,l),u.text}function truncateText2(a,n,r,o,l,u){if(!r){a.text="",a.isTruncated=!1;return}var c=(n+"").split(`
`);u=prepareTruncateOptions(r,o,l,u);for(var h=!1,d={},p=0,f=c.length;p<f;p++)truncateSingleLine(d,c[p],u),c[p]=d.textLine,h=h||d.isTruncated;a.text=c.join(`
`),a.isTruncated=h}function prepareTruncateOptions(a,n,r,o){o=o||{};var l=extend({},o);l.font=n,r=retrieve2(r,"..."),l.maxIterations=retrieve2(o.maxIterations,2);var u=l.minChar=retrieve2(o.minChar,0);l.cnCharWidth=getWidth("\u56FD",n);var c=l.ascCharWidth=getWidth("a",n);l.placeholder=retrieve2(o.placeholder,"");for(var h=a=Math.max(0,a-1),d=0;d<u&&h>=c;d++)h-=c;var p=getWidth(r,n);return p>h&&(r="",p=0),h=a-p,l.ellipsis=r,l.ellipsisWidth=p,l.contentWidth=h,l.containerWidth=a,l}function truncateSingleLine(a,n,r){var o=r.containerWidth,l=r.font,u=r.contentWidth;if(!o){a.textLine="",a.isTruncated=!1;return}var c=getWidth(n,l);if(c<=o){a.textLine=n,a.isTruncated=!1;return}for(var h=0;;h++){if(c<=u||h>=r.maxIterations){n+=r.ellipsis;break}var d=h===0?estimateLength(n,u,r.ascCharWidth,r.cnCharWidth):c>0?Math.floor(n.length*u/c):0;n=n.substr(0,d),c=getWidth(n,l)}n===""&&(n=r.placeholder),a.textLine=n,a.isTruncated=!0}function estimateLength(a,n,r,o){for(var l=0,u=0,c=a.length;u<c&&l<n;u++){var h=a.charCodeAt(u);l+=0<=h&&h<=127?r:o}return u}function parsePlainText(a,n){a!=null&&(a+="");var r=n.overflow,o=n.padding,l=n.font,u=r==="truncate",c=getLineHeight(l),h=retrieve2(n.lineHeight,c),d=!!n.backgroundColor,p=n.lineOverflow==="truncate",f=!1,g=n.width,y;g!=null&&(r==="break"||r==="breakAll")?y=a?wrapText(a,n.font,g,r==="breakAll",0).lines:[]:y=a?a.split(`
`):[];var v=y.length*h,_=retrieve2(n.height,v);if(v>_&&p){var x=Math.floor(_/h);f=f||y.length>x,y=y.slice(0,x)}if(a&&u&&g!=null)for(var S=prepareTruncateOptions(g,l,n.ellipsis,{minChar:n.truncateMinChar,placeholder:n.placeholder}),T={},M=0;M<y.length;M++)truncateSingleLine(T,y[M],S),y[M]=T.textLine,f=f||T.isTruncated;for(var b=_,A=0,M=0;M<y.length;M++)A=Math.max(getWidth(y[M],l),A);g==null&&(g=A);var I=A;return o&&(b+=o[0]+o[2],I+=o[1]+o[3],g+=o[1]+o[3]),d&&(I=g),{lines:y,height:_,outerWidth:I,outerHeight:b,lineHeight:h,calculatedLineHeight:c,contentWidth:A,contentHeight:v,width:g,isTruncated:f}}var RichTextToken=function(){function a(){}return a}(),RichTextLine=function(){function a(n){this.tokens=[],n&&(this.tokens=n)}return a}(),RichTextContentBlock=function(){function a(){this.width=0,this.height=0,this.contentWidth=0,this.contentHeight=0,this.outerWidth=0,this.outerHeight=0,this.lines=[],this.isTruncated=!1}return a}();function parseRichText(a,n){var r=new RichTextContentBlock;if(a!=null&&(a+=""),!a)return r;for(var o=n.width,l=n.height,u=n.overflow,c=(u==="break"||u==="breakAll")&&o!=null?{width:o,accumWidth:0,breakAll:u==="breakAll"}:null,h=STYLE_REG.lastIndex=0,d;(d=STYLE_REG.exec(a))!=null;){var p=d.index;p>h&&pushTokens(r,a.substring(h,p),n,c),pushTokens(r,d[2],n,c,d[1]),h=STYLE_REG.lastIndex}h<a.length&&pushTokens(r,a.substring(h,a.length),n,c);var f=[],g=0,y=0,v=n.padding,_=u==="truncate",x=n.lineOverflow==="truncate",S={};function T(H,U,Y){H.width=U,H.lineHeight=Y,g+=Y,y=Math.max(y,U)}e:for(var M=0;M<r.lines.length;M++){for(var b=r.lines[M],A=0,I=0,w=0;w<b.tokens.length;w++){var C=b.tokens[w],E=C.styleName&&n.rich[C.styleName]||{},P=C.textPadding=E.padding,D=P?P[1]+P[3]:0,L=C.font=E.font||n.font;C.contentHeight=getLineHeight(L);var R=retrieve2(E.height,C.contentHeight);if(C.innerHeight=R,P&&(R+=P[0]+P[2]),C.height=R,C.lineHeight=retrieve3(E.lineHeight,n.lineHeight,R),C.align=E&&E.align||n.align,C.verticalAlign=E&&E.verticalAlign||"middle",x&&l!=null&&g+C.lineHeight>l){var O=r.lines.length;w>0?(b.tokens=b.tokens.slice(0,w),T(b,I,A),r.lines=r.lines.slice(0,M+1)):r.lines=r.lines.slice(0,M),r.isTruncated=r.isTruncated||r.lines.length<O;break e}var N=E.width,V=N==null||N==="auto";if(typeof N=="string"&&N.charAt(N.length-1)==="%")C.percentWidth=N,f.push(C),C.contentWidth=getWidth(C.text,L);else{if(V){var B=E.backgroundColor,G=B&&B.image;G&&(G=findExistImage(G),isImageReady(G)&&(C.width=Math.max(C.width,G.width*R/G.height)))}var F=_&&o!=null?o-I:null;F!=null&&F<C.width?!V||F<D?(C.text="",C.width=C.contentWidth=0):(truncateText2(S,C.text,F-D,L,n.ellipsis,{minChar:n.truncateMinChar}),C.text=S.text,r.isTruncated=r.isTruncated||S.isTruncated,C.width=C.contentWidth=getWidth(C.text,L)):C.contentWidth=getWidth(C.text,L)}C.width+=D,I+=C.width,E&&(A=Math.max(A,C.lineHeight))}T(b,I,A)}r.outerWidth=r.width=retrieve2(o,y),r.outerHeight=r.height=retrieve2(l,g),r.contentHeight=g,r.contentWidth=y,v&&(r.outerWidth+=v[1]+v[3],r.outerHeight+=v[0]+v[2]);for(var M=0;M<f.length;M++){var C=f[M],z=C.percentWidth;C.width=parseInt(z,10)/100*r.width}return r}function pushTokens(a,n,r,o,l){var u=n==="",c=l&&r.rich[l]||{},h=a.lines,d=c.font||r.font,p=!1,f,g;if(o){var y=c.padding,v=y?y[1]+y[3]:0;if(c.width!=null&&c.width!=="auto"){var _=parsePercent$1(c.width,o.width)+v;h.length>0&&_+o.accumWidth>o.width&&(f=n.split(`
`),p=!0),o.accumWidth=_}else{var x=wrapText(n,d,o.width,o.breakAll,o.accumWidth);o.accumWidth=x.accumWidth+v,g=x.linesWidths,f=x.lines}}else f=n.split(`
`);for(var S=0;S<f.length;S++){var T=f[S],M=new RichTextToken;if(M.styleName=l,M.text=T,M.isLineHolder=!T&&!u,typeof c.width=="number"?M.width=c.width:M.width=g?g[S]:getWidth(T,d),!S&&!p){var b=(h[h.length-1]||(h[0]=new RichTextLine)).tokens,A=b.length;A===1&&b[0].isLineHolder?b[0]=M:(T||!A||u)&&b.push(M)}else h.push(new RichTextLine([M]))}}function isAlphabeticLetter(a){var n=a.charCodeAt(0);return n>=32&&n<=591||n>=880&&n<=4351||n>=4608&&n<=5119||n>=7680&&n<=8303}var breakCharMap=reduce(",&?/;] ".split(""),function(a,n){return a[n]=!0,a},{});function isWordBreakChar(a){return isAlphabeticLetter(a)?!!breakCharMap[a]:!0}function wrapText(a,n,r,o,l){for(var u=[],c=[],h="",d="",p=0,f=0,g=0;g<a.length;g++){var y=a.charAt(g);if(y===`
`){d&&(h+=d,f+=p),u.push(h),c.push(f),h="",d="",p=0,f=0;continue}var v=getWidth(y,n),_=o?!1:!isWordBreakChar(y);if(u.length?f+v>r:l+f+v>r){f?(h||d)&&(_?(h||(h=d,d="",p=0,f=p),u.push(h),c.push(f-p),d+=y,p+=v,h="",f=p):(d&&(h+=d,d="",p=0),u.push(h),c.push(f),h=y,f=v)):_?(u.push(d),c.push(p),d=y,p=v):(u.push(y),c.push(v));continue}f+=v,_?(d+=y,p+=v):(d&&(h+=d,d="",p=0),h+=y)}return!u.length&&!h&&(h=a,d="",p=0),d&&(h+=d),h&&(u.push(h),c.push(f)),u.length===1&&(f+=l),{accumWidth:f,lines:u,linesWidths:c}}var STYLE_MAGIC_KEY="__zr_style_"+Math.round(Math.random()*10),DEFAULT_COMMON_STYLE={shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",opacity:1,blend:"source-over"},DEFAULT_COMMON_ANIMATION_PROPS={style:{shadowBlur:!0,shadowOffsetX:!0,shadowOffsetY:!0,shadowColor:!0,opacity:!0}};DEFAULT_COMMON_STYLE[STYLE_MAGIC_KEY]=!0;var PRIMARY_STATES_KEYS=["z","z2","invisible"],PRIMARY_STATES_KEYS_IN_HOVER_LAYER=["invisible"],Displayable=function(a){__extends(n,a);function n(r){return a.call(this,r)||this}return n.prototype._init=function(r){for(var o=keys(r),l=0;l<o.length;l++){var u=o[l];u==="style"?this.useStyle(r[u]):a.prototype.attrKV.call(this,u,r[u])}this.style||this.useStyle({})},n.prototype.beforeBrush=function(){},n.prototype.afterBrush=function(){},n.prototype.innerBeforeBrush=function(){},n.prototype.innerAfterBrush=function(){},n.prototype.shouldBePainted=function(r,o,l,u){var c=this.transform;if(this.ignore||this.invisible||this.style.opacity===0||this.culling&&isDisplayableCulled(this,r,o)||c&&!c[0]&&!c[3])return!1;if(l&&this.__clipPaths){for(var h=0;h<this.__clipPaths.length;++h)if(this.__clipPaths[h].isZeroArea())return!1}if(u&&this.parent)for(var d=this.parent;d;){if(d.ignore)return!1;d=d.parent}return!0},n.prototype.contain=function(r,o){return this.rectContain(r,o)},n.prototype.traverse=function(r,o){r.call(o,this)},n.prototype.rectContain=function(r,o){var l=this.transformCoordToLocal(r,o),u=this.getBoundingRect();return u.contain(l[0],l[1])},n.prototype.getPaintRect=function(){var r=this._paintRect;if(!this._paintRect||this.__dirty){var o=this.transform,l=this.getBoundingRect(),u=this.style,c=u.shadowBlur||0,h=u.shadowOffsetX||0,d=u.shadowOffsetY||0;r=this._paintRect||(this._paintRect=new BoundingRect$1(0,0,0,0)),o?BoundingRect$1.applyTransform(r,l,o):r.copy(l),(c||h||d)&&(r.width+=c*2+Math.abs(h),r.height+=c*2+Math.abs(d),r.x=Math.min(r.x,r.x+h-c),r.y=Math.min(r.y,r.y+d-c));var p=this.dirtyRectTolerance;r.isZero()||(r.x=Math.floor(r.x-p),r.y=Math.floor(r.y-p),r.width=Math.ceil(r.width+1+p*2),r.height=Math.ceil(r.height+1+p*2))}return r},n.prototype.setPrevPaintRect=function(r){r?(this._prevPaintRect=this._prevPaintRect||new BoundingRect$1(0,0,0,0),this._prevPaintRect.copy(r)):this._prevPaintRect=null},n.prototype.getPrevPaintRect=function(){return this._prevPaintRect},n.prototype.animateStyle=function(r){return this.animate("style",r)},n.prototype.updateDuringAnimation=function(r){r==="style"?this.dirtyStyle():this.markRedraw()},n.prototype.attrKV=function(r,o){r!=="style"?a.prototype.attrKV.call(this,r,o):this.style?this.setStyle(o):this.useStyle(o)},n.prototype.setStyle=function(r,o){return typeof r=="string"?this.style[r]=o:extend(this.style,r),this.dirtyStyle(),this},n.prototype.dirtyStyle=function(r){r||this.markRedraw(),this.__dirty|=STYLE_CHANGED_BIT,this._rect&&(this._rect=null)},n.prototype.dirty=function(){this.dirtyStyle()},n.prototype.styleChanged=function(){return!!(this.__dirty&STYLE_CHANGED_BIT)},n.prototype.styleUpdated=function(){this.__dirty&=~STYLE_CHANGED_BIT},n.prototype.createStyle=function(r){return createObject(DEFAULT_COMMON_STYLE,r)},n.prototype.useStyle=function(r){r[STYLE_MAGIC_KEY]||(r=this.createStyle(r)),this.__inHover?this.__hoverStyle=r:this.style=r,this.dirtyStyle()},n.prototype.isStyleObject=function(r){return r[STYLE_MAGIC_KEY]},n.prototype._innerSaveToNormal=function(r){a.prototype._innerSaveToNormal.call(this,r);var o=this._normalState;r.style&&!o.style&&(o.style=this._mergeStyle(this.createStyle(),this.style)),this._savePrimaryToNormal(r,o,PRIMARY_STATES_KEYS)},n.prototype._applyStateObj=function(r,o,l,u,c,h){a.prototype._applyStateObj.call(this,r,o,l,u,c,h);var d=!(o&&u),p;if(o&&o.style?c?u?p=o.style:(p=this._mergeStyle(this.createStyle(),l.style),this._mergeStyle(p,o.style)):(p=this._mergeStyle(this.createStyle(),u?this.style:l.style),this._mergeStyle(p,o.style)):d&&(p=l.style),p)if(c){var f=this.style;if(this.style=this.createStyle(d?{}:f),d)for(var g=keys(f),y=0;y<g.length;y++){var v=g[y];v in p&&(p[v]=p[v],this.style[v]=f[v])}for(var _=keys(p),y=0;y<_.length;y++){var v=_[y];this.style[v]=this.style[v]}this._transitionState(r,{style:p},h,this.getAnimationStyleProps())}else this.useStyle(p);for(var x=this.__inHover?PRIMARY_STATES_KEYS_IN_HOVER_LAYER:PRIMARY_STATES_KEYS,y=0;y<x.length;y++){var v=x[y];o&&o[v]!=null?this[v]=o[v]:d&&l[v]!=null&&(this[v]=l[v])}},n.prototype._mergeStates=function(r){for(var o=a.prototype._mergeStates.call(this,r),l,u=0;u<r.length;u++){var c=r[u];c.style&&(l=l||{},this._mergeStyle(l,c.style))}return l&&(o.style=l),o},n.prototype._mergeStyle=function(r,o){return extend(r,o),r},n.prototype.getAnimationStyleProps=function(){return DEFAULT_COMMON_ANIMATION_PROPS},n.initDefaultProps=function(){var r=n.prototype;r.type="displayable",r.invisible=!1,r.z=0,r.z2=0,r.zlevel=0,r.culling=!1,r.cursor="pointer",r.rectHover=!1,r.incremental=!1,r._rect=null,r.dirtyRectTolerance=0,r.__dirty=REDRAW_BIT|STYLE_CHANGED_BIT}(),n}(Element$1),tmpRect=new BoundingRect$1(0,0,0,0),viewRect=new BoundingRect$1(0,0,0,0);function isDisplayableCulled(a,n,r){return tmpRect.copy(a.getBoundingRect()),a.transform&&tmpRect.applyTransform(a.transform),viewRect.width=n,viewRect.height=r,!tmpRect.intersect(viewRect)}const Displayable$1=Displayable;var mathMin$9=Math.min,mathMax$9=Math.max,mathSin$4=Math.sin,mathCos$4=Math.cos,PI2$8=Math.PI*2,start=create$2(),end=create$2(),extremity=create$2();function fromPoints(a,n,r){if(a.length!==0){for(var o=a[0],l=o[0],u=o[0],c=o[1],h=o[1],d=1;d<a.length;d++)o=a[d],l=mathMin$9(l,o[0]),u=mathMax$9(u,o[0]),c=mathMin$9(c,o[1]),h=mathMax$9(h,o[1]);n[0]=l,n[1]=c,r[0]=u,r[1]=h}}function fromLine(a,n,r,o,l,u){l[0]=mathMin$9(a,r),l[1]=mathMin$9(n,o),u[0]=mathMax$9(a,r),u[1]=mathMax$9(n,o)}var xDim=[],yDim=[];function fromCubic(a,n,r,o,l,u,c,h,d,p){var f=cubicExtrema,g=cubicAt,y=f(a,r,l,c,xDim);d[0]=1/0,d[1]=1/0,p[0]=-1/0,p[1]=-1/0;for(var v=0;v<y;v++){var _=g(a,r,l,c,xDim[v]);d[0]=mathMin$9(_,d[0]),p[0]=mathMax$9(_,p[0])}y=f(n,o,u,h,yDim);for(var v=0;v<y;v++){var x=g(n,o,u,h,yDim[v]);d[1]=mathMin$9(x,d[1]),p[1]=mathMax$9(x,p[1])}d[0]=mathMin$9(a,d[0]),p[0]=mathMax$9(a,p[0]),d[0]=mathMin$9(c,d[0]),p[0]=mathMax$9(c,p[0]),d[1]=mathMin$9(n,d[1]),p[1]=mathMax$9(n,p[1]),d[1]=mathMin$9(h,d[1]),p[1]=mathMax$9(h,p[1])}function fromQuadratic(a,n,r,o,l,u,c,h){var d=quadraticExtremum,p=quadraticAt$1,f=mathMax$9(mathMin$9(d(a,r,l),1),0),g=mathMax$9(mathMin$9(d(n,o,u),1),0),y=p(a,r,l,f),v=p(n,o,u,g);c[0]=mathMin$9(a,l,y),c[1]=mathMin$9(n,u,v),h[0]=mathMax$9(a,l,y),h[1]=mathMax$9(n,u,v)}function fromArc(a,n,r,o,l,u,c,h,d){var p=min$1,f=max$1,g=Math.abs(l-u);if(g%PI2$8<1e-4&&g>1e-4){h[0]=a-r,h[1]=n-o,d[0]=a+r,d[1]=n+o;return}if(start[0]=mathCos$4(l)*r+a,start[1]=mathSin$4(l)*o+n,end[0]=mathCos$4(u)*r+a,end[1]=mathSin$4(u)*o+n,p(h,start,end),f(d,start,end),l=l%PI2$8,l<0&&(l=l+PI2$8),u=u%PI2$8,u<0&&(u=u+PI2$8),l>u&&!c?u+=PI2$8:l<u&&c&&(l+=PI2$8),c){var y=u;u=l,l=y}for(var v=0;v<u;v+=Math.PI/2)v>l&&(extremity[0]=mathCos$4(v)*r+a,extremity[1]=mathSin$4(v)*o+n,p(h,extremity,h),f(d,extremity,d))}var CMD$4={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},tmpOutX=[],tmpOutY=[],min=[],max=[],min2=[],max2=[],mathMin$8=Math.min,mathMax$8=Math.max,mathCos$3=Math.cos,mathSin$3=Math.sin,mathAbs$2=Math.abs,PI$8=Math.PI,PI2$7=PI$8*2,hasTypedArray=typeof Float32Array<"u",tmpAngles=[];function modPI2(a){var n=Math.round(a/PI$8*1e8)/1e8;return n%2*PI$8}function normalizeArcAngles(a,n){var r=modPI2(a[0]);r<0&&(r+=PI2$7);var o=r-a[0],l=a[1];l+=o,!n&&l-r>=PI2$7?l=r+PI2$7:n&&r-l>=PI2$7?l=r-PI2$7:!n&&r>l?l=r+(PI2$7-modPI2(r-l)):n&&r<l&&(l=r-(PI2$7-modPI2(l-r))),a[0]=r,a[1]=l}var PathProxy=function(){function a(n){this.dpr=1,this._xi=0,this._yi=0,this._x0=0,this._y0=0,this._len=0,n&&(this._saveData=!1),this._saveData&&(this.data=[])}return a.prototype.increaseVersion=function(){this._version++},a.prototype.getVersion=function(){return this._version},a.prototype.setScale=function(n,r,o){o=o||0,o>0&&(this._ux=mathAbs$2(o/devicePixelRatio/n)||0,this._uy=mathAbs$2(o/devicePixelRatio/r)||0)},a.prototype.setDPR=function(n){this.dpr=n},a.prototype.setContext=function(n){this._ctx=n},a.prototype.getContext=function(){return this._ctx},a.prototype.beginPath=function(){return this._ctx&&this._ctx.beginPath(),this.reset(),this},a.prototype.reset=function(){this._saveData&&(this._len=0),this._pathSegLen&&(this._pathSegLen=null,this._pathLen=0),this._version++},a.prototype.moveTo=function(n,r){return this._drawPendingPt(),this.addData(CMD$4.M,n,r),this._ctx&&this._ctx.moveTo(n,r),this._x0=n,this._y0=r,this._xi=n,this._yi=r,this},a.prototype.lineTo=function(n,r){var o=mathAbs$2(n-this._xi),l=mathAbs$2(r-this._yi),u=o>this._ux||l>this._uy;if(this.addData(CMD$4.L,n,r),this._ctx&&u&&this._ctx.lineTo(n,r),u)this._xi=n,this._yi=r,this._pendingPtDist=0;else{var c=o*o+l*l;c>this._pendingPtDist&&(this._pendingPtX=n,this._pendingPtY=r,this._pendingPtDist=c)}return this},a.prototype.bezierCurveTo=function(n,r,o,l,u,c){return this._drawPendingPt(),this.addData(CMD$4.C,n,r,o,l,u,c),this._ctx&&this._ctx.bezierCurveTo(n,r,o,l,u,c),this._xi=u,this._yi=c,this},a.prototype.quadraticCurveTo=function(n,r,o,l){return this._drawPendingPt(),this.addData(CMD$4.Q,n,r,o,l),this._ctx&&this._ctx.quadraticCurveTo(n,r,o,l),this._xi=o,this._yi=l,this},a.prototype.arc=function(n,r,o,l,u,c){this._drawPendingPt(),tmpAngles[0]=l,tmpAngles[1]=u,normalizeArcAngles(tmpAngles,c),l=tmpAngles[0],u=tmpAngles[1];var h=u-l;return this.addData(CMD$4.A,n,r,o,o,l,h,0,c?0:1),this._ctx&&this._ctx.arc(n,r,o,l,u,c),this._xi=mathCos$3(u)*o+n,this._yi=mathSin$3(u)*o+r,this},a.prototype.arcTo=function(n,r,o,l,u){return this._drawPendingPt(),this._ctx&&this._ctx.arcTo(n,r,o,l,u),this},a.prototype.rect=function(n,r,o,l){return this._drawPendingPt(),this._ctx&&this._ctx.rect(n,r,o,l),this.addData(CMD$4.R,n,r,o,l),this},a.prototype.closePath=function(){this._drawPendingPt(),this.addData(CMD$4.Z);var n=this._ctx,r=this._x0,o=this._y0;return n&&n.closePath(),this._xi=r,this._yi=o,this},a.prototype.fill=function(n){n&&n.fill(),this.toStatic()},a.prototype.stroke=function(n){n&&n.stroke(),this.toStatic()},a.prototype.len=function(){return this._len},a.prototype.setData=function(n){var r=n.length;!(this.data&&this.data.length===r)&&hasTypedArray&&(this.data=new Float32Array(r));for(var o=0;o<r;o++)this.data[o]=n[o];this._len=r},a.prototype.appendPath=function(n){n instanceof Array||(n=[n]);for(var r=n.length,o=0,l=this._len,u=0;u<r;u++)o+=n[u].len();hasTypedArray&&this.data instanceof Float32Array&&(this.data=new Float32Array(l+o));for(var u=0;u<r;u++)for(var c=n[u].data,h=0;h<c.length;h++)this.data[l++]=c[h];this._len=l},a.prototype.addData=function(n,r,o,l,u,c,h,d,p){if(this._saveData){var f=this.data;this._len+arguments.length>f.length&&(this._expandData(),f=this.data);for(var g=0;g<arguments.length;g++)f[this._len++]=arguments[g]}},a.prototype._drawPendingPt=function(){this._pendingPtDist>0&&(this._ctx&&this._ctx.lineTo(this._pendingPtX,this._pendingPtY),this._pendingPtDist=0)},a.prototype._expandData=function(){if(!(this.data instanceof Array)){for(var n=[],r=0;r<this._len;r++)n[r]=this.data[r];this.data=n}},a.prototype.toStatic=function(){if(this._saveData){this._drawPendingPt();var n=this.data;n instanceof Array&&(n.length=this._len,hasTypedArray&&this._len>11&&(this.data=new Float32Array(n)))}},a.prototype.getBoundingRect=function(){min[0]=min[1]=min2[0]=min2[1]=Number.MAX_VALUE,max[0]=max[1]=max2[0]=max2[1]=-Number.MAX_VALUE;var n=this.data,r=0,o=0,l=0,u=0,c;for(c=0;c<this._len;){var h=n[c++],d=c===1;switch(d&&(r=n[c],o=n[c+1],l=r,u=o),h){case CMD$4.M:r=l=n[c++],o=u=n[c++],min2[0]=l,min2[1]=u,max2[0]=l,max2[1]=u;break;case CMD$4.L:fromLine(r,o,n[c],n[c+1],min2,max2),r=n[c++],o=n[c++];break;case CMD$4.C:fromCubic(r,o,n[c++],n[c++],n[c++],n[c++],n[c],n[c+1],min2,max2),r=n[c++],o=n[c++];break;case CMD$4.Q:fromQuadratic(r,o,n[c++],n[c++],n[c],n[c+1],min2,max2),r=n[c++],o=n[c++];break;case CMD$4.A:var p=n[c++],f=n[c++],g=n[c++],y=n[c++],v=n[c++],_=n[c++]+v;c+=1;var x=!n[c++];d&&(l=mathCos$3(v)*g+p,u=mathSin$3(v)*y+f),fromArc(p,f,g,y,v,_,x,min2,max2),r=mathCos$3(_)*g+p,o=mathSin$3(_)*y+f;break;case CMD$4.R:l=r=n[c++],u=o=n[c++];var S=n[c++],T=n[c++];fromLine(l,u,l+S,u+T,min2,max2);break;case CMD$4.Z:r=l,o=u;break}min$1(min,min,min2),max$1(max,max,max2)}return c===0&&(min[0]=min[1]=max[0]=max[1]=0),new BoundingRect$1(min[0],min[1],max[0]-min[0],max[1]-min[1])},a.prototype._calculateLength=function(){var n=this.data,r=this._len,o=this._ux,l=this._uy,u=0,c=0,h=0,d=0;this._pathSegLen||(this._pathSegLen=[]);for(var p=this._pathSegLen,f=0,g=0,y=0;y<r;){var v=n[y++],_=y===1;_&&(u=n[y],c=n[y+1],h=u,d=c);var x=-1;switch(v){case CMD$4.M:u=h=n[y++],c=d=n[y++];break;case CMD$4.L:{var S=n[y++],T=n[y++],M=S-u,b=T-c;(mathAbs$2(M)>o||mathAbs$2(b)>l||y===r-1)&&(x=Math.sqrt(M*M+b*b),u=S,c=T);break}case CMD$4.C:{var A=n[y++],I=n[y++],S=n[y++],T=n[y++],w=n[y++],C=n[y++];x=cubicLength(u,c,A,I,S,T,w,C,10),u=w,c=C;break}case CMD$4.Q:{var A=n[y++],I=n[y++],S=n[y++],T=n[y++];x=quadraticLength(u,c,A,I,S,T,10),u=S,c=T;break}case CMD$4.A:var E=n[y++],P=n[y++],D=n[y++],L=n[y++],R=n[y++],O=n[y++],N=O+R;y+=1,_&&(h=mathCos$3(R)*D+E,d=mathSin$3(R)*L+P),x=mathMax$8(D,L)*mathMin$8(PI2$7,Math.abs(O)),u=mathCos$3(N)*D+E,c=mathSin$3(N)*L+P;break;case CMD$4.R:{h=u=n[y++],d=c=n[y++];var V=n[y++],B=n[y++];x=V*2+B*2;break}case CMD$4.Z:{var M=h-u,b=d-c;x=Math.sqrt(M*M+b*b),u=h,c=d;break}}x>=0&&(p[g++]=x,f+=x)}return this._pathLen=f,f},a.prototype.rebuildPath=function(n,r){var o=this.data,l=this._ux,u=this._uy,c=this._len,h,d,p,f,g,y,v=r<1,_,x,S=0,T=0,M,b=0,A,I;if(v&&(this._pathSegLen||this._calculateLength(),_=this._pathSegLen,x=this._pathLen,M=r*x,!M))return;e:for(var w=0;w<c;){var C=o[w++],E=w===1;switch(E&&(p=o[w],f=o[w+1],h=p,d=f),C!==CMD$4.L&&b>0&&(n.lineTo(A,I),b=0),C){case CMD$4.M:h=p=o[w++],d=f=o[w++],n.moveTo(p,f);break;case CMD$4.L:{g=o[w++],y=o[w++];var P=mathAbs$2(g-p),D=mathAbs$2(y-f);if(P>l||D>u){if(v){var L=_[T++];if(S+L>M){var R=(M-S)/L;n.lineTo(p*(1-R)+g*R,f*(1-R)+y*R);break e}S+=L}n.lineTo(g,y),p=g,f=y,b=0}else{var O=P*P+D*D;O>b&&(A=g,I=y,b=O)}break}case CMD$4.C:{var N=o[w++],V=o[w++],B=o[w++],G=o[w++],F=o[w++],z=o[w++];if(v){var L=_[T++];if(S+L>M){var R=(M-S)/L;cubicSubdivide(p,N,B,F,R,tmpOutX),cubicSubdivide(f,V,G,z,R,tmpOutY),n.bezierCurveTo(tmpOutX[1],tmpOutY[1],tmpOutX[2],tmpOutY[2],tmpOutX[3],tmpOutY[3]);break e}S+=L}n.bezierCurveTo(N,V,B,G,F,z),p=F,f=z;break}case CMD$4.Q:{var N=o[w++],V=o[w++],B=o[w++],G=o[w++];if(v){var L=_[T++];if(S+L>M){var R=(M-S)/L;quadraticSubdivide(p,N,B,R,tmpOutX),quadraticSubdivide(f,V,G,R,tmpOutY),n.quadraticCurveTo(tmpOutX[1],tmpOutY[1],tmpOutX[2],tmpOutY[2]);break e}S+=L}n.quadraticCurveTo(N,V,B,G),p=B,f=G;break}case CMD$4.A:var H=o[w++],U=o[w++],Y=o[w++],Z=o[w++],X=o[w++],K=o[w++],te=o[w++],ae=!o[w++],J=Y>Z?Y:Z,j=mathAbs$2(Y-Z)>.001,Q=X+K,W=!1;if(v){var L=_[T++];S+L>M&&(Q=X+K*(M-S)/L,W=!0),S+=L}if(j&&n.ellipse?n.ellipse(H,U,Y,Z,te,X,Q,ae):n.arc(H,U,J,X,Q,ae),W)break e;E&&(h=mathCos$3(X)*Y+H,d=mathSin$3(X)*Z+U),p=mathCos$3(Q)*Y+H,f=mathSin$3(Q)*Z+U;break;case CMD$4.R:h=p=o[w],d=f=o[w+1],g=o[w++],y=o[w++];var q=o[w++],re=o[w++];if(v){var L=_[T++];if(S+L>M){var ee=M-S;n.moveTo(g,y),n.lineTo(g+mathMin$8(ee,q),y),ee-=q,ee>0&&n.lineTo(g+q,y+mathMin$8(ee,re)),ee-=re,ee>0&&n.lineTo(g+mathMax$8(q-ee,0),y+re),ee-=q,ee>0&&n.lineTo(g,y+mathMax$8(re-ee,0));break e}S+=L}n.rect(g,y,q,re);break;case CMD$4.Z:if(v){var L=_[T++];if(S+L>M){var R=(M-S)/L;n.lineTo(p*(1-R)+h*R,f*(1-R)+d*R);break e}S+=L}n.closePath(),p=h,f=d}}},a.prototype.clone=function(){var n=new a,r=this.data;return n.data=r.slice?r.slice():Array.prototype.slice.call(r),n._len=this._len,n},a.CMD=CMD$4,a.initDefaultProps=function(){var n=a.prototype;n._saveData=!0,n._ux=0,n._uy=0,n._pendingPtDist=0,n._version=0}(),a}();const PathProxy$1=PathProxy;function containStroke$4(a,n,r,o,l,u,c){if(l===0)return!1;var h=l,d=0,p=a;if(c>n+h&&c>o+h||c<n-h&&c<o-h||u>a+h&&u>r+h||u<a-h&&u<r-h)return!1;if(a!==r)d=(n-o)/(a-r),p=(a*o-r*n)/(a-r);else return Math.abs(u-a)<=h/2;var f=d*u-c+p,g=f*f/(d*d+1);return g<=h/2*h/2}function containStroke$3(a,n,r,o,l,u,c,h,d,p,f){if(d===0)return!1;var g=d;if(f>n+g&&f>o+g&&f>u+g&&f>h+g||f<n-g&&f<o-g&&f<u-g&&f<h-g||p>a+g&&p>r+g&&p>l+g&&p>c+g||p<a-g&&p<r-g&&p<l-g&&p<c-g)return!1;var y=cubicProjectPoint(a,n,r,o,l,u,c,h,p,f,null);return y<=g/2}function containStroke$2(a,n,r,o,l,u,c,h,d){if(c===0)return!1;var p=c;if(d>n+p&&d>o+p&&d>u+p||d<n-p&&d<o-p&&d<u-p||h>a+p&&h>r+p&&h>l+p||h<a-p&&h<r-p&&h<l-p)return!1;var f=quadraticProjectPoint(a,n,r,o,l,u,h,d,null);return f<=p/2}var PI2$6=Math.PI*2;function normalizeRadian(a){return a%=PI2$6,a<0&&(a+=PI2$6),a}var PI2$5=Math.PI*2;function containStroke$1(a,n,r,o,l,u,c,h,d){if(c===0)return!1;var p=c;h-=a,d-=n;var f=Math.sqrt(h*h+d*d);if(f-p>r||f+p<r)return!1;if(Math.abs(o-l)%PI2$5<1e-4)return!0;if(u){var g=o;o=normalizeRadian(l),l=normalizeRadian(g)}else o=normalizeRadian(o),l=normalizeRadian(l);o>l&&(l+=PI2$5);var y=Math.atan2(d,h);return y<0&&(y+=PI2$5),y>=o&&y<=l||y+PI2$5>=o&&y+PI2$5<=l}function windingLine(a,n,r,o,l,u){if(u>n&&u>o||u<n&&u<o||o===n)return 0;var c=(u-n)/(o-n),h=o<n?1:-1;(c===1||c===0)&&(h=o<n?.5:-.5);var d=c*(r-a)+a;return d===l?1/0:d>l?h:0}var CMD$3=PathProxy$1.CMD,PI2$4=Math.PI*2,EPSILON$1=1e-4;function isAroundEqual$1(a,n){return Math.abs(a-n)<EPSILON$1}var roots=[-1,-1,-1],extrema=[-1,-1];function swapExtrema(){var a=extrema[0];extrema[0]=extrema[1],extrema[1]=a}function windingCubic(a,n,r,o,l,u,c,h,d,p){if(p>n&&p>o&&p>u&&p>h||p<n&&p<o&&p<u&&p<h)return 0;var f=cubicRootAt(n,o,u,h,p,roots);if(f===0)return 0;for(var g=0,y=-1,v=void 0,_=void 0,x=0;x<f;x++){var S=roots[x],T=S===0||S===1?.5:1,M=cubicAt(a,r,l,c,S);M<d||(y<0&&(y=cubicExtrema(n,o,u,h,extrema),extrema[1]<extrema[0]&&y>1&&swapExtrema(),v=cubicAt(n,o,u,h,extrema[0]),y>1&&(_=cubicAt(n,o,u,h,extrema[1]))),y===2?S<extrema[0]?g+=v<n?T:-T:S<extrema[1]?g+=_<v?T:-T:g+=h<_?T:-T:S<extrema[0]?g+=v<n?T:-T:g+=h<v?T:-T)}return g}function windingQuadratic(a,n,r,o,l,u,c,h){if(h>n&&h>o&&h>u||h<n&&h<o&&h<u)return 0;var d=quadraticRootAt(n,o,u,h,roots);if(d===0)return 0;var p=quadraticExtremum(n,o,u);if(p>=0&&p<=1){for(var f=0,g=quadraticAt$1(n,o,u,p),y=0;y<d;y++){var v=roots[y]===0||roots[y]===1?.5:1,_=quadraticAt$1(a,r,l,roots[y]);_<c||(roots[y]<p?f+=g<n?v:-v:f+=u<g?v:-v)}return f}else{var v=roots[0]===0||roots[0]===1?.5:1,_=quadraticAt$1(a,r,l,roots[0]);return _<c?0:u<n?v:-v}}function windingArc(a,n,r,o,l,u,c,h){if(h-=n,h>r||h<-r)return 0;var d=Math.sqrt(r*r-h*h);roots[0]=-d,roots[1]=d;var p=Math.abs(o-l);if(p<1e-4)return 0;if(p>=PI2$4-1e-4){o=0,l=PI2$4;var f=u?1:-1;return c>=roots[0]+a&&c<=roots[1]+a?f:0}if(o>l){var g=o;o=l,l=g}o<0&&(o+=PI2$4,l+=PI2$4);for(var y=0,v=0;v<2;v++){var _=roots[v];if(_+a>c){var x=Math.atan2(h,_),f=u?1:-1;x<0&&(x=PI2$4+x),(x>=o&&x<=l||x+PI2$4>=o&&x+PI2$4<=l)&&(x>Math.PI/2&&x<Math.PI*1.5&&(f=-f),y+=f)}}return y}function containPath(a,n,r,o,l){for(var u=a.data,c=a.len(),h=0,d=0,p=0,f=0,g=0,y,v,_=0;_<c;){var x=u[_++],S=_===1;switch(x===CMD$3.M&&_>1&&(r||(h+=windingLine(d,p,f,g,o,l))),S&&(d=u[_],p=u[_+1],f=d,g=p),x){case CMD$3.M:f=u[_++],g=u[_++],d=f,p=g;break;case CMD$3.L:if(r){if(containStroke$4(d,p,u[_],u[_+1],n,o,l))return!0}else h+=windingLine(d,p,u[_],u[_+1],o,l)||0;d=u[_++],p=u[_++];break;case CMD$3.C:if(r){if(containStroke$3(d,p,u[_++],u[_++],u[_++],u[_++],u[_],u[_+1],n,o,l))return!0}else h+=windingCubic(d,p,u[_++],u[_++],u[_++],u[_++],u[_],u[_+1],o,l)||0;d=u[_++],p=u[_++];break;case CMD$3.Q:if(r){if(containStroke$2(d,p,u[_++],u[_++],u[_],u[_+1],n,o,l))return!0}else h+=windingQuadratic(d,p,u[_++],u[_++],u[_],u[_+1],o,l)||0;d=u[_++],p=u[_++];break;case CMD$3.A:var T=u[_++],M=u[_++],b=u[_++],A=u[_++],I=u[_++],w=u[_++];_+=1;var C=!!(1-u[_++]);y=Math.cos(I)*b+T,v=Math.sin(I)*A+M,S?(f=y,g=v):h+=windingLine(d,p,y,v,o,l);var E=(o-T)*A/b+T;if(r){if(containStroke$1(T,M,A,I,I+w,C,n,E,l))return!0}else h+=windingArc(T,M,A,I,I+w,C,E,l);d=Math.cos(I+w)*b+T,p=Math.sin(I+w)*A+M;break;case CMD$3.R:f=d=u[_++],g=p=u[_++];var P=u[_++],D=u[_++];if(y=f+P,v=g+D,r){if(containStroke$4(f,g,y,g,n,o,l)||containStroke$4(y,g,y,v,n,o,l)||containStroke$4(y,v,f,v,n,o,l)||containStroke$4(f,v,f,g,n,o,l))return!0}else h+=windingLine(y,g,y,v,o,l),h+=windingLine(f,v,f,g,o,l);break;case CMD$3.Z:if(r){if(containStroke$4(d,p,f,g,n,o,l))return!0}else h+=windingLine(d,p,f,g,o,l);d=f,p=g;break}}return!r&&!isAroundEqual$1(p,g)&&(h+=windingLine(d,p,f,g,o,l)||0),h!==0}function contain$2(a,n,r){return containPath(a,0,!1,n,r)}function containStroke(a,n,r,o){return containPath(a,n,!0,r,o)}var DEFAULT_PATH_STYLE=defaults({fill:"#000",stroke:null,strokePercent:1,fillOpacity:1,strokeOpacity:1,lineDashOffset:0,lineWidth:1,lineCap:"butt",miterLimit:10,strokeNoScale:!1,strokeFirst:!1},DEFAULT_COMMON_STYLE),DEFAULT_PATH_ANIMATION_PROPS={style:defaults({fill:!0,stroke:!0,strokePercent:!0,fillOpacity:!0,strokeOpacity:!0,lineDashOffset:!0,lineWidth:!0,miterLimit:!0},DEFAULT_COMMON_ANIMATION_PROPS.style)},pathCopyParams=TRANSFORMABLE_PROPS.concat(["invisible","culling","z","z2","zlevel","parent"]),Path=function(a){__extends(n,a);function n(r){return a.call(this,r)||this}return n.prototype.update=function(){var r=this;a.prototype.update.call(this);var o=this.style;if(o.decal){var l=this._decalEl=this._decalEl||new n;l.buildPath===n.prototype.buildPath&&(l.buildPath=function(d){r.buildPath(d,r.shape)}),l.silent=!0;var u=l.style;for(var c in o)u[c]!==o[c]&&(u[c]=o[c]);u.fill=o.fill?o.decal:null,u.decal=null,u.shadowColor=null,o.strokeFirst&&(u.stroke=null);for(var h=0;h<pathCopyParams.length;++h)l[pathCopyParams[h]]=this[pathCopyParams[h]];l.__dirty|=REDRAW_BIT}else this._decalEl&&(this._decalEl=null)},n.prototype.getDecalElement=function(){return this._decalEl},n.prototype._init=function(r){var o=keys(r);this.shape=this.getDefaultShape();var l=this.getDefaultStyle();l&&this.useStyle(l);for(var u=0;u<o.length;u++){var c=o[u],h=r[c];c==="style"?this.style?extend(this.style,h):this.useStyle(h):c==="shape"?extend(this.shape,h):a.prototype.attrKV.call(this,c,h)}this.style||this.useStyle({})},n.prototype.getDefaultStyle=function(){return null},n.prototype.getDefaultShape=function(){return{}},n.prototype.canBeInsideText=function(){return this.hasFill()},n.prototype.getInsideTextFill=function(){var r=this.style.fill;if(r!=="none"){if(isString(r)){var o=lum(r,0);return o>.5?DARK_LABEL_COLOR:o>.2?LIGHTER_LABEL_COLOR:LIGHT_LABEL_COLOR}else if(r)return LIGHT_LABEL_COLOR}return DARK_LABEL_COLOR},n.prototype.getInsideTextStroke=function(r){var o=this.style.fill;if(isString(o)){var l=this.__zr,u=!!(l&&l.isDarkMode()),c=lum(r,0)<DARK_MODE_THRESHOLD;if(u===c)return o}},n.prototype.buildPath=function(r,o,l){},n.prototype.pathUpdated=function(){this.__dirty&=~SHAPE_CHANGED_BIT},n.prototype.getUpdatedPathProxy=function(r){return!this.path&&this.createPathProxy(),this.path.beginPath(),this.buildPath(this.path,this.shape,r),this.path},n.prototype.createPathProxy=function(){this.path=new PathProxy$1(!1)},n.prototype.hasStroke=function(){var r=this.style,o=r.stroke;return!(o==null||o==="none"||!(r.lineWidth>0))},n.prototype.hasFill=function(){var r=this.style,o=r.fill;return o!=null&&o!=="none"},n.prototype.getBoundingRect=function(){var r=this._rect,o=this.style,l=!r;if(l){var u=!1;this.path||(u=!0,this.createPathProxy());var c=this.path;(u||this.__dirty&SHAPE_CHANGED_BIT)&&(c.beginPath(),this.buildPath(c,this.shape,!1),this.pathUpdated()),r=c.getBoundingRect()}if(this._rect=r,this.hasStroke()&&this.path&&this.path.len()>0){var h=this._rectStroke||(this._rectStroke=r.clone());if(this.__dirty||l){h.copy(r);var d=o.strokeNoScale?this.getLineScale():1,p=o.lineWidth;if(!this.hasFill()){var f=this.strokeContainThreshold;p=Math.max(p,f==null?4:f)}d>1e-10&&(h.width+=p/d,h.height+=p/d,h.x-=p/d/2,h.y-=p/d/2)}return h}return r},n.prototype.contain=function(r,o){var l=this.transformCoordToLocal(r,o),u=this.getBoundingRect(),c=this.style;if(r=l[0],o=l[1],u.contain(r,o)){var h=this.path;if(this.hasStroke()){var d=c.lineWidth,p=c.strokeNoScale?this.getLineScale():1;if(p>1e-10&&(this.hasFill()||(d=Math.max(d,this.strokeContainThreshold)),containStroke(h,d/p,r,o)))return!0}if(this.hasFill())return contain$2(h,r,o)}return!1},n.prototype.dirtyShape=function(){this.__dirty|=SHAPE_CHANGED_BIT,this._rect&&(this._rect=null),this._decalEl&&this._decalEl.dirtyShape(),this.markRedraw()},n.prototype.dirty=function(){this.dirtyStyle(),this.dirtyShape()},n.prototype.animateShape=function(r){return this.animate("shape",r)},n.prototype.updateDuringAnimation=function(r){r==="style"?this.dirtyStyle():r==="shape"?this.dirtyShape():this.markRedraw()},n.prototype.attrKV=function(r,o){r==="shape"?this.setShape(o):a.prototype.attrKV.call(this,r,o)},n.prototype.setShape=function(r,o){var l=this.shape;return l||(l=this.shape={}),typeof r=="string"?l[r]=o:extend(l,r),this.dirtyShape(),this},n.prototype.shapeChanged=function(){return!!(this.__dirty&SHAPE_CHANGED_BIT)},n.prototype.createStyle=function(r){return createObject(DEFAULT_PATH_STYLE,r)},n.prototype._innerSaveToNormal=function(r){a.prototype._innerSaveToNormal.call(this,r);var o=this._normalState;r.shape&&!o.shape&&(o.shape=extend({},this.shape))},n.prototype._applyStateObj=function(r,o,l,u,c,h){a.prototype._applyStateObj.call(this,r,o,l,u,c,h);var d=!(o&&u),p;if(o&&o.shape?c?u?p=o.shape:(p=extend({},l.shape),extend(p,o.shape)):(p=extend({},u?this.shape:l.shape),extend(p,o.shape)):d&&(p=l.shape),p)if(c){this.shape=extend({},this.shape);for(var f={},g=keys(p),y=0;y<g.length;y++){var v=g[y];typeof p[v]=="object"?this.shape[v]=p[v]:f[v]=p[v]}this._transitionState(r,{shape:f},h)}else this.shape=p,this.dirtyShape()},n.prototype._mergeStates=function(r){for(var o=a.prototype._mergeStates.call(this,r),l,u=0;u<r.length;u++){var c=r[u];c.shape&&(l=l||{},this._mergeStyle(l,c.shape))}return l&&(o.shape=l),o},n.prototype.getAnimationStyleProps=function(){return DEFAULT_PATH_ANIMATION_PROPS},n.prototype.isZeroArea=function(){return!1},n.extend=function(r){var o=function(u){__extends(c,u);function c(h){var d=u.call(this,h)||this;return r.init&&r.init.call(d,h),d}return c.prototype.getDefaultStyle=function(){return clone$4(r.style)},c.prototype.getDefaultShape=function(){return clone$4(r.shape)},c}(n);for(var l in r)typeof r[l]=="function"&&(o.prototype[l]=r[l]);return o},n.initDefaultProps=function(){var r=n.prototype;r.type="path",r.strokeContainThreshold=5,r.segmentIgnoreThreshold=0,r.subPixelOptimize=!1,r.autoBatch=!1,r.__dirty=REDRAW_BIT|STYLE_CHANGED_BIT|SHAPE_CHANGED_BIT}(),n}(Displayable$1);const Path$1=Path;var DEFAULT_TSPAN_STYLE=defaults({strokeFirst:!0,font:DEFAULT_FONT,x:0,y:0,textAlign:"left",textBaseline:"top",miterLimit:2},DEFAULT_PATH_STYLE),TSpan=function(a){__extends(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.hasStroke=function(){var r=this.style,o=r.stroke;return o!=null&&o!=="none"&&r.lineWidth>0},n.prototype.hasFill=function(){var r=this.style,o=r.fill;return o!=null&&o!=="none"},n.prototype.createStyle=function(r){return createObject(DEFAULT_TSPAN_STYLE,r)},n.prototype.setBoundingRect=function(r){this._rect=r},n.prototype.getBoundingRect=function(){var r=this.style;if(!this._rect){var o=r.text;o!=null?o+="":o="";var l=getBoundingRect(o,r.font,r.textAlign,r.textBaseline);if(l.x+=r.x||0,l.y+=r.y||0,this.hasStroke()){var u=r.lineWidth;l.x-=u/2,l.y-=u/2,l.width+=u,l.height+=u}this._rect=l}return this._rect},n.initDefaultProps=function(){var r=n.prototype;r.dirtyRectTolerance=10}(),n}(Displayable$1);TSpan.prototype.type="tspan";const TSpan$1=TSpan;var DEFAULT_IMAGE_STYLE=defaults({x:0,y:0},DEFAULT_COMMON_STYLE),DEFAULT_IMAGE_ANIMATION_PROPS={style:defaults({x:!0,y:!0,width:!0,height:!0,sx:!0,sy:!0,sWidth:!0,sHeight:!0},DEFAULT_COMMON_ANIMATION_PROPS.style)};function isImageLike$1(a){return!!(a&&typeof a!="string"&&a.width&&a.height)}var ZRImage=function(a){__extends(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.createStyle=function(r){return createObject(DEFAULT_IMAGE_STYLE,r)},n.prototype._getSize=function(r){var o=this.style,l=o[r];if(l!=null)return l;var u=isImageLike$1(o.image)?o.image:this.__image;if(!u)return 0;var c=r==="width"?"height":"width",h=o[c];return h==null?u[r]:u[r]/u[c]*h},n.prototype.getWidth=function(){return this._getSize("width")},n.prototype.getHeight=function(){return this._getSize("height")},n.prototype.getAnimationStyleProps=function(){return DEFAULT_IMAGE_ANIMATION_PROPS},n.prototype.getBoundingRect=function(){var r=this.style;return this._rect||(this._rect=new BoundingRect$1(r.x||0,r.y||0,this.getWidth(),this.getHeight())),this._rect},n}(Displayable$1);ZRImage.prototype.type="image";const ZRImage$1=ZRImage;function buildPath$2(a,n){var r=n.x,o=n.y,l=n.width,u=n.height,c=n.r,h,d,p,f;l<0&&(r=r+l,l=-l),u<0&&(o=o+u,u=-u),typeof c=="number"?h=d=p=f=c:c instanceof Array?c.length===1?h=d=p=f=c[0]:c.length===2?(h=p=c[0],d=f=c[1]):c.length===3?(h=c[0],d=f=c[1],p=c[2]):(h=c[0],d=c[1],p=c[2],f=c[3]):h=d=p=f=0;var g;h+d>l&&(g=h+d,h*=l/g,d*=l/g),p+f>l&&(g=p+f,p*=l/g,f*=l/g),d+p>u&&(g=d+p,d*=u/g,p*=u/g),h+f>u&&(g=h+f,h*=u/g,f*=u/g),a.moveTo(r+h,o),a.lineTo(r+l-d,o),d!==0&&a.arc(r+l-d,o+d,d,-Math.PI/2,0),a.lineTo(r+l,o+u-p),p!==0&&a.arc(r+l-p,o+u-p,p,0,Math.PI/2),a.lineTo(r+f,o+u),f!==0&&a.arc(r+f,o+u-f,f,Math.PI/2,Math.PI),a.lineTo(r,o+h),h!==0&&a.arc(r+h,o+h,h,Math.PI,Math.PI*1.5)}var round$2=Math.round;function subPixelOptimizeLine$1(a,n,r){if(n){var o=n.x1,l=n.x2,u=n.y1,c=n.y2;a.x1=o,a.x2=l,a.y1=u,a.y2=c;var h=r&&r.lineWidth;return h&&(round$2(o*2)===round$2(l*2)&&(a.x1=a.x2=subPixelOptimize$1(o,h,!0)),round$2(u*2)===round$2(c*2)&&(a.y1=a.y2=subPixelOptimize$1(u,h,!0))),a}}function subPixelOptimizeRect$1(a,n,r){if(n){var o=n.x,l=n.y,u=n.width,c=n.height;a.x=o,a.y=l,a.width=u,a.height=c;var h=r&&r.lineWidth;return h&&(a.x=subPixelOptimize$1(o,h,!0),a.y=subPixelOptimize$1(l,h,!0),a.width=Math.max(subPixelOptimize$1(o+u,h,!1)-a.x,u===0?0:1),a.height=Math.max(subPixelOptimize$1(l+c,h,!1)-a.y,c===0?0:1)),a}}function subPixelOptimize$1(a,n,r){if(!n)return a;var o=round$2(a*2);return(o+round$2(n))%2===0?o/2:(o+(r?1:-1))/2}var RectShape=function(){function a(){this.x=0,this.y=0,this.width=0,this.height=0}return a}(),subPixelOptimizeOutputShape$1={},Rect$2=function(a){__extends(n,a);function n(r){return a.call(this,r)||this}return n.prototype.getDefaultShape=function(){return new RectShape},n.prototype.buildPath=function(r,o){var l,u,c,h;if(this.subPixelOptimize){var d=subPixelOptimizeRect$1(subPixelOptimizeOutputShape$1,o,this.style);l=d.x,u=d.y,c=d.width,h=d.height,d.r=o.r,o=d}else l=o.x,u=o.y,c=o.width,h=o.height;o.r?buildPath$2(r,o):r.rect(l,u,c,h)},n.prototype.isZeroArea=function(){return!this.shape.width||!this.shape.height},n}(Path$1);Rect$2.prototype.type="rect";const Rect$3=Rect$2;var DEFAULT_RICH_TEXT_COLOR={fill:"#000"},DEFAULT_STROKE_LINE_WIDTH=2,DEFAULT_TEXT_ANIMATION_PROPS={style:defaults({fill:!0,stroke:!0,fillOpacity:!0,strokeOpacity:!0,lineWidth:!0,fontSize:!0,lineHeight:!0,width:!0,height:!0,textShadowColor:!0,textShadowBlur:!0,textShadowOffsetX:!0,textShadowOffsetY:!0,backgroundColor:!0,padding:!0,borderColor:!0,borderWidth:!0,borderRadius:!0},DEFAULT_COMMON_ANIMATION_PROPS.style)},ZRText=function(a){__extends(n,a);function n(r){var o=a.call(this)||this;return o.type="text",o._children=[],o._defaultStyle=DEFAULT_RICH_TEXT_COLOR,o.attr(r),o}return n.prototype.childrenRef=function(){return this._children},n.prototype.update=function(){a.prototype.update.call(this),this.styleChanged()&&this._updateSubTexts();for(var r=0;r<this._children.length;r++){var o=this._children[r];o.zlevel=this.zlevel,o.z=this.z,o.z2=this.z2,o.culling=this.culling,o.cursor=this.cursor,o.invisible=this.invisible}},n.prototype.updateTransform=function(){var r=this.innerTransformable;r?(r.updateTransform(),r.transform&&(this.transform=r.transform)):a.prototype.updateTransform.call(this)},n.prototype.getLocalTransform=function(r){var o=this.innerTransformable;return o?o.getLocalTransform(r):a.prototype.getLocalTransform.call(this,r)},n.prototype.getComputedTransform=function(){return this.__hostTarget&&(this.__hostTarget.getComputedTransform(),this.__hostTarget.updateInnerText(!0)),a.prototype.getComputedTransform.call(this)},n.prototype._updateSubTexts=function(){this._childCursor=0,normalizeTextStyle(this.style),this.style.rich?this._updateRichTexts():this._updatePlainTexts(),this._children.length=this._childCursor,this.styleUpdated()},n.prototype.addSelfToZr=function(r){a.prototype.addSelfToZr.call(this,r);for(var o=0;o<this._children.length;o++)this._children[o].__zr=r},n.prototype.removeSelfFromZr=function(r){a.prototype.removeSelfFromZr.call(this,r);for(var o=0;o<this._children.length;o++)this._children[o].__zr=null},n.prototype.getBoundingRect=function(){if(this.styleChanged()&&this._updateSubTexts(),!this._rect){for(var r=new BoundingRect$1(0,0,0,0),o=this._children,l=[],u=null,c=0;c<o.length;c++){var h=o[c],d=h.getBoundingRect(),p=h.getLocalTransform(l);p?(r.copy(d),r.applyTransform(p),u=u||r.clone(),u.union(r)):(u=u||d.clone(),u.union(d))}this._rect=u||r}return this._rect},n.prototype.setDefaultTextStyle=function(r){this._defaultStyle=r||DEFAULT_RICH_TEXT_COLOR},n.prototype.setTextContent=function(r){throw new Error("Can't attach text on another text")},n.prototype._mergeStyle=function(r,o){if(!o)return r;var l=o.rich,u=r.rich||l&&{};return extend(r,o),l&&u?(this._mergeRich(u,l),r.rich=u):u&&(r.rich=u),r},n.prototype._mergeRich=function(r,o){for(var l=keys(o),u=0;u<l.length;u++){var c=l[u];r[c]=r[c]||{},extend(r[c],o[c])}},n.prototype.getAnimationStyleProps=function(){return DEFAULT_TEXT_ANIMATION_PROPS},n.prototype._getOrCreateChild=function(r){var o=this._children[this._childCursor];return(!o||!(o instanceof r))&&(o=new r),this._children[this._childCursor++]=o,o.__zr=this.__zr,o.parent=this,o},n.prototype._updatePlainTexts=function(){var r=this.style,o=r.font||DEFAULT_FONT,l=r.padding,u=getStyleText(r),c=parsePlainText(u,r),h=needDrawBackground(r),d=!!r.backgroundColor,p=c.outerHeight,f=c.outerWidth,g=c.contentWidth,y=c.lines,v=c.lineHeight,_=this._defaultStyle;this.isTruncated=!!c.isTruncated;var x=r.x||0,S=r.y||0,T=r.align||_.align||"left",M=r.verticalAlign||_.verticalAlign||"top",b=x,A=adjustTextY(S,c.contentHeight,M);if(h||l){var I=adjustTextX(x,f,T),w=adjustTextY(S,p,M);h&&this._renderBackground(r,r,I,w,f,p)}A+=v/2,l&&(b=getTextXForPadding(x,T,l),M==="top"?A+=l[0]:M==="bottom"&&(A-=l[2]));for(var C=0,E=!1,P=getFill("fill"in r?r.fill:(E=!0,_.fill)),D=getStroke("stroke"in r?r.stroke:!d&&(!_.autoStroke||E)?(C=DEFAULT_STROKE_LINE_WIDTH,_.stroke):null),L=r.textShadowBlur>0,R=r.width!=null&&(r.overflow==="truncate"||r.overflow==="break"||r.overflow==="breakAll"),O=c.calculatedLineHeight,N=0;N<y.length;N++){var V=this._getOrCreateChild(TSpan$1),B=V.createStyle();V.useStyle(B),B.text=y[N],B.x=b,B.y=A,T&&(B.textAlign=T),B.textBaseline="middle",B.opacity=r.opacity,B.strokeFirst=!0,L&&(B.shadowBlur=r.textShadowBlur||0,B.shadowColor=r.textShadowColor||"transparent",B.shadowOffsetX=r.textShadowOffsetX||0,B.shadowOffsetY=r.textShadowOffsetY||0),B.stroke=D,B.fill=P,D&&(B.lineWidth=r.lineWidth||C,B.lineDash=r.lineDash,B.lineDashOffset=r.lineDashOffset||0),B.font=o,setSeparateFont(B,r),A+=v,R&&V.setBoundingRect(new BoundingRect$1(adjustTextX(B.x,g,B.textAlign),adjustTextY(B.y,O,B.textBaseline),g,O))}},n.prototype._updateRichTexts=function(){var r=this.style,o=getStyleText(r),l=parseRichText(o,r),u=l.width,c=l.outerWidth,h=l.outerHeight,d=r.padding,p=r.x||0,f=r.y||0,g=this._defaultStyle,y=r.align||g.align,v=r.verticalAlign||g.verticalAlign;this.isTruncated=!!l.isTruncated;var _=adjustTextX(p,c,y),x=adjustTextY(f,h,v),S=_,T=x;d&&(S+=d[3],T+=d[0]);var M=S+u;needDrawBackground(r)&&this._renderBackground(r,r,_,x,c,h);for(var b=!!r.backgroundColor,A=0;A<l.lines.length;A++){for(var I=l.lines[A],w=I.tokens,C=w.length,E=I.lineHeight,P=I.width,D=0,L=S,R=M,O=C-1,N=void 0;D<C&&(N=w[D],!N.align||N.align==="left");)this._placeToken(N,r,E,T,L,"left",b),P-=N.width,L+=N.width,D++;for(;O>=0&&(N=w[O],N.align==="right");)this._placeToken(N,r,E,T,R,"right",b),P-=N.width,R-=N.width,O--;for(L+=(u-(L-S)-(M-R)-P)/2;D<=O;)N=w[D],this._placeToken(N,r,E,T,L+N.width/2,"center",b),L+=N.width,D++;T+=E}},n.prototype._placeToken=function(r,o,l,u,c,h,d){var p=o.rich[r.styleName]||{};p.text=r.text;var f=r.verticalAlign,g=u+l/2;f==="top"?g=u+r.height/2:f==="bottom"&&(g=u+l-r.height/2);var y=!r.isLineHolder&&needDrawBackground(p);y&&this._renderBackground(p,o,h==="right"?c-r.width:h==="center"?c-r.width/2:c,g-r.height/2,r.width,r.height);var v=!!p.backgroundColor,_=r.textPadding;_&&(c=getTextXForPadding(c,h,_),g-=r.height/2-_[0]-r.innerHeight/2);var x=this._getOrCreateChild(TSpan$1),S=x.createStyle();x.useStyle(S);var T=this._defaultStyle,M=!1,b=0,A=getFill("fill"in p?p.fill:"fill"in o?o.fill:(M=!0,T.fill)),I=getStroke("stroke"in p?p.stroke:"stroke"in o?o.stroke:!v&&!d&&(!T.autoStroke||M)?(b=DEFAULT_STROKE_LINE_WIDTH,T.stroke):null),w=p.textShadowBlur>0||o.textShadowBlur>0;S.text=r.text,S.x=c,S.y=g,w&&(S.shadowBlur=p.textShadowBlur||o.textShadowBlur||0,S.shadowColor=p.textShadowColor||o.textShadowColor||"transparent",S.shadowOffsetX=p.textShadowOffsetX||o.textShadowOffsetX||0,S.shadowOffsetY=p.textShadowOffsetY||o.textShadowOffsetY||0),S.textAlign=h,S.textBaseline="middle",S.font=r.font||DEFAULT_FONT,S.opacity=retrieve3(p.opacity,o.opacity,1),setSeparateFont(S,p),I&&(S.lineWidth=retrieve3(p.lineWidth,o.lineWidth,b),S.lineDash=retrieve2(p.lineDash,o.lineDash),S.lineDashOffset=o.lineDashOffset||0,S.stroke=I),A&&(S.fill=A);var C=r.contentWidth,E=r.contentHeight;x.setBoundingRect(new BoundingRect$1(adjustTextX(S.x,C,S.textAlign),adjustTextY(S.y,E,S.textBaseline),C,E))},n.prototype._renderBackground=function(r,o,l,u,c,h){var d=r.backgroundColor,p=r.borderWidth,f=r.borderColor,g=d&&d.image,y=d&&!g,v=r.borderRadius,_=this,x,S;if(y||r.lineHeight||p&&f){x=this._getOrCreateChild(Rect$3),x.useStyle(x.createStyle()),x.style.fill=null;var T=x.shape;T.x=l,T.y=u,T.width=c,T.height=h,T.r=v,x.dirtyShape()}if(y){var M=x.style;M.fill=d||null,M.fillOpacity=retrieve2(r.fillOpacity,1)}else if(g){S=this._getOrCreateChild(ZRImage$1),S.onload=function(){_.dirtyStyle()};var b=S.style;b.image=d.image,b.x=l,b.y=u,b.width=c,b.height=h}if(p&&f){var M=x.style;M.lineWidth=p,M.stroke=f,M.strokeOpacity=retrieve2(r.strokeOpacity,1),M.lineDash=r.borderDash,M.lineDashOffset=r.borderDashOffset||0,x.strokeContainThreshold=0,x.hasFill()&&x.hasStroke()&&(M.strokeFirst=!0,M.lineWidth*=2)}var A=(x||S).style;A.shadowBlur=r.shadowBlur||0,A.shadowColor=r.shadowColor||"transparent",A.shadowOffsetX=r.shadowOffsetX||0,A.shadowOffsetY=r.shadowOffsetY||0,A.opacity=retrieve3(r.opacity,o.opacity,1)},n.makeFont=function(r){var o="";return hasSeparateFont(r)&&(o=[r.fontStyle,r.fontWeight,parseFontSize(r.fontSize),r.fontFamily||"sans-serif"].join(" ")),o&&trim$1(o)||r.textFont||r.font},n}(Displayable$1),VALID_TEXT_ALIGN={left:!0,right:1,center:1},VALID_TEXT_VERTICAL_ALIGN={top:1,bottom:1,middle:1},FONT_PARTS=["fontStyle","fontWeight","fontSize","fontFamily"];function parseFontSize(a){return typeof a=="string"&&(a.indexOf("px")!==-1||a.indexOf("rem")!==-1||a.indexOf("em")!==-1)?a:isNaN(+a)?DEFAULT_FONT_SIZE+"px":a+"px"}function setSeparateFont(a,n){for(var r=0;r<FONT_PARTS.length;r++){var o=FONT_PARTS[r],l=n[o];l!=null&&(a[o]=l)}}function hasSeparateFont(a){return a.fontSize!=null||a.fontFamily||a.fontWeight}function normalizeTextStyle(a){return normalizeStyle(a),each$f(a.rich,normalizeStyle),a}function normalizeStyle(a){if(a){a.font=ZRText.makeFont(a);var n=a.align;n==="middle"&&(n="center"),a.align=n==null||VALID_TEXT_ALIGN[n]?n:"left";var r=a.verticalAlign;r==="center"&&(r="middle"),a.verticalAlign=r==null||VALID_TEXT_VERTICAL_ALIGN[r]?r:"top";var o=a.padding;o&&(a.padding=normalizeCssArray$1(a.padding))}}function getStroke(a,n){return a==null||n<=0||a==="transparent"||a==="none"?null:a.image||a.colorStops?"#000":a}function getFill(a){return a==null||a==="none"?null:a.image||a.colorStops?"#000":a}function getTextXForPadding(a,n,r){return n==="right"?a-r[1]:n==="center"?a+r[3]/2-r[1]/2:a+r[3]}function getStyleText(a){var n=a.text;return n!=null&&(n+=""),n}function needDrawBackground(a){return!!(a.backgroundColor||a.lineHeight||a.borderWidth&&a.borderColor)}const ZRText$1=ZRText;var getECData=makeInner(),setCommonECData=function(a,n,r,o){if(o){var l=getECData(o);l.dataIndex=r,l.dataType=n,l.seriesIndex=a,l.ssrType="chart",o.type==="group"&&o.traverse(function(u){var c=getECData(u);c.seriesIndex=a,c.dataIndex=r,c.dataType=n,c.ssrType="chart"})}},_highlightNextDigit=1,_highlightKeyMap={},getSavedStates=makeInner(),getComponentStates=makeInner(),HOVER_STATE_NORMAL=0,HOVER_STATE_BLUR=1,HOVER_STATE_EMPHASIS=2,SPECIAL_STATES=["emphasis","blur","select"],DISPLAY_STATES=["normal","emphasis","blur","select"],Z2_EMPHASIS_LIFT=10,Z2_SELECT_LIFT=9,HIGHLIGHT_ACTION_TYPE="highlight",DOWNPLAY_ACTION_TYPE="downplay",SELECT_ACTION_TYPE="select",UNSELECT_ACTION_TYPE="unselect",TOGGLE_SELECT_ACTION_TYPE="toggleSelect";function hasFillOrStroke(a){return a!=null&&a!=="none"}function doChangeHoverState(a,n,r){a.onHoverStateChange&&(a.hoverState||0)!==r&&a.onHoverStateChange(n),a.hoverState=r}function singleEnterEmphasis(a){doChangeHoverState(a,"emphasis",HOVER_STATE_EMPHASIS)}function singleLeaveEmphasis(a){a.hoverState===HOVER_STATE_EMPHASIS&&doChangeHoverState(a,"normal",HOVER_STATE_NORMAL)}function singleEnterBlur(a){doChangeHoverState(a,"blur",HOVER_STATE_BLUR)}function singleLeaveBlur(a){a.hoverState===HOVER_STATE_BLUR&&doChangeHoverState(a,"normal",HOVER_STATE_NORMAL)}function singleEnterSelect(a){a.selected=!0}function singleLeaveSelect(a){a.selected=!1}function updateElementState(a,n,r){n(a,r)}function traverseUpdateState(a,n,r){updateElementState(a,n,r),a.isGroup&&a.traverse(function(o){updateElementState(o,n,r)})}function setStatesFlag(a,n){switch(n){case"emphasis":a.hoverState=HOVER_STATE_EMPHASIS;break;case"normal":a.hoverState=HOVER_STATE_NORMAL;break;case"blur":a.hoverState=HOVER_STATE_BLUR;break;case"select":a.selected=!0}}function getFromStateStyle(a,n,r,o){for(var l=a.style,u={},c=0;c<n.length;c++){var h=n[c],d=l[h];u[h]=d==null?o&&o[h]:d}for(var c=0;c<a.animators.length;c++){var p=a.animators[c];p.__fromStateTransition&&p.__fromStateTransition.indexOf(r)<0&&p.targetName==="style"&&p.saveTo(u,n)}return u}function createEmphasisDefaultState(a,n,r,o){var l=r&&indexOf(r,"select")>=0,u=!1;if(a instanceof Path$1){var c=getSavedStates(a),h=l&&c.selectFill||c.normalFill,d=l&&c.selectStroke||c.normalStroke;if(hasFillOrStroke(h)||hasFillOrStroke(d)){o=o||{};var p=o.style||{};p.fill==="inherit"?(u=!0,o=extend({},o),p=extend({},p),p.fill=h):!hasFillOrStroke(p.fill)&&hasFillOrStroke(h)?(u=!0,o=extend({},o),p=extend({},p),p.fill=liftColor(h)):!hasFillOrStroke(p.stroke)&&hasFillOrStroke(d)&&(u||(o=extend({},o),p=extend({},p)),p.stroke=liftColor(d)),o.style=p}}if(o&&o.z2==null){u||(o=extend({},o));var f=a.z2EmphasisLift;o.z2=a.z2+(f!=null?f:Z2_EMPHASIS_LIFT)}return o}function createSelectDefaultState(a,n,r){if(r&&r.z2==null){r=extend({},r);var o=a.z2SelectLift;r.z2=a.z2+(o!=null?o:Z2_SELECT_LIFT)}return r}function createBlurDefaultState(a,n,r){var o=indexOf(a.currentStates,n)>=0,l=a.style.opacity,u=o?null:getFromStateStyle(a,["opacity"],n,{opacity:1});r=r||{};var c=r.style||{};return c.opacity==null&&(r=extend({},r),c=extend({opacity:o?l:u.opacity*.1},c),r.style=c),r}function elementStateProxy(a,n){var r=this.states[a];if(this.style){if(a==="emphasis")return createEmphasisDefaultState(this,a,n,r);if(a==="blur")return createBlurDefaultState(this,a,r);if(a==="select")return createSelectDefaultState(this,a,r)}return r}function setDefaultStateProxy(a){a.stateProxy=elementStateProxy;var n=a.getTextContent(),r=a.getTextGuideLine();n&&(n.stateProxy=elementStateProxy),r&&(r.stateProxy=elementStateProxy)}function enterEmphasisWhenMouseOver(a,n){!shouldSilent(a,n)&&!a.__highByOuter&&traverseUpdateState(a,singleEnterEmphasis)}function leaveEmphasisWhenMouseOut(a,n){!shouldSilent(a,n)&&!a.__highByOuter&&traverseUpdateState(a,singleLeaveEmphasis)}function enterEmphasis(a,n){a.__highByOuter|=1<<(n||0),traverseUpdateState(a,singleEnterEmphasis)}function leaveEmphasis(a,n){!(a.__highByOuter&=~(1<<(n||0)))&&traverseUpdateState(a,singleLeaveEmphasis)}function enterBlur(a){traverseUpdateState(a,singleEnterBlur)}function leaveBlur(a){traverseUpdateState(a,singleLeaveBlur)}function enterSelect(a){traverseUpdateState(a,singleEnterSelect)}function leaveSelect(a){traverseUpdateState(a,singleLeaveSelect)}function shouldSilent(a,n){return a.__highDownSilentOnTouch&&n.zrByTouch}function allLeaveBlur(a){var n=a.getModel(),r=[],o=[];n.eachComponent(function(l,u){var c=getComponentStates(u),h=l==="series",d=h?a.getViewOfSeriesModel(u):a.getViewOfComponentModel(u);!h&&o.push(d),c.isBlured&&(d.group.traverse(function(p){singleLeaveBlur(p)}),h&&r.push(u)),c.isBlured=!1}),each$f(o,function(l){l&&l.toggleBlurSeries&&l.toggleBlurSeries(r,!1,n)})}function blurSeries(a,n,r,o){var l=o.getModel();r=r||"coordinateSystem";function u(p,f){for(var g=0;g<f.length;g++){var y=p.getItemGraphicEl(f[g]);y&&leaveBlur(y)}}if(a!=null&&!(!n||n==="none")){var c=l.getSeriesByIndex(a),h=c.coordinateSystem;h&&h.master&&(h=h.master);var d=[];l.eachSeries(function(p){var f=c===p,g=p.coordinateSystem;g&&g.master&&(g=g.master);var y=g&&h?g===h:f;if(!(r==="series"&&!f||r==="coordinateSystem"&&!y||n==="series"&&f)){var v=o.getViewOfSeriesModel(p);if(v.group.traverse(function(S){S.__highByOuter&&f&&n==="self"||singleEnterBlur(S)}),isArrayLike(n))u(p.getData(),n);else if(isObject$3(n))for(var _=keys(n),x=0;x<_.length;x++)u(p.getData(_[x]),n[_[x]]);d.push(p),getComponentStates(p).isBlured=!0}}),l.eachComponent(function(p,f){if(p!=="series"){var g=o.getViewOfComponentModel(f);g&&g.toggleBlurSeries&&g.toggleBlurSeries(d,!0,l)}})}}function blurComponent(a,n,r){if(!(a==null||n==null)){var o=r.getModel().getComponent(a,n);if(o){getComponentStates(o).isBlured=!0;var l=r.getViewOfComponentModel(o);!l||!l.focusBlurEnabled||l.group.traverse(function(u){singleEnterBlur(u)})}}}function blurSeriesFromHighlightPayload(a,n,r){var o=a.seriesIndex,l=a.getData(n.dataType);if(!l){error("Unknown dataType "+n.dataType);return}var u=queryDataIndex(l,n);u=(isArray$1(u)?u[0]:u)||0;var c=l.getItemGraphicEl(u);if(!c)for(var h=l.count(),d=0;!c&&d<h;)c=l.getItemGraphicEl(d++);if(c){var p=getECData(c);blurSeries(o,p.focus,p.blurScope,r)}else{var f=a.get(["emphasis","focus"]),g=a.get(["emphasis","blurScope"]);f!=null&&blurSeries(o,f,g,r)}}function findComponentHighDownDispatchers(a,n,r,o){var l={focusSelf:!1,dispatchers:null};if(a==null||a==="series"||n==null||r==null)return l;var u=o.getModel().getComponent(a,n);if(!u)return l;var c=o.getViewOfComponentModel(u);if(!c||!c.findHighDownDispatchers)return l;for(var h=c.findHighDownDispatchers(r),d,p=0;p<h.length;p++)if(isHighDownDispatcher(h[p])||error("param should be highDownDispatcher"),getECData(h[p]).focus==="self"){d=!0;break}return{focusSelf:d,dispatchers:h}}function handleGlobalMouseOverForHighDown(a,n,r){isHighDownDispatcher(a)||error("param should be highDownDispatcher");var o=getECData(a),l=findComponentHighDownDispatchers(o.componentMainType,o.componentIndex,o.componentHighDownName,r),u=l.dispatchers,c=l.focusSelf;u?(c&&blurComponent(o.componentMainType,o.componentIndex,r),each$f(u,function(h){return enterEmphasisWhenMouseOver(h,n)})):(blurSeries(o.seriesIndex,o.focus,o.blurScope,r),o.focus==="self"&&blurComponent(o.componentMainType,o.componentIndex,r),enterEmphasisWhenMouseOver(a,n))}function handleGlobalMouseOutForHighDown(a,n,r){isHighDownDispatcher(a)||error("param should be highDownDispatcher"),allLeaveBlur(r);var o=getECData(a),l=findComponentHighDownDispatchers(o.componentMainType,o.componentIndex,o.componentHighDownName,r).dispatchers;l?each$f(l,function(u){return leaveEmphasisWhenMouseOut(u,n)}):leaveEmphasisWhenMouseOut(a,n)}function toggleSelectionFromPayload(a,n,r){if(isSelectChangePayload(n)){var o=n.dataType,l=a.getData(o),u=queryDataIndex(l,n);isArray$1(u)||(u=[u]),a[n.type===TOGGLE_SELECT_ACTION_TYPE?"toggleSelect":n.type===SELECT_ACTION_TYPE?"select":"unselect"](u,o)}}function updateSeriesElementSelection(a){var n=a.getAllData();each$f(n,function(r){var o=r.data,l=r.type;o.eachItemGraphicEl(function(u,c){a.isSelected(c,l)?enterSelect(u):leaveSelect(u)})})}function getAllSelectedIndices(a){var n=[];return a.eachSeries(function(r){var o=r.getAllData();each$f(o,function(l){l.data;var u=l.type,c=r.getSelectedDataIndices();if(c.length>0){var h={dataIndex:c,seriesIndex:r.seriesIndex};u!=null&&(h.dataType=u),n.push(h)}})}),n}function enableHoverEmphasis(a,n,r){setAsHighDownDispatcher(a,!0),traverseUpdateState(a,setDefaultStateProxy),enableHoverFocus(a,n,r)}function disableHoverEmphasis(a){setAsHighDownDispatcher(a,!1)}function toggleHoverEmphasis(a,n,r,o){o?disableHoverEmphasis(a):enableHoverEmphasis(a,n,r)}function enableHoverFocus(a,n,r){var o=getECData(a);n!=null?(o.focus=n,o.blurScope=r):o.focus&&(o.focus=null)}var OTHER_STATES=["emphasis","blur","select"],defaultStyleGetterMap={itemStyle:"getItemStyle",lineStyle:"getLineStyle",areaStyle:"getAreaStyle"};function setStatesStylesFromModel(a,n,r,o){r=r||"itemStyle";for(var l=0;l<OTHER_STATES.length;l++){var u=OTHER_STATES[l],c=n.getModel([u,r]),h=a.ensureState(u);h.style=o?o(c):c[defaultStyleGetterMap[r]]()}}function setAsHighDownDispatcher(a,n){var r=n===!1,o=a;a.highDownSilentOnTouch&&(o.__highDownSilentOnTouch=a.highDownSilentOnTouch),(!r||o.__highDownDispatcher)&&(o.__highByOuter=o.__highByOuter||0,o.__highDownDispatcher=!r)}function isHighDownDispatcher(a){return!!(a&&a.__highDownDispatcher)}function enableComponentHighDownFeatures(a,n,r){var o=getECData(a);o.componentMainType=n.mainType,o.componentIndex=n.componentIndex,o.componentHighDownName=r}function getHighlightDigit(a){var n=_highlightKeyMap[a];return n==null&&_highlightNextDigit<=32&&(n=_highlightKeyMap[a]=_highlightNextDigit++),n}function isSelectChangePayload(a){var n=a.type;return n===SELECT_ACTION_TYPE||n===UNSELECT_ACTION_TYPE||n===TOGGLE_SELECT_ACTION_TYPE}function isHighDownPayload(a){var n=a.type;return n===HIGHLIGHT_ACTION_TYPE||n===DOWNPLAY_ACTION_TYPE}function savePathStates(a){var n=getSavedStates(a);n.normalFill=a.style.fill,n.normalStroke=a.style.stroke;var r=a.states.select||{};n.selectFill=r.style&&r.style.fill||null,n.selectStroke=r.style&&r.style.stroke||null}var CMD$2=PathProxy$1.CMD,points$2=[[],[],[]],mathSqrt$2=Math.sqrt,mathAtan2=Math.atan2;function transformPath(a,n){if(n){var r=a.data,o=a.len(),l,u,c,h,d,p,f=CMD$2.M,g=CMD$2.C,y=CMD$2.L,v=CMD$2.R,_=CMD$2.A,x=CMD$2.Q;for(c=0,h=0;c<o;){switch(l=r[c++],h=c,u=0,l){case f:u=1;break;case y:u=1;break;case g:u=3;break;case x:u=2;break;case _:var S=n[4],T=n[5],M=mathSqrt$2(n[0]*n[0]+n[1]*n[1]),b=mathSqrt$2(n[2]*n[2]+n[3]*n[3]),A=mathAtan2(-n[1]/b,n[0]/M);r[c]*=M,r[c++]+=S,r[c]*=b,r[c++]+=T,r[c++]*=M,r[c++]*=b,r[c++]+=A,r[c++]+=A,c+=2,h=c;break;case v:p[0]=r[c++],p[1]=r[c++],applyTransform$1(p,p,n),r[h++]=p[0],r[h++]=p[1],p[0]+=r[c++],p[1]+=r[c++],applyTransform$1(p,p,n),r[h++]=p[0],r[h++]=p[1]}for(d=0;d<u;d++){var I=points$2[d];I[0]=r[c++],I[1]=r[c++],applyTransform$1(I,I,n),r[h++]=I[0],r[h++]=I[1]}}a.increaseVersion()}}var mathSqrt$1=Math.sqrt,mathSin$2=Math.sin,mathCos$2=Math.cos,PI$7=Math.PI;function vMag(a){return Math.sqrt(a[0]*a[0]+a[1]*a[1])}function vRatio(a,n){return(a[0]*n[0]+a[1]*n[1])/(vMag(a)*vMag(n))}function vAngle(a,n){return(a[0]*n[1]<a[1]*n[0]?-1:1)*Math.acos(vRatio(a,n))}function processArc(a,n,r,o,l,u,c,h,d,p,f){var g=d*(PI$7/180),y=mathCos$2(g)*(a-r)/2+mathSin$2(g)*(n-o)/2,v=-1*mathSin$2(g)*(a-r)/2+mathCos$2(g)*(n-o)/2,_=y*y/(c*c)+v*v/(h*h);_>1&&(c*=mathSqrt$1(_),h*=mathSqrt$1(_));var x=(l===u?-1:1)*mathSqrt$1((c*c*(h*h)-c*c*(v*v)-h*h*(y*y))/(c*c*(v*v)+h*h*(y*y)))||0,S=x*c*v/h,T=x*-h*y/c,M=(a+r)/2+mathCos$2(g)*S-mathSin$2(g)*T,b=(n+o)/2+mathSin$2(g)*S+mathCos$2(g)*T,A=vAngle([1,0],[(y-S)/c,(v-T)/h]),I=[(y-S)/c,(v-T)/h],w=[(-1*y-S)/c,(-1*v-T)/h],C=vAngle(I,w);if(vRatio(I,w)<=-1&&(C=PI$7),vRatio(I,w)>=1&&(C=0),C<0){var E=Math.round(C/PI$7*1e6)/1e6;C=PI$7*2+E%2*PI$7}f.addData(p,M,b,c,h,A,C,g,u)}var commandReg=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/ig,numberReg$1=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function createPathProxyFromString(a){var n=new PathProxy$1;if(!a)return n;var r=0,o=0,l=r,u=o,c,h=PathProxy$1.CMD,d=a.match(commandReg);if(!d)return n;for(var p=0;p<d.length;p++){for(var f=d[p],g=f.charAt(0),y=void 0,v=f.match(numberReg$1)||[],_=v.length,x=0;x<_;x++)v[x]=parseFloat(v[x]);for(var S=0;S<_;){var T=void 0,M=void 0,b=void 0,A=void 0,I=void 0,w=void 0,C=void 0,E=r,P=o,D=void 0,L=void 0;switch(g){case"l":r+=v[S++],o+=v[S++],y=h.L,n.addData(y,r,o);break;case"L":r=v[S++],o=v[S++],y=h.L,n.addData(y,r,o);break;case"m":r+=v[S++],o+=v[S++],y=h.M,n.addData(y,r,o),l=r,u=o,g="l";break;case"M":r=v[S++],o=v[S++],y=h.M,n.addData(y,r,o),l=r,u=o,g="L";break;case"h":r+=v[S++],y=h.L,n.addData(y,r,o);break;case"H":r=v[S++],y=h.L,n.addData(y,r,o);break;case"v":o+=v[S++],y=h.L,n.addData(y,r,o);break;case"V":o=v[S++],y=h.L,n.addData(y,r,o);break;case"C":y=h.C,n.addData(y,v[S++],v[S++],v[S++],v[S++],v[S++],v[S++]),r=v[S-2],o=v[S-1];break;case"c":y=h.C,n.addData(y,v[S++]+r,v[S++]+o,v[S++]+r,v[S++]+o,v[S++]+r,v[S++]+o),r+=v[S-2],o+=v[S-1];break;case"S":T=r,M=o,D=n.len(),L=n.data,c===h.C&&(T+=r-L[D-4],M+=o-L[D-3]),y=h.C,E=v[S++],P=v[S++],r=v[S++],o=v[S++],n.addData(y,T,M,E,P,r,o);break;case"s":T=r,M=o,D=n.len(),L=n.data,c===h.C&&(T+=r-L[D-4],M+=o-L[D-3]),y=h.C,E=r+v[S++],P=o+v[S++],r+=v[S++],o+=v[S++],n.addData(y,T,M,E,P,r,o);break;case"Q":E=v[S++],P=v[S++],r=v[S++],o=v[S++],y=h.Q,n.addData(y,E,P,r,o);break;case"q":E=v[S++]+r,P=v[S++]+o,r+=v[S++],o+=v[S++],y=h.Q,n.addData(y,E,P,r,o);break;case"T":T=r,M=o,D=n.len(),L=n.data,c===h.Q&&(T+=r-L[D-4],M+=o-L[D-3]),r=v[S++],o=v[S++],y=h.Q,n.addData(y,T,M,r,o);break;case"t":T=r,M=o,D=n.len(),L=n.data,c===h.Q&&(T+=r-L[D-4],M+=o-L[D-3]),r+=v[S++],o+=v[S++],y=h.Q,n.addData(y,T,M,r,o);break;case"A":b=v[S++],A=v[S++],I=v[S++],w=v[S++],C=v[S++],E=r,P=o,r=v[S++],o=v[S++],y=h.A,processArc(E,P,r,o,w,C,b,A,I,y,n);break;case"a":b=v[S++],A=v[S++],I=v[S++],w=v[S++],C=v[S++],E=r,P=o,r+=v[S++],o+=v[S++],y=h.A,processArc(E,P,r,o,w,C,b,A,I,y,n);break}}(g==="z"||g==="Z")&&(y=h.Z,n.addData(y),r=l,o=u),c=y}return n.toStatic(),n}var SVGPath=function(a){__extends(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.applyTransform=function(r){},n}(Path$1);function isPathProxy(a){return a.setData!=null}function createPathOptions(a,n){var r=createPathProxyFromString(a),o=extend({},n);return o.buildPath=function(l){if(isPathProxy(l)){l.setData(r.data);var u=l.getContext();u&&l.rebuildPath(u,1)}else{var u=l;r.rebuildPath(u,1)}},o.applyTransform=function(l){transformPath(r,l),this.dirtyShape()},o}function createFromString(a,n){return new SVGPath(createPathOptions(a,n))}function extendFromString(a,n){var r=createPathOptions(a,n),o=function(l){__extends(u,l);function u(c){var h=l.call(this,c)||this;return h.applyTransform=r.applyTransform,h.buildPath=r.buildPath,h}return u}(SVGPath);return o}function mergePath$1(a,n){for(var r=[],o=a.length,l=0;l<o;l++){var u=a[l];r.push(u.getUpdatedPathProxy(!0))}var c=new Path$1(n);return c.createPathProxy(),c.buildPath=function(h){if(isPathProxy(h)){h.appendPath(r);var d=h.getContext();d&&h.rebuildPath(d,1)}},c}function clonePath(a,n){n=n||{};var r=new Path$1;return a.shape&&r.setShape(a.shape),r.setStyle(a.style),n.bakeTransform?transformPath(r.path,a.getComputedTransform()):n.toLocal?r.setLocalTransform(a.getComputedTransform()):r.copyTransform(a),r.buildPath=a.buildPath,r.applyTransform=r.applyTransform,r.z=a.z,r.z2=a.z2,r.zlevel=a.zlevel,r}var CircleShape=function(){function a(){this.cx=0,this.cy=0,this.r=0}return a}(),Circle=function(a){__extends(n,a);function n(r){return a.call(this,r)||this}return n.prototype.getDefaultShape=function(){return new CircleShape},n.prototype.buildPath=function(r,o){r.moveTo(o.cx+o.r,o.cy),r.arc(o.cx,o.cy,o.r,0,Math.PI*2)},n}(Path$1);Circle.prototype.type="circle";const Circle$1=Circle;var EllipseShape=function(){function a(){this.cx=0,this.cy=0,this.rx=0,this.ry=0}return a}(),Ellipse=function(a){__extends(n,a);function n(r){return a.call(this,r)||this}return n.prototype.getDefaultShape=function(){return new EllipseShape},n.prototype.buildPath=function(r,o){var l=.5522848,u=o.cx,c=o.cy,h=o.rx,d=o.ry,p=h*l,f=d*l;r.moveTo(u-h,c),r.bezierCurveTo(u-h,c-f,u-p,c-d,u,c-d),r.bezierCurveTo(u+p,c-d,u+h,c-f,u+h,c),r.bezierCurveTo(u+h,c+f,u+p,c+d,u,c+d),r.bezierCurveTo(u-p,c+d,u-h,c+f,u-h,c),r.closePath()},n}(Path$1);Ellipse.prototype.type="ellipse";const Ellipse$1=Ellipse;var PI$6=Math.PI,PI2$3=PI$6*2,mathSin$1=Math.sin,mathCos$1=Math.cos,mathACos=Math.acos,mathATan2=Math.atan2,mathAbs$1=Math.abs,mathSqrt=Math.sqrt,mathMax$7=Math.max,mathMin$7=Math.min,e=1e-4;function intersect(a,n,r,o,l,u,c,h){var d=r-a,p=o-n,f=c-l,g=h-u,y=g*d-f*p;if(!(y*y<e))return y=(f*(n-u)-g*(a-l))/y,[a+y*d,n+y*p]}function computeCornerTangents(a,n,r,o,l,u,c){var h=a-r,d=n-o,p=(c?u:-u)/mathSqrt(h*h+d*d),f=p*d,g=-p*h,y=a+f,v=n+g,_=r+f,x=o+g,S=(y+_)/2,T=(v+x)/2,M=_-y,b=x-v,A=M*M+b*b,I=l-u,w=y*x-_*v,C=(b<0?-1:1)*mathSqrt(mathMax$7(0,I*I*A-w*w)),E=(w*b-M*C)/A,P=(-w*M-b*C)/A,D=(w*b+M*C)/A,L=(-w*M+b*C)/A,R=E-S,O=P-T,N=D-S,V=L-T;return R*R+O*O>N*N+V*V&&(E=D,P=L),{cx:E,cy:P,x0:-f,y0:-g,x1:E*(l/I-1),y1:P*(l/I-1)}}function normalizeCornerRadius(a){var n;if(isArray$1(a)){var r=a.length;if(!r)return a;r===1?n=[a[0],a[0],0,0]:r===2?n=[a[0],a[0],a[1],a[1]]:r===3?n=a.concat(a[2]):n=a}else n=[a,a,a,a];return n}function buildPath$1(a,n){var r,o=mathMax$7(n.r,0),l=mathMax$7(n.r0||0,0),u=o>0,c=l>0;if(!(!u&&!c)){if(u||(o=l,l=0),l>o){var h=o;o=l,l=h}var d=n.startAngle,p=n.endAngle;if(!(isNaN(d)||isNaN(p))){var f=n.cx,g=n.cy,y=!!n.clockwise,v=mathAbs$1(p-d),_=v>PI2$3&&v%PI2$3;if(_>e&&(v=_),!(o>e))a.moveTo(f,g);else if(v>PI2$3-e)a.moveTo(f+o*mathCos$1(d),g+o*mathSin$1(d)),a.arc(f,g,o,d,p,!y),l>e&&(a.moveTo(f+l*mathCos$1(p),g+l*mathSin$1(p)),a.arc(f,g,l,p,d,y));else{var x=void 0,S=void 0,T=void 0,M=void 0,b=void 0,A=void 0,I=void 0,w=void 0,C=void 0,E=void 0,P=void 0,D=void 0,L=void 0,R=void 0,O=void 0,N=void 0,V=o*mathCos$1(d),B=o*mathSin$1(d),G=l*mathCos$1(p),F=l*mathSin$1(p),z=v>e;if(z){var H=n.cornerRadius;H&&(r=normalizeCornerRadius(H),x=r[0],S=r[1],T=r[2],M=r[3]);var U=mathAbs$1(o-l)/2;if(b=mathMin$7(U,T),A=mathMin$7(U,M),I=mathMin$7(U,x),w=mathMin$7(U,S),P=C=mathMax$7(b,A),D=E=mathMax$7(I,w),(C>e||E>e)&&(L=o*mathCos$1(p),R=o*mathSin$1(p),O=l*mathCos$1(d),N=l*mathSin$1(d),v<PI$6)){var Y=intersect(V,B,O,N,L,R,G,F);if(Y){var Z=V-Y[0],X=B-Y[1],K=L-Y[0],te=R-Y[1],ae=1/mathSin$1(mathACos((Z*K+X*te)/(mathSqrt(Z*Z+X*X)*mathSqrt(K*K+te*te)))/2),J=mathSqrt(Y[0]*Y[0]+Y[1]*Y[1]);P=mathMin$7(C,(o-J)/(ae+1)),D=mathMin$7(E,(l-J)/(ae-1))}}}if(!z)a.moveTo(f+V,g+B);else if(P>e){var j=mathMin$7(T,P),Q=mathMin$7(M,P),W=computeCornerTangents(O,N,V,B,o,j,y),q=computeCornerTangents(L,R,G,F,o,Q,y);a.moveTo(f+W.cx+W.x0,g+W.cy+W.y0),P<C&&j===Q?a.arc(f+W.cx,g+W.cy,P,mathATan2(W.y0,W.x0),mathATan2(q.y0,q.x0),!y):(j>0&&a.arc(f+W.cx,g+W.cy,j,mathATan2(W.y0,W.x0),mathATan2(W.y1,W.x1),!y),a.arc(f,g,o,mathATan2(W.cy+W.y1,W.cx+W.x1),mathATan2(q.cy+q.y1,q.cx+q.x1),!y),Q>0&&a.arc(f+q.cx,g+q.cy,Q,mathATan2(q.y1,q.x1),mathATan2(q.y0,q.x0),!y))}else a.moveTo(f+V,g+B),a.arc(f,g,o,d,p,!y);if(!(l>e)||!z)a.lineTo(f+G,g+F);else if(D>e){var j=mathMin$7(x,D),Q=mathMin$7(S,D),W=computeCornerTangents(G,F,L,R,l,-Q,y),q=computeCornerTangents(V,B,O,N,l,-j,y);a.lineTo(f+W.cx+W.x0,g+W.cy+W.y0),D<E&&j===Q?a.arc(f+W.cx,g+W.cy,D,mathATan2(W.y0,W.x0),mathATan2(q.y0,q.x0),!y):(Q>0&&a.arc(f+W.cx,g+W.cy,Q,mathATan2(W.y0,W.x0),mathATan2(W.y1,W.x1),!y),a.arc(f,g,l,mathATan2(W.cy+W.y1,W.cx+W.x1),mathATan2(q.cy+q.y1,q.cx+q.x1),y),j>0&&a.arc(f+q.cx,g+q.cy,j,mathATan2(q.y1,q.x1),mathATan2(q.y0,q.x0),!y))}else a.lineTo(f+G,g+F),a.arc(f,g,l,p,d,y)}a.closePath()}}}var SectorShape=function(){function a(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0,this.cornerRadius=0}return a}(),Sector=function(a){__extends(n,a);function n(r){return a.call(this,r)||this}return n.prototype.getDefaultShape=function(){return new SectorShape},n.prototype.buildPath=function(r,o){buildPath$1(r,o)},n.prototype.isZeroArea=function(){return this.shape.startAngle===this.shape.endAngle||this.shape.r===this.shape.r0},n}(Path$1);Sector.prototype.type="sector";const Sector$1=Sector;var RingShape=function(){function a(){this.cx=0,this.cy=0,this.r=0,this.r0=0}return a}(),Ring=function(a){__extends(n,a);function n(r){return a.call(this,r)||this}return n.prototype.getDefaultShape=function(){return new RingShape},n.prototype.buildPath=function(r,o){var l=o.cx,u=o.cy,c=Math.PI*2;r.moveTo(l+o.r,u),r.arc(l,u,o.r,0,c,!1),r.moveTo(l+o.r0,u),r.arc(l,u,o.r0,0,c,!0)},n}(Path$1);Ring.prototype.type="ring";const Ring$1=Ring;function smoothBezier(a,n,r,o){var l=[],u=[],c=[],h=[],d,p,f,g;if(o){f=[1/0,1/0],g=[-1/0,-1/0];for(var y=0,v=a.length;y<v;y++)min$1(f,f,a[y]),max$1(g,g,a[y]);min$1(f,f,o[0]),max$1(g,g,o[1])}for(var y=0,v=a.length;y<v;y++){var _=a[y];if(r)d=a[y?y-1:v-1],p=a[(y+1)%v];else if(y===0||y===v-1){l.push(clone$3(a[y]));continue}else d=a[y-1],p=a[y+1];sub(u,p,d),scale$2(u,u,n);var x=distance(_,d),S=distance(_,p),T=x+S;T!==0&&(x/=T,S/=T),scale$2(c,u,-x),scale$2(h,u,S);var M=add([],_,c),b=add([],_,h);o&&(max$1(M,M,f),min$1(M,M,g),max$1(b,b,f),min$1(b,b,g)),l.push(M),l.push(b)}return r&&l.push(l.shift()),l}function buildPath(a,n,r){var o=n.smooth,l=n.points;if(l&&l.length>=2){if(o){var u=smoothBezier(l,o,r,n.smoothConstraint);a.moveTo(l[0][0],l[0][1]);for(var c=l.length,h=0;h<(r?c:c-1);h++){var d=u[h*2],p=u[h*2+1],f=l[(h+1)%c];a.bezierCurveTo(d[0],d[1],p[0],p[1],f[0],f[1])}}else{a.moveTo(l[0][0],l[0][1]);for(var h=1,g=l.length;h<g;h++)a.lineTo(l[h][0],l[h][1])}r&&a.closePath()}}var PolygonShape=function(){function a(){this.points=null,this.smooth=0,this.smoothConstraint=null}return a}(),Polygon=function(a){__extends(n,a);function n(r){return a.call(this,r)||this}return n.prototype.getDefaultShape=function(){return new PolygonShape},n.prototype.buildPath=function(r,o){buildPath(r,o,!0)},n}(Path$1);Polygon.prototype.type="polygon";const Polygon$1=Polygon;var PolylineShape=function(){function a(){this.points=null,this.percent=1,this.smooth=0,this.smoothConstraint=null}return a}(),Polyline$2=function(a){__extends(n,a);function n(r){return a.call(this,r)||this}return n.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},n.prototype.getDefaultShape=function(){return new PolylineShape},n.prototype.buildPath=function(r,o){buildPath(r,o,!1)},n}(Path$1);Polyline$2.prototype.type="polyline";const Polyline$3=Polyline$2;var subPixelOptimizeOutputShape={},LineShape=function(){function a(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return a}(),Line$2=function(a){__extends(n,a);function n(r){return a.call(this,r)||this}return n.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},n.prototype.getDefaultShape=function(){return new LineShape},n.prototype.buildPath=function(r,o){var l,u,c,h;if(this.subPixelOptimize){var d=subPixelOptimizeLine$1(subPixelOptimizeOutputShape,o,this.style);l=d.x1,u=d.y1,c=d.x2,h=d.y2}else l=o.x1,u=o.y1,c=o.x2,h=o.y2;var p=o.percent;p!==0&&(r.moveTo(l,u),p<1&&(c=l*(1-p)+c*p,h=u*(1-p)+h*p),r.lineTo(c,h))},n.prototype.pointAt=function(r){var o=this.shape;return[o.x1*(1-r)+o.x2*r,o.y1*(1-r)+o.y2*r]},n}(Path$1);Line$2.prototype.type="line";const Line$3=Line$2;var out=[],BezierCurveShape=function(){function a(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.percent=1}return a}();function someVectorAt(a,n,r){var o=a.cpx2,l=a.cpy2;return o!=null||l!=null?[(r?cubicDerivativeAt:cubicAt)(a.x1,a.cpx1,a.cpx2,a.x2,n),(r?cubicDerivativeAt:cubicAt)(a.y1,a.cpy1,a.cpy2,a.y2,n)]:[(r?quadraticDerivativeAt:quadraticAt$1)(a.x1,a.cpx1,a.x2,n),(r?quadraticDerivativeAt:quadraticAt$1)(a.y1,a.cpy1,a.y2,n)]}var BezierCurve=function(a){__extends(n,a);function n(r){return a.call(this,r)||this}return n.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},n.prototype.getDefaultShape=function(){return new BezierCurveShape},n.prototype.buildPath=function(r,o){var l=o.x1,u=o.y1,c=o.x2,h=o.y2,d=o.cpx1,p=o.cpy1,f=o.cpx2,g=o.cpy2,y=o.percent;y!==0&&(r.moveTo(l,u),f==null||g==null?(y<1&&(quadraticSubdivide(l,d,c,y,out),d=out[1],c=out[2],quadraticSubdivide(u,p,h,y,out),p=out[1],h=out[2]),r.quadraticCurveTo(d,p,c,h)):(y<1&&(cubicSubdivide(l,d,f,c,y,out),d=out[1],f=out[2],c=out[3],cubicSubdivide(u,p,g,h,y,out),p=out[1],g=out[2],h=out[3]),r.bezierCurveTo(d,p,f,g,c,h)))},n.prototype.pointAt=function(r){return someVectorAt(this.shape,r,!1)},n.prototype.tangentAt=function(r){var o=someVectorAt(this.shape,r,!0);return normalize$3(o,o)},n}(Path$1);BezierCurve.prototype.type="bezier-curve";const BezierCurve$1=BezierCurve;var ArcShape=function(){function a(){this.cx=0,this.cy=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return a}(),Arc=function(a){__extends(n,a);function n(r){return a.call(this,r)||this}return n.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},n.prototype.getDefaultShape=function(){return new ArcShape},n.prototype.buildPath=function(r,o){var l=o.cx,u=o.cy,c=Math.max(o.r,0),h=o.startAngle,d=o.endAngle,p=o.clockwise,f=Math.cos(h),g=Math.sin(h);r.moveTo(f*c+l,g*c+u),r.arc(l,u,c,h,d,!p)},n}(Path$1);Arc.prototype.type="arc";const Arc$1=Arc;var CompoundPath=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type="compound",r}return n.prototype._updatePathDirty=function(){for(var r=this.shape.paths,o=this.shapeChanged(),l=0;l<r.length;l++)o=o||r[l].shapeChanged();o&&this.dirtyShape()},n.prototype.beforeBrush=function(){this._updatePathDirty();for(var r=this.shape.paths||[],o=this.getGlobalScale(),l=0;l<r.length;l++)r[l].path||r[l].createPathProxy(),r[l].path.setScale(o[0],o[1],r[l].segmentIgnoreThreshold)},n.prototype.buildPath=function(r,o){for(var l=o.paths||[],u=0;u<l.length;u++)l[u].buildPath(r,l[u].shape,!0)},n.prototype.afterBrush=function(){for(var r=this.shape.paths||[],o=0;o<r.length;o++)r[o].pathUpdated()},n.prototype.getBoundingRect=function(){return this._updatePathDirty.call(this),Path$1.prototype.getBoundingRect.call(this)},n}(Path$1);const CompoundPath$1=CompoundPath;var Gradient=function(){function a(n){this.colorStops=n||[]}return a.prototype.addColorStop=function(n,r){this.colorStops.push({offset:n,color:r})},a}();const Gradient$1=Gradient;var LinearGradient=function(a){__extends(n,a);function n(r,o,l,u,c,h){var d=a.call(this,c)||this;return d.x=r==null?0:r,d.y=o==null?0:o,d.x2=l==null?1:l,d.y2=u==null?0:u,d.type="linear",d.global=h||!1,d}return n}(Gradient$1);const LinearGradient$1=LinearGradient;var RadialGradient=function(a){__extends(n,a);function n(r,o,l,u,c){var h=a.call(this,u)||this;return h.x=r==null?.5:r,h.y=o==null?.5:o,h.r=l==null?.5:l,h.type="radial",h.global=c||!1,h}return n}(Gradient$1);const RadialGradient$1=RadialGradient;var extent=[0,0],extent2=[0,0],minTv=new Point$1,maxTv=new Point$1,OrientedBoundingRect=function(){function a(n,r){this._corners=[],this._axes=[],this._origin=[0,0];for(var o=0;o<4;o++)this._corners[o]=new Point$1;for(var o=0;o<2;o++)this._axes[o]=new Point$1;n&&this.fromBoundingRect(n,r)}return a.prototype.fromBoundingRect=function(n,r){var o=this._corners,l=this._axes,u=n.x,c=n.y,h=u+n.width,d=c+n.height;if(o[0].set(u,c),o[1].set(h,c),o[2].set(h,d),o[3].set(u,d),r)for(var p=0;p<4;p++)o[p].transform(r);Point$1.sub(l[0],o[1],o[0]),Point$1.sub(l[1],o[3],o[0]),l[0].normalize(),l[1].normalize();for(var p=0;p<2;p++)this._origin[p]=l[p].dot(o[0])},a.prototype.intersect=function(n,r){var o=!0,l=!r;return minTv.set(1/0,1/0),maxTv.set(0,0),!this._intersectCheckOneSide(this,n,minTv,maxTv,l,1)&&(o=!1,l)||!this._intersectCheckOneSide(n,this,minTv,maxTv,l,-1)&&(o=!1,l)||l||Point$1.copy(r,o?minTv:maxTv),o},a.prototype._intersectCheckOneSide=function(n,r,o,l,u,c){for(var h=!0,d=0;d<2;d++){var p=this._axes[d];if(this._getProjMinMaxOnAxis(d,n._corners,extent),this._getProjMinMaxOnAxis(d,r._corners,extent2),extent[1]<extent2[0]||extent[0]>extent2[1]){if(h=!1,u)return h;var f=Math.abs(extent2[0]-extent[1]),g=Math.abs(extent[0]-extent2[1]);Math.min(f,g)>l.len()&&(f<g?Point$1.scale(l,p,-f*c):Point$1.scale(l,p,g*c))}else if(o){var f=Math.abs(extent2[0]-extent[1]),g=Math.abs(extent[0]-extent2[1]);Math.min(f,g)<o.len()&&(f<g?Point$1.scale(o,p,f*c):Point$1.scale(o,p,-g*c))}}return h},a.prototype._getProjMinMaxOnAxis=function(n,r,o){for(var l=this._axes[n],u=this._origin,c=r[0].dot(l)+u[n],h=c,d=c,p=1;p<r.length;p++){var f=r[p].dot(l)+u[n];h=Math.min(f,h),d=Math.max(f,d)}o[0]=h,o[1]=d},a}();const OrientedBoundingRect$1=OrientedBoundingRect;var m=[],IncrementalDisplayable=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.notClear=!0,r.incremental=!0,r._displayables=[],r._temporaryDisplayables=[],r._cursor=0,r}return n.prototype.traverse=function(r,o){r.call(o,this)},n.prototype.useStyle=function(){this.style={}},n.prototype.getCursor=function(){return this._cursor},n.prototype.innerAfterBrush=function(){this._cursor=this._displayables.length},n.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.markRedraw(),this.notClear=!1},n.prototype.clearTemporalDisplayables=function(){this._temporaryDisplayables=[]},n.prototype.addDisplayable=function(r,o){o?this._temporaryDisplayables.push(r):this._displayables.push(r),this.markRedraw()},n.prototype.addDisplayables=function(r,o){o=o||!1;for(var l=0;l<r.length;l++)this.addDisplayable(r[l],o)},n.prototype.getDisplayables=function(){return this._displayables},n.prototype.getTemporalDisplayables=function(){return this._temporaryDisplayables},n.prototype.eachPendingDisplayable=function(r){for(var o=this._cursor;o<this._displayables.length;o++)r&&r(this._displayables[o]);for(var o=0;o<this._temporaryDisplayables.length;o++)r&&r(this._temporaryDisplayables[o])},n.prototype.update=function(){this.updateTransform();for(var r=this._cursor;r<this._displayables.length;r++){var o=this._displayables[r];o.parent=this,o.update(),o.parent=null}for(var r=0;r<this._temporaryDisplayables.length;r++){var o=this._temporaryDisplayables[r];o.parent=this,o.update(),o.parent=null}},n.prototype.getBoundingRect=function(){if(!this._rect){for(var r=new BoundingRect$1(1/0,1/0,-1/0,-1/0),o=0;o<this._displayables.length;o++){var l=this._displayables[o],u=l.getBoundingRect().clone();l.needLocalTransform()&&u.applyTransform(l.getLocalTransform(m)),r.union(u)}this._rect=r}return this._rect},n.prototype.contain=function(r,o){var l=this.transformCoordToLocal(r,o),u=this.getBoundingRect();if(u.contain(l[0],l[1]))for(var c=0;c<this._displayables.length;c++){var h=this._displayables[c];if(h.contain(r,o))return!0}return!1},n}(Displayable$1);const IncrementalDisplayable$1=IncrementalDisplayable;var transitionStore=makeInner();function getAnimationConfig(a,n,r,o,l){var u;if(n&&n.ecModel){var c=n.ecModel.getUpdatePayload();u=c&&c.animation}var h=n&&n.isAnimationEnabled(),d=a==="update";if(h){var p=void 0,f=void 0,g=void 0;o?(p=retrieve2(o.duration,200),f=retrieve2(o.easing,"cubicOut"),g=0):(p=n.getShallow(d?"animationDurationUpdate":"animationDuration"),f=n.getShallow(d?"animationEasingUpdate":"animationEasing"),g=n.getShallow(d?"animationDelayUpdate":"animationDelay")),u&&(u.duration!=null&&(p=u.duration),u.easing!=null&&(f=u.easing),u.delay!=null&&(g=u.delay)),isFunction(g)&&(g=g(r,l)),isFunction(p)&&(p=p(r));var y={duration:p||0,delay:g,easing:f};return y}else return null}function animateOrSetProps(a,n,r,o,l,u,c){var h=!1,d;isFunction(l)?(c=u,u=l,l=null):isObject$3(l)&&(u=l.cb,c=l.during,h=l.isFrom,d=l.removeOpt,l=l.dataIndex);var p=a==="leave";p||n.stopAnimation("leave");var f=getAnimationConfig(a,o,l,p?d||{}:null,o&&o.getAnimationDelayParams?o.getAnimationDelayParams(n,l):null);if(f&&f.duration>0){var g=f.duration,y=f.delay,v=f.easing,_={duration:g,delay:y||0,easing:v,done:u,force:!!u||!!c,setToFinal:!p,scope:a,during:c};h?n.animateFrom(r,_):n.animateTo(r,_)}else n.stopAnimation(),!h&&n.attr(r),c&&c(1),u&&u()}function updateProps$1(a,n,r,o,l,u){animateOrSetProps("update",a,n,r,o,l,u)}function initProps(a,n,r,o,l,u){animateOrSetProps("enter",a,n,r,o,l,u)}function isElementRemoved(a){if(!a.__zr)return!0;for(var n=0;n<a.animators.length;n++){var r=a.animators[n];if(r.scope==="leave")return!0}return!1}function removeElement(a,n,r,o,l,u){isElementRemoved(a)||animateOrSetProps("leave",a,n,r,o,l,u)}function fadeOutDisplayable(a,n,r,o){a.removeTextContent(),a.removeTextGuideLine(),removeElement(a,{style:{opacity:0}},n,r,o)}function removeElementWithFadeOut(a,n,r){function o(){a.parent&&a.parent.remove(a)}a.isGroup?a.traverse(function(l){l.isGroup||fadeOutDisplayable(l,n,r,o)}):fadeOutDisplayable(a,n,r,o)}function saveOldStyle(a){transitionStore(a).oldStyle=a.style}function getOldStyle(a){return transitionStore(a).oldStyle}var mathMax$6=Math.max,mathMin$6=Math.min,_customShapeMap={};function extendShape(a){return Path$1.extend(a)}var extendPathFromString=extendFromString;function extendPath(a,n){return extendPathFromString(a,n)}function registerShape(a,n){_customShapeMap[a]=n}function getShapeClass(a){if(_customShapeMap.hasOwnProperty(a))return _customShapeMap[a]}function makePath(a,n,r,o){var l=createFromString(a,n);return r&&(o==="center"&&(r=centerGraphic(r,l.getBoundingRect())),resizePath(l,r)),l}function makeImage(a,n,r){var o=new ZRImage$1({style:{image:a,x:n.x,y:n.y,width:n.width,height:n.height},onload:function(l){if(r==="center"){var u={width:l.width,height:l.height};o.setStyle(centerGraphic(n,u))}}});return o}function centerGraphic(a,n){var r=n.width/n.height,o=a.height*r,l;o<=a.width?l=a.height:(o=a.width,l=o/r);var u=a.x+a.width/2,c=a.y+a.height/2;return{x:u-o/2,y:c-l/2,width:o,height:l}}var mergePath=mergePath$1;function resizePath(a,n){if(a.applyTransform){var r=a.getBoundingRect(),o=r.calculateTransform(n);a.applyTransform(o)}}function subPixelOptimizeLine(a,n){return subPixelOptimizeLine$1(a,a,{lineWidth:n}),a}function subPixelOptimizeRect(a){return subPixelOptimizeRect$1(a.shape,a.shape,a.style),a}var subPixelOptimize=subPixelOptimize$1;function getTransform$1(a,n){for(var r=identity([]);a&&a!==n;)mul(r,a.getLocalTransform(),r),a=a.parent;return r}function applyTransform(a,n,r){return n&&!isArrayLike(n)&&(n=Transformable$1.getLocalTransform(n)),r&&(n=invert([],n)),applyTransform$1([],a,n)}function transformDirection(a,n,r){var o=n[4]===0||n[5]===0||n[0]===0?1:Math.abs(2*n[4]/n[0]),l=n[4]===0||n[5]===0||n[2]===0?1:Math.abs(2*n[4]/n[2]),u=[a==="left"?-o:a==="right"?o:0,a==="top"?-l:a==="bottom"?l:0];return u=applyTransform(u,n,r),Math.abs(u[0])>Math.abs(u[1])?u[0]>0?"right":"left":u[1]>0?"bottom":"top"}function isNotGroup(a){return!a.isGroup}function isPath$1(a){return a.shape!=null}function groupTransition(a,n,r){if(!a||!n)return;function o(c){var h={};return c.traverse(function(d){isNotGroup(d)&&d.anid&&(h[d.anid]=d)}),h}function l(c){var h={x:c.x,y:c.y,rotation:c.rotation};return isPath$1(c)&&(h.shape=extend({},c.shape)),h}var u=o(a);n.traverse(function(c){if(isNotGroup(c)&&c.anid){var h=u[c.anid];if(h){var d=l(c);c.attr(l(h)),updateProps$1(c,d,r,getECData(c).dataIndex)}}})}function clipPointsByRect(a,n){return map$1(a,function(r){var o=r[0];o=mathMax$6(o,n.x),o=mathMin$6(o,n.x+n.width);var l=r[1];return l=mathMax$6(l,n.y),l=mathMin$6(l,n.y+n.height),[o,l]})}function clipRectByRect(a,n){var r=mathMax$6(a.x,n.x),o=mathMin$6(a.x+a.width,n.x+n.width),l=mathMax$6(a.y,n.y),u=mathMin$6(a.y+a.height,n.y+n.height);if(o>=r&&u>=l)return{x:r,y:l,width:o-r,height:u-l}}function createIcon(a,n,r){var o=extend({rectHover:!0},n),l=o.style={strokeNoScale:!0};if(r=r||{x:-1,y:-1,width:2,height:2},a)return a.indexOf("image://")===0?(l.image=a.slice(8),defaults(l,r),new ZRImage$1(o)):makePath(a.replace("path://",""),o,r,"center")}function linePolygonIntersect(a,n,r,o,l){for(var u=0,c=l[l.length-1];u<l.length;u++){var h=l[u];if(lineLineIntersect$1(a,n,r,o,h[0],h[1],c[0],c[1]))return!0;c=h}}function lineLineIntersect$1(a,n,r,o,l,u,c,h){var d=r-a,p=o-n,f=c-l,g=h-u,y=crossProduct2d$1(f,g,d,p);if(nearZero(y))return!1;var v=a-l,_=n-u,x=crossProduct2d$1(v,_,d,p)/y;if(x<0||x>1)return!1;var S=crossProduct2d$1(v,_,f,g)/y;return!(S<0||S>1)}function crossProduct2d$1(a,n,r,o){return a*o-r*n}function nearZero(a){return a<=1e-6&&a>=-1e-6}function setTooltipConfig(a){var n=a.itemTooltipOption,r=a.componentModel,o=a.itemName,l=isString(n)?{formatter:n}:n,u=r.mainType,c=r.componentIndex,h={componentType:u,name:o,$vars:["name"]};h[u+"Index"]=c;var d=a.formatterParamsExtra;d&&each$f(keys(d),function(f){hasOwn(h,f)||(h[f]=d[f],h.$vars.push(f))});var p=getECData(a.el);p.componentMainType=u,p.componentIndex=c,p.tooltipConfig={name:o,option:defaults({content:o,encodeHTMLContent:!0,formatterParams:h},l)}}function traverseElement(a,n){var r;a.isGroup&&(r=n(a)),r||a.traverse(n)}function traverseElements(a,n){if(a)if(isArray$1(a))for(var r=0;r<a.length;r++)traverseElement(a[r],n);else traverseElement(a,n)}registerShape("circle",Circle$1);registerShape("ellipse",Ellipse$1);registerShape("sector",Sector$1);registerShape("ring",Ring$1);registerShape("polygon",Polygon$1);registerShape("polyline",Polyline$3);registerShape("rect",Rect$3);registerShape("line",Line$3);registerShape("bezierCurve",BezierCurve$1);registerShape("arc",Arc$1);const graphic$1=Object.freeze(Object.defineProperty({__proto__:null,updateProps:updateProps$1,initProps,removeElement,removeElementWithFadeOut,isElementRemoved,extendShape,extendPath,registerShape,getShapeClass,makePath,makeImage,mergePath,resizePath,subPixelOptimizeLine,subPixelOptimizeRect,subPixelOptimize,getTransform:getTransform$1,applyTransform,transformDirection,groupTransition,clipPointsByRect,clipRectByRect,createIcon,linePolygonIntersect,lineLineIntersect:lineLineIntersect$1,setTooltipConfig,traverseElements,Group:Group$4,Image:ZRImage$1,Text:ZRText$1,Circle:Circle$1,Ellipse:Ellipse$1,Sector:Sector$1,Ring:Ring$1,Polygon:Polygon$1,Polyline:Polyline$3,Rect:Rect$3,Line:Line$3,BezierCurve:BezierCurve$1,Arc:Arc$1,IncrementalDisplayable:IncrementalDisplayable$1,CompoundPath:CompoundPath$1,LinearGradient:LinearGradient$1,RadialGradient:RadialGradient$1,BoundingRect:BoundingRect$1,OrientedBoundingRect:OrientedBoundingRect$1,Point:Point$1,Path:Path$1},Symbol.toStringTag,{value:"Module"}));var EMPTY_OBJ={};function setLabelText(a,n){for(var r=0;r<SPECIAL_STATES.length;r++){var o=SPECIAL_STATES[r],l=n[o],u=a.ensureState(o);u.style=u.style||{},u.style.text=l}var c=a.currentStates.slice();a.clearStates(!0),a.setStyle({text:n.normal}),a.useStates(c,!0)}function getLabelText(a,n,r){var o=a.labelFetcher,l=a.labelDataIndex,u=a.labelDimIndex,c=n.normal,h;o&&(h=o.getFormattedLabel(l,"normal",null,u,c&&c.get("formatter"),r!=null?{interpolatedValue:r}:null)),h==null&&(h=isFunction(a.defaultText)?a.defaultText(l,a,r):a.defaultText);for(var d={normal:h},p=0;p<SPECIAL_STATES.length;p++){var f=SPECIAL_STATES[p],g=n[f];d[f]=retrieve2(o?o.getFormattedLabel(l,f,null,u,g&&g.get("formatter")):null,h)}return d}function setLabelStyle(a,n,r,o){r=r||EMPTY_OBJ;for(var l=a instanceof ZRText$1,u=!1,c=0;c<DISPLAY_STATES.length;c++){var h=n[DISPLAY_STATES[c]];if(h&&h.getShallow("show")){u=!0;break}}var d=l?a:a.getTextContent();if(u){l||(d||(d=new ZRText$1,a.setTextContent(d)),a.stateProxy&&(d.stateProxy=a.stateProxy));var p=getLabelText(r,n),f=n.normal,g=!!f.getShallow("show"),y=createTextStyle$1(f,o&&o.normal,r,!1,!l);y.text=p.normal,l||a.setTextConfig(createTextConfig(f,r,!1));for(var c=0;c<SPECIAL_STATES.length;c++){var v=SPECIAL_STATES[c],h=n[v];if(h){var _=d.ensureState(v),x=!!retrieve2(h.getShallow("show"),g);if(x!==g&&(_.ignore=!x),_.style=createTextStyle$1(h,o&&o[v],r,!0,!l),_.style.text=p[v],!l){var S=a.ensureState(v);S.textConfig=createTextConfig(h,r,!0)}}}d.silent=!!f.getShallow("silent"),d.style.x!=null&&(y.x=d.style.x),d.style.y!=null&&(y.y=d.style.y),d.ignore=!g,d.useStyle(y),d.dirty(),r.enableTextSetter&&(labelInner(d).setLabelText=function(T){var M=getLabelText(r,n,T);setLabelText(d,M)})}else d&&(d.ignore=!0);a.dirty()}function getLabelStatesModels(a,n){n=n||"label";for(var r={normal:a.getModel(n)},o=0;o<SPECIAL_STATES.length;o++){var l=SPECIAL_STATES[o];r[l]=a.getModel([l,n])}return r}function createTextStyle$1(a,n,r,o,l){var u={};return setTextStyleCommon(u,a,r,o,l),n&&extend(u,n),u}function createTextConfig(a,n,r){n=n||{};var o={},l,u=a.getShallow("rotate"),c=retrieve2(a.getShallow("distance"),r?null:5),h=a.getShallow("offset");return l=a.getShallow("position")||(r?null:"inside"),l==="outside"&&(l=n.defaultOutsidePosition||"top"),l!=null&&(o.position=l),h!=null&&(o.offset=h),u!=null&&(u*=Math.PI/180,o.rotation=u),c!=null&&(o.distance=c),o.outsideFill=a.get("color")==="inherit"?n.inheritColor||null:"auto",o}function setTextStyleCommon(a,n,r,o,l){r=r||EMPTY_OBJ;var u=n.ecModel,c=u&&u.option.textStyle,h=getRichItemNames(n),d;if(h){d={};for(var p in h)if(h.hasOwnProperty(p)){var f=n.getModel(["rich",p]);setTokenTextStyle(d[p]={},f,c,r,o,l,!1,!0)}}d&&(a.rich=d);var g=n.get("overflow");g&&(a.overflow=g);var y=n.get("minMargin");y!=null&&(a.margin=y),setTokenTextStyle(a,n,c,r,o,l,!0,!1)}function getRichItemNames(a){for(var n;a&&a!==a.ecModel;){var r=(a.option||EMPTY_OBJ).rich;if(r){n=n||{};for(var o=keys(r),l=0;l<o.length;l++){var u=o[l];n[u]=1}}a=a.parentModel}return n}var TEXT_PROPS_WITH_GLOBAL=["fontStyle","fontWeight","fontSize","fontFamily","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY"],TEXT_PROPS_SELF=["align","lineHeight","width","height","tag","verticalAlign","ellipsis"],TEXT_PROPS_BOX=["padding","borderWidth","borderRadius","borderDashOffset","backgroundColor","borderColor","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"];function setTokenTextStyle(a,n,r,o,l,u,c,h){r=!l&&r||EMPTY_OBJ;var d=o&&o.inheritColor,p=n.getShallow("color"),f=n.getShallow("textBorderColor"),g=retrieve2(n.getShallow("opacity"),r.opacity);(p==="inherit"||p==="auto")&&(p==="auto"&&deprecateReplaceLog("color: 'auto'","color: 'inherit'"),d?p=d:p=null),(f==="inherit"||f==="auto")&&(f==="auto"&&deprecateReplaceLog("color: 'auto'","color: 'inherit'"),d?f=d:f=null),u||(p=p||r.color,f=f||r.textBorderColor),p!=null&&(a.fill=p),f!=null&&(a.stroke=f);var y=retrieve2(n.getShallow("textBorderWidth"),r.textBorderWidth);y!=null&&(a.lineWidth=y);var v=retrieve2(n.getShallow("textBorderType"),r.textBorderType);v!=null&&(a.lineDash=v);var _=retrieve2(n.getShallow("textBorderDashOffset"),r.textBorderDashOffset);_!=null&&(a.lineDashOffset=_),!l&&g==null&&!h&&(g=o&&o.defaultOpacity),g!=null&&(a.opacity=g),!l&&!u&&a.fill==null&&o.inheritColor&&(a.fill=o.inheritColor);for(var x=0;x<TEXT_PROPS_WITH_GLOBAL.length;x++){var S=TEXT_PROPS_WITH_GLOBAL[x],T=retrieve2(n.getShallow(S),r[S]);T!=null&&(a[S]=T)}for(var x=0;x<TEXT_PROPS_SELF.length;x++){var S=TEXT_PROPS_SELF[x],T=n.getShallow(S);T!=null&&(a[S]=T)}if(a.verticalAlign==null){var M=n.getShallow("baseline");M!=null&&(a.verticalAlign=M)}if(!c||!o.disableBox){for(var x=0;x<TEXT_PROPS_BOX.length;x++){var S=TEXT_PROPS_BOX[x],T=n.getShallow(S);T!=null&&(a[S]=T)}var b=n.getShallow("borderType");b!=null&&(a.borderDash=b),(a.backgroundColor==="auto"||a.backgroundColor==="inherit")&&d&&(a.backgroundColor==="auto"&&deprecateReplaceLog("backgroundColor: 'auto'","backgroundColor: 'inherit'"),a.backgroundColor=d),(a.borderColor==="auto"||a.borderColor==="inherit")&&d&&(a.borderColor==="auto"&&deprecateReplaceLog("borderColor: 'auto'","borderColor: 'inherit'"),a.borderColor=d)}}function getFont(a,n){var r=n&&n.getModel("textStyle");return trim$1([a.fontStyle||r&&r.getShallow("fontStyle")||"",a.fontWeight||r&&r.getShallow("fontWeight")||"",(a.fontSize||r&&r.getShallow("fontSize")||12)+"px",a.fontFamily||r&&r.getShallow("fontFamily")||"sans-serif"].join(" "))}var labelInner=makeInner();function setLabelValueAnimation(a,n,r,o){if(a){var l=labelInner(a);l.prevValue=l.value,l.value=r;var u=n.normal;l.valueAnimation=u.get("valueAnimation"),l.valueAnimation&&(l.precision=u.get("precision"),l.defaultInterpolatedText=o,l.statesModels=n)}}function animateLabelValue(a,n,r,o,l){var u=labelInner(a);if(!u.valueAnimation||u.prevValue===u.value)return;var c=u.defaultInterpolatedText,h=retrieve2(u.interpolatedValue,u.prevValue),d=u.value;function p(f){var g=interpolateRawValues(r,u.precision,h,d,f);u.interpolatedValue=f===1?null:g;var y=getLabelText({labelDataIndex:n,labelFetcher:l,defaultText:c?c(g):g+""},u.statesModels,g);setLabelText(a,y)}a.percent=0,(u.prevValue==null?initProps:updateProps$1)(a,{percent:1},o,n,null,p)}var PATH_COLOR=["textStyle","color"],textStyleParams=["fontStyle","fontWeight","fontSize","fontFamily","padding","lineHeight","rich","width","height","overflow"],tmpText=new ZRText$1,TextStyleMixin=function(){function a(){}return a.prototype.getTextColor=function(n){var r=this.ecModel;return this.getShallow("color")||(!n&&r?r.get(PATH_COLOR):null)},a.prototype.getFont=function(){return getFont({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},a.prototype.getTextRect=function(n){for(var r={text:n,verticalAlign:this.getShallow("verticalAlign")||this.getShallow("baseline")},o=0;o<textStyleParams.length;o++)r[textStyleParams[o]]=this.getShallow(textStyleParams[o]);return tmpText.useStyle(r),tmpText.update(),tmpText.getBoundingRect()},a}();const TextStyleMixin$1=TextStyleMixin;var LINE_STYLE_KEY_MAP=[["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","type"],["lineDashOffset","dashOffset"],["lineCap","cap"],["lineJoin","join"],["miterLimit"]],getLineStyle=makeStyleMapper(LINE_STYLE_KEY_MAP),LineStyleMixin=function(){function a(){}return a.prototype.getLineStyle=function(n){return getLineStyle(this,n)},a}(),ITEM_STYLE_KEY_MAP=[["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","borderType"],["lineDashOffset","borderDashOffset"],["lineCap","borderCap"],["lineJoin","borderJoin"],["miterLimit","borderMiterLimit"]],getItemStyle=makeStyleMapper(ITEM_STYLE_KEY_MAP),ItemStyleMixin=function(){function a(){}return a.prototype.getItemStyle=function(n,r){return getItemStyle(this,n,r)},a}(),Model=function(){function a(n,r,o){this.parentModel=r,this.ecModel=o,this.option=n}return a.prototype.init=function(n,r,o){},a.prototype.mergeOption=function(n,r){merge(this.option,n,!0)},a.prototype.get=function(n,r){return n==null?this.option:this._doGet(this.parsePath(n),!r&&this.parentModel)},a.prototype.getShallow=function(n,r){var o=this.option,l=o==null?o:o[n];if(l==null&&!r){var u=this.parentModel;u&&(l=u.getShallow(n))}return l},a.prototype.getModel=function(n,r){var o=n!=null,l=o?this.parsePath(n):null,u=o?this._doGet(l):this.option;return r=r||this.parentModel&&this.parentModel.getModel(this.resolveParentPath(l)),new a(u,r,this.ecModel)},a.prototype.isEmpty=function(){return this.option==null},a.prototype.restoreData=function(){},a.prototype.clone=function(){var n=this.constructor;return new n(clone$4(this.option))},a.prototype.parsePath=function(n){return typeof n=="string"?n.split("."):n},a.prototype.resolveParentPath=function(n){return n},a.prototype.isAnimationEnabled=function(){if(!env$1.node&&this.option){if(this.option.animation!=null)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}},a.prototype._doGet=function(n,r){var o=this.option;if(!n)return o;for(var l=0;l<n.length&&!(!!n[l]&&(o=o&&typeof o=="object"?o[n[l]]:null,o==null));l++);return o==null&&r&&(o=r._doGet(this.resolveParentPath(n),r.parentModel)),o},a}();enableClassExtend(Model);enableClassCheck(Model);mixin(Model,LineStyleMixin);mixin(Model,ItemStyleMixin);mixin(Model,AreaStyleMixin);mixin(Model,TextStyleMixin$1);const Model$1=Model;var base=Math.round(Math.random()*10);function getUID(a){return[a||"",base++].join("_")}function enableSubTypeDefaulter(a){var n={};a.registerSubTypeDefaulter=function(r,o){var l=parseClassType(r);n[l.main]=o},a.determineSubType=function(r,o){var l=o.type;if(!l){var u=parseClassType(r).main;a.hasSubTypes(r)&&n[u]&&(l=n[u](o))}return l}}function enableTopologicalTravel(a,n){a.topologicalTravel=function(u,c,h,d){if(!u.length)return;var p=r(c),f=p.graph,g=p.noEntryList,y={};for(each$f(u,function(M){y[M]=!0});g.length;){var v=g.pop(),_=f[v],x=!!y[v];x&&(h.call(d,v,_.originalDeps.slice()),delete y[v]),each$f(_.successor,x?T:S)}each$f(y,function(){var M="";throw M=makePrintable("Circular dependency may exists: ",y,u,c),new Error(M)});function S(M){f[M].entryCount--,f[M].entryCount===0&&g.push(M)}function T(M){y[M]=!0,S(M)}};function r(u){var c={},h=[];return each$f(u,function(d){var p=o(c,d),f=p.originalDeps=n(d),g=l(f,u);p.entryCount=g.length,p.entryCount===0&&h.push(d),each$f(g,function(y){indexOf(p.predecessor,y)<0&&p.predecessor.push(y);var v=o(c,y);indexOf(v.successor,y)<0&&v.successor.push(d)})}),{graph:c,noEntryList:h}}function o(u,c){return u[c]||(u[c]={predecessor:[],successor:[]}),u[c]}function l(u,c){var h=[];return each$f(u,function(d){indexOf(c,d)>=0&&h.push(d)}),h}}function inheritDefaultOption(a,n){return merge(merge({},a,!0),n,!0)}const langEN={time:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],monthAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayOfWeekAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},legend:{selector:{all:"All",inverse:"Inv"}},toolbox:{brush:{title:{rect:"Box Select",polygon:"Lasso Select",lineX:"Horizontally Select",lineY:"Vertically Select",keep:"Keep Selections",clear:"Clear Selections"}},dataView:{title:"Data View",lang:["Data View","Close","Refresh"]},dataZoom:{title:{zoom:"Zoom",back:"Zoom Reset"}},magicType:{title:{line:"Switch to Line Chart",bar:"Switch to Bar Chart",stack:"Stack",tiled:"Tile"}},restore:{title:"Restore"},saveAsImage:{title:"Save as Image",lang:["Right Click to Save Image"]}},series:{typeNames:{pie:"Pie chart",bar:"Bar chart",line:"Line chart",scatter:"Scatter plot",effectScatter:"Ripple scatter plot",radar:"Radar chart",tree:"Tree",treemap:"Treemap",boxplot:"Boxplot",candlestick:"Candlestick",k:"K line chart",heatmap:"Heat map",map:"Map",parallel:"Parallel coordinate map",lines:"Line graph",graph:"Relationship graph",sankey:"Sankey diagram",funnel:"Funnel chart",gauge:"Gauge",pictorialBar:"Pictorial bar",themeRiver:"Theme River Map",sunburst:"Sunburst",custom:"Custom chart",chart:"Chart"}},aria:{general:{withTitle:'This is a chart about "{title}"',withoutTitle:"This is a chart"},series:{single:{prefix:"",withName:" with type {seriesType} named {seriesName}.",withoutName:" with type {seriesType}."},multiple:{prefix:". It consists of {seriesCount} series count.",withName:" The {seriesId} series is a {seriesType} representing {seriesName}.",withoutName:" The {seriesId} series is a {seriesType}.",separator:{middle:"",end:""}}},data:{allData:"The data is as follows: ",partialData:"The first {displayCnt} items are: ",withName:"the data for {name} is {value}",withoutName:"{value}",separator:{middle:", ",end:". "}}}},langZH={time:{month:["\u4E00\u6708","\u4E8C\u6708","\u4E09\u6708","\u56DB\u6708","\u4E94\u6708","\u516D\u6708","\u4E03\u6708","\u516B\u6708","\u4E5D\u6708","\u5341\u6708","\u5341\u4E00\u6708","\u5341\u4E8C\u6708"],monthAbbr:["1\u6708","2\u6708","3\u6708","4\u6708","5\u6708","6\u6708","7\u6708","8\u6708","9\u6708","10\u6708","11\u6708","12\u6708"],dayOfWeek:["\u661F\u671F\u65E5","\u661F\u671F\u4E00","\u661F\u671F\u4E8C","\u661F\u671F\u4E09","\u661F\u671F\u56DB","\u661F\u671F\u4E94","\u661F\u671F\u516D"],dayOfWeekAbbr:["\u65E5","\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D"]},legend:{selector:{all:"\u5168\u9009",inverse:"\u53CD\u9009"}},toolbox:{brush:{title:{rect:"\u77E9\u5F62\u9009\u62E9",polygon:"\u5708\u9009",lineX:"\u6A2A\u5411\u9009\u62E9",lineY:"\u7EB5\u5411\u9009\u62E9",keep:"\u4FDD\u6301\u9009\u62E9",clear:"\u6E05\u9664\u9009\u62E9"}},dataView:{title:"\u6570\u636E\u89C6\u56FE",lang:["\u6570\u636E\u89C6\u56FE","\u5173\u95ED","\u5237\u65B0"]},dataZoom:{title:{zoom:"\u533A\u57DF\u7F29\u653E",back:"\u533A\u57DF\u7F29\u653E\u8FD8\u539F"}},magicType:{title:{line:"\u5207\u6362\u4E3A\u6298\u7EBF\u56FE",bar:"\u5207\u6362\u4E3A\u67F1\u72B6\u56FE",stack:"\u5207\u6362\u4E3A\u5806\u53E0",tiled:"\u5207\u6362\u4E3A\u5E73\u94FA"}},restore:{title:"\u8FD8\u539F"},saveAsImage:{title:"\u4FDD\u5B58\u4E3A\u56FE\u7247",lang:["\u53F3\u952E\u53E6\u5B58\u4E3A\u56FE\u7247"]}},series:{typeNames:{pie:"\u997C\u56FE",bar:"\u67F1\u72B6\u56FE",line:"\u6298\u7EBF\u56FE",scatter:"\u6563\u70B9\u56FE",effectScatter:"\u6D9F\u6F2A\u6563\u70B9\u56FE",radar:"\u96F7\u8FBE\u56FE",tree:"\u6811\u56FE",treemap:"\u77E9\u5F62\u6811\u56FE",boxplot:"\u7BB1\u578B\u56FE",candlestick:"K\u7EBF\u56FE",k:"K\u7EBF\u56FE",heatmap:"\u70ED\u529B\u56FE",map:"\u5730\u56FE",parallel:"\u5E73\u884C\u5750\u6807\u56FE",lines:"\u7EBF\u56FE",graph:"\u5173\u7CFB\u56FE",sankey:"\u6851\u57FA\u56FE",funnel:"\u6F0F\u6597\u56FE",gauge:"\u4EEA\u8868\u76D8\u56FE",pictorialBar:"\u8C61\u5F62\u67F1\u56FE",themeRiver:"\u4E3B\u9898\u6CB3\u6D41\u56FE",sunburst:"\u65ED\u65E5\u56FE",custom:"\u81EA\u5B9A\u4E49\u56FE\u8868",chart:"\u56FE\u8868"}},aria:{general:{withTitle:"\u8FD9\u662F\u4E00\u4E2A\u5173\u4E8E\u201C{title}\u201D\u7684\u56FE\u8868\u3002",withoutTitle:"\u8FD9\u662F\u4E00\u4E2A\u56FE\u8868\uFF0C"},series:{single:{prefix:"",withName:"\u56FE\u8868\u7C7B\u578B\u662F{seriesType}\uFF0C\u8868\u793A{seriesName}\u3002",withoutName:"\u56FE\u8868\u7C7B\u578B\u662F{seriesType}\u3002"},multiple:{prefix:"\u5B83\u7531{seriesCount}\u4E2A\u56FE\u8868\u7CFB\u5217\u7EC4\u6210\u3002",withName:"\u7B2C{seriesId}\u4E2A\u7CFB\u5217\u662F\u4E00\u4E2A\u8868\u793A{seriesName}\u7684{seriesType}\uFF0C",withoutName:"\u7B2C{seriesId}\u4E2A\u7CFB\u5217\u662F\u4E00\u4E2A{seriesType}\uFF0C",separator:{middle:"\uFF1B",end:"\u3002"}}},data:{allData:"\u5176\u6570\u636E\u662F\u2014\u2014",partialData:"\u5176\u4E2D\uFF0C\u524D{displayCnt}\u9879\u662F\u2014\u2014",withName:"{name}\u7684\u6570\u636E\u662F{value}",withoutName:"{value}",separator:{middle:"\uFF0C",end:""}}}};var LOCALE_ZH="ZH",LOCALE_EN="EN",DEFAULT_LOCALE=LOCALE_EN,localeStorage={},localeModels={},SYSTEM_LANG=env$1.domSupported?function(){var a=(document.documentElement.lang||navigator.language||navigator.browserLanguage||DEFAULT_LOCALE).toUpperCase();return a.indexOf(LOCALE_ZH)>-1?LOCALE_ZH:DEFAULT_LOCALE}():DEFAULT_LOCALE;function registerLocale(a,n){a=a.toUpperCase(),localeModels[a]=new Model$1(n),localeStorage[a]=n}function createLocaleObject(a){if(isString(a)){var n=localeStorage[a.toUpperCase()]||{};return a===LOCALE_ZH||a===LOCALE_EN?clone$4(n):merge(clone$4(n),clone$4(localeStorage[DEFAULT_LOCALE]),!1)}else return merge(clone$4(a),clone$4(localeStorage[DEFAULT_LOCALE]),!1)}function getLocaleModel(a){return localeModels[a]}function getDefaultLocaleModel(){return localeModels[DEFAULT_LOCALE]}registerLocale(LOCALE_EN,langEN);registerLocale(LOCALE_ZH,langZH);var ONE_SECOND=1e3,ONE_MINUTE=ONE_SECOND*60,ONE_HOUR=ONE_MINUTE*60,ONE_DAY=ONE_HOUR*24,ONE_YEAR=ONE_DAY*365,defaultLeveledFormatter={year:"{yyyy}",month:"{MMM}",day:"{d}",hour:"{HH}:{mm}",minute:"{HH}:{mm}",second:"{HH}:{mm}:{ss}",millisecond:"{HH}:{mm}:{ss} {SSS}",none:"{yyyy}-{MM}-{dd} {HH}:{mm}:{ss} {SSS}"},fullDayFormatter="{yyyy}-{MM}-{dd}",fullLeveledFormatter={year:"{yyyy}",month:"{yyyy}-{MM}",day:fullDayFormatter,hour:fullDayFormatter+" "+defaultLeveledFormatter.hour,minute:fullDayFormatter+" "+defaultLeveledFormatter.minute,second:fullDayFormatter+" "+defaultLeveledFormatter.second,millisecond:defaultLeveledFormatter.none},primaryTimeUnits=["year","month","day","hour","minute","second","millisecond"],timeUnits=["year","half-year","quarter","month","week","half-week","day","half-day","quarter-day","hour","minute","second","millisecond"];function pad(a,n){return a+="","0000".substr(0,n-a.length)+a}function getPrimaryTimeUnit(a){switch(a){case"half-year":case"quarter":return"month";case"week":case"half-week":return"day";case"half-day":case"quarter-day":return"hour";default:return a}}function isPrimaryTimeUnit(a){return a===getPrimaryTimeUnit(a)}function getDefaultFormatPrecisionOfInterval(a){switch(a){case"year":case"month":return"day";case"millisecond":return"millisecond";default:return"second"}}function format$1(a,n,r,o){var l=parseDate(a),u=l[fullYearGetterName(r)](),c=l[monthGetterName(r)]()+1,h=Math.floor((c-1)/3)+1,d=l[dateGetterName(r)](),p=l["get"+(r?"UTC":"")+"Day"](),f=l[hoursGetterName(r)](),g=(f-1)%12+1,y=l[minutesGetterName(r)](),v=l[secondsGetterName(r)](),_=l[millisecondsGetterName(r)](),x=f>=12?"pm":"am",S=x.toUpperCase(),T=o instanceof Model$1?o:getLocaleModel(o||SYSTEM_LANG)||getDefaultLocaleModel(),M=T.getModel("time"),b=M.get("month"),A=M.get("monthAbbr"),I=M.get("dayOfWeek"),w=M.get("dayOfWeekAbbr");return(n||"").replace(/{a}/g,x+"").replace(/{A}/g,S+"").replace(/{yyyy}/g,u+"").replace(/{yy}/g,pad(u%100+"",2)).replace(/{Q}/g,h+"").replace(/{MMMM}/g,b[c-1]).replace(/{MMM}/g,A[c-1]).replace(/{MM}/g,pad(c,2)).replace(/{M}/g,c+"").replace(/{dd}/g,pad(d,2)).replace(/{d}/g,d+"").replace(/{eeee}/g,I[p]).replace(/{ee}/g,w[p]).replace(/{e}/g,p+"").replace(/{HH}/g,pad(f,2)).replace(/{H}/g,f+"").replace(/{hh}/g,pad(g+"",2)).replace(/{h}/g,g+"").replace(/{mm}/g,pad(y,2)).replace(/{m}/g,y+"").replace(/{ss}/g,pad(v,2)).replace(/{s}/g,v+"").replace(/{SSS}/g,pad(_,3)).replace(/{S}/g,_+"")}function leveledFormat(a,n,r,o,l){var u=null;if(isString(r))u=r;else if(isFunction(r))u=r(a.value,n,{level:a.level});else{var c=extend({},defaultLeveledFormatter);if(a.level>0)for(var h=0;h<primaryTimeUnits.length;++h)c[primaryTimeUnits[h]]="{primary|"+c[primaryTimeUnits[h]]+"}";var d=r?r.inherit===!1?r:defaults(r,c):c,p=getUnitFromValue(a.value,l);if(d[p])u=d[p];else if(d.inherit){for(var f=timeUnits.indexOf(p),h=f-1;h>=0;--h)if(d[p]){u=d[p];break}u=u||c.none}if(isArray$1(u)){var g=a.level==null?0:a.level>=0?a.level:u.length+a.level;g=Math.min(g,u.length-1),u=u[g]}}return format$1(new Date(a.value),u,l,o)}function getUnitFromValue(a,n){var r=parseDate(a),o=r[monthGetterName(n)]()+1,l=r[dateGetterName(n)](),u=r[hoursGetterName(n)](),c=r[minutesGetterName(n)](),h=r[secondsGetterName(n)](),d=r[millisecondsGetterName(n)](),p=d===0,f=p&&h===0,g=f&&c===0,y=g&&u===0,v=y&&l===1,_=v&&o===1;return _?"year":v?"month":y?"day":g?"hour":f?"minute":p?"second":"millisecond"}function getUnitValue(a,n,r){var o=isNumber(a)?parseDate(a):a;switch(n=n||getUnitFromValue(a,r),n){case"year":return o[fullYearGetterName(r)]();case"half-year":return o[monthGetterName(r)]()>=6?1:0;case"quarter":return Math.floor((o[monthGetterName(r)]()+1)/4);case"month":return o[monthGetterName(r)]();case"day":return o[dateGetterName(r)]();case"half-day":return o[hoursGetterName(r)]()/24;case"hour":return o[hoursGetterName(r)]();case"minute":return o[minutesGetterName(r)]();case"second":return o[secondsGetterName(r)]();case"millisecond":return o[millisecondsGetterName(r)]()}}function fullYearGetterName(a){return a?"getUTCFullYear":"getFullYear"}function monthGetterName(a){return a?"getUTCMonth":"getMonth"}function dateGetterName(a){return a?"getUTCDate":"getDate"}function hoursGetterName(a){return a?"getUTCHours":"getHours"}function minutesGetterName(a){return a?"getUTCMinutes":"getMinutes"}function secondsGetterName(a){return a?"getUTCSeconds":"getSeconds"}function millisecondsGetterName(a){return a?"getUTCMilliseconds":"getMilliseconds"}function fullYearSetterName(a){return a?"setUTCFullYear":"setFullYear"}function monthSetterName(a){return a?"setUTCMonth":"setMonth"}function dateSetterName(a){return a?"setUTCDate":"setDate"}function hoursSetterName(a){return a?"setUTCHours":"setHours"}function minutesSetterName(a){return a?"setUTCMinutes":"setMinutes"}function secondsSetterName(a){return a?"setUTCSeconds":"setSeconds"}function millisecondsSetterName(a){return a?"setUTCMilliseconds":"setMilliseconds"}function getTextRect(a,n,r,o,l,u,c,h){var d=new ZRText$1({style:{text:a,font:n,align:r,verticalAlign:o,padding:l,rich:u,overflow:c?"truncate":null,lineHeight:h}});return d.getBoundingRect()}function addCommas(a){if(!isNumeric(a))return isString(a)?a:"-";var n=(a+"").split(".");return n[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(n.length>1?"."+n[1]:"")}function toCamelCase(a,n){return a=(a||"").toLowerCase().replace(/-(.)/g,function(r,o){return o.toUpperCase()}),n&&a&&(a=a.charAt(0).toUpperCase()+a.slice(1)),a}var normalizeCssArray=normalizeCssArray$1;function makeValueReadable(a,n,r){var o="{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}";function l(f){return f&&trim$1(f)?f:"-"}function u(f){return!!(f!=null&&!isNaN(f)&&isFinite(f))}var c=n==="time",h=a instanceof Date;if(c||h){var d=c?parseDate(a):a;if(isNaN(+d)){if(h)return"-"}else return format$1(d,o,r)}if(n==="ordinal")return isStringSafe(a)?l(a):isNumber(a)&&u(a)?a+"":"-";var p=numericToNumber(a);return u(p)?addCommas(p):isStringSafe(a)?l(a):typeof a=="boolean"?a+"":"-"}var TPL_VAR_ALIAS=["a","b","c","d","e","f","g"],wrapVar=function(a,n){return"{"+a+(n==null?"":n)+"}"};function formatTpl(a,n,r){isArray$1(n)||(n=[n]);var o=n.length;if(!o)return"";for(var l=n[0].$vars||[],u=0;u<l.length;u++){var c=TPL_VAR_ALIAS[u];a=a.replace(wrapVar(c),wrapVar(c,0))}for(var h=0;h<o;h++)for(var d=0;d<l.length;d++){var p=n[h][l[d]];a=a.replace(wrapVar(TPL_VAR_ALIAS[d],h),r?encodeHTML(p):p)}return a}function formatTplSimple(a,n,r){return each$f(n,function(o,l){a=a.replace("{"+l+"}",r?encodeHTML(o):o)}),a}function getTooltipMarker(a,n){var r=isString(a)?{color:a,extraCssText:n}:a||{},o=r.color,l=r.type;n=r.extraCssText;var u=r.renderMode||"html";if(!o)return"";if(u==="html")return l==="subItem"?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+encodeHTML(o)+";"+(n||"")+'"></span>':'<span style="display:inline-block;margin-right:4px;border-radius:10px;width:10px;height:10px;background-color:'+encodeHTML(o)+";"+(n||"")+'"></span>';var c=r.markerId||"markerX";return{renderMode:u,content:"{"+c+"|}  ",style:l==="subItem"?{width:4,height:4,borderRadius:2,backgroundColor:o}:{width:10,height:10,borderRadius:5,backgroundColor:o}}}function formatTime(a,n,r){deprecateReplaceLog("echarts.format.formatTime","echarts.time.format"),(a==="week"||a==="month"||a==="quarter"||a==="half-year"||a==="year")&&(a=`MM-dd
yyyy`);var o=parseDate(n),l=r?"getUTC":"get",u=o[l+"FullYear"](),c=o[l+"Month"]()+1,h=o[l+"Date"](),d=o[l+"Hours"](),p=o[l+"Minutes"](),f=o[l+"Seconds"](),g=o[l+"Milliseconds"]();return a=a.replace("MM",pad(c,2)).replace("M",c).replace("yyyy",u).replace("yy",pad(u%100+"",2)).replace("dd",pad(h,2)).replace("d",h).replace("hh",pad(d,2)).replace("h",d).replace("mm",pad(p,2)).replace("m",p).replace("ss",pad(f,2)).replace("s",f).replace("SSS",pad(g,3)),a}function capitalFirst(a){return a&&a.charAt(0).toUpperCase()+a.substr(1)}function convertToColorString(a,n){return n=n||"transparent",isString(a)?a:isObject$3(a)&&a.colorStops&&(a.colorStops[0]||{}).color||n}function windowOpen(a,n){if(n==="_blank"||n==="blank"){var r=window.open();r.opener=null,r.location.href=a}else window.open(a,n)}var each$e=each$f,LOCATION_PARAMS=["left","right","top","bottom","width","height"],HV_NAMES=[["width","left","right"],["height","top","bottom"]];function boxLayout(a,n,r,o,l){var u=0,c=0;o==null&&(o=1/0),l==null&&(l=1/0);var h=0;n.eachChild(function(d,p){var f=d.getBoundingRect(),g=n.childAt(p+1),y=g&&g.getBoundingRect(),v,_;if(a==="horizontal"){var x=f.width+(y?-y.x+f.x:0);v=u+x,v>o||d.newline?(u=0,v=x,c+=h+r,h=f.height):h=Math.max(h,f.height)}else{var S=f.height+(y?-y.y+f.y:0);_=c+S,_>l||d.newline?(u+=h+r,c=0,_=S,h=f.width):h=Math.max(h,f.width)}d.newline||(d.x=u,d.y=c,d.markRedraw(),a==="horizontal"?u=v+r:c=_+r)})}var box=boxLayout;curry$1(boxLayout,"vertical");curry$1(boxLayout,"horizontal");function getAvailableSize(a,n,r){var o=n.width,l=n.height,u=parsePercent(a.left,o),c=parsePercent(a.top,l),h=parsePercent(a.right,o),d=parsePercent(a.bottom,l);return(isNaN(u)||isNaN(parseFloat(a.left)))&&(u=0),(isNaN(h)||isNaN(parseFloat(a.right)))&&(h=o),(isNaN(c)||isNaN(parseFloat(a.top)))&&(c=0),(isNaN(d)||isNaN(parseFloat(a.bottom)))&&(d=l),r=normalizeCssArray(r||0),{width:Math.max(h-u-r[1]-r[3],0),height:Math.max(d-c-r[0]-r[2],0)}}function getLayoutRect(a,n,r){r=normalizeCssArray(r||0);var o=n.width,l=n.height,u=parsePercent(a.left,o),c=parsePercent(a.top,l),h=parsePercent(a.right,o),d=parsePercent(a.bottom,l),p=parsePercent(a.width,o),f=parsePercent(a.height,l),g=r[2]+r[0],y=r[1]+r[3],v=a.aspect;switch(isNaN(p)&&(p=o-h-y-u),isNaN(f)&&(f=l-d-g-c),v!=null&&(isNaN(p)&&isNaN(f)&&(v>o/l?p=o*.8:f=l*.8),isNaN(p)&&(p=v*f),isNaN(f)&&(f=p/v)),isNaN(u)&&(u=o-h-p-y),isNaN(c)&&(c=l-d-f-g),a.left||a.right){case"center":u=o/2-p/2-r[3];break;case"right":u=o-p-y;break}switch(a.top||a.bottom){case"middle":case"center":c=l/2-f/2-r[0];break;case"bottom":c=l-f-g;break}u=u||0,c=c||0,isNaN(p)&&(p=o-y-u-(h||0)),isNaN(f)&&(f=l-g-c-(d||0));var _=new BoundingRect$1(u+r[3],c+r[0],p,f);return _.margin=r,_}function positionElement(a,n,r,o,l,u){var c=!l||!l.hv||l.hv[0],h=!l||!l.hv||l.hv[1],d=l&&l.boundingMode||"all";if(u=u||a,u.x=a.x,u.y=a.y,!c&&!h)return!1;var p;if(d==="raw")p=a.type==="group"?new BoundingRect$1(0,0,+n.width||0,+n.height||0):a.getBoundingRect();else if(p=a.getBoundingRect(),a.needLocalTransform()){var f=a.getLocalTransform();p=p.clone(),p.applyTransform(f)}var g=getLayoutRect(defaults({width:p.width,height:p.height},n),r,o),y=c?g.x-p.x:0,v=h?g.y-p.y:0;return d==="raw"?(u.x=y,u.y=v):(u.x+=y,u.y+=v),u===a&&a.markRedraw(),!0}function sizeCalculable(a,n){return a[HV_NAMES[n][0]]!=null||a[HV_NAMES[n][1]]!=null&&a[HV_NAMES[n][2]]!=null}function fetchLayoutMode(a){var n=a.layoutMode||a.constructor.layoutMode;return isObject$3(n)?n:n?{type:n}:null}function mergeLayoutParam(a,n,r){var o=r&&r.ignoreSize;!isArray$1(o)&&(o=[o,o]);var l=c(HV_NAMES[0],0),u=c(HV_NAMES[1],1);p(HV_NAMES[0],a,l),p(HV_NAMES[1],a,u);function c(f,g){var y={},v=0,_={},x=0,S=2;if(each$e(f,function(b){_[b]=a[b]}),each$e(f,function(b){h(n,b)&&(y[b]=_[b]=n[b]),d(y,b)&&v++,d(_,b)&&x++}),o[g])return d(n,f[1])?_[f[2]]=null:d(n,f[2])&&(_[f[1]]=null),_;if(x===S||!v)return _;if(v>=S)return y;for(var T=0;T<f.length;T++){var M=f[T];if(!h(y,M)&&h(a,M)){y[M]=a[M];break}}return y}function h(f,g){return f.hasOwnProperty(g)}function d(f,g){return f[g]!=null&&f[g]!=="auto"}function p(f,g,y){each$e(f,function(v){g[v]=y[v]})}}function getLayoutParams(a){return copyLayoutParams({},a)}function copyLayoutParams(a,n){return n&&a&&each$e(LOCATION_PARAMS,function(r){n.hasOwnProperty(r)&&(a[r]=n[r])}),a}var inner$l=makeInner(),ComponentModel=function(a){__extends(n,a);function n(r,o,l){var u=a.call(this,r,o,l)||this;return u.uid=getUID("ec_cpt_model"),u}return n.prototype.init=function(r,o,l){this.mergeDefaultAndTheme(r,l)},n.prototype.mergeDefaultAndTheme=function(r,o){var l=fetchLayoutMode(this),u=l?getLayoutParams(r):{},c=o.getTheme();merge(r,c.get(this.mainType)),merge(r,this.getDefaultOption()),l&&mergeLayoutParam(r,u,l)},n.prototype.mergeOption=function(r,o){merge(this.option,r,!0);var l=fetchLayoutMode(this);l&&mergeLayoutParam(this.option,r,l)},n.prototype.optionUpdated=function(r,o){},n.prototype.getDefaultOption=function(){var r=this.constructor;if(!isExtendedClass(r))return r.defaultOption;var o=inner$l(this);if(!o.defaultOption){for(var l=[],u=r;u;){var c=u.prototype.defaultOption;c&&l.push(c),u=u.superClass}for(var h={},d=l.length-1;d>=0;d--)h=merge(h,l[d],!0);o.defaultOption=h}return o.defaultOption},n.prototype.getReferringComponents=function(r,o){var l=r+"Index",u=r+"Id";return queryReferringComponents(this.ecModel,r,{index:this.get(l,!0),id:this.get(u,!0)},o)},n.prototype.getBoxLayoutParams=function(){var r=this;return{left:r.get("left"),top:r.get("top"),right:r.get("right"),bottom:r.get("bottom"),width:r.get("width"),height:r.get("height")}},n.prototype.getZLevelKey=function(){return""},n.prototype.setZLevel=function(r){this.option.zlevel=r},n.protoInitialize=function(){var r=n.prototype;r.type="component",r.id="",r.name="",r.mainType="",r.subType="",r.componentIndex=0}(),n}(Model$1);mountExtend(ComponentModel,Model$1);enableClassManagement(ComponentModel);enableSubTypeDefaulter(ComponentModel);enableTopologicalTravel(ComponentModel,getDependencies);function getDependencies(a){var n=[];return each$f(ComponentModel.getClassesByMainType(a),function(r){n=n.concat(r.dependencies||r.prototype.dependencies||[])}),n=map$1(n,function(r){return parseClassType(r).main}),a!=="dataset"&&indexOf(n,"dataset")<=0&&n.unshift("dataset"),n}const ComponentModel$1=ComponentModel;var platform="";typeof navigator<"u"&&(platform=navigator.platform||"");var decalColor="rgba(0, 0, 0, 0.2)";const globalDefault={darkMode:"auto",colorBy:"series",color:["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc"],gradientColor:["#f6efa6","#d88273","#bf444c"],aria:{decal:{decals:[{color:decalColor,dashArrayX:[1,0],dashArrayY:[2,5],symbolSize:1,rotation:Math.PI/6},{color:decalColor,symbol:"circle",dashArrayX:[[8,8],[0,8,8,0]],dashArrayY:[6,0],symbolSize:.8},{color:decalColor,dashArrayX:[1,0],dashArrayY:[4,3],rotation:-Math.PI/4},{color:decalColor,dashArrayX:[[6,6],[0,6,6,0]],dashArrayY:[6,0]},{color:decalColor,dashArrayX:[[1,0],[1,6]],dashArrayY:[1,0,6,0],rotation:Math.PI/4},{color:decalColor,symbol:"triangle",dashArrayX:[[9,9],[0,9,9,0]],dashArrayY:[7,2],symbolSize:.75}]}},textStyle:{fontFamily:platform.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,stateAnimation:{duration:300,easing:"cubicOut"},animation:"auto",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicInOut",animationEasingUpdate:"cubicInOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1};var VISUAL_DIMENSIONS=createHashMap(["tooltip","label","itemName","itemId","itemGroupId","itemChildGroupId","seriesName"]),SOURCE_FORMAT_ORIGINAL="original",SOURCE_FORMAT_ARRAY_ROWS="arrayRows",SOURCE_FORMAT_OBJECT_ROWS="objectRows",SOURCE_FORMAT_KEYED_COLUMNS="keyedColumns",SOURCE_FORMAT_TYPED_ARRAY="typedArray",SOURCE_FORMAT_UNKNOWN="unknown",SERIES_LAYOUT_BY_COLUMN="column",SERIES_LAYOUT_BY_ROW="row",BE_ORDINAL={Must:1,Might:2,Not:3},innerGlobalModel=makeInner();function resetSourceDefaulter(a){innerGlobalModel(a).datasetMap=createHashMap()}function makeSeriesEncodeForAxisCoordSys(a,n,r){var o={},l=querySeriesUpstreamDatasetModel(n);if(!l||!a)return o;var u=[],c=[],h=n.ecModel,d=innerGlobalModel(h).datasetMap,p=l.uid+"_"+r.seriesLayoutBy,f,g;a=a.slice(),each$f(a,function(x,S){var T=isObject$3(x)?x:a[S]={name:x};T.type==="ordinal"&&f==null&&(f=S,g=_(T)),o[T.name]=[]});var y=d.get(p)||d.set(p,{categoryWayDim:g,valueWayDim:0});each$f(a,function(x,S){var T=x.name,M=_(x);if(f==null){var b=y.valueWayDim;v(o[T],b,M),v(c,b,M),y.valueWayDim+=M}else if(f===S)v(o[T],0,M),v(u,0,M);else{var b=y.categoryWayDim;v(o[T],b,M),v(c,b,M),y.categoryWayDim+=M}});function v(x,S,T){for(var M=0;M<T;M++)x.push(S+M)}function _(x){var S=x.dimsDef;return S?S.length:1}return u.length&&(o.itemName=u),c.length&&(o.seriesName=c),o}function makeSeriesEncodeForNameBased(a,n,r){var o={},l=querySeriesUpstreamDatasetModel(a);if(!l)return o;var u=n.sourceFormat,c=n.dimensionsDefine,h;(u===SOURCE_FORMAT_OBJECT_ROWS||u===SOURCE_FORMAT_KEYED_COLUMNS)&&each$f(c,function(f,g){(isObject$3(f)?f.name:f)==="name"&&(h=g)});var d=function(){for(var f={},g={},y=[],v=0,_=Math.min(5,r);v<_;v++){var x=doGuessOrdinal(n.data,u,n.seriesLayoutBy,c,n.startIndex,v);y.push(x);var S=x===BE_ORDINAL.Not;if(S&&f.v==null&&v!==h&&(f.v=v),(f.n==null||f.n===f.v||!S&&y[f.n]===BE_ORDINAL.Not)&&(f.n=v),T(f)&&y[f.n]!==BE_ORDINAL.Not)return f;S||(x===BE_ORDINAL.Might&&g.v==null&&v!==h&&(g.v=v),(g.n==null||g.n===g.v)&&(g.n=v))}function T(M){return M.v!=null&&M.n!=null}return T(f)?f:T(g)?g:null}();if(d){o.value=[d.v];var p=h!=null?h:d.n;o.itemName=[p],o.seriesName=[p]}return o}function querySeriesUpstreamDatasetModel(a){var n=a.get("data",!0);if(!n)return queryReferringComponents(a.ecModel,"dataset",{index:a.get("datasetIndex",!0),id:a.get("datasetId",!0)},SINGLE_REFERRING).models[0]}function queryDatasetUpstreamDatasetModels(a){return!a.get("transform",!0)&&!a.get("fromTransformResult",!0)?[]:queryReferringComponents(a.ecModel,"dataset",{index:a.get("fromDatasetIndex",!0),id:a.get("fromDatasetId",!0)},SINGLE_REFERRING).models}function guessOrdinal(a,n){return doGuessOrdinal(a.data,a.sourceFormat,a.seriesLayoutBy,a.dimensionsDefine,a.startIndex,n)}function doGuessOrdinal(a,n,r,o,l,u){var c,h=5;if(isTypedArray(a))return BE_ORDINAL.Not;var d,p;if(o){var f=o[u];isObject$3(f)?(d=f.name,p=f.type):isString(f)&&(d=f)}if(p!=null)return p==="ordinal"?BE_ORDINAL.Must:BE_ORDINAL.Not;if(n===SOURCE_FORMAT_ARRAY_ROWS){var g=a;if(r===SERIES_LAYOUT_BY_ROW){for(var y=g[u],v=0;v<(y||[]).length&&v<h;v++)if((c=A(y[l+v]))!=null)return c}else for(var v=0;v<g.length&&v<h;v++){var _=g[l+v];if(_&&(c=A(_[u]))!=null)return c}}else if(n===SOURCE_FORMAT_OBJECT_ROWS){var x=a;if(!d)return BE_ORDINAL.Not;for(var v=0;v<x.length&&v<h;v++){var S=x[v];if(S&&(c=A(S[d]))!=null)return c}}else if(n===SOURCE_FORMAT_KEYED_COLUMNS){var T=a;if(!d)return BE_ORDINAL.Not;var y=T[d];if(!y||isTypedArray(y))return BE_ORDINAL.Not;for(var v=0;v<y.length&&v<h;v++)if((c=A(y[v]))!=null)return c}else if(n===SOURCE_FORMAT_ORIGINAL)for(var M=a,v=0;v<M.length&&v<h;v++){var S=M[v],b=getDataItemValue(S);if(!isArray$1(b))return BE_ORDINAL.Not;if((c=A(b[u]))!=null)return c}function A(I){var w=isString(I);if(I!=null&&Number.isFinite(Number(I))&&I!=="")return w?BE_ORDINAL.Might:BE_ORDINAL.Not;if(w&&I!=="-")return BE_ORDINAL.Must}return BE_ORDINAL.Not}var internalOptionCreatorMap=createHashMap();function registerInternalOptionCreator(a,n){assert(internalOptionCreatorMap.get(a)==null&&n),internalOptionCreatorMap.set(a,n)}function concatInternalOptions(a,n,r){var o=internalOptionCreatorMap.get(n);if(!o)return r;var l=o(a);if(!l)return r;for(var u=0;u<l.length;u++)assert(isComponentIdInternal(l[u]));return r.concat(l)}var innerColor=makeInner(),innerDecal=makeInner(),PaletteMixin=function(){function a(){}return a.prototype.getColorFromPalette=function(n,r,o){var l=normalizeToArray(this.get("color",!0)),u=this.get("colorLayer",!0);return getFromPalette(this,innerColor,l,u,n,r,o)},a.prototype.clearColorPalette=function(){clearPalette(this,innerColor)},a}();function getDecalFromPalette(a,n,r,o){var l=normalizeToArray(a.get(["aria","decal","decals"]));return getFromPalette(a,innerDecal,l,null,n,r,o)}function getNearestPalette(a,n){for(var r=a.length,o=0;o<r;o++)if(a[o].length>n)return a[o];return a[r-1]}function getFromPalette(a,n,r,o,l,u,c){u=u||a;var h=n(u),d=h.paletteIdx||0,p=h.paletteNameMap=h.paletteNameMap||{};if(p.hasOwnProperty(l))return p[l];var f=c==null||!o?r:getNearestPalette(o,c);if(f=f||r,!(!f||!f.length)){var g=f[d];return l&&(p[l]=g),h.paletteIdx=(d+1)%f.length,g}}function clearPalette(a,n){n(a).paletteIdx=0,n(a).paletteNameMap={}}var reCreateSeriesIndices,assertSeriesInitialized,initBase,OPTION_INNER_KEY="\0_ec_inner",OPTION_INNER_VALUE=1,BUITIN_COMPONENTS_MAP={grid:"GridComponent",polar:"PolarComponent",geo:"GeoComponent",singleAxis:"SingleAxisComponent",parallel:"ParallelComponent",calendar:"CalendarComponent",graphic:"GraphicComponent",toolbox:"ToolboxComponent",tooltip:"TooltipComponent",axisPointer:"AxisPointerComponent",brush:"BrushComponent",title:"TitleComponent",timeline:"TimelineComponent",markPoint:"MarkPointComponent",markLine:"MarkLineComponent",markArea:"MarkAreaComponent",legend:"LegendComponent",dataZoom:"DataZoomComponent",visualMap:"VisualMapComponent",xAxis:"GridComponent",yAxis:"GridComponent",angleAxis:"PolarComponent",radiusAxis:"PolarComponent"},BUILTIN_CHARTS_MAP={line:"LineChart",bar:"BarChart",pie:"PieChart",scatter:"ScatterChart",radar:"RadarChart",map:"MapChart",tree:"TreeChart",treemap:"TreemapChart",graph:"GraphChart",gauge:"GaugeChart",funnel:"FunnelChart",parallel:"ParallelChart",sankey:"SankeyChart",boxplot:"BoxplotChart",candlestick:"CandlestickChart",effectScatter:"EffectScatterChart",lines:"LinesChart",heatmap:"HeatmapChart",pictorialBar:"PictorialBarChart",themeRiver:"ThemeRiverChart",sunburst:"SunburstChart",custom:"CustomChart"},componetsMissingLogPrinted={};function checkMissingComponents(a){each$f(a,function(n,r){if(!ComponentModel$1.hasClass(r)){var o=BUITIN_COMPONENTS_MAP[r];o&&!componetsMissingLogPrinted[o]&&(error("Component "+r+` is used but not imported.
import { `+o+` } from 'echarts/components';
echarts.use([`+o+"]);"),componetsMissingLogPrinted[o]=!0)}})}var GlobalModel=function(a){__extends(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.init=function(r,o,l,u,c,h){u=u||{},this.option=null,this._theme=new Model$1(u),this._locale=new Model$1(c),this._optionManager=h},n.prototype.setOption=function(r,o,l){assert(r!=null,"option is null/undefined"),assert(r[OPTION_INNER_KEY]!==OPTION_INNER_VALUE,"please use chart.getOption()");var u=normalizeSetOptionInput(o);this._optionManager.setOption(r,l,u),this._resetOption(null,u)},n.prototype.resetOption=function(r,o){return this._resetOption(r,normalizeSetOptionInput(o))},n.prototype._resetOption=function(r,o){var l=!1,u=this._optionManager;if(!r||r==="recreate"){var c=u.mountOption(r==="recreate");checkMissingComponents(c),!this.option||r==="recreate"?initBase(this,c):(this.restoreData(),this._mergeOption(c,o)),l=!0}if((r==="timeline"||r==="media")&&this.restoreData(),!r||r==="recreate"||r==="timeline"){var h=u.getTimelineOption(this);h&&(l=!0,this._mergeOption(h,o))}if(!r||r==="recreate"||r==="media"){var d=u.getMediaOption(this);d.length&&each$f(d,function(p){l=!0,this._mergeOption(p,o)},this)}return l},n.prototype.mergeOption=function(r){this._mergeOption(r,null)},n.prototype._mergeOption=function(r,o){var l=this.option,u=this._componentsMap,c=this._componentsCount,h=[],d=createHashMap(),p=o&&o.replaceMergeMainTypeMap;resetSourceDefaulter(this),each$f(r,function(g,y){g!=null&&(ComponentModel$1.hasClass(y)?y&&(h.push(y),d.set(y,!0)):l[y]=l[y]==null?clone$4(g):merge(l[y],g,!0))}),p&&p.each(function(g,y){ComponentModel$1.hasClass(y)&&!d.get(y)&&(h.push(y),d.set(y,!0))}),ComponentModel$1.topologicalTravel(h,ComponentModel$1.getAllClassMainTypes(),f,this);function f(g){var y=concatInternalOptions(this,g,normalizeToArray(r[g])),v=u.get(g),_=v?p&&p.get(g)?"replaceMerge":"normalMerge":"replaceAll",x=mappingToExists(v,y,_);setComponentTypeToKeyInfo(x,g,ComponentModel$1),l[g]=null,u.set(g,null),c.set(g,0);var S=[],T=[],M=0,b,A;each$f(x,function(I,w){var C=I.existing,E=I.newOption;if(!E)C&&(C.mergeOption({},this),C.optionUpdated({},!1));else{var P=g==="series",D=ComponentModel$1.getClass(g,I.keyInfo.subType,!P);if(!D){{var L=I.keyInfo.subType,R=BUILTIN_CHARTS_MAP[L];componetsMissingLogPrinted[L]||(componetsMissingLogPrinted[L]=!0,error(R?"Series "+L+` is used but not imported.
import { `+R+` } from 'echarts/charts';
echarts.use([`+R+"]);":"Unknown series "+L))}return}if(g==="tooltip"){if(b){A||(warn("Currently only one tooltip component is allowed."),A=!0);return}b=!0}if(C&&C.constructor===D)C.name=I.keyInfo.name,C.mergeOption(E,this),C.optionUpdated(E,!1);else{var O=extend({componentIndex:w},I.keyInfo);C=new D(E,this,this,O),extend(C,O),I.brandNew&&(C.__requireNewView=!0),C.init(E,this,this),C.optionUpdated(null,!0)}}C?(S.push(C.option),T.push(C),M++):(S.push(void 0),T.push(void 0))},this),l[g]=S,u.set(g,T),c.set(g,M),g==="series"&&reCreateSeriesIndices(this)}this._seriesIndices||reCreateSeriesIndices(this)},n.prototype.getOption=function(){var r=clone$4(this.option);return each$f(r,function(o,l){if(ComponentModel$1.hasClass(l)){for(var u=normalizeToArray(o),c=u.length,h=!1,d=c-1;d>=0;d--)u[d]&&!isComponentIdInternal(u[d])?h=!0:(u[d]=null,!h&&c--);u.length=c,r[l]=u}}),delete r[OPTION_INNER_KEY],r},n.prototype.getTheme=function(){return this._theme},n.prototype.getLocaleModel=function(){return this._locale},n.prototype.setUpdatePayload=function(r){this._payload=r},n.prototype.getUpdatePayload=function(){return this._payload},n.prototype.getComponent=function(r,o){var l=this._componentsMap.get(r);if(l){var u=l[o||0];if(u)return u;if(o==null){for(var c=0;c<l.length;c++)if(l[c])return l[c]}}},n.prototype.queryComponents=function(r){var o=r.mainType;if(!o)return[];var l=r.index,u=r.id,c=r.name,h=this._componentsMap.get(o);if(!h||!h.length)return[];var d;return l!=null?(d=[],each$f(normalizeToArray(l),function(p){h[p]&&d.push(h[p])})):u!=null?d=queryByIdOrName("id",u,h):c!=null?d=queryByIdOrName("name",c,h):d=filter(h,function(p){return!!p}),filterBySubType(d,r)},n.prototype.findComponents=function(r){var o=r.query,l=r.mainType,u=h(o),c=u?this.queryComponents(u):filter(this._componentsMap.get(l),function(p){return!!p});return d(filterBySubType(c,r));function h(p){var f=l+"Index",g=l+"Id",y=l+"Name";return p&&(p[f]!=null||p[g]!=null||p[y]!=null)?{mainType:l,index:p[f],id:p[g],name:p[y]}:null}function d(p){return r.filter?filter(p,r.filter):p}},n.prototype.eachComponent=function(r,o,l){var u=this._componentsMap;if(isFunction(r)){var c=o,h=r;u.each(function(g,y){for(var v=0;g&&v<g.length;v++){var _=g[v];_&&h.call(c,y,_,_.componentIndex)}})}else for(var d=isString(r)?u.get(r):isObject$3(r)?this.findComponents(r):null,p=0;d&&p<d.length;p++){var f=d[p];f&&o.call(l,f,f.componentIndex)}},n.prototype.getSeriesByName=function(r){var o=convertOptionIdName(r,null);return filter(this._componentsMap.get("series"),function(l){return!!l&&o!=null&&l.name===o})},n.prototype.getSeriesByIndex=function(r){return this._componentsMap.get("series")[r]},n.prototype.getSeriesByType=function(r){return filter(this._componentsMap.get("series"),function(o){return!!o&&o.subType===r})},n.prototype.getSeries=function(){return filter(this._componentsMap.get("series"),function(r){return!!r})},n.prototype.getSeriesCount=function(){return this._componentsCount.get("series")},n.prototype.eachSeries=function(r,o){assertSeriesInitialized(this),each$f(this._seriesIndices,function(l){var u=this._componentsMap.get("series")[l];r.call(o,u,l)},this)},n.prototype.eachRawSeries=function(r,o){each$f(this._componentsMap.get("series"),function(l){l&&r.call(o,l,l.componentIndex)})},n.prototype.eachSeriesByType=function(r,o,l){assertSeriesInitialized(this),each$f(this._seriesIndices,function(u){var c=this._componentsMap.get("series")[u];c.subType===r&&o.call(l,c,u)},this)},n.prototype.eachRawSeriesByType=function(r,o,l){return each$f(this.getSeriesByType(r),o,l)},n.prototype.isSeriesFiltered=function(r){return assertSeriesInitialized(this),this._seriesIndicesMap.get(r.componentIndex)==null},n.prototype.getCurrentSeriesIndices=function(){return(this._seriesIndices||[]).slice()},n.prototype.filterSeries=function(r,o){assertSeriesInitialized(this);var l=[];each$f(this._seriesIndices,function(u){var c=this._componentsMap.get("series")[u];r.call(o,c,u)&&l.push(u)},this),this._seriesIndices=l,this._seriesIndicesMap=createHashMap(l)},n.prototype.restoreData=function(r){reCreateSeriesIndices(this);var o=this._componentsMap,l=[];o.each(function(u,c){ComponentModel$1.hasClass(c)&&l.push(c)}),ComponentModel$1.topologicalTravel(l,ComponentModel$1.getAllClassMainTypes(),function(u){each$f(o.get(u),function(c){c&&(u!=="series"||!isNotTargetSeries(c,r))&&c.restoreData()})})},n.internalField=function(){reCreateSeriesIndices=function(r){var o=r._seriesIndices=[];each$f(r._componentsMap.get("series"),function(l){l&&o.push(l.componentIndex)}),r._seriesIndicesMap=createHashMap(o)},assertSeriesInitialized=function(r){if(!r._seriesIndices)throw new Error("Option should contains series.")},initBase=function(r,o){r.option={},r.option[OPTION_INNER_KEY]=OPTION_INNER_VALUE,r._componentsMap=createHashMap({series:[]}),r._componentsCount=createHashMap();var l=o.aria;isObject$3(l)&&l.enabled==null&&(l.enabled=!0),mergeTheme(o,r._theme.option),merge(o,globalDefault,!1),r._mergeOption(o,null)}}(),n}(Model$1);function isNotTargetSeries(a,n){if(n){var r=n.seriesIndex,o=n.seriesId,l=n.seriesName;return r!=null&&a.componentIndex!==r||o!=null&&a.id!==o||l!=null&&a.name!==l}}function mergeTheme(a,n){var r=a.color&&!a.colorLayer;each$f(n,function(o,l){l==="colorLayer"&&r||ComponentModel$1.hasClass(l)||(typeof o=="object"?a[l]=a[l]?merge(a[l],o,!1):clone$4(o):a[l]==null&&(a[l]=o))})}function queryByIdOrName(a,n,r){if(isArray$1(n)){var o=createHashMap();return each$f(n,function(u){if(u!=null){var c=convertOptionIdName(u,null);c!=null&&o.set(u,!0)}}),filter(r,function(u){return u&&o.get(u[a])})}else{var l=convertOptionIdName(n,null);return filter(r,function(u){return u&&l!=null&&u[a]===l})}}function filterBySubType(a,n){return n.hasOwnProperty("subType")?filter(a,function(r){return r&&r.subType===n.subType}):a}function normalizeSetOptionInput(a){var n=createHashMap();return a&&each$f(normalizeToArray(a.replaceMerge),function(r){assert(ComponentModel$1.hasClass(r),'"'+r+'" is not valid component main type in "replaceMerge"'),n.set(r,!0)}),{replaceMergeMainTypeMap:n}}mixin(GlobalModel,PaletteMixin);const GlobalModel$1=GlobalModel;var availableMethods=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isSSR","isDisposed","on","off","getDataURL","getConnectedDataURL","getOption","getId","updateLabelLayout"],ExtensionAPI=function(){function a(n){each$f(availableMethods,function(r){this[r]=bind$1(n[r],n)},this)}return a}();const ExtensionAPI$1=ExtensionAPI;var coordinateSystemCreators={},CoordinateSystemManager=function(){function a(){this._coordinateSystems=[]}return a.prototype.create=function(n,r){var o=[];each$f(coordinateSystemCreators,function(l,u){var c=l.create(n,r);o=o.concat(c||[])}),this._coordinateSystems=o},a.prototype.update=function(n,r){each$f(this._coordinateSystems,function(o){o.update&&o.update(n,r)})},a.prototype.getCoordinateSystems=function(){return this._coordinateSystems.slice()},a.register=function(n,r){coordinateSystemCreators[n]=r},a.get=function(n){return coordinateSystemCreators[n]},a}();const CoordinateSystem=CoordinateSystemManager;var QUERY_REG=/^(min|max)?(.+)$/,OptionManager=function(){function a(n){this._timelineOptions=[],this._mediaList=[],this._currentMediaIndices=[],this._api=n}return a.prototype.setOption=function(n,r,o){n&&(each$f(normalizeToArray(n.series),function(c){c&&c.data&&isTypedArray(c.data)&&setAsPrimitive(c.data)}),each$f(normalizeToArray(n.dataset),function(c){c&&c.source&&isTypedArray(c.source)&&setAsPrimitive(c.source)})),n=clone$4(n);var l=this._optionBackup,u=parseRawOption(n,r,!l);this._newBaseOption=u.baseOption,l?(u.timelineOptions.length&&(l.timelineOptions=u.timelineOptions),u.mediaList.length&&(l.mediaList=u.mediaList),u.mediaDefault&&(l.mediaDefault=u.mediaDefault)):this._optionBackup=u},a.prototype.mountOption=function(n){var r=this._optionBackup;return this._timelineOptions=r.timelineOptions,this._mediaList=r.mediaList,this._mediaDefault=r.mediaDefault,this._currentMediaIndices=[],clone$4(n?r.baseOption:this._newBaseOption)},a.prototype.getTimelineOption=function(n){var r,o=this._timelineOptions;if(o.length){var l=n.getComponent("timeline");l&&(r=clone$4(o[l.getCurrentIndex()]))}return r},a.prototype.getMediaOption=function(n){var r=this._api.getWidth(),o=this._api.getHeight(),l=this._mediaList,u=this._mediaDefault,c=[],h=[];if(!l.length&&!u)return h;for(var d=0,p=l.length;d<p;d++)applyMediaQuery(l[d].query,r,o)&&c.push(d);return!c.length&&u&&(c=[-1]),c.length&&!indicesEquals(c,this._currentMediaIndices)&&(h=map$1(c,function(f){return clone$4(f===-1?u.option:l[f].option)})),this._currentMediaIndices=c,h},a}();function parseRawOption(a,n,r){var o=[],l,u,c=a.baseOption,h=a.timeline,d=a.options,p=a.media,f=!!a.media,g=!!(d||h||c&&c.timeline);c?(u=c,u.timeline||(u.timeline=h)):((g||f)&&(a.options=a.media=null),u=a),f&&(isArray$1(p)?each$f(p,function(v){v&&!v.option&&isObject$3(v.query)&&isObject$3(v.query.option)&&error("Illegal media option. Must be like { media: [ { query: {}, option: {} } ] }"),v&&v.option&&(v.query?o.push(v):l||(l=v))}):error("Illegal media option. Must be an array. Like { media: [ {...}, {...} ] }")),y(u),each$f(d,function(v){return y(v)}),each$f(o,function(v){return y(v.option)});function y(v){each$f(n,function(_){_(v,r)})}return{baseOption:u,timelineOptions:d||[],mediaDefault:l,mediaList:o}}function applyMediaQuery(a,n,r){var o={width:n,height:r,aspectratio:n/r},l=!0;return each$f(a,function(u,c){var h=c.match(QUERY_REG);if(!(!h||!h[1]||!h[2])){var d=h[1],p=h[2].toLowerCase();compare(o[p],u,d)||(l=!1)}}),l}function compare(a,n,r){return r==="min"?a>=n:r==="max"?a<=n:a===n}function indicesEquals(a,n){return a.join(",")===n.join(",")}const OptionManager$1=OptionManager;var each$d=each$f,isObject$2=isObject$3,POSSIBLE_STYLES=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function compatEC2ItemStyle(a){var n=a&&a.itemStyle;if(n)for(var r=0,o=POSSIBLE_STYLES.length;r<o;r++){var l=POSSIBLE_STYLES[r],u=n.normal,c=n.emphasis;u&&u[l]&&(deprecateReplaceLog("itemStyle.normal."+l,l),a[l]=a[l]||{},a[l].normal?merge(a[l].normal,u[l]):a[l].normal=u[l],u[l]=null),c&&c[l]&&(deprecateReplaceLog("itemStyle.emphasis."+l,"emphasis."+l),a[l]=a[l]||{},a[l].emphasis?merge(a[l].emphasis,c[l]):a[l].emphasis=c[l],c[l]=null)}}function convertNormalEmphasis(a,n,r){if(a&&a[n]&&(a[n].normal||a[n].emphasis)){var o=a[n].normal,l=a[n].emphasis;o&&(deprecateLog("'normal' hierarchy in "+n+" has been removed since 4.0. All style properties are configured in "+n+" directly now."),r?(a[n].normal=a[n].emphasis=null,defaults(a[n],o)):a[n]=o),l&&(deprecateLog(n+".emphasis has been changed to emphasis."+n+" since 4.0"),a.emphasis=a.emphasis||{},a.emphasis[n]=l,l.focus&&(a.emphasis.focus=l.focus),l.blurScope&&(a.emphasis.blurScope=l.blurScope))}}function removeEC3NormalStatus(a){convertNormalEmphasis(a,"itemStyle"),convertNormalEmphasis(a,"lineStyle"),convertNormalEmphasis(a,"areaStyle"),convertNormalEmphasis(a,"label"),convertNormalEmphasis(a,"labelLine"),convertNormalEmphasis(a,"upperLabel"),convertNormalEmphasis(a,"edgeLabel")}function compatTextStyle(a,n){var r=isObject$2(a)&&a[n],o=isObject$2(r)&&r.textStyle;if(o){deprecateLog("textStyle hierarchy in "+n+" has been removed since 4.0. All textStyle properties are configured in "+n+" directly now.");for(var l=0,u=TEXT_STYLE_OPTIONS.length;l<u;l++){var c=TEXT_STYLE_OPTIONS[l];o.hasOwnProperty(c)&&(r[c]=o[c])}}}function compatEC3CommonStyles(a){a&&(removeEC3NormalStatus(a),compatTextStyle(a,"label"),a.emphasis&&compatTextStyle(a.emphasis,"label"))}function processSeries(a){if(isObject$2(a)){compatEC2ItemStyle(a),removeEC3NormalStatus(a),compatTextStyle(a,"label"),compatTextStyle(a,"upperLabel"),compatTextStyle(a,"edgeLabel"),a.emphasis&&(compatTextStyle(a.emphasis,"label"),compatTextStyle(a.emphasis,"upperLabel"),compatTextStyle(a.emphasis,"edgeLabel"));var n=a.markPoint;n&&(compatEC2ItemStyle(n),compatEC3CommonStyles(n));var r=a.markLine;r&&(compatEC2ItemStyle(r),compatEC3CommonStyles(r));var o=a.markArea;o&&compatEC3CommonStyles(o);var l=a.data;if(a.type==="graph"){l=l||a.nodes;var u=a.links||a.edges;if(u&&!isTypedArray(u))for(var c=0;c<u.length;c++)compatEC3CommonStyles(u[c]);each$f(a.categories,function(p){removeEC3NormalStatus(p)})}if(l&&!isTypedArray(l))for(var c=0;c<l.length;c++)compatEC3CommonStyles(l[c]);if(n=a.markPoint,n&&n.data)for(var h=n.data,c=0;c<h.length;c++)compatEC3CommonStyles(h[c]);if(r=a.markLine,r&&r.data)for(var d=r.data,c=0;c<d.length;c++)isArray$1(d[c])?(compatEC3CommonStyles(d[c][0]),compatEC3CommonStyles(d[c][1])):compatEC3CommonStyles(d[c]);a.type==="gauge"?(compatTextStyle(a,"axisLabel"),compatTextStyle(a,"title"),compatTextStyle(a,"detail")):a.type==="treemap"?(convertNormalEmphasis(a.breadcrumb,"itemStyle"),each$f(a.levels,function(p){removeEC3NormalStatus(p)})):a.type==="tree"&&removeEC3NormalStatus(a.leaves)}}function toArr(a){return isArray$1(a)?a:a?[a]:[]}function toObj(a){return(isArray$1(a)?a[0]:a)||{}}function globalCompatStyle(a,n){each$d(toArr(a.series),function(o){isObject$2(o)&&processSeries(o)});var r=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];n&&r.push("valueAxis","categoryAxis","logAxis","timeAxis"),each$d(r,function(o){each$d(toArr(a[o]),function(l){l&&(compatTextStyle(l,"axisLabel"),compatTextStyle(l.axisPointer,"label"))})}),each$d(toArr(a.parallel),function(o){var l=o&&o.parallelAxisDefault;compatTextStyle(l,"axisLabel"),compatTextStyle(l&&l.axisPointer,"label")}),each$d(toArr(a.calendar),function(o){convertNormalEmphasis(o,"itemStyle"),compatTextStyle(o,"dayLabel"),compatTextStyle(o,"monthLabel"),compatTextStyle(o,"yearLabel")}),each$d(toArr(a.radar),function(o){compatTextStyle(o,"name"),o.name&&o.axisName==null&&(o.axisName=o.name,delete o.name,deprecateLog("name property in radar component has been changed to axisName")),o.nameGap!=null&&o.axisNameGap==null&&(o.axisNameGap=o.nameGap,delete o.nameGap,deprecateLog("nameGap property in radar component has been changed to axisNameGap")),each$d(o.indicator,function(l){l.text&&deprecateReplaceLog("text","name","radar.indicator")})}),each$d(toArr(a.geo),function(o){isObject$2(o)&&(compatEC3CommonStyles(o),each$d(toArr(o.regions),function(l){compatEC3CommonStyles(l)}))}),each$d(toArr(a.timeline),function(o){compatEC3CommonStyles(o),convertNormalEmphasis(o,"label"),convertNormalEmphasis(o,"itemStyle"),convertNormalEmphasis(o,"controlStyle",!0);var l=o.data;isArray$1(l)&&each$f(l,function(u){isObject$3(u)&&(convertNormalEmphasis(u,"label"),convertNormalEmphasis(u,"itemStyle"))})}),each$d(toArr(a.toolbox),function(o){convertNormalEmphasis(o,"iconStyle"),each$d(o.feature,function(l){convertNormalEmphasis(l,"iconStyle")})}),compatTextStyle(toObj(a.axisPointer),"label"),compatTextStyle(toObj(a.tooltip).axisPointer,"label")}function get(a,n){for(var r=n.split(","),o=a,l=0;l<r.length&&(o=o&&o[r[l]],o!=null);l++);return o}function set(a,n,r,o){for(var l=n.split(","),u=a,c,h=0;h<l.length-1;h++)c=l[h],u[c]==null&&(u[c]={}),u=u[c];(o||u[l[h]]==null)&&(u[l[h]]=r)}function compatLayoutProperties(a){a&&each$f(LAYOUT_PROPERTIES,function(n){n[0]in a&&!(n[1]in a)&&(a[n[1]]=a[n[0]])})}var LAYOUT_PROPERTIES=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],COMPATITABLE_COMPONENTS=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],BAR_ITEM_STYLE_MAP=[["borderRadius","barBorderRadius"],["borderColor","barBorderColor"],["borderWidth","barBorderWidth"]];function compatBarItemStyle(a){var n=a&&a.itemStyle;if(n)for(var r=0;r<BAR_ITEM_STYLE_MAP.length;r++){var o=BAR_ITEM_STYLE_MAP[r][1],l=BAR_ITEM_STYLE_MAP[r][0];n[o]!=null&&(n[l]=n[o],deprecateReplaceLog(o,l))}}function compatPieLabel(a){!a||a.alignTo==="edge"&&a.margin!=null&&a.edgeDistance==null&&(deprecateReplaceLog("label.margin","label.edgeDistance","pie"),a.edgeDistance=a.margin)}function compatSunburstState(a){!a||a.downplay&&!a.blur&&(a.blur=a.downplay,deprecateReplaceLog("downplay","blur","sunburst"))}function compatGraphFocus(a){!a||a.focusNodeAdjacency!=null&&(a.emphasis=a.emphasis||{},a.emphasis.focus==null&&(deprecateReplaceLog("focusNodeAdjacency","emphasis: { focus: 'adjacency'}","graph/sankey"),a.emphasis.focus="adjacency"))}function traverseTree(a,n){if(a)for(var r=0;r<a.length;r++)n(a[r]),a[r]&&traverseTree(a[r].children,n)}function globalBackwardCompat(a,n){globalCompatStyle(a,n),a.series=normalizeToArray(a.series),each$f(a.series,function(r){if(isObject$3(r)){var o=r.type;if(o==="line")r.clipOverflow!=null&&(r.clip=r.clipOverflow,deprecateReplaceLog("clipOverflow","clip","line"));else if(o==="pie"||o==="gauge"){r.clockWise!=null&&(r.clockwise=r.clockWise,deprecateReplaceLog("clockWise","clockwise")),compatPieLabel(r.label);var l=r.data;if(l&&!isTypedArray(l))for(var u=0;u<l.length;u++)compatPieLabel(l[u]);r.hoverOffset!=null&&(r.emphasis=r.emphasis||{},(r.emphasis.scaleSize=null)&&(deprecateReplaceLog("hoverOffset","emphasis.scaleSize"),r.emphasis.scaleSize=r.hoverOffset))}else if(o==="gauge"){var c=get(r,"pointer.color");c!=null&&set(r,"itemStyle.color",c)}else if(o==="bar"){compatBarItemStyle(r),compatBarItemStyle(r.backgroundStyle),compatBarItemStyle(r.emphasis);var l=r.data;if(l&&!isTypedArray(l))for(var u=0;u<l.length;u++)typeof l[u]=="object"&&(compatBarItemStyle(l[u]),compatBarItemStyle(l[u]&&l[u].emphasis))}else if(o==="sunburst"){var h=r.highlightPolicy;h&&(r.emphasis=r.emphasis||{},r.emphasis.focus||(r.emphasis.focus=h,deprecateReplaceLog("highlightPolicy","emphasis.focus","sunburst"))),compatSunburstState(r),traverseTree(r.data,compatSunburstState)}else o==="graph"||o==="sankey"?compatGraphFocus(r):o==="map"&&(r.mapType&&!r.map&&(deprecateReplaceLog("mapType","map","map"),r.map=r.mapType),r.mapLocation&&(deprecateLog("`mapLocation` is not used anymore."),defaults(r,r.mapLocation)));r.hoverAnimation!=null&&(r.emphasis=r.emphasis||{},r.emphasis&&r.emphasis.scale==null&&(deprecateReplaceLog("hoverAnimation","emphasis.scale"),r.emphasis.scale=r.hoverAnimation)),compatLayoutProperties(r)}}),a.dataRange&&(a.visualMap=a.dataRange),each$f(COMPATITABLE_COMPONENTS,function(r){var o=a[r];o&&(isArray$1(o)||(o=[o]),each$f(o,function(l){compatLayoutProperties(l)}))})}function dataStack$1(a){var n=createHashMap();a.eachSeries(function(r){var o=r.get("stack");if(o){var l=n.get(o)||n.set(o,[]),u=r.getData(),c={stackResultDimension:u.getCalculationInfo("stackResultDimension"),stackedOverDimension:u.getCalculationInfo("stackedOverDimension"),stackedDimension:u.getCalculationInfo("stackedDimension"),stackedByDimension:u.getCalculationInfo("stackedByDimension"),isStackedByIndex:u.getCalculationInfo("isStackedByIndex"),data:u,seriesModel:r};if(!c.stackedDimension||!(c.isStackedByIndex||c.stackedByDimension))return;l.length&&u.setCalculationInfo("stackedOnSeries",l[l.length-1].seriesModel),l.push(c)}}),n.each(calculateStack)}function calculateStack(a){each$f(a,function(n,r){var o=[],l=[NaN,NaN],u=[n.stackResultDimension,n.stackedOverDimension],c=n.data,h=n.isStackedByIndex,d=n.seriesModel.get("stackStrategy")||"samesign";c.modify(u,function(p,f,g){var y=c.get(n.stackedDimension,g);if(isNaN(y))return l;var v,_;h?_=c.getRawIndex(g):v=c.get(n.stackedByDimension,g);for(var x=NaN,S=r-1;S>=0;S--){var T=a[S];if(h||(_=T.data.rawIndexOf(T.stackedByDimension,v)),_>=0){var M=T.data.getByRawIndex(T.stackResultDimension,_);if(d==="all"||d==="positive"&&M>0||d==="negative"&&M<0||d==="samesign"&&y>=0&&M>0||d==="samesign"&&y<=0&&M<0){y=addSafe(y,M),x=M;break}}}return o[0]=y,o[1]=x,o})})}var SourceImpl=function(){function a(n){this.data=n.data||(n.sourceFormat===SOURCE_FORMAT_KEYED_COLUMNS?{}:[]),this.sourceFormat=n.sourceFormat||SOURCE_FORMAT_UNKNOWN,this.seriesLayoutBy=n.seriesLayoutBy||SERIES_LAYOUT_BY_COLUMN,this.startIndex=n.startIndex||0,this.dimensionsDetectedCount=n.dimensionsDetectedCount,this.metaRawOption=n.metaRawOption;var r=this.dimensionsDefine=n.dimensionsDefine;if(r)for(var o=0;o<r.length;o++){var l=r[o];l.type==null&&guessOrdinal(this,o)===BE_ORDINAL.Must&&(l.type="ordinal")}}return a}();function isSourceInstance(a){return a instanceof SourceImpl}function createSource(a,n,r){r=r||detectSourceFormat(a);var o=n.seriesLayoutBy,l=determineSourceDimensions(a,r,o,n.sourceHeader,n.dimensions),u=new SourceImpl({data:a,sourceFormat:r,seriesLayoutBy:o,dimensionsDefine:l.dimensionsDefine,startIndex:l.startIndex,dimensionsDetectedCount:l.dimensionsDetectedCount,metaRawOption:clone$4(n)});return u}function createSourceFromSeriesDataOption(a){return new SourceImpl({data:a,sourceFormat:isTypedArray(a)?SOURCE_FORMAT_TYPED_ARRAY:SOURCE_FORMAT_ORIGINAL})}function cloneSourceShallow(a){return new SourceImpl({data:a.data,sourceFormat:a.sourceFormat,seriesLayoutBy:a.seriesLayoutBy,dimensionsDefine:clone$4(a.dimensionsDefine),startIndex:a.startIndex,dimensionsDetectedCount:a.dimensionsDetectedCount})}function detectSourceFormat(a){var n=SOURCE_FORMAT_UNKNOWN;if(isTypedArray(a))n=SOURCE_FORMAT_TYPED_ARRAY;else if(isArray$1(a)){a.length===0&&(n=SOURCE_FORMAT_ARRAY_ROWS);for(var r=0,o=a.length;r<o;r++){var l=a[r];if(l!=null){if(isArray$1(l)||isTypedArray(l)){n=SOURCE_FORMAT_ARRAY_ROWS;break}else if(isObject$3(l)){n=SOURCE_FORMAT_OBJECT_ROWS;break}}}}else if(isObject$3(a)){for(var u in a)if(hasOwn(a,u)&&isArrayLike(a[u])){n=SOURCE_FORMAT_KEYED_COLUMNS;break}}return n}function determineSourceDimensions(a,n,r,o,l){var u,c;if(!a)return{dimensionsDefine:normalizeDimensionsOption(l),startIndex:c,dimensionsDetectedCount:u};if(n===SOURCE_FORMAT_ARRAY_ROWS){var h=a;o==="auto"||o==null?arrayRowsTravelFirst(function(p){p!=null&&p!=="-"&&(isString(p)?c==null&&(c=1):c=0)},r,h,10):c=isNumber(o)?o:o?1:0,!l&&c===1&&(l=[],arrayRowsTravelFirst(function(p,f){l[f]=p!=null?p+"":""},r,h,1/0)),u=l?l.length:r===SERIES_LAYOUT_BY_ROW?h.length:h[0]?h[0].length:null}else if(n===SOURCE_FORMAT_OBJECT_ROWS)l||(l=objectRowsCollectDimensions(a));else if(n===SOURCE_FORMAT_KEYED_COLUMNS)l||(l=[],each$f(a,function(p,f){l.push(f)}));else if(n===SOURCE_FORMAT_ORIGINAL){var d=getDataItemValue(a[0]);u=isArray$1(d)&&d.length||1}else n===SOURCE_FORMAT_TYPED_ARRAY&&assert(!!l,"dimensions must be given if data is TypedArray.");return{startIndex:c,dimensionsDefine:normalizeDimensionsOption(l),dimensionsDetectedCount:u}}function objectRowsCollectDimensions(a){for(var n=0,r;n<a.length&&!(r=a[n++]););if(r)return keys(r)}function normalizeDimensionsOption(a){if(a){var n=createHashMap();return map$1(a,function(r,o){r=isObject$3(r)?r:{name:r};var l={name:r.name,displayName:r.displayName,type:r.type};if(l.name==null)return l;l.name+="",l.displayName==null&&(l.displayName=l.name);var u=n.get(l.name);return u?l.name+="-"+u.count++:n.set(l.name,{count:1}),l})}}function arrayRowsTravelFirst(a,n,r,o){if(n===SERIES_LAYOUT_BY_ROW)for(var l=0;l<r.length&&l<o;l++)a(r[l]?r[l][0]:null,l);else for(var u=r[0]||[],l=0;l<u.length&&l<o;l++)a(u[l],l)}function shouldRetrieveDataByName(a){var n=a.sourceFormat;return n===SOURCE_FORMAT_OBJECT_ROWS||n===SOURCE_FORMAT_KEYED_COLUMNS}var _a,_b,_c,providerMethods,mountMethods,DefaultDataProvider=function(){function a(n,r){var o=isSourceInstance(n)?n:createSourceFromSeriesDataOption(n);this._source=o;var l=this._data=o.data;if(o.sourceFormat===SOURCE_FORMAT_TYPED_ARRAY){if(r==null)throw new Error("Typed array data must specify dimension size");this._offset=0,this._dimSize=r,this._data=l}mountMethods(this,l,o)}return a.prototype.getSource=function(){return this._source},a.prototype.count=function(){return 0},a.prototype.getItem=function(n,r){},a.prototype.appendData=function(n){},a.prototype.clean=function(){},a.protoInitialize=function(){var n=a.prototype;n.pure=!1,n.persistent=!0}(),a.internalField=function(){var n;mountMethods=function(c,h,d){var p=d.sourceFormat,f=d.seriesLayoutBy,g=d.startIndex,y=d.dimensionsDefine,v=providerMethods[getMethodMapKey(p,f)];if(assert(v,"Invalide sourceFormat: "+p),extend(c,v),p===SOURCE_FORMAT_TYPED_ARRAY)c.getItem=r,c.count=l,c.fillStorage=o;else{var _=getRawSourceItemGetter(p,f);c.getItem=bind$1(_,null,h,g,y);var x=getRawSourceDataCounter(p,f);c.count=bind$1(x,null,h,g,y)}};var r=function(c,h){c=c-this._offset,h=h||[];for(var d=this._data,p=this._dimSize,f=p*c,g=0;g<p;g++)h[g]=d[f+g];return h},o=function(c,h,d,p){for(var f=this._data,g=this._dimSize,y=0;y<g;y++){for(var v=p[y],_=v[0]==null?1/0:v[0],x=v[1]==null?-1/0:v[1],S=h-c,T=d[y],M=0;M<S;M++){var b=f[M*g+y];T[c+M]=b,b<_&&(_=b),b>x&&(x=b)}v[0]=_,v[1]=x}},l=function(){return this._data?this._data.length/this._dimSize:0};providerMethods=(n={},n[SOURCE_FORMAT_ARRAY_ROWS+"_"+SERIES_LAYOUT_BY_COLUMN]={pure:!0,appendData:u},n[SOURCE_FORMAT_ARRAY_ROWS+"_"+SERIES_LAYOUT_BY_ROW]={pure:!0,appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},n[SOURCE_FORMAT_OBJECT_ROWS]={pure:!0,appendData:u},n[SOURCE_FORMAT_KEYED_COLUMNS]={pure:!0,appendData:function(c){var h=this._data;each$f(c,function(d,p){for(var f=h[p]||(h[p]=[]),g=0;g<(d||[]).length;g++)f.push(d[g])})}},n[SOURCE_FORMAT_ORIGINAL]={appendData:u},n[SOURCE_FORMAT_TYPED_ARRAY]={persistent:!1,pure:!0,appendData:function(c){assert(isTypedArray(c),"Added data must be TypedArray if data in initialization is TypedArray"),this._data=c},clean:function(){this._offset+=this.count(),this._data=null}},n);function u(c){for(var h=0;h<c.length;h++)this._data.push(c[h])}}(),a}(),getItemSimply=function(a,n,r,o){return a[o]},rawSourceItemGetterMap=(_a={},_a[SOURCE_FORMAT_ARRAY_ROWS+"_"+SERIES_LAYOUT_BY_COLUMN]=function(a,n,r,o){return a[o+n]},_a[SOURCE_FORMAT_ARRAY_ROWS+"_"+SERIES_LAYOUT_BY_ROW]=function(a,n,r,o,l){o+=n;for(var u=l||[],c=a,h=0;h<c.length;h++){var d=c[h];u[h]=d?d[o]:null}return u},_a[SOURCE_FORMAT_OBJECT_ROWS]=getItemSimply,_a[SOURCE_FORMAT_KEYED_COLUMNS]=function(a,n,r,o,l){for(var u=l||[],c=0;c<r.length;c++){var h=r[c].name;if(h==null)throw new Error;var d=a[h];u[c]=d?d[o]:null}return u},_a[SOURCE_FORMAT_ORIGINAL]=getItemSimply,_a);function getRawSourceItemGetter(a,n){var r=rawSourceItemGetterMap[getMethodMapKey(a,n)];return assert(r,'Do not support get item on "'+a+'", "'+n+'".'),r}var countSimply=function(a,n,r){return a.length},rawSourceDataCounterMap=(_b={},_b[SOURCE_FORMAT_ARRAY_ROWS+"_"+SERIES_LAYOUT_BY_COLUMN]=function(a,n,r){return Math.max(0,a.length-n)},_b[SOURCE_FORMAT_ARRAY_ROWS+"_"+SERIES_LAYOUT_BY_ROW]=function(a,n,r){var o=a[0];return o?Math.max(0,o.length-n):0},_b[SOURCE_FORMAT_OBJECT_ROWS]=countSimply,_b[SOURCE_FORMAT_KEYED_COLUMNS]=function(a,n,r){var o=r[0].name;if(o==null)throw new Error;var l=a[o];return l?l.length:0},_b[SOURCE_FORMAT_ORIGINAL]=countSimply,_b);function getRawSourceDataCounter(a,n){var r=rawSourceDataCounterMap[getMethodMapKey(a,n)];return assert(r,'Do not support count on "'+a+'", "'+n+'".'),r}var getRawValueSimply=function(a,n,r){return a[n]},rawSourceValueGetterMap=(_c={},_c[SOURCE_FORMAT_ARRAY_ROWS]=getRawValueSimply,_c[SOURCE_FORMAT_OBJECT_ROWS]=function(a,n,r){return a[r]},_c[SOURCE_FORMAT_KEYED_COLUMNS]=getRawValueSimply,_c[SOURCE_FORMAT_ORIGINAL]=function(a,n,r){var o=getDataItemValue(a);return o instanceof Array?o[n]:o},_c[SOURCE_FORMAT_TYPED_ARRAY]=getRawValueSimply,_c);function getRawSourceValueGetter(a){var n=rawSourceValueGetterMap[a];return assert(n,'Do not support get value on "'+a+'".'),n}function getMethodMapKey(a,n){return a===SOURCE_FORMAT_ARRAY_ROWS?a+"_"+n:a}function retrieveRawValue(a,n,r){if(a){var o=a.getRawDataItem(n);if(o!=null){var l=a.getStore(),u=l.getSource().sourceFormat;if(r!=null){var c=a.getDimensionIndex(r),h=l.getDimensionProperty(c);return getRawSourceValueGetter(u)(o,c,h)}else{var d=o;return u===SOURCE_FORMAT_ORIGINAL&&(d=getDataItemValue(o)),d}}}}var DIMENSION_LABEL_REG=/\{@(.+?)\}/g,DataFormatMixin=function(){function a(){}return a.prototype.getDataParams=function(n,r){var o=this.getData(r),l=this.getRawValue(n,r),u=o.getRawIndex(n),c=o.getName(n),h=o.getRawDataItem(n),d=o.getItemVisual(n,"style"),p=d&&d[o.getItemVisual(n,"drawType")||"fill"],f=d&&d.stroke,g=this.mainType,y=g==="series",v=o.userOutput&&o.userOutput.get();return{componentType:g,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:y?this.subType:null,seriesIndex:this.seriesIndex,seriesId:y?this.id:null,seriesName:y?this.name:null,name:c,dataIndex:u,data:h,dataType:r,value:l,color:p,borderColor:f,dimensionNames:v?v.fullDimensions:null,encode:v?v.encode:null,$vars:["seriesName","name","value"]}},a.prototype.getFormattedLabel=function(n,r,o,l,u,c){r=r||"normal";var h=this.getData(o),d=this.getDataParams(n,o);if(c&&(d.value=c.interpolatedValue),l!=null&&isArray$1(d.value)&&(d.value=d.value[l]),!u){var p=h.getItemModel(n);u=p.get(r==="normal"?["label","formatter"]:[r,"label","formatter"])}if(isFunction(u))return d.status=r,d.dimensionIndex=l,u(d);if(isString(u)){var f=formatTpl(u,d);return f.replace(DIMENSION_LABEL_REG,function(g,y){var v=y.length,_=y;_.charAt(0)==="["&&_.charAt(v-1)==="]"&&(_=+_.slice(1,v-1),isNaN(_)&&error("Invalide label formatter: @"+y+", only support @[0], @[1], @[2], ..."));var x=retrieveRawValue(h,n,_);if(c&&isArray$1(c.interpolatedValue)){var S=h.getDimensionIndex(_);S>=0&&(x=c.interpolatedValue[S])}return x!=null?x+"":""})}},a.prototype.getRawValue=function(n,r){return retrieveRawValue(this.getData(r),n)},a.prototype.formatTooltip=function(n,r,o){},a}();function normalizeTooltipFormatResult(a){var n,r;return isObject$3(a)?a.type?r=a:console.warn("The return type of `formatTooltip` is not supported: "+makePrintable(a)):n=a,{text:n,frag:r}}function createTask(a){return new Task(a)}var Task=function(){function a(n){n=n||{},this._reset=n.reset,this._plan=n.plan,this._count=n.count,this._onDirty=n.onDirty,this._dirty=!0}return a.prototype.perform=function(n){var r=this._upstream,o=n&&n.skip;if(this._dirty&&r){var l=this.context;l.data=l.outputData=r.context.outputData}this.__pipeline&&(this.__pipeline.currentTask=this);var u;this._plan&&!o&&(u=this._plan(this.context));var c=f(this._modBy),h=this._modDataCount||0,d=f(n&&n.modBy),p=n&&n.modDataCount||0;(c!==d||h!==p)&&(u="reset");function f(M){return!(M>=1)&&(M=1),M}var g;(this._dirty||u==="reset")&&(this._dirty=!1,g=this._doReset(o)),this._modBy=d,this._modDataCount=p;var y=n&&n.step;if(r?(assert(r._outputDueEnd!=null),this._dueEnd=r._outputDueEnd):(assert(!this._progress||this._count),this._dueEnd=this._count?this._count(this.context):1/0),this._progress){var v=this._dueIndex,_=Math.min(y!=null?this._dueIndex+y:1/0,this._dueEnd);if(!o&&(g||v<_)){var x=this._progress;if(isArray$1(x))for(var S=0;S<x.length;S++)this._doProgress(x[S],v,_,d,p);else this._doProgress(x,v,_,d,p)}this._dueIndex=_;var T=this._settedOutputEnd!=null?this._settedOutputEnd:_;assert(T>=this._outputDueEnd),this._outputDueEnd=T}else this._dueIndex=this._outputDueEnd=this._settedOutputEnd!=null?this._settedOutputEnd:this._dueEnd;return this.unfinished()},a.prototype.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)},a.prototype._doProgress=function(n,r,o,l,u){iterator.reset(r,o,l,u),this._callingProgress=n,this._callingProgress({start:r,end:o,count:o-r,next:iterator.next},this.context)},a.prototype._doReset=function(n){this._dueIndex=this._outputDueEnd=this._dueEnd=0,this._settedOutputEnd=null;var r,o;!n&&this._reset&&(r=this._reset(this.context),r&&r.progress&&(o=r.forceFirstProgress,r=r.progress),isArray$1(r)&&!r.length&&(r=null)),this._progress=r,this._modBy=this._modDataCount=null;var l=this._downstream;return l&&l.dirty(),o},a.prototype.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},a.prototype.pipe=function(n){assert(n&&!n._disposed&&n!==this),(this._downstream!==n||this._dirty)&&(this._downstream=n,n._upstream=this,n.dirty())},a.prototype.dispose=function(){this._disposed||(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},a.prototype.getUpstream=function(){return this._upstream},a.prototype.getDownstream=function(){return this._downstream},a.prototype.setOutputEnd=function(n){this._outputDueEnd=this._settedOutputEnd=n},a}(),iterator=function(){var a,n,r,o,l,u={reset:function(d,p,f,g){n=d,a=p,r=f,o=g,l=Math.ceil(o/r),u.next=r>1&&o>0?h:c}};return u;function c(){return n<a?n++:null}function h(){var d=n%l*r+Math.ceil(n/l),p=n>=a?null:d<o?d:n;return n++,p}}();function parseDataValue(a,n){var r=n&&n.type;return r==="ordinal"?a:(r==="time"&&!isNumber(a)&&a!=null&&a!=="-"&&(a=+parseDate(a)),a==null||a===""?NaN:Number(a))}var valueParserMap=createHashMap({number:function(a){return parseFloat(a)},time:function(a){return+parseDate(a)},trim:function(a){return isString(a)?trim$1(a):a}});function getRawValueParser(a){return valueParserMap.get(a)}var ORDER_COMPARISON_OP_MAP={lt:function(a,n){return a<n},lte:function(a,n){return a<=n},gt:function(a,n){return a>n},gte:function(a,n){return a>=n}},FilterOrderComparator=function(){function a(n,r){if(!isNumber(r)){var o="";o='rvalue of "<", ">", "<=", ">=" can only be number in filter.',throwError(o)}this._opFn=ORDER_COMPARISON_OP_MAP[n],this._rvalFloat=numericToNumber(r)}return a.prototype.evaluate=function(n){return isNumber(n)?this._opFn(n,this._rvalFloat):this._opFn(numericToNumber(n),this._rvalFloat)},a}(),SortOrderComparator=function(){function a(n,r){var o=n==="desc";this._resultLT=o?1:-1,r==null&&(r=o?"min":"max"),this._incomparable=r==="min"?-1/0:1/0}return a.prototype.evaluate=function(n,r){var o=isNumber(n)?n:numericToNumber(n),l=isNumber(r)?r:numericToNumber(r),u=isNaN(o),c=isNaN(l);if(u&&(o=this._incomparable),c&&(l=this._incomparable),u&&c){var h=isString(n),d=isString(r);h&&(o=d?n:0),d&&(l=h?r:0)}return o<l?this._resultLT:o>l?-this._resultLT:0},a}(),FilterEqualityComparator=function(){function a(n,r){this._rval=r,this._isEQ=n,this._rvalTypeof=typeof r,this._rvalFloat=numericToNumber(r)}return a.prototype.evaluate=function(n){var r=n===this._rval;if(!r){var o=typeof n;o!==this._rvalTypeof&&(o==="number"||this._rvalTypeof==="number")&&(r=numericToNumber(n)===this._rvalFloat)}return this._isEQ?r:!r},a}();function createFilterComparator(a,n){return a==="eq"||a==="ne"?new FilterEqualityComparator(a==="eq",n):hasOwn(ORDER_COMPARISON_OP_MAP,a)?new FilterOrderComparator(a,n):null}var ExternalSource=function(){function a(){}return a.prototype.getRawData=function(){throw new Error("not supported")},a.prototype.getRawDataItem=function(n){throw new Error("not supported")},a.prototype.cloneRawData=function(){},a.prototype.getDimensionInfo=function(n){},a.prototype.cloneAllDimensionInfo=function(){},a.prototype.count=function(){},a.prototype.retrieveValue=function(n,r){},a.prototype.retrieveValueFromItem=function(n,r){},a.prototype.convertValue=function(n,r){return parseDataValue(n,r)},a}();function createExternalSource(a,n){var r=new ExternalSource,o=a.data,l=r.sourceFormat=a.sourceFormat,u=a.startIndex,c="";a.seriesLayoutBy!==SERIES_LAYOUT_BY_COLUMN&&(c='`seriesLayoutBy` of upstream dataset can only be "column" in data transform.',throwError(c));var h=[],d={},p=a.dimensionsDefine;if(p)each$f(p,function(x,S){var T=x.name,M={index:S,name:T,displayName:x.displayName};if(h.push(M),T!=null){var b="";hasOwn(d,T)&&(b='dimension name "'+T+'" duplicated.',throwError(b)),d[T]=M}});else for(var f=0;f<a.dimensionsDetectedCount;f++)h.push({index:f});var g=getRawSourceItemGetter(l,SERIES_LAYOUT_BY_COLUMN);n.__isBuiltIn&&(r.getRawDataItem=function(x){return g(o,u,h,x)},r.getRawData=bind$1(getRawData,null,a)),r.cloneRawData=bind$1(cloneRawData,null,a);var y=getRawSourceDataCounter(l,SERIES_LAYOUT_BY_COLUMN);r.count=bind$1(y,null,o,u,h);var v=getRawSourceValueGetter(l);r.retrieveValue=function(x,S){var T=g(o,u,h,x);return _(T,S)};var _=r.retrieveValueFromItem=function(x,S){if(x!=null){var T=h[S];if(T)return v(x,S,T.name)}};return r.getDimensionInfo=bind$1(getDimensionInfo,null,h,d),r.cloneAllDimensionInfo=bind$1(cloneAllDimensionInfo,null,h),r}function getRawData(a){var n=a.sourceFormat;if(!isSupportedSourceFormat(n)){var r="";r="`getRawData` is not supported in source format "+n,throwError(r)}return a.data}function cloneRawData(a){var n=a.sourceFormat,r=a.data;if(!isSupportedSourceFormat(n)){var o="";o="`cloneRawData` is not supported in source format "+n,throwError(o)}if(n===SOURCE_FORMAT_ARRAY_ROWS){for(var l=[],u=0,c=r.length;u<c;u++)l.push(r[u].slice());return l}else if(n===SOURCE_FORMAT_OBJECT_ROWS){for(var l=[],u=0,c=r.length;u<c;u++)l.push(extend({},r[u]));return l}}function getDimensionInfo(a,n,r){if(r!=null){if(isNumber(r)||!isNaN(r)&&!hasOwn(n,r))return a[r];if(hasOwn(n,r))return n[r]}}function cloneAllDimensionInfo(a){return clone$4(a)}var externalTransformMap=createHashMap();function registerExternalTransform(a){a=clone$4(a);var n=a.type,r="";n||(r="Must have a `type` when `registerTransform`.",throwError(r));var o=n.split(":");o.length!==2&&(r='Name must include namespace like "ns:regression".',throwError(r));var l=!1;o[0]==="echarts"&&(n=o[1],l=!0),a.__isBuiltIn=l,externalTransformMap.set(n,a)}function applyDataTransform(a,n,r){var o=normalizeToArray(a),l=o.length,u="";l||(u="If `transform` declared, it should at least contain one transform.",throwError(u));for(var c=0,h=l;c<h;c++){var d=o[c];n=applySingleDataTransform(d,n,r,l===1?null:c),c!==h-1&&(n.length=Math.max(n.length,1))}return n}function applySingleDataTransform(a,n,r,o){var l="";n.length||(l="Must have at least one upstream dataset.",throwError(l)),isObject$3(a)||(l="transform declaration must be an object rather than "+typeof a+".",throwError(l));var u=a.type,c=externalTransformMap.get(u);c||(l='Can not find transform on type "'+u+'".',throwError(l));var h=map$1(n,function(f){return createExternalSource(f,c)}),d=normalizeToArray(c.transform({upstream:h[0],upstreamList:h,config:clone$4(a.config)}));if(a.print){var p=map$1(d,function(f){var g=o!=null?" === pipe index: "+o:"";return["=== dataset index: "+r.datasetIndex+g+" ===","- transform result data:",makePrintable(f.data),"- transform result dimensions:",makePrintable(f.dimensions)].join(`
`)}).join(`
`);log(p)}return map$1(d,function(f,g){var y="";isObject$3(f)||(y="A transform should not return some empty results.",throwError(y)),f.data||(y="Transform result data should be not be null or undefined",throwError(y));var v=detectSourceFormat(f.data);isSupportedSourceFormat(v)||(y="Transform result data should be array rows or object rows.",throwError(y));var _,x=n[0];if(x&&g===0&&!f.dimensions){var S=x.startIndex;S&&(f.data=x.data.slice(0,S).concat(f.data)),_={seriesLayoutBy:SERIES_LAYOUT_BY_COLUMN,sourceHeader:S,dimensions:x.metaRawOption.dimensions}}else _={seriesLayoutBy:SERIES_LAYOUT_BY_COLUMN,sourceHeader:0,dimensions:f.dimensions};return createSource(f.data,_,null)})}function isSupportedSourceFormat(a){return a===SOURCE_FORMAT_ARRAY_ROWS||a===SOURCE_FORMAT_OBJECT_ROWS}var UNDEFINED="undefined",CtorUint32Array=typeof Uint32Array===UNDEFINED?Array:Uint32Array,CtorUint16Array=typeof Uint16Array===UNDEFINED?Array:Uint16Array,CtorInt32Array$1=typeof Int32Array===UNDEFINED?Array:Int32Array,CtorFloat64Array=typeof Float64Array===UNDEFINED?Array:Float64Array,dataCtors={float:CtorFloat64Array,int:CtorInt32Array$1,ordinal:Array,number:Array,time:CtorFloat64Array},defaultDimValueGetters;function getIndicesCtor(a){return a>65535?CtorUint32Array:CtorUint16Array}function getInitialExtent(){return[1/0,-1/0]}function cloneChunk(a){var n=a.constructor;return n===Array?a.slice():new n(a)}function prepareStore(a,n,r,o,l){var u=dataCtors[r||"float"];if(l){var c=a[n],h=c&&c.length;if(h!==o){for(var d=new u(o),p=0;p<h;p++)d[p]=c[p];a[n]=d}}else a[n]=new u(o)}var DataStore=function(){function a(){this._chunks=[],this._rawExtent=[],this._extent=[],this._count=0,this._rawCount=0,this._calcDimNameToIdx=createHashMap()}return a.prototype.initData=function(n,r,o){assert(isFunction(n.getItem)&&isFunction(n.count),"Invalid data provider."),this._provider=n,this._chunks=[],this._indices=null,this.getRawIndex=this._getRawIdxIdentity;var l=n.getSource(),u=this.defaultDimValueGetter=defaultDimValueGetters[l.sourceFormat];this._dimValueGetter=o||u,this._rawExtent=[];var c=shouldRetrieveDataByName(l);this._dimensions=map$1(r,function(h){return c&&assert(h.property!=null),{type:h.type,property:h.property}}),this._initDataFromProvider(0,n.count())},a.prototype.getProvider=function(){return this._provider},a.prototype.getSource=function(){return this._provider.getSource()},a.prototype.ensureCalculationDimension=function(n,r){var o=this._calcDimNameToIdx,l=this._dimensions,u=o.get(n);if(u!=null){if(l[u].type===r)return u}else u=l.length;return l[u]={type:r},o.set(n,u),this._chunks[u]=new dataCtors[r||"float"](this._rawCount),this._rawExtent[u]=getInitialExtent(),u},a.prototype.collectOrdinalMeta=function(n,r){var o=this._chunks[n],l=this._dimensions[n],u=this._rawExtent,c=l.ordinalOffset||0,h=o.length;c===0&&(u[n]=getInitialExtent());for(var d=u[n],p=c;p<h;p++){var f=o[p]=r.parseAndCollect(o[p]);isNaN(f)||(d[0]=Math.min(f,d[0]),d[1]=Math.max(f,d[1]))}l.ordinalMeta=r,l.ordinalOffset=h,l.type="ordinal"},a.prototype.getOrdinalMeta=function(n){var r=this._dimensions[n],o=r.ordinalMeta;return o},a.prototype.getDimensionProperty=function(n){var r=this._dimensions[n];return r&&r.property},a.prototype.appendData=function(n){assert(!this._indices,"appendData can only be called on raw data.");var r=this._provider,o=this.count();r.appendData(n);var l=r.count();return r.persistent||(l+=o),o<l&&this._initDataFromProvider(o,l,!0),[o,l]},a.prototype.appendValues=function(n,r){for(var o=this._chunks,l=this._dimensions,u=l.length,c=this._rawExtent,h=this.count(),d=h+Math.max(n.length,r||0),p=0;p<u;p++){var f=l[p];prepareStore(o,p,f.type,d,!0)}for(var g=[],y=h;y<d;y++)for(var v=y-h,_=0;_<u;_++){var f=l[_],x=defaultDimValueGetters.arrayRows.call(this,n[v]||g,f.property,v,_);o[_][y]=x;var S=c[_];x<S[0]&&(S[0]=x),x>S[1]&&(S[1]=x)}return this._rawCount=this._count=d,{start:h,end:d}},a.prototype._initDataFromProvider=function(n,r,o){for(var l=this._provider,u=this._chunks,c=this._dimensions,h=c.length,d=this._rawExtent,p=map$1(c,function(M){return M.property}),f=0;f<h;f++){var g=c[f];d[f]||(d[f]=getInitialExtent()),prepareStore(u,f,g.type,r,o)}if(l.fillStorage)l.fillStorage(n,r,u,d);else for(var y=[],v=n;v<r;v++){y=l.getItem(v,y);for(var _=0;_<h;_++){var x=u[_],S=this._dimValueGetter(y,p[_],v,_);x[v]=S;var T=d[_];S<T[0]&&(T[0]=S),S>T[1]&&(T[1]=S)}}!l.persistent&&l.clean&&l.clean(),this._rawCount=this._count=r,this._extent=[]},a.prototype.count=function(){return this._count},a.prototype.get=function(n,r){if(!(r>=0&&r<this._count))return NaN;var o=this._chunks[n];return o?o[this.getRawIndex(r)]:NaN},a.prototype.getValues=function(n,r){var o=[],l=[];if(r==null){r=n,n=[];for(var u=0;u<this._dimensions.length;u++)l.push(u)}else l=n;for(var u=0,c=l.length;u<c;u++)o.push(this.get(l[u],r));return o},a.prototype.getByRawIndex=function(n,r){if(!(r>=0&&r<this._rawCount))return NaN;var o=this._chunks[n];return o?o[r]:NaN},a.prototype.getSum=function(n){var r=this._chunks[n],o=0;if(r)for(var l=0,u=this.count();l<u;l++){var c=this.get(n,l);isNaN(c)||(o+=c)}return o},a.prototype.getMedian=function(n){var r=[];this.each([n],function(u){isNaN(u)||r.push(u)});var o=r.sort(function(u,c){return u-c}),l=this.count();return l===0?0:l%2===1?o[(l-1)/2]:(o[l/2]+o[l/2-1])/2},a.prototype.indexOfRawIndex=function(n){if(n>=this._rawCount||n<0)return-1;if(!this._indices)return n;var r=this._indices,o=r[n];if(o!=null&&o<this._count&&o===n)return n;for(var l=0,u=this._count-1;l<=u;){var c=(l+u)/2|0;if(r[c]<n)l=c+1;else if(r[c]>n)u=c-1;else return c}return-1},a.prototype.indicesOfNearest=function(n,r,o){var l=this._chunks,u=l[n],c=[];if(!u)return c;o==null&&(o=1/0);for(var h=1/0,d=-1,p=0,f=0,g=this.count();f<g;f++){var y=this.getRawIndex(f),v=r-u[y],_=Math.abs(v);_<=o&&((_<h||_===h&&v>=0&&d<0)&&(h=_,d=v,p=0),v===d&&(c[p++]=f))}return c.length=p,c},a.prototype.getIndices=function(){var n,r=this._indices;if(r){var o=r.constructor,l=this._count;if(o===Array){n=new o(l);for(var u=0;u<l;u++)n[u]=r[u]}else n=new o(r.buffer,0,l)}else{var o=getIndicesCtor(this._rawCount);n=new o(this.count());for(var u=0;u<n.length;u++)n[u]=u}return n},a.prototype.filter=function(n,r){if(!this._count)return this;for(var o=this.clone(),l=o.count(),u=getIndicesCtor(o._rawCount),c=new u(l),h=[],d=n.length,p=0,f=n[0],g=o._chunks,y=0;y<l;y++){var v=void 0,_=o.getRawIndex(y);if(d===0)v=r(y);else if(d===1){var x=g[f][_];v=r(x,y)}else{for(var S=0;S<d;S++)h[S]=g[n[S]][_];h[S]=y,v=r.apply(null,h)}v&&(c[p++]=_)}return p<l&&(o._indices=c),o._count=p,o._extent=[],o._updateGetRawIdx(),o},a.prototype.selectRange=function(n){var r=this.clone(),o=r._count;if(!o)return this;var l=keys(n),u=l.length;if(!u)return this;var c=r.count(),h=getIndicesCtor(r._rawCount),d=new h(c),p=0,f=l[0],g=n[f][0],y=n[f][1],v=r._chunks,_=!1;if(!r._indices){var x=0;if(u===1){for(var S=v[l[0]],T=0;T<o;T++){var M=S[T];(M>=g&&M<=y||isNaN(M))&&(d[p++]=x),x++}_=!0}else if(u===2){for(var S=v[l[0]],b=v[l[1]],A=n[l[1]][0],I=n[l[1]][1],T=0;T<o;T++){var M=S[T],w=b[T];(M>=g&&M<=y||isNaN(M))&&(w>=A&&w<=I||isNaN(w))&&(d[p++]=x),x++}_=!0}}if(!_)if(u===1)for(var T=0;T<c;T++){var C=r.getRawIndex(T),M=v[l[0]][C];(M>=g&&M<=y||isNaN(M))&&(d[p++]=C)}else for(var T=0;T<c;T++){for(var E=!0,C=r.getRawIndex(T),P=0;P<u;P++){var D=l[P],M=v[D][C];(M<n[D][0]||M>n[D][1])&&(E=!1)}E&&(d[p++]=r.getRawIndex(T))}return p<c&&(r._indices=d),r._count=p,r._extent=[],r._updateGetRawIdx(),r},a.prototype.map=function(n,r){var o=this.clone(n);return this._updateDims(o,n,r),o},a.prototype.modify=function(n,r){this._updateDims(this,n,r)},a.prototype._updateDims=function(n,r,o){for(var l=n._chunks,u=[],c=r.length,h=n.count(),d=[],p=n._rawExtent,f=0;f<r.length;f++)p[r[f]]=getInitialExtent();for(var g=0;g<h;g++){for(var y=n.getRawIndex(g),v=0;v<c;v++)d[v]=l[r[v]][y];d[c]=g;var _=o&&o.apply(null,d);if(_!=null){typeof _!="object"&&(u[0]=_,_=u);for(var f=0;f<_.length;f++){var x=r[f],S=_[f],T=p[x],M=l[x];M&&(M[y]=S),S<T[0]&&(T[0]=S),S>T[1]&&(T[1]=S)}}}},a.prototype.lttbDownSample=function(n,r){var o=this.clone([n],!0),l=o._chunks,u=l[n],c=this.count(),h=0,d=Math.floor(1/r),p=this.getRawIndex(0),f,g,y,v=new(getIndicesCtor(this._rawCount))(Math.min((Math.ceil(c/d)+2)*2,c));v[h++]=p;for(var _=1;_<c-1;_+=d){for(var x=Math.min(_+d,c-1),S=Math.min(_+d*2,c),T=(S+x)/2,M=0,b=x;b<S;b++){var A=this.getRawIndex(b),I=u[A];isNaN(I)||(M+=I)}M/=S-x;var w=_,C=Math.min(_+d,c),E=_-1,P=u[p];f=-1,y=w;for(var D=-1,L=0,b=w;b<C;b++){var A=this.getRawIndex(b),I=u[A];if(isNaN(I)){L++,D<0&&(D=A);continue}g=Math.abs((E-T)*(I-P)-(E-b)*(M-P)),g>f&&(f=g,y=A)}L>0&&L<C-w&&(v[h++]=Math.min(D,y),y=Math.max(D,y)),v[h++]=y,p=y}return v[h++]=this.getRawIndex(c-1),o._count=h,o._indices=v,o.getRawIndex=this._getRawIdx,o},a.prototype.minmaxDownSample=function(n,r){for(var o=this.clone([n],!0),l=o._chunks,u=Math.floor(1/r),c=l[n],h=this.count(),d=new(getIndicesCtor(this._rawCount))(Math.ceil(h/u)*2),p=0,f=0;f<h;f+=u){var g=f,y=c[this.getRawIndex(g)],v=f,_=c[this.getRawIndex(v)],x=u;f+u>h&&(x=h-f);for(var S=0;S<x;S++){var T=this.getRawIndex(f+S),M=c[T];M<y&&(y=M,g=f+S),M>_&&(_=M,v=f+S)}var b=this.getRawIndex(g),A=this.getRawIndex(v);g<v?(d[p++]=b,d[p++]=A):(d[p++]=A,d[p++]=b)}return o._count=p,o._indices=d,o._updateGetRawIdx(),o},a.prototype.downSample=function(n,r,o,l){for(var u=this.clone([n],!0),c=u._chunks,h=[],d=Math.floor(1/r),p=c[n],f=this.count(),g=u._rawExtent[n]=getInitialExtent(),y=new(getIndicesCtor(this._rawCount))(Math.ceil(f/d)),v=0,_=0;_<f;_+=d){d>f-_&&(d=f-_,h.length=d);for(var x=0;x<d;x++){var S=this.getRawIndex(_+x);h[x]=p[S]}var T=o(h),M=this.getRawIndex(Math.min(_+l(h,T)||0,f-1));p[M]=T,T<g[0]&&(g[0]=T),T>g[1]&&(g[1]=T),y[v++]=M}return u._count=v,u._indices=y,u._updateGetRawIdx(),u},a.prototype.each=function(n,r){if(this._count)for(var o=n.length,l=this._chunks,u=0,c=this.count();u<c;u++){var h=this.getRawIndex(u);switch(o){case 0:r(u);break;case 1:r(l[n[0]][h],u);break;case 2:r(l[n[0]][h],l[n[1]][h],u);break;default:for(var d=0,p=[];d<o;d++)p[d]=l[n[d]][h];p[d]=u,r.apply(null,p)}}},a.prototype.getDataExtent=function(n){var r=this._chunks[n],o=getInitialExtent();if(!r)return o;var l=this.count(),u=!this._indices,c;if(u)return this._rawExtent[n].slice();if(c=this._extent[n],c)return c.slice();c=o;for(var h=c[0],d=c[1],p=0;p<l;p++){var f=this.getRawIndex(p),g=r[f];g<h&&(h=g),g>d&&(d=g)}return c=[h,d],this._extent[n]=c,c},a.prototype.getRawDataItem=function(n){var r=this.getRawIndex(n);if(this._provider.persistent)return this._provider.getItem(r);for(var o=[],l=this._chunks,u=0;u<l.length;u++)o.push(l[u][r]);return o},a.prototype.clone=function(n,r){var o=new a,l=this._chunks,u=n&&reduce(n,function(h,d){return h[d]=!0,h},{});if(u)for(var c=0;c<l.length;c++)o._chunks[c]=u[c]?cloneChunk(l[c]):l[c];else o._chunks=l;return this._copyCommonProps(o),r||(o._indices=this._cloneIndices()),o._updateGetRawIdx(),o},a.prototype._copyCommonProps=function(n){n._count=this._count,n._rawCount=this._rawCount,n._provider=this._provider,n._dimensions=this._dimensions,n._extent=clone$4(this._extent),n._rawExtent=clone$4(this._rawExtent)},a.prototype._cloneIndices=function(){if(this._indices){var n=this._indices.constructor,r=void 0;if(n===Array){var o=this._indices.length;r=new n(o);for(var l=0;l<o;l++)r[l]=this._indices[l]}else r=new n(this._indices);return r}return null},a.prototype._getRawIdxIdentity=function(n){return n},a.prototype._getRawIdx=function(n){return n<this._count&&n>=0?this._indices[n]:-1},a.prototype._updateGetRawIdx=function(){this.getRawIndex=this._indices?this._getRawIdx:this._getRawIdxIdentity},a.internalField=function(){function n(r,o,l,u){return parseDataValue(r[u],this._dimensions[u])}defaultDimValueGetters={arrayRows:n,objectRows:function(r,o,l,u){return parseDataValue(r[o],this._dimensions[u])},keyedColumns:n,original:function(r,o,l,u){var c=r&&(r.value==null?r:r.value);return parseDataValue(c instanceof Array?c[u]:c,this._dimensions[u])},typedArray:function(r,o,l,u){return r[u]}}}(),a}();const DataStore$1=DataStore;var SourceManager=function(){function a(n){this._sourceList=[],this._storeList=[],this._upstreamSignList=[],this._versionSignBase=0,this._dirty=!0,this._sourceHost=n}return a.prototype.dirty=function(){this._setLocalSource([],[]),this._storeList=[],this._dirty=!0},a.prototype._setLocalSource=function(n,r){this._sourceList=n,this._upstreamSignList=r,this._versionSignBase++,this._versionSignBase>9e10&&(this._versionSignBase=0)},a.prototype._getVersionSign=function(){return this._sourceHost.uid+"_"+this._versionSignBase},a.prototype.prepareSource=function(){this._isDirty()&&(this._createSource(),this._dirty=!1)},a.prototype._createSource=function(){this._setLocalSource([],[]);var n=this._sourceHost,r=this._getUpstreamSourceManagers(),o=!!r.length,l,u;if(isSeries(n)){var c=n,h=void 0,d=void 0,p=void 0;if(o){var f=r[0];f.prepareSource(),p=f.getSource(),h=p.data,d=p.sourceFormat,u=[f._getVersionSign()]}else h=c.get("data",!0),d=isTypedArray(h)?SOURCE_FORMAT_TYPED_ARRAY:SOURCE_FORMAT_ORIGINAL,u=[];var g=this._getSourceMetaRawOption()||{},y=p&&p.metaRawOption||{},v=retrieve2(g.seriesLayoutBy,y.seriesLayoutBy)||null,_=retrieve2(g.sourceHeader,y.sourceHeader),x=retrieve2(g.dimensions,y.dimensions),S=v!==y.seriesLayoutBy||!!_!=!!y.sourceHeader||x;l=S?[createSource(h,{seriesLayoutBy:v,sourceHeader:_,dimensions:x},d)]:[]}else{var T=n;if(o){var M=this._applyTransform(r);l=M.sourceList,u=M.upstreamSignList}else{var b=T.get("source",!0);l=[createSource(b,this._getSourceMetaRawOption(),null)],u=[]}}assert(l&&u),this._setLocalSource(l,u)},a.prototype._applyTransform=function(n){var r=this._sourceHost,o=r.get("transform",!0),l=r.get("fromTransformResult",!0);if(assert(l!=null||o!=null),l!=null){var u="";n.length!==1&&(u="When using `fromTransformResult`, there should be only one upstream dataset",doThrow(u))}var c,h=[],d=[];return each$f(n,function(p){p.prepareSource();var f=p.getSource(l||0),g="";l!=null&&!f&&(g="Can not retrieve result by `fromTransformResult`: "+l,doThrow(g)),h.push(f),d.push(p._getVersionSign())}),o?c=applyDataTransform(o,h,{datasetIndex:r.componentIndex}):l!=null&&(c=[cloneSourceShallow(h[0])]),{sourceList:c,upstreamSignList:d}},a.prototype._isDirty=function(){if(this._dirty)return!0;for(var n=this._getUpstreamSourceManagers(),r=0;r<n.length;r++){var o=n[r];if(o._isDirty()||this._upstreamSignList[r]!==o._getVersionSign())return!0}},a.prototype.getSource=function(n){n=n||0;var r=this._sourceList[n];if(!r){var o=this._getUpstreamSourceManagers();return o[0]&&o[0].getSource(n)}return r},a.prototype.getSharedDataStore=function(n){assert(isSeries(this._sourceHost),"Can only call getDataStore on series source manager.");var r=n.makeStoreSchema();return this._innerGetDataStore(r.dimensions,n.source,r.hash)},a.prototype._innerGetDataStore=function(n,r,o){var l=0,u=this._storeList,c=u[l];c||(c=u[l]={});var h=c[o];if(!h){var d=this._getUpstreamSourceManagers()[0];isSeries(this._sourceHost)&&d?h=d._innerGetDataStore(n,r,o):(h=new DataStore$1,h.initData(new DefaultDataProvider(r,n.length),n)),c[o]=h}return h},a.prototype._getUpstreamSourceManagers=function(){var n=this._sourceHost;if(isSeries(n)){var r=querySeriesUpstreamDatasetModel(n);return r?[r.getSourceManager()]:[]}else return map$1(queryDatasetUpstreamDatasetModels(n),function(o){return o.getSourceManager()})},a.prototype._getSourceMetaRawOption=function(){var n=this._sourceHost,r,o,l;if(isSeries(n))r=n.get("seriesLayoutBy",!0),o=n.get("sourceHeader",!0),l=n.get("dimensions",!0);else if(!this._getUpstreamSourceManagers().length){var u=n;r=u.get("seriesLayoutBy",!0),o=u.get("sourceHeader",!0),l=u.get("dimensions",!0)}return{seriesLayoutBy:r,sourceHeader:o,dimensions:l}},a}();function disableTransformOptionMerge(a){var n=a.option.transform;n&&setAsPrimitive(a.option.transform)}function isSeries(a){return a.mainType==="series"}function doThrow(a){throw new Error(a)}var TOOLTIP_LINE_HEIGHT_CSS="line-height:1";function getTooltipLineHeight(a){var n=a.lineHeight;return n==null?TOOLTIP_LINE_HEIGHT_CSS:"line-height:"+encodeHTML(n+"")+"px"}function getTooltipTextStyle(a,n){var r=a.color||"#6e7079",o=a.fontSize||12,l=a.fontWeight||"400",u=a.color||"#464646",c=a.fontSize||14,h=a.fontWeight||"900";return n==="html"?{nameStyle:"font-size:"+encodeHTML(o+"")+"px;color:"+encodeHTML(r)+";font-weight:"+encodeHTML(l+""),valueStyle:"font-size:"+encodeHTML(c+"")+"px;color:"+encodeHTML(u)+";font-weight:"+encodeHTML(h+"")}:{nameStyle:{fontSize:o,fill:r,fontWeight:l},valueStyle:{fontSize:c,fill:u,fontWeight:h}}}var HTML_GAPS=[0,10,20,30],RICH_TEXT_GAPS=["",`
`,`

`,`


`];function createTooltipMarkup(a,n){return n.type=a,n}function isSectionFragment(a){return a.type==="section"}function getBuilder(a){return isSectionFragment(a)?buildSection:buildNameValue}function getBlockGapLevel(a){if(isSectionFragment(a)){var n=0,r=a.blocks.length,o=r>1||r>0&&!a.noHeader;return each$f(a.blocks,function(l){var u=getBlockGapLevel(l);u>=n&&(n=u+ +(o&&(!u||isSectionFragment(l)&&!l.noHeader)))}),n}return 0}function buildSection(a,n,r,o){var l=n.noHeader,u=getGap(getBlockGapLevel(n)),c=[],h=n.blocks||[];assert(!h||isArray$1(h)),h=h||[];var d=a.orderMode;if(n.sortBlocks&&d){h=h.slice();var p={valueAsc:"asc",valueDesc:"desc"};if(hasOwn(p,d)){var f=new SortOrderComparator(p[d],null);h.sort(function(x,S){return f.evaluate(x.sortParam,S.sortParam)})}else d==="seriesDesc"&&h.reverse()}each$f(h,function(x,S){var T=n.valueFormatter,M=getBuilder(x)(T?extend(extend({},a),{valueFormatter:T}):a,x,S>0?u.html:0,o);M!=null&&c.push(M)});var g=a.renderMode==="richText"?c.join(u.richText):wrapBlockHTML(o,c.join(""),l?r:u.html);if(l)return g;var y=makeValueReadable(n.header,"ordinal",a.useUTC),v=getTooltipTextStyle(o,a.renderMode).nameStyle,_=getTooltipLineHeight(o);return a.renderMode==="richText"?wrapInlineNameRichText(a,y,v)+u.richText+g:wrapBlockHTML(o,'<div style="'+v+";"+_+';">'+encodeHTML(y)+"</div>"+g,r)}function buildNameValue(a,n,r,o){var l=a.renderMode,u=n.noName,c=n.noValue,h=!n.markerType,d=n.name,p=a.useUTC,f=n.valueFormatter||a.valueFormatter||function(A){return A=isArray$1(A)?A:[A],map$1(A,function(I,w){return makeValueReadable(I,isArray$1(v)?v[w]:v,p)})};if(!(u&&c)){var g=h?"":a.markupStyleCreator.makeTooltipMarker(n.markerType,n.markerColor||"#333",l),y=u?"":makeValueReadable(d,"ordinal",p),v=n.valueType,_=c?[]:f(n.value,n.dataIndex),x=!h||!u,S=!h&&u,T=getTooltipTextStyle(o,l),M=T.nameStyle,b=T.valueStyle;return l==="richText"?(h?"":g)+(u?"":wrapInlineNameRichText(a,y,M))+(c?"":wrapInlineValueRichText(a,_,x,S,b)):wrapBlockHTML(o,(h?"":g)+(u?"":wrapInlineNameHTML(y,!h,M))+(c?"":wrapInlineValueHTML(_,x,S,b)),r)}}function buildTooltipMarkup(a,n,r,o,l,u){if(a){var c=getBuilder(a),h={useUTC:l,renderMode:r,orderMode:o,markupStyleCreator:n,valueFormatter:a.valueFormatter};return c(h,a,0,u)}}function getGap(a){return{html:HTML_GAPS[a],richText:RICH_TEXT_GAPS[a]}}function wrapBlockHTML(a,n,r){var o='<div style="clear:both"></div>',l="margin: "+r+"px 0 0",u=getTooltipLineHeight(a);return'<div style="'+l+";"+u+';">'+n+o+"</div>"}function wrapInlineNameHTML(a,n,r){var o=n?"margin-left:2px":"";return'<span style="'+r+";"+o+'">'+encodeHTML(a)+"</span>"}function wrapInlineValueHTML(a,n,r,o){var l=r?"10px":"20px",u=n?"float:right;margin-left:"+l:"";return a=isArray$1(a)?a:[a],'<span style="'+u+";"+o+'">'+map$1(a,function(c){return encodeHTML(c)}).join("&nbsp;&nbsp;")+"</span>"}function wrapInlineNameRichText(a,n,r){return a.markupStyleCreator.wrapRichTextStyle(n,r)}function wrapInlineValueRichText(a,n,r,o,l){var u=[l],c=o?10:20;return r&&u.push({padding:[0,0,0,c],align:"right"}),a.markupStyleCreator.wrapRichTextStyle(isArray$1(n)?n.join("  "):n,u)}function retrieveVisualColorForTooltipMarker(a,n){var r=a.getData().getItemVisual(n,"style"),o=r[a.visualDrawType];return convertToColorString(o)}function getPaddingFromTooltipModel(a,n){var r=a.get("padding");return r!=null?r:n==="richText"?[8,10]:10}var TooltipMarkupStyleCreator=function(){function a(){this.richTextStyles={},this._nextStyleNameId=getRandomIdBase()}return a.prototype._generateStyleName=function(){return"__EC_aUTo_"+this._nextStyleNameId++},a.prototype.makeTooltipMarker=function(n,r,o){var l=o==="richText"?this._generateStyleName():null,u=getTooltipMarker({color:r,type:n,renderMode:o,markerId:l});return isString(u)?u:(assert(l),this.richTextStyles[l]=u.style,u.content)},a.prototype.wrapRichTextStyle=function(n,r){var o={};isArray$1(r)?each$f(r,function(u){return extend(o,u)}):extend(o,r);var l=this._generateStyleName();return this.richTextStyles[l]=o,"{"+l+"|"+n+"}"},a}();function defaultSeriesFormatTooltip(a){var n=a.series,r=a.dataIndex,o=a.multipleSeries,l=n.getData(),u=l.mapDimensionsAll("defaultedTooltip"),c=u.length,h=n.getRawValue(r),d=isArray$1(h),p=retrieveVisualColorForTooltipMarker(n,r),f,g,y,v;if(c>1||d&&!c){var _=formatTooltipArrayValue(h,n,r,u,p);f=_.inlineValues,g=_.inlineValueTypes,y=_.blocks,v=_.inlineValues[0]}else if(c){var x=l.getDimensionInfo(u[0]);v=f=retrieveRawValue(l,r,u[0]),g=x.type}else v=f=d?h[0]:h;var S=isNameSpecified(n),T=S&&n.name||"",M=l.getName(r),b=o?T:M;return createTooltipMarkup("section",{header:T,noHeader:o||!S,sortParam:v,blocks:[createTooltipMarkup("nameValue",{markerType:"item",markerColor:p,name:b,noName:!trim$1(b),value:f,valueType:g,dataIndex:r})].concat(y||[])})}function formatTooltipArrayValue(a,n,r,o,l){var u=n.getData(),c=reduce(a,function(g,y,v){var _=u.getDimensionInfo(v);return g=g||_&&_.tooltip!==!1&&_.displayName!=null},!1),h=[],d=[],p=[];o.length?each$f(o,function(g){f(retrieveRawValue(u,r,g),g)}):each$f(a,f);function f(g,y){var v=u.getDimensionInfo(y);!v||v.otherDims.tooltip===!1||(c?p.push(createTooltipMarkup("nameValue",{markerType:"subItem",markerColor:l,name:v.displayName,value:g,valueType:v.type})):(h.push(g),d.push(v.type)))}return{inlineValues:h,inlineValueTypes:d,blocks:p}}var inner$k=makeInner();function getSelectionKey(a,n){return a.getName(n)||a.getId(n)}var SERIES_UNIVERSAL_TRANSITION_PROP="__universalTransitionEnabled",SeriesModel=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r._selectedDataIndicesMap={},r}return n.prototype.init=function(r,o,l){this.seriesIndex=this.componentIndex,this.dataTask=createTask({count:dataTaskCount,reset:dataTaskReset}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(r,l);var u=inner$k(this).sourceManager=new SourceManager(this);u.prepareSource();var c=this.getInitialData(r,l);wrapData(c,this),this.dataTask.context.data=c,assert(c,"getInitialData returned invalid data."),inner$k(this).dataBeforeProcessed=c,autoSeriesName(this),this._initSelectedMapFromData(c)},n.prototype.mergeDefaultAndTheme=function(r,o){var l=fetchLayoutMode(this),u=l?getLayoutParams(r):{},c=this.subType;ComponentModel$1.hasClass(c)&&(c+="Series"),merge(r,o.getTheme().get(this.subType)),merge(r,this.getDefaultOption()),defaultEmphasis(r,"label",["show"]),this.fillDataTextStyle(r.data),l&&mergeLayoutParam(r,u,l)},n.prototype.mergeOption=function(r,o){r=merge(this.option,r,!0),this.fillDataTextStyle(r.data);var l=fetchLayoutMode(this);l&&mergeLayoutParam(this.option,r,l);var u=inner$k(this).sourceManager;u.dirty(),u.prepareSource();var c=this.getInitialData(r,o);wrapData(c,this),this.dataTask.dirty(),this.dataTask.context.data=c,inner$k(this).dataBeforeProcessed=c,autoSeriesName(this),this._initSelectedMapFromData(c)},n.prototype.fillDataTextStyle=function(r){if(r&&!isTypedArray(r))for(var o=["show"],l=0;l<r.length;l++)r[l]&&r[l].label&&defaultEmphasis(r[l],"label",o)},n.prototype.getInitialData=function(r,o){},n.prototype.appendData=function(r){var o=this.getRawData();o.appendData(r.data)},n.prototype.getData=function(r){var o=getCurrentTask(this);if(o){var l=o.context.data;return r==null||!l.getLinkedData?l:l.getLinkedData(r)}else return inner$k(this).data},n.prototype.getAllData=function(){var r=this.getData();return r&&r.getLinkedDataAll?r.getLinkedDataAll():[{data:r}]},n.prototype.setData=function(r){var o=getCurrentTask(this);if(o){var l=o.context;l.outputData=r,o!==this.dataTask&&(l.data=r)}inner$k(this).data=r},n.prototype.getEncode=function(){var r=this.get("encode",!0);if(r)return createHashMap(r)},n.prototype.getSourceManager=function(){return inner$k(this).sourceManager},n.prototype.getSource=function(){return this.getSourceManager().getSource()},n.prototype.getRawData=function(){return inner$k(this).dataBeforeProcessed},n.prototype.getColorBy=function(){var r=this.get("colorBy");return r||"series"},n.prototype.isColorBySeries=function(){return this.getColorBy()==="series"},n.prototype.getBaseAxis=function(){var r=this.coordinateSystem;return r&&r.getBaseAxis&&r.getBaseAxis()},n.prototype.formatTooltip=function(r,o,l){return defaultSeriesFormatTooltip({series:this,dataIndex:r,multipleSeries:o})},n.prototype.isAnimationEnabled=function(){var r=this.ecModel;if(env$1.node&&!(r&&r.ssr))return!1;var o=this.getShallow("animation");return o&&this.getData().count()>this.getShallow("animationThreshold")&&(o=!1),!!o},n.prototype.restoreData=function(){this.dataTask.dirty()},n.prototype.getColorFromPalette=function(r,o,l){var u=this.ecModel,c=PaletteMixin.prototype.getColorFromPalette.call(this,r,o,l);return c||(c=u.getColorFromPalette(r,o,l)),c},n.prototype.coordDimToDataDim=function(r){return this.getRawData().mapDimensionsAll(r)},n.prototype.getProgressive=function(){return this.get("progressive")},n.prototype.getProgressiveThreshold=function(){return this.get("progressiveThreshold")},n.prototype.select=function(r,o){this._innerSelect(this.getData(o),r)},n.prototype.unselect=function(r,o){var l=this.option.selectedMap;if(l){var u=this.option.selectedMode,c=this.getData(o);if(u==="series"||l==="all"){this.option.selectedMap={},this._selectedDataIndicesMap={};return}for(var h=0;h<r.length;h++){var d=r[h],p=getSelectionKey(c,d);l[p]=!1,this._selectedDataIndicesMap[p]=-1}}},n.prototype.toggleSelect=function(r,o){for(var l=[],u=0;u<r.length;u++)l[0]=r[u],this.isSelected(r[u],o)?this.unselect(l,o):this.select(l,o)},n.prototype.getSelectedDataIndices=function(){if(this.option.selectedMap==="all")return[].slice.call(this.getData().getIndices());for(var r=this._selectedDataIndicesMap,o=keys(r),l=[],u=0;u<o.length;u++){var c=r[o[u]];c>=0&&l.push(c)}return l},n.prototype.isSelected=function(r,o){var l=this.option.selectedMap;if(!l)return!1;var u=this.getData(o);return(l==="all"||l[getSelectionKey(u,r)])&&!u.getItemModel(r).get(["select","disabled"])},n.prototype.isUniversalTransitionEnabled=function(){if(this[SERIES_UNIVERSAL_TRANSITION_PROP])return!0;var r=this.option.universalTransition;return r?r===!0?!0:r&&r.enabled:!1},n.prototype._innerSelect=function(r,o){var l,u,c=this.option,h=c.selectedMode,d=o.length;if(!(!h||!d)){if(h==="series")c.selectedMap="all";else if(h==="multiple"){isObject$3(c.selectedMap)||(c.selectedMap={});for(var p=c.selectedMap,f=0;f<d;f++){var g=o[f],y=getSelectionKey(r,g);p[y]=!0,this._selectedDataIndicesMap[y]=r.getRawIndex(g)}}else if(h==="single"||h===!0){var v=o[d-1],y=getSelectionKey(r,v);c.selectedMap=(l={},l[y]=!0,l),this._selectedDataIndicesMap=(u={},u[y]=r.getRawIndex(v),u)}}},n.prototype._initSelectedMapFromData=function(r){if(!this.option.selectedMap){var o=[];r.hasItemOption&&r.each(function(l){var u=r.getRawDataItem(l);u&&u.selected&&o.push(l)}),o.length>0&&this._innerSelect(r,o)}},n.registerClass=function(r){return ComponentModel$1.registerClass(r)},n.protoInitialize=function(){var r=n.prototype;r.type="series.__base__",r.seriesIndex=0,r.ignoreStyleOnData=!1,r.hasSymbolVisual=!1,r.defaultSymbol="circle",r.visualStyleAccessPath="itemStyle",r.visualDrawType="fill"}(),n}(ComponentModel$1);mixin(SeriesModel,DataFormatMixin);mixin(SeriesModel,PaletteMixin);mountExtend(SeriesModel,ComponentModel$1);function autoSeriesName(a){var n=a.name;isNameSpecified(a)||(a.name=getSeriesAutoName(a)||n)}function getSeriesAutoName(a){var n=a.getRawData(),r=n.mapDimensionsAll("seriesName"),o=[];return each$f(r,function(l){var u=n.getDimensionInfo(l);u.displayName&&o.push(u.displayName)}),o.join(" ")}function dataTaskCount(a){return a.model.getRawData().count()}function dataTaskReset(a){var n=a.model;return n.setData(n.getRawData().cloneShallow()),dataTaskProgress}function dataTaskProgress(a,n){n.outputData&&a.end>n.outputData.count()&&n.model.getRawData().cloneShallow(n.outputData)}function wrapData(a,n){each$f(concatArray(a.CHANGABLE_METHODS,a.DOWNSAMPLE_METHODS),function(r){a.wrapMethod(r,curry$1(onDataChange,n))})}function onDataChange(a,n){var r=getCurrentTask(a);return r&&r.setOutputEnd((n||this).count()),n}function getCurrentTask(a){var n=(a.ecModel||{}).scheduler,r=n&&n.getPipeline(a.uid);if(r){var o=r.currentTask;if(o){var l=o.agentStubMap;l&&(o=l.get(a.uid))}return o}}const SeriesModel$1=SeriesModel;var ComponentView=function(){function a(){this.group=new Group$4,this.uid=getUID("viewComponent")}return a.prototype.init=function(n,r){},a.prototype.render=function(n,r,o,l){},a.prototype.dispose=function(n,r){},a.prototype.updateView=function(n,r,o,l){},a.prototype.updateLayout=function(n,r,o,l){},a.prototype.updateVisual=function(n,r,o,l){},a.prototype.toggleBlurSeries=function(n,r,o){},a.prototype.eachRendered=function(n){var r=this.group;r&&r.traverse(n)},a}();enableClassExtend(ComponentView);enableClassManagement(ComponentView);const ComponentView$1=ComponentView;function createRenderPlanner(){var a=makeInner();return function(n){var r=a(n),o=n.pipelineContext,l=!!r.large,u=!!r.progressiveRender,c=r.large=!!(o&&o.large),h=r.progressiveRender=!!(o&&o.progressiveRender);return(l!==c||u!==h)&&"reset"}}var inner$j=makeInner(),renderPlanner=createRenderPlanner(),ChartView=function(){function a(){this.group=new Group$4,this.uid=getUID("viewChart"),this.renderTask=createTask({plan:renderTaskPlan,reset:renderTaskReset}),this.renderTask.context={view:this}}return a.prototype.init=function(n,r){},a.prototype.render=function(n,r,o,l){throw new Error("render method must been implemented")},a.prototype.highlight=function(n,r,o,l){var u=n.getData(l&&l.dataType);if(!u){error("Unknown dataType "+l.dataType);return}toggleHighlight(u,l,"emphasis")},a.prototype.downplay=function(n,r,o,l){var u=n.getData(l&&l.dataType);if(!u){error("Unknown dataType "+l.dataType);return}toggleHighlight(u,l,"normal")},a.prototype.remove=function(n,r){this.group.removeAll()},a.prototype.dispose=function(n,r){},a.prototype.updateView=function(n,r,o,l){this.render(n,r,o,l)},a.prototype.updateLayout=function(n,r,o,l){this.render(n,r,o,l)},a.prototype.updateVisual=function(n,r,o,l){this.render(n,r,o,l)},a.prototype.eachRendered=function(n){traverseElements(this.group,n)},a.markUpdateMethod=function(n,r){inner$j(n).updateMethod=r},a.protoInitialize=function(){var n=a.prototype;n.type="chart"}(),a}();function elSetState(a,n,r){a&&isHighDownDispatcher(a)&&(n==="emphasis"?enterEmphasis:leaveEmphasis)(a,r)}function toggleHighlight(a,n,r){var o=queryDataIndex(a,n),l=n&&n.highlightKey!=null?getHighlightDigit(n.highlightKey):null;o!=null?each$f(normalizeToArray(o),function(u){elSetState(a.getItemGraphicEl(u),r,l)}):a.eachItemGraphicEl(function(u){elSetState(u,r,l)})}enableClassExtend(ChartView,["dispose"]);enableClassManagement(ChartView);function renderTaskPlan(a){return renderPlanner(a.model)}function renderTaskReset(a){var n=a.model,r=a.ecModel,o=a.api,l=a.payload,u=n.pipelineContext.progressiveRender,c=a.view,h=l&&inner$j(l).updateMethod,d=u?"incrementalPrepareRender":h&&c[h]?h:"render";return d!=="render"&&c[d](n,r,o,l),progressMethodMap[d]}var progressMethodMap={incrementalPrepareRender:{progress:function(a,n){n.view.incrementalRender(a,n.model,n.ecModel,n.api,n.payload)}},render:{forceFirstProgress:!0,progress:function(a,n){n.view.render(n.model,n.ecModel,n.api,n.payload)}}};const ChartView$1=ChartView;var ORIGIN_METHOD="\0__throttleOriginMethod",RATE="\0__throttleRate",THROTTLE_TYPE="\0__throttleType";function throttle(a,n,r){var o,l=0,u=0,c=null,h,d,p,f;n=n||0;function g(){u=new Date().getTime(),c=null,a.apply(d,p||[])}var y=function(){for(var v=[],_=0;_<arguments.length;_++)v[_]=arguments[_];o=new Date().getTime(),d=this,p=v;var x=f||n,S=f||r;f=null,h=o-(S?l:u)-x,clearTimeout(c),S?c=setTimeout(g,x):h>=0?g():c=setTimeout(g,-h),l=o};return y.clear=function(){c&&(clearTimeout(c),c=null)},y.debounceNextCall=function(v){f=v},y}function createOrUpdate(a,n,r,o){var l=a[n];if(l){var u=l[ORIGIN_METHOD]||l,c=l[THROTTLE_TYPE],h=l[RATE];if(h!==r||c!==o){if(r==null||!o)return a[n]=u;l=a[n]=throttle(u,r,o==="debounce"),l[ORIGIN_METHOD]=u,l[THROTTLE_TYPE]=o,l[RATE]=r}return l}}function clear$1(a,n){var r=a[n];r&&r[ORIGIN_METHOD]&&(r.clear&&r.clear(),a[n]=r[ORIGIN_METHOD])}var inner$i=makeInner(),defaultStyleMappers={itemStyle:makeStyleMapper(ITEM_STYLE_KEY_MAP,!0),lineStyle:makeStyleMapper(LINE_STYLE_KEY_MAP,!0)},defaultColorKey={lineStyle:"stroke",itemStyle:"fill"};function getStyleMapper(a,n){var r=a.visualStyleMapper||defaultStyleMappers[n];return r||(console.warn("Unknown style type '"+n+"'."),defaultStyleMappers.itemStyle)}function getDefaultColorKey(a,n){var r=a.visualDrawType||defaultColorKey[n];return r||(console.warn("Unknown style type '"+n+"'."),"fill")}var seriesStyleTask={createOnAllSeries:!0,performRawSeries:!0,reset:function(a,n){var r=a.getData(),o=a.visualStyleAccessPath||"itemStyle",l=a.getModel(o),u=getStyleMapper(a,o),c=u(l),h=l.getShallow("decal");h&&(r.setVisual("decal",h),h.dirty=!0);var d=getDefaultColorKey(a,o),p=c[d],f=isFunction(p)?p:null,g=c.fill==="auto"||c.stroke==="auto";if(!c[d]||f||g){var y=a.getColorFromPalette(a.name,null,n.getSeriesCount());c[d]||(c[d]=y,r.setVisual("colorFromPalette",!0)),c.fill=c.fill==="auto"||isFunction(c.fill)?y:c.fill,c.stroke=c.stroke==="auto"||isFunction(c.stroke)?y:c.stroke}if(r.setVisual("style",c),r.setVisual("drawType",d),!n.isSeriesFiltered(a)&&f)return r.setVisual("colorFromPalette",!1),{dataEach:function(v,_){var x=a.getDataParams(_),S=extend({},c);S[d]=f(x),v.setItemVisual(_,"style",S)}}}},sharedModel=new Model$1,dataStyleTask={createOnAllSeries:!0,performRawSeries:!0,reset:function(a,n){if(!(a.ignoreStyleOnData||n.isSeriesFiltered(a))){var r=a.getData(),o=a.visualStyleAccessPath||"itemStyle",l=getStyleMapper(a,o),u=r.getVisual("drawType");return{dataEach:r.hasItemOption?function(c,h){var d=c.getRawDataItem(h);if(d&&d[o]){sharedModel.option=d[o];var p=l(sharedModel),f=c.ensureUniqueItemVisual(h,"style");extend(f,p),sharedModel.option.decal&&(c.setItemVisual(h,"decal",sharedModel.option.decal),sharedModel.option.decal.dirty=!0),u in p&&c.setItemVisual(h,"colorFromPalette",!1)}}:null}}}},dataColorPaletteTask={performRawSeries:!0,overallReset:function(a){var n=createHashMap();a.eachSeries(function(r){var o=r.getColorBy();if(!r.isColorBySeries()){var l=r.type+"-"+o,u=n.get(l);u||(u={},n.set(l,u)),inner$i(r).scope=u}}),a.eachSeries(function(r){if(!(r.isColorBySeries()||a.isSeriesFiltered(r))){var o=r.getRawData(),l={},u=r.getData(),c=inner$i(r).scope,h=r.visualStyleAccessPath||"itemStyle",d=getDefaultColorKey(r,h);u.each(function(p){var f=u.getRawIndex(p);l[f]=p}),o.each(function(p){var f=l[p],g=u.getItemVisual(f,"colorFromPalette");if(g){var y=u.ensureUniqueItemVisual(f,"style"),v=o.getName(p)||p+"",_=o.count();y[d]=r.getColorFromPalette(v,c,_)}})}})}},PI$5=Math.PI;function defaultLoading(a,n){n=n||{},defaults(n,{text:"loading",textColor:"#000",fontSize:12,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif",maskColor:"rgba(255, 255, 255, 0.8)",showSpinner:!0,color:"#5470c6",spinnerRadius:10,lineWidth:5,zlevel:0});var r=new Group$4,o=new Rect$3({style:{fill:n.maskColor},zlevel:n.zlevel,z:1e4});r.add(o);var l=new ZRText$1({style:{text:n.text,fill:n.textColor,fontSize:n.fontSize,fontWeight:n.fontWeight,fontStyle:n.fontStyle,fontFamily:n.fontFamily},zlevel:n.zlevel,z:10001}),u=new Rect$3({style:{fill:"none"},textContent:l,textConfig:{position:"right",distance:10},zlevel:n.zlevel,z:10001});r.add(u);var c;return n.showSpinner&&(c=new Arc$1({shape:{startAngle:-PI$5/2,endAngle:-PI$5/2+.1,r:n.spinnerRadius},style:{stroke:n.color,lineCap:"round",lineWidth:n.lineWidth},zlevel:n.zlevel,z:10001}),c.animateShape(!0).when(1e3,{endAngle:PI$5*3/2}).start("circularInOut"),c.animateShape(!0).when(1e3,{startAngle:PI$5*3/2}).delay(300).start("circularInOut"),r.add(c)),r.resize=function(){var h=l.getBoundingRect().width,d=n.showSpinner?n.spinnerRadius:0,p=(a.getWidth()-d*2-(n.showSpinner&&h?10:0)-h)/2-(n.showSpinner&&h?0:5+h/2)+(n.showSpinner?0:h/2)+(h?0:d),f=a.getHeight()/2;n.showSpinner&&c.setShape({cx:p,cy:f}),u.setShape({x:p-d,y:f-d,width:d*2,height:d*2}),o.setShape({x:0,y:0,width:a.getWidth(),height:a.getHeight()})},r.resize(),r}var Scheduler=function(){function a(n,r,o,l){this._stageTaskMap=createHashMap(),this.ecInstance=n,this.api=r,o=this._dataProcessorHandlers=o.slice(),l=this._visualHandlers=l.slice(),this._allHandlers=o.concat(l)}return a.prototype.restoreData=function(n,r){n.restoreData(r),this._stageTaskMap.each(function(o){var l=o.overallTask;l&&l.dirty()})},a.prototype.getPerformArgs=function(n,r){if(n.__pipeline){var o=this._pipelineMap.get(n.__pipeline.id),l=o.context,u=!r&&o.progressiveEnabled&&(!l||l.progressiveRender)&&n.__idxInPipeline>o.blockIndex,c=u?o.step:null,h=l&&l.modDataCount,d=h!=null?Math.ceil(h/c):null;return{step:c,modBy:d,modDataCount:h}}},a.prototype.getPipeline=function(n){return this._pipelineMap.get(n)},a.prototype.updateStreamModes=function(n,r){var o=this._pipelineMap.get(n.uid),l=n.getData(),u=l.count(),c=o.progressiveEnabled&&r.incrementalPrepareRender&&u>=o.threshold,h=n.get("large")&&u>=n.get("largeThreshold"),d=n.get("progressiveChunkMode")==="mod"?u:null;n.pipelineContext=o.context={progressiveRender:c,modDataCount:d,large:h}},a.prototype.restorePipelines=function(n){var r=this,o=r._pipelineMap=createHashMap();n.eachSeries(function(l){var u=l.getProgressive(),c=l.uid;o.set(c,{id:c,head:null,tail:null,threshold:l.getProgressiveThreshold(),progressiveEnabled:u&&!(l.preventIncremental&&l.preventIncremental()),blockIndex:-1,step:Math.round(u||700),count:0}),r._pipe(l,l.dataTask)})},a.prototype.prepareStageTasks=function(){var n=this._stageTaskMap,r=this.api.getModel(),o=this.api;each$f(this._allHandlers,function(l){var u=n.get(l.uid)||n.set(l.uid,{}),c="";c='"reset" and "overallReset" must not be both specified.',assert(!(l.reset&&l.overallReset),c),l.reset&&this._createSeriesStageTask(l,u,r,o),l.overallReset&&this._createOverallStageTask(l,u,r,o)},this)},a.prototype.prepareView=function(n,r,o,l){var u=n.renderTask,c=u.context;c.model=r,c.ecModel=o,c.api=l,u.__block=!n.incrementalPrepareRender,this._pipe(r,u)},a.prototype.performDataProcessorTasks=function(n,r){this._performStageTasks(this._dataProcessorHandlers,n,r,{block:!0})},a.prototype.performVisualTasks=function(n,r,o){this._performStageTasks(this._visualHandlers,n,r,o)},a.prototype._performStageTasks=function(n,r,o,l){l=l||{};var u=!1,c=this;each$f(n,function(d,p){if(!(l.visualType&&l.visualType!==d.visualType)){var f=c._stageTaskMap.get(d.uid),g=f.seriesTaskMap,y=f.overallTask;if(y){var v,_=y.agentStubMap;_.each(function(S){h(l,S)&&(S.dirty(),v=!0)}),v&&y.dirty(),c.updatePayload(y,o);var x=c.getPerformArgs(y,l.block);_.each(function(S){S.perform(x)}),y.perform(x)&&(u=!0)}else g&&g.each(function(S,T){h(l,S)&&S.dirty();var M=c.getPerformArgs(S,l.block);M.skip=!d.performRawSeries&&r.isSeriesFiltered(S.context.model),c.updatePayload(S,o),S.perform(M)&&(u=!0)})}});function h(d,p){return d.setDirty&&(!d.dirtyMap||d.dirtyMap.get(p.__pipeline.id))}this.unfinished=u||this.unfinished},a.prototype.performSeriesTasks=function(n){var r;n.eachSeries(function(o){r=o.dataTask.perform()||r}),this.unfinished=r||this.unfinished},a.prototype.plan=function(){this._pipelineMap.each(function(n){var r=n.tail;do{if(r.__block){n.blockIndex=r.__idxInPipeline;break}r=r.getUpstream()}while(r)})},a.prototype.updatePayload=function(n,r){r!=="remain"&&(n.context.payload=r)},a.prototype._createSeriesStageTask=function(n,r,o,l){var u=this,c=r.seriesTaskMap,h=r.seriesTaskMap=createHashMap(),d=n.seriesType,p=n.getTargetSeries;n.createOnAllSeries?o.eachRawSeries(f):d?o.eachRawSeriesByType(d,f):p&&p(o,l).each(f);function f(g){var y=g.uid,v=h.set(y,c&&c.get(y)||createTask({plan:seriesTaskPlan,reset:seriesTaskReset,count:seriesTaskCount}));v.context={model:g,ecModel:o,api:l,useClearVisual:n.isVisual&&!n.isLayout,plan:n.plan,reset:n.reset,scheduler:u},u._pipe(g,v)}},a.prototype._createOverallStageTask=function(n,r,o,l){var u=this,c=r.overallTask=r.overallTask||createTask({reset:overallTaskReset});c.context={ecModel:o,api:l,overallReset:n.overallReset,scheduler:u};var h=c.agentStubMap,d=c.agentStubMap=createHashMap(),p=n.seriesType,f=n.getTargetSeries,g=!0,y=!1,v="";v='"createOnAllSeries" is not supported for "overallReset", because it will block all streams.',assert(!n.createOnAllSeries,v),p?o.eachRawSeriesByType(p,_):f?f(o,l).each(_):(g=!1,each$f(o.getSeries(),_));function _(x){var S=x.uid,T=d.set(S,h&&h.get(S)||(y=!0,createTask({reset:stubReset,onDirty:stubOnDirty})));T.context={model:x,overallProgress:g},T.agent=c,T.__block=g,u._pipe(x,T)}y&&c.dirty()},a.prototype._pipe=function(n,r){var o=n.uid,l=this._pipelineMap.get(o);!l.head&&(l.head=r),l.tail&&l.tail.pipe(r),l.tail=r,r.__idxInPipeline=l.count++,r.__pipeline=l},a.wrapStageHandler=function(n,r){return isFunction(n)&&(n={overallReset:n,seriesType:detectSeriseType(n)}),n.uid=getUID("stageHandler"),r&&(n.visualType=r),n},a}();function overallTaskReset(a){a.overallReset(a.ecModel,a.api,a.payload)}function stubReset(a){return a.overallProgress&&stubProgress}function stubProgress(){this.agent.dirty(),this.getDownstream().dirty()}function stubOnDirty(){this.agent&&this.agent.dirty()}function seriesTaskPlan(a){return a.plan?a.plan(a.model,a.ecModel,a.api,a.payload):null}function seriesTaskReset(a){a.useClearVisual&&a.data.clearAllVisual();var n=a.resetDefines=normalizeToArray(a.reset(a.model,a.ecModel,a.api,a.payload));return n.length>1?map$1(n,function(r,o){return makeSeriesTaskProgress(o)}):singleSeriesTaskProgress}var singleSeriesTaskProgress=makeSeriesTaskProgress(0);function makeSeriesTaskProgress(a){return function(n,r){var o=r.data,l=r.resetDefines[a];if(l&&l.dataEach)for(var u=n.start;u<n.end;u++)l.dataEach(o,u);else l&&l.progress&&l.progress(n,o)}}function seriesTaskCount(a){return a.data.count()}function detectSeriseType(a){seriesType=null;try{a(ecModelMock,apiMock)}catch{}return seriesType}var ecModelMock={},apiMock={},seriesType;mockMethods(ecModelMock,GlobalModel$1);mockMethods(apiMock,ExtensionAPI$1);ecModelMock.eachSeriesByType=ecModelMock.eachRawSeriesByType=function(a){seriesType=a};ecModelMock.eachComponent=function(a){a.mainType==="series"&&a.subType&&(seriesType=a.subType)};function mockMethods(a,n){for(var r in n.prototype)a[r]=noop}const Scheduler$1=Scheduler;var colorAll=["#37A2DA","#32C5E9","#67E0E3","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"];const lightTheme={color:colorAll,colorLayer:[["#37A2DA","#ffd85c","#fd7b5f"],["#37A2DA","#67E0E3","#FFDB5C","#ff9f7f","#E062AE","#9d96f5"],["#37A2DA","#32C5E9","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#e7bcf3","#8378EA","#96BFFF"],colorAll]};var contrastColor="#B9B8CE",backgroundColor="#100C2A",axisCommon=function(){return{axisLine:{lineStyle:{color:contrastColor}},splitLine:{lineStyle:{color:"#484753"}},splitArea:{areaStyle:{color:["rgba(255,255,255,0.02)","rgba(255,255,255,0.05)"]}},minorSplitLine:{lineStyle:{color:"#20203B"}}}},colorPalette=["#4992ff","#7cffb2","#fddd60","#ff6e76","#58d9f9","#05c091","#ff8a45","#8d48e3","#dd79ff"],theme={darkMode:!0,color:colorPalette,backgroundColor,axisPointer:{lineStyle:{color:"#817f91"},crossStyle:{color:"#817f91"},label:{color:"#fff"}},legend:{textStyle:{color:contrastColor},pageTextStyle:{color:contrastColor}},textStyle:{color:contrastColor},title:{textStyle:{color:"#EEF1FA"},subtextStyle:{color:"#B9B8CE"}},toolbox:{iconStyle:{borderColor:contrastColor}},dataZoom:{borderColor:"#71708A",textStyle:{color:contrastColor},brushStyle:{color:"rgba(135,163,206,0.3)"},handleStyle:{color:"#353450",borderColor:"#C5CBE3"},moveHandleStyle:{color:"#B0B6C3",opacity:.3},fillerColor:"rgba(135,163,206,0.2)",emphasis:{handleStyle:{borderColor:"#91B7F2",color:"#4D587D"},moveHandleStyle:{color:"#636D9A",opacity:.7}},dataBackground:{lineStyle:{color:"#71708A",width:1},areaStyle:{color:"#71708A"}},selectedDataBackground:{lineStyle:{color:"#87A3CE"},areaStyle:{color:"#87A3CE"}}},visualMap:{textStyle:{color:contrastColor}},timeline:{lineStyle:{color:contrastColor},label:{color:contrastColor},controlStyle:{color:contrastColor,borderColor:contrastColor}},calendar:{itemStyle:{color:backgroundColor},dayLabel:{color:contrastColor},monthLabel:{color:contrastColor},yearLabel:{color:contrastColor}},timeAxis:axisCommon(),logAxis:axisCommon(),valueAxis:axisCommon(),categoryAxis:axisCommon(),line:{symbol:"circle"},graph:{color:colorPalette},gauge:{title:{color:contrastColor},axisLine:{lineStyle:{color:[[1,"rgba(207,212,219,0.2)"]]}},axisLabel:{color:contrastColor},detail:{color:"#EEF1FA"}},candlestick:{itemStyle:{color:"#f64e56",color0:"#54ea92",borderColor:"#f64e56",borderColor0:"#54ea92"}}};theme.categoryAxis.splitLine.show=!1;const darkTheme=theme;var ECEventProcessor=function(){function a(){}return a.prototype.normalizeQuery=function(n){var r={},o={},l={};if(isString(n)){var u=parseClassType(n);r.mainType=u.main||null,r.subType=u.sub||null}else{var c=["Index","Name","Id"],h={name:1,dataIndex:1,dataType:1};each$f(n,function(d,p){for(var f=!1,g=0;g<c.length;g++){var y=c[g],v=p.lastIndexOf(y);if(v>0&&v===p.length-y.length){var _=p.slice(0,v);_!=="data"&&(r.mainType=_,r[y.toLowerCase()]=d,f=!0)}}h.hasOwnProperty(p)&&(o[p]=d,f=!0),f||(l[p]=d)})}return{cptQuery:r,dataQuery:o,otherQuery:l}},a.prototype.filter=function(n,r){var o=this.eventInfo;if(!o)return!0;var l=o.targetEl,u=o.packedEvent,c=o.model,h=o.view;if(!c||!h)return!0;var d=r.cptQuery,p=r.dataQuery;return f(d,c,"mainType")&&f(d,c,"subType")&&f(d,c,"index","componentIndex")&&f(d,c,"name")&&f(d,c,"id")&&f(p,u,"name")&&f(p,u,"dataIndex")&&f(p,u,"dataType")&&(!h.filterForExposedEvent||h.filterForExposedEvent(n,r.otherQuery,l,u));function f(g,y,v,_){return g[v]==null||y[_||v]===g[v]}},a.prototype.afterTrigger=function(){this.eventInfo=null},a}(),SYMBOL_PROPS_WITH_CB=["symbol","symbolSize","symbolRotate","symbolOffset"],SYMBOL_PROPS=SYMBOL_PROPS_WITH_CB.concat(["symbolKeepAspect"]),seriesSymbolTask={createOnAllSeries:!0,performRawSeries:!0,reset:function(a,n){var r=a.getData();if(a.legendIcon&&r.setVisual("legendIcon",a.legendIcon),!a.hasSymbolVisual)return;for(var o={},l={},u=!1,c=0;c<SYMBOL_PROPS_WITH_CB.length;c++){var h=SYMBOL_PROPS_WITH_CB[c],d=a.get(h);isFunction(d)?(u=!0,l[h]=d):o[h]=d}if(o.symbol=o.symbol||a.defaultSymbol,r.setVisual(extend({legendIcon:a.legendIcon||o.symbol,symbolKeepAspect:a.get("symbolKeepAspect")},o)),n.isSeriesFiltered(a))return;var p=keys(l);function f(g,y){for(var v=a.getRawValue(y),_=a.getDataParams(y),x=0;x<p.length;x++){var S=p[x];g.setItemVisual(y,S,l[S](v,_))}}return{dataEach:u?f:null}}},dataSymbolTask={createOnAllSeries:!0,performRawSeries:!0,reset:function(a,n){if(!a.hasSymbolVisual||n.isSeriesFiltered(a))return;var r=a.getData();function o(l,u){for(var c=l.getItemModel(u),h=0;h<SYMBOL_PROPS.length;h++){var d=SYMBOL_PROPS[h],p=c.getShallow(d,!0);p!=null&&l.setItemVisual(u,d,p)}}return{dataEach:r.hasItemOption?o:null}}};function getItemVisualFromData(a,n,r){switch(r){case"color":var o=a.getItemVisual(n,"style");return o[a.getVisual("drawType")];case"opacity":return a.getItemVisual(n,"style").opacity;case"symbol":case"symbolSize":case"liftZ":return a.getItemVisual(n,r);default:console.warn("Unknown visual type "+r)}}function getVisualFromData(a,n){switch(n){case"color":var r=a.getVisual("style");return r[a.getVisual("drawType")];case"opacity":return a.getVisual("style").opacity;case"symbol":case"symbolSize":case"liftZ":return a.getVisual(n);default:console.warn("Unknown visual type "+n)}}function setItemVisualFromData(a,n,r,o){switch(r){case"color":var l=a.ensureUniqueItemVisual(n,"style");l[a.getVisual("drawType")]=o,a.setItemVisual(n,"colorFromPalette",!1);break;case"opacity":a.ensureUniqueItemVisual(n,"style").opacity=o;break;case"symbol":case"symbolSize":case"liftZ":a.setItemVisual(n,r,o);break;default:console.warn("Unknown visual type "+r)}}function createLegacyDataSelectAction(a,n){function r(o,l){var u=[];return o.eachComponent({mainType:"series",subType:a,query:l},function(c){u.push(c.seriesIndex)}),u}each$f([[a+"ToggleSelect","toggleSelect"],[a+"Select","select"],[a+"UnSelect","unselect"]],function(o){n(o[0],function(l,u,c){l=extend({},l),deprecateReplaceLog(l.type,o[1]),c.dispatchAction(extend(l,{type:o[1],seriesIndex:r(u,l)}))})})}function handleSeriesLegacySelectEvents(a,n,r,o,l){var u=a+n;r.isSilent(u)||(deprecateLog("event "+u+" is deprecated."),o.eachComponent({mainType:"series",subType:"pie"},function(c){for(var h=c.seriesIndex,d=c.option.selectedMap,p=l.selected,f=0;f<p.length;f++)if(p[f].seriesIndex===h){var g=c.getData(),y=queryDataIndex(g,l.fromActionPayload);r.trigger(u,{type:u,seriesId:c.id,name:isArray$1(y)?g.getName(y[0]):g.getName(y),selected:isString(d)?d:extend({},d)})}}))}function handleLegacySelectEvents(a,n,r){a.on("selectchanged",function(o){var l=r.getModel();o.isFromClick?(handleSeriesLegacySelectEvents("map","selectchanged",n,l,o),handleSeriesLegacySelectEvents("pie","selectchanged",n,l,o)):o.fromAction==="select"?(handleSeriesLegacySelectEvents("map","selected",n,l,o),handleSeriesLegacySelectEvents("pie","selected",n,l,o)):o.fromAction==="unselect"&&(handleSeriesLegacySelectEvents("map","unselected",n,l,o),handleSeriesLegacySelectEvents("pie","unselected",n,l,o))})}function findEventDispatcher(a,n,r){for(var o;a&&!(n(a)&&(o=a,r));)a=a.__hostTarget||a.parent;return o}var wmUniqueIndex=Math.round(Math.random()*9),supportDefineProperty=typeof Object.defineProperty=="function",WeakMap=function(){function a(){this._id="__ec_inner_"+wmUniqueIndex++}return a.prototype.get=function(n){return this._guard(n)[this._id]},a.prototype.set=function(n,r){var o=this._guard(n);return supportDefineProperty?Object.defineProperty(o,this._id,{value:r,enumerable:!1,configurable:!0}):o[this._id]=r,this},a.prototype.delete=function(n){return this.has(n)?(delete this._guard(n)[this._id],!0):!1},a.prototype.has=function(n){return!!this._guard(n)[this._id]},a.prototype._guard=function(n){if(n!==Object(n))throw TypeError("Value of WeakMap is not a non-null object.");return n},a}();const WeakMap$1=WeakMap;var Triangle=Path$1.extend({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(a,n){var r=n.cx,o=n.cy,l=n.width/2,u=n.height/2;a.moveTo(r,o-u),a.lineTo(r+l,o+u),a.lineTo(r-l,o+u),a.closePath()}}),Diamond=Path$1.extend({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(a,n){var r=n.cx,o=n.cy,l=n.width/2,u=n.height/2;a.moveTo(r,o-u),a.lineTo(r+l,o),a.lineTo(r,o+u),a.lineTo(r-l,o),a.closePath()}}),Pin=Path$1.extend({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(a,n){var r=n.x,o=n.y,l=n.width/5*3,u=Math.max(l,n.height),c=l/2,h=c*c/(u-c),d=o-u+c+h,p=Math.asin(h/c),f=Math.cos(p)*c,g=Math.sin(p),y=Math.cos(p),v=c*.6,_=c*.7;a.moveTo(r-f,d+h),a.arc(r,d,c,Math.PI-p,Math.PI*2+p),a.bezierCurveTo(r+f-g*v,d+h+y*v,r,o-_,r,o),a.bezierCurveTo(r,o-_,r-f+g*v,d+h+y*v,r-f,d+h),a.closePath()}}),Arrow=Path$1.extend({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(a,n){var r=n.height,o=n.width,l=n.x,u=n.y,c=o/3*2;a.moveTo(l,u),a.lineTo(l+c,u+r),a.lineTo(l,u+r/4*3),a.lineTo(l-c,u+r),a.lineTo(l,u),a.closePath()}}),symbolCtors={line:Line$3,rect:Rect$3,roundRect:Rect$3,square:Rect$3,circle:Circle$1,diamond:Diamond,pin:Pin,arrow:Arrow,triangle:Triangle},symbolShapeMakers={line:function(a,n,r,o,l){l.x1=a,l.y1=n+o/2,l.x2=a+r,l.y2=n+o/2},rect:function(a,n,r,o,l){l.x=a,l.y=n,l.width=r,l.height=o},roundRect:function(a,n,r,o,l){l.x=a,l.y=n,l.width=r,l.height=o,l.r=Math.min(r,o)/4},square:function(a,n,r,o,l){var u=Math.min(r,o);l.x=a,l.y=n,l.width=u,l.height=u},circle:function(a,n,r,o,l){l.cx=a+r/2,l.cy=n+o/2,l.r=Math.min(r,o)/2},diamond:function(a,n,r,o,l){l.cx=a+r/2,l.cy=n+o/2,l.width=r,l.height=o},pin:function(a,n,r,o,l){l.x=a+r/2,l.y=n+o/2,l.width=r,l.height=o},arrow:function(a,n,r,o,l){l.x=a+r/2,l.y=n+o/2,l.width=r,l.height=o},triangle:function(a,n,r,o,l){l.cx=a+r/2,l.cy=n+o/2,l.width=r,l.height=o}},symbolBuildProxies={};each$f(symbolCtors,function(a,n){symbolBuildProxies[n]=new a});var SymbolClz$1=Path$1.extend({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},calculateTextPosition:function(a,n,r){var o=calculateTextPosition(a,n,r),l=this.shape;return l&&l.symbolType==="pin"&&n.position==="inside"&&(o.y=r.y+r.height*.4),o},buildPath:function(a,n,r){var o=n.symbolType;if(o!=="none"){var l=symbolBuildProxies[o];l||(o="rect",l=symbolBuildProxies[o]),symbolShapeMakers[o](n.x,n.y,n.width,n.height,l.shape),l.buildPath(a,l.shape,r)}}});function symbolPathSetColor(a,n){if(this.type!=="image"){var r=this.style;this.__isEmptyBrush?(r.stroke=a,r.fill=n||"#fff",r.lineWidth=2):this.shape.symbolType==="line"?r.stroke=a:r.fill=a,this.markRedraw()}}function createSymbol$1(a,n,r,o,l,u,c){var h=a.indexOf("empty")===0;h&&(a=a.substr(5,1).toLowerCase()+a.substr(6));var d;return a.indexOf("image://")===0?d=makeImage(a.slice(8),new BoundingRect$1(n,r,o,l),c?"center":"cover"):a.indexOf("path://")===0?d=makePath(a.slice(7),{},new BoundingRect$1(n,r,o,l),c?"center":"cover"):d=new SymbolClz$1({shape:{symbolType:a,x:n,y:r,width:o,height:l}}),d.__isEmptyBrush=h,d.setColor=symbolPathSetColor,u&&d.setColor(u),d}function normalizeSymbolSize(a){return isArray$1(a)||(a=[+a,+a]),[a[0]||0,a[1]||0]}function normalizeSymbolOffset(a,n){if(a!=null)return isArray$1(a)||(a=[a,a]),[parsePercent(a[0],n[0])||0,parsePercent(retrieve2(a[1],a[0]),n[1])||0]}function isSafeNum(a){return isFinite(a)}function createLinearGradient(a,n,r){var o=n.x==null?0:n.x,l=n.x2==null?1:n.x2,u=n.y==null?0:n.y,c=n.y2==null?0:n.y2;n.global||(o=o*r.width+r.x,l=l*r.width+r.x,u=u*r.height+r.y,c=c*r.height+r.y),o=isSafeNum(o)?o:0,l=isSafeNum(l)?l:1,u=isSafeNum(u)?u:0,c=isSafeNum(c)?c:0;var h=a.createLinearGradient(o,u,l,c);return h}function createRadialGradient(a,n,r){var o=r.width,l=r.height,u=Math.min(o,l),c=n.x==null?.5:n.x,h=n.y==null?.5:n.y,d=n.r==null?.5:n.r;n.global||(c=c*o+r.x,h=h*l+r.y,d=d*u),c=isSafeNum(c)?c:.5,h=isSafeNum(h)?h:.5,d=d>=0&&isSafeNum(d)?d:.5;var p=a.createRadialGradient(c,h,0,c,h,d);return p}function getCanvasGradient(a,n,r){for(var o=n.type==="radial"?createRadialGradient(a,n,r):createLinearGradient(a,n,r),l=n.colorStops,u=0;u<l.length;u++)o.addColorStop(l[u].offset,l[u].color);return o}function isClipPathChanged(a,n){if(a===n||!a&&!n)return!1;if(!a||!n||a.length!==n.length)return!0;for(var r=0;r<a.length;r++)if(a[r]!==n[r])return!0;return!1}function parseInt10(a){return parseInt(a,10)}function getSize$1(a,n,r){var o=["width","height"][n],l=["clientWidth","clientHeight"][n],u=["paddingLeft","paddingTop"][n],c=["paddingRight","paddingBottom"][n];if(r[o]!=null&&r[o]!=="auto")return parseFloat(r[o]);var h=document.defaultView.getComputedStyle(a);return(a[l]||parseInt10(h[o])||parseInt10(a.style[o]))-(parseInt10(h[u])||0)-(parseInt10(h[c])||0)|0}function normalizeLineDash(a,n){return!a||a==="solid"||!(n>0)?null:a==="dashed"?[4*n,2*n]:a==="dotted"?[n]:isNumber(a)?[a]:isArray$1(a)?a:null}function getLineDash(a){var n=a.style,r=n.lineDash&&n.lineWidth>0&&normalizeLineDash(n.lineDash,n.lineWidth),o=n.lineDashOffset;if(r){var l=n.strokeNoScale&&a.getLineScale?a.getLineScale():1;l&&l!==1&&(r=map$1(r,function(u){return u/l}),o/=l)}return[r,o]}var pathProxyForDraw=new PathProxy$1(!0);function styleHasStroke(a){var n=a.stroke;return!(n==null||n==="none"||!(a.lineWidth>0))}function isValidStrokeFillStyle(a){return typeof a=="string"&&a!=="none"}function styleHasFill(a){var n=a.fill;return n!=null&&n!=="none"}function doFillPath(a,n){if(n.fillOpacity!=null&&n.fillOpacity!==1){var r=a.globalAlpha;a.globalAlpha=n.fillOpacity*n.opacity,a.fill(),a.globalAlpha=r}else a.fill()}function doStrokePath(a,n){if(n.strokeOpacity!=null&&n.strokeOpacity!==1){var r=a.globalAlpha;a.globalAlpha=n.strokeOpacity*n.opacity,a.stroke(),a.globalAlpha=r}else a.stroke()}function createCanvasPattern(a,n,r){var o=createOrUpdateImage(n.image,n.__image,r);if(isImageReady(o)){var l=a.createPattern(o,n.repeat||"repeat");if(typeof DOMMatrix=="function"&&l&&l.setTransform){var u=new DOMMatrix;u.translateSelf(n.x||0,n.y||0),u.rotateSelf(0,0,(n.rotation||0)*RADIAN_TO_DEGREE),u.scaleSelf(n.scaleX||1,n.scaleY||1),l.setTransform(u)}return l}}function brushPath(a,n,r,o){var l,u=styleHasStroke(r),c=styleHasFill(r),h=r.strokePercent,d=h<1,p=!n.path;(!n.silent||d)&&p&&n.createPathProxy();var f=n.path||pathProxyForDraw,g=n.__dirty;if(!o){var y=r.fill,v=r.stroke,_=c&&!!y.colorStops,x=u&&!!v.colorStops,S=c&&!!y.image,T=u&&!!v.image,M=void 0,b=void 0,A=void 0,I=void 0,w=void 0;(_||x)&&(w=n.getBoundingRect()),_&&(M=g?getCanvasGradient(a,y,w):n.__canvasFillGradient,n.__canvasFillGradient=M),x&&(b=g?getCanvasGradient(a,v,w):n.__canvasStrokeGradient,n.__canvasStrokeGradient=b),S&&(A=g||!n.__canvasFillPattern?createCanvasPattern(a,y,n):n.__canvasFillPattern,n.__canvasFillPattern=A),T&&(I=g||!n.__canvasStrokePattern?createCanvasPattern(a,v,n):n.__canvasStrokePattern,n.__canvasStrokePattern=A),_?a.fillStyle=M:S&&(A?a.fillStyle=A:c=!1),x?a.strokeStyle=b:T&&(I?a.strokeStyle=I:u=!1)}var C=n.getGlobalScale();f.setScale(C[0],C[1],n.segmentIgnoreThreshold);var E,P;a.setLineDash&&r.lineDash&&(l=getLineDash(n),E=l[0],P=l[1]);var D=!0;(p||g&SHAPE_CHANGED_BIT)&&(f.setDPR(a.dpr),d?f.setContext(null):(f.setContext(a),D=!1),f.reset(),n.buildPath(f,n.shape,o),f.toStatic(),n.pathUpdated()),D&&f.rebuildPath(a,d?h:1),E&&(a.setLineDash(E),a.lineDashOffset=P),o||(r.strokeFirst?(u&&doStrokePath(a,r),c&&doFillPath(a,r)):(c&&doFillPath(a,r),u&&doStrokePath(a,r))),E&&a.setLineDash([])}function brushImage(a,n,r){var o=n.__image=createOrUpdateImage(r.image,n.__image,n,n.onload);if(!(!o||!isImageReady(o))){var l=r.x||0,u=r.y||0,c=n.getWidth(),h=n.getHeight(),d=o.width/o.height;if(c==null&&h!=null?c=h*d:h==null&&c!=null?h=c/d:c==null&&h==null&&(c=o.width,h=o.height),r.sWidth&&r.sHeight){var p=r.sx||0,f=r.sy||0;a.drawImage(o,p,f,r.sWidth,r.sHeight,l,u,c,h)}else if(r.sx&&r.sy){var p=r.sx,f=r.sy,g=c-p,y=h-f;a.drawImage(o,p,f,g,y,l,u,c,h)}else a.drawImage(o,l,u,c,h)}}function brushText(a,n,r){var o,l=r.text;if(l!=null&&(l+=""),l){a.font=r.font||DEFAULT_FONT,a.textAlign=r.textAlign,a.textBaseline=r.textBaseline;var u=void 0,c=void 0;a.setLineDash&&r.lineDash&&(o=getLineDash(n),u=o[0],c=o[1]),u&&(a.setLineDash(u),a.lineDashOffset=c),r.strokeFirst?(styleHasStroke(r)&&a.strokeText(l,r.x,r.y),styleHasFill(r)&&a.fillText(l,r.x,r.y)):(styleHasFill(r)&&a.fillText(l,r.x,r.y),styleHasStroke(r)&&a.strokeText(l,r.x,r.y)),u&&a.setLineDash([])}}var SHADOW_NUMBER_PROPS=["shadowBlur","shadowOffsetX","shadowOffsetY"],STROKE_PROPS=[["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]];function bindCommonProps(a,n,r,o,l){var u=!1;if(!o&&(r=r||{},n===r))return!1;if(o||n.opacity!==r.opacity){flushPathDrawn(a,l),u=!0;var c=Math.max(Math.min(n.opacity,1),0);a.globalAlpha=isNaN(c)?DEFAULT_COMMON_STYLE.opacity:c}(o||n.blend!==r.blend)&&(u||(flushPathDrawn(a,l),u=!0),a.globalCompositeOperation=n.blend||DEFAULT_COMMON_STYLE.blend);for(var h=0;h<SHADOW_NUMBER_PROPS.length;h++){var d=SHADOW_NUMBER_PROPS[h];(o||n[d]!==r[d])&&(u||(flushPathDrawn(a,l),u=!0),a[d]=a.dpr*(n[d]||0))}return(o||n.shadowColor!==r.shadowColor)&&(u||(flushPathDrawn(a,l),u=!0),a.shadowColor=n.shadowColor||DEFAULT_COMMON_STYLE.shadowColor),u}function bindPathAndTextCommonStyle(a,n,r,o,l){var u=getStyle(n,l.inHover),c=o?null:r&&getStyle(r,l.inHover)||{};if(u===c)return!1;var h=bindCommonProps(a,u,c,o,l);if((o||u.fill!==c.fill)&&(h||(flushPathDrawn(a,l),h=!0),isValidStrokeFillStyle(u.fill)&&(a.fillStyle=u.fill)),(o||u.stroke!==c.stroke)&&(h||(flushPathDrawn(a,l),h=!0),isValidStrokeFillStyle(u.stroke)&&(a.strokeStyle=u.stroke)),(o||u.opacity!==c.opacity)&&(h||(flushPathDrawn(a,l),h=!0),a.globalAlpha=u.opacity==null?1:u.opacity),n.hasStroke()){var d=u.lineWidth,p=d/(u.strokeNoScale&&n.getLineScale?n.getLineScale():1);a.lineWidth!==p&&(h||(flushPathDrawn(a,l),h=!0),a.lineWidth=p)}for(var f=0;f<STROKE_PROPS.length;f++){var g=STROKE_PROPS[f],y=g[0];(o||u[y]!==c[y])&&(h||(flushPathDrawn(a,l),h=!0),a[y]=u[y]||g[1])}return h}function bindImageStyle(a,n,r,o,l){return bindCommonProps(a,getStyle(n,l.inHover),r&&getStyle(r,l.inHover),o,l)}function setContextTransform(a,n){var r=n.transform,o=a.dpr||1;r?a.setTransform(o*r[0],o*r[1],o*r[2],o*r[3],o*r[4],o*r[5]):a.setTransform(o,0,0,o,0,0)}function updateClipStatus(a,n,r){for(var o=!1,l=0;l<a.length;l++){var u=a[l];o=o||u.isZeroArea(),setContextTransform(n,u),n.beginPath(),u.buildPath(n,u.shape),n.clip()}r.allClipped=o}function isTransformChanged(a,n){return a&&n?a[0]!==n[0]||a[1]!==n[1]||a[2]!==n[2]||a[3]!==n[3]||a[4]!==n[4]||a[5]!==n[5]:!(!a&&!n)}var DRAW_TYPE_PATH=1,DRAW_TYPE_IMAGE=2,DRAW_TYPE_TEXT=3,DRAW_TYPE_INCREMENTAL=4;function canPathBatch(a){var n=styleHasFill(a),r=styleHasStroke(a);return!(a.lineDash||!(+n^+r)||n&&typeof a.fill!="string"||r&&typeof a.stroke!="string"||a.strokePercent<1||a.strokeOpacity<1||a.fillOpacity<1)}function flushPathDrawn(a,n){n.batchFill&&a.fill(),n.batchStroke&&a.stroke(),n.batchFill="",n.batchStroke=""}function getStyle(a,n){return n&&a.__hoverStyle||a.style}function brushSingle(a,n){brush$1(a,n,{inHover:!1,viewWidth:0,viewHeight:0},!0)}function brush$1(a,n,r,o){var l=n.transform;if(!n.shouldBePainted(r.viewWidth,r.viewHeight,!1,!1)){n.__dirty&=~REDRAW_BIT,n.__isRendered=!1;return}var u=n.__clipPaths,c=r.prevElClipPaths,h=!1,d=!1;if((!c||isClipPathChanged(u,c))&&(c&&c.length&&(flushPathDrawn(a,r),a.restore(),d=h=!0,r.prevElClipPaths=null,r.allClipped=!1,r.prevEl=null),u&&u.length&&(flushPathDrawn(a,r),a.save(),updateClipStatus(u,a,r),h=!0),r.prevElClipPaths=u),r.allClipped){n.__isRendered=!1;return}n.beforeBrush&&n.beforeBrush(),n.innerBeforeBrush();var p=r.prevEl;p||(d=h=!0);var f=n instanceof Path$1&&n.autoBatch&&canPathBatch(n.style);h||isTransformChanged(l,p.transform)?(flushPathDrawn(a,r),setContextTransform(a,n)):f||flushPathDrawn(a,r);var g=getStyle(n,r.inHover);n instanceof Path$1?(r.lastDrawType!==DRAW_TYPE_PATH&&(d=!0,r.lastDrawType=DRAW_TYPE_PATH),bindPathAndTextCommonStyle(a,n,p,d,r),(!f||!r.batchFill&&!r.batchStroke)&&a.beginPath(),brushPath(a,n,g,f),f&&(r.batchFill=g.fill||"",r.batchStroke=g.stroke||"")):n instanceof TSpan$1?(r.lastDrawType!==DRAW_TYPE_TEXT&&(d=!0,r.lastDrawType=DRAW_TYPE_TEXT),bindPathAndTextCommonStyle(a,n,p,d,r),brushText(a,n,g)):n instanceof ZRImage$1?(r.lastDrawType!==DRAW_TYPE_IMAGE&&(d=!0,r.lastDrawType=DRAW_TYPE_IMAGE),bindImageStyle(a,n,p,d,r),brushImage(a,n,g)):n.getTemporalDisplayables&&(r.lastDrawType!==DRAW_TYPE_INCREMENTAL&&(d=!0,r.lastDrawType=DRAW_TYPE_INCREMENTAL),brushIncremental(a,n,r)),f&&o&&flushPathDrawn(a,r),n.innerAfterBrush(),n.afterBrush&&n.afterBrush(),r.prevEl=n,n.__dirty=0,n.__isRendered=!0}function brushIncremental(a,n,r){var o=n.getDisplayables(),l=n.getTemporalDisplayables();a.save();var u={prevElClipPaths:null,prevEl:null,allClipped:!1,viewWidth:r.viewWidth,viewHeight:r.viewHeight,inHover:r.inHover},c,h;for(c=n.getCursor(),h=o.length;c<h;c++){var d=o[c];d.beforeBrush&&d.beforeBrush(),d.innerBeforeBrush(),brush$1(a,d,u,c===h-1),d.innerAfterBrush(),d.afterBrush&&d.afterBrush(),u.prevEl=d}for(var p=0,f=l.length;p<f;p++){var d=l[p];d.beforeBrush&&d.beforeBrush(),d.innerBeforeBrush(),brush$1(a,d,u,p===f-1),d.innerAfterBrush(),d.afterBrush&&d.afterBrush(),u.prevEl=d}n.clearTemporalDisplayables(),n.notClear=!0,a.restore()}var decalMap=new WeakMap$1,decalCache=new LRU$1(100),decalKeys=["symbol","symbolSize","symbolKeepAspect","color","backgroundColor","dashArrayX","dashArrayY","maxTileWidth","maxTileHeight"];function createOrUpdatePatternFromDecal(a,n){if(a==="none")return null;var r=n.getDevicePixelRatio(),o=n.getZr(),l=o.painter.type==="svg";a.dirty&&decalMap.delete(a);var u=decalMap.get(a);if(u)return u;var c=defaults(a,{symbol:"rect",symbolSize:1,symbolKeepAspect:!0,color:"rgba(0, 0, 0, 0.2)",backgroundColor:null,dashArrayX:5,dashArrayY:5,rotation:0,maxTileWidth:512,maxTileHeight:512});c.backgroundColor==="none"&&(c.backgroundColor=null);var h={repeat:"repeat"};return d(h),h.rotation=c.rotation,h.scaleX=h.scaleY=l?1:1/r,decalMap.set(a,h),a.dirty=!1,h;function d(p){for(var f=[r],g=!0,y=0;y<decalKeys.length;++y){var v=c[decalKeys[y]];if(v!=null&&!isArray$1(v)&&!isString(v)&&!isNumber(v)&&typeof v!="boolean"){g=!1;break}f.push(v)}var _;if(g){_=f.join(",")+(l?"-svg":"");var x=decalCache.get(_);x&&(l?p.svgElement=x:p.image=x)}var S=normalizeDashArrayX(c.dashArrayX),T=normalizeDashArrayY(c.dashArrayY),M=normalizeSymbolArray(c.symbol),b=getLineBlockLengthX(S),A=getLineBlockLengthY(T),I=!l&&platformApi.createCanvas(),w=l&&{tag:"g",attrs:{},key:"dcl",children:[]},C=P(),E;I&&(I.width=C.width*r,I.height=C.height*r,E=I.getContext("2d")),D(),g&&decalCache.put(_,I||w),p.image=I,p.svgElement=w,p.svgWidth=C.width,p.svgHeight=C.height;function P(){for(var L=1,R=0,O=b.length;R<O;++R)L=getLeastCommonMultiple(L,b[R]);for(var N=1,R=0,O=M.length;R<O;++R)N=getLeastCommonMultiple(N,M[R].length);L*=N;var V=A*b.length*M.length;{var B=function(G){console.warn("Calculated decal size is greater than "+G+" due to decal option settings so "+G+" is used for the decal size. Please consider changing the decal option to make a smaller decal or set "+G+" to be larger to avoid incontinuity.")};L>c.maxTileWidth&&B("maxTileWidth"),V>c.maxTileHeight&&B("maxTileHeight")}return{width:Math.max(1,Math.min(L,c.maxTileWidth)),height:Math.max(1,Math.min(V,c.maxTileHeight))}}function D(){E&&(E.clearRect(0,0,I.width,I.height),c.backgroundColor&&(E.fillStyle=c.backgroundColor,E.fillRect(0,0,I.width,I.height)));for(var L=0,R=0;R<T.length;++R)L+=T[R];if(L<=0)return;for(var O=-A,N=0,V=0,B=0;O<C.height;){if(N%2===0){for(var G=V/2%M.length,F=0,z=0,H=0;F<C.width*2;){for(var U=0,R=0;R<S[B].length;++R)U+=S[B][R];if(U<=0)break;if(z%2===0){var Y=(1-c.symbolSize)*.5,Z=F+S[B][z]*Y,X=O+T[N]*Y,K=S[B][z]*c.symbolSize,te=T[N]*c.symbolSize,ae=H/2%M[G].length;J(Z,X,K,te,M[G][ae])}F+=S[B][z],++H,++z,z===S[B].length&&(z=0)}++B,B===S.length&&(B=0)}O+=T[N],++V,++N,N===T.length&&(N=0)}function J(j,Q,W,q,re){var ee=l?1:r,ie=createSymbol$1(re,j*ee,Q*ee,W*ee,q*ee,c.color,c.symbolKeepAspect);if(l){var ne=o.painter.renderOneToVNode(ie);ne&&w.children.push(ne)}else brushSingle(E,ie)}}}}function normalizeSymbolArray(a){if(!a||a.length===0)return[["rect"]];if(isString(a))return[[a]];for(var n=!0,r=0;r<a.length;++r)if(!isString(a[r])){n=!1;break}if(n)return normalizeSymbolArray([a]);for(var o=[],r=0;r<a.length;++r)isString(a[r])?o.push([a[r]]):o.push(a[r]);return o}function normalizeDashArrayX(a){if(!a||a.length===0)return[[0,0]];if(isNumber(a)){var n=Math.ceil(a);return[[n,n]]}for(var r=!0,o=0;o<a.length;++o)if(!isNumber(a[o])){r=!1;break}if(r)return normalizeDashArrayX([a]);for(var l=[],o=0;o<a.length;++o)if(isNumber(a[o])){var n=Math.ceil(a[o]);l.push([n,n])}else{var n=map$1(a[o],function(h){return Math.ceil(h)});n.length%2===1?l.push(n.concat(n)):l.push(n)}return l}function normalizeDashArrayY(a){if(!a||typeof a=="object"&&a.length===0)return[0,0];if(isNumber(a)){var n=Math.ceil(a);return[n,n]}var r=map$1(a,function(o){return Math.ceil(o)});return a.length%2?r.concat(r):r}function getLineBlockLengthX(a){return map$1(a,function(n){return getLineBlockLengthY(n)})}function getLineBlockLengthY(a){for(var n=0,r=0;r<a.length;++r)n+=a[r];return a.length%2===1?n*2:n}function decalVisual(a,n){a.eachRawSeries(function(r){if(!a.isSeriesFiltered(r)){var o=r.getData();o.hasItemVisual()&&o.each(function(c){var h=o.getItemVisual(c,"decal");if(h){var d=o.ensureUniqueItemVisual(c,"style");d.decal=createOrUpdatePatternFromDecal(h,n)}});var l=o.getVisual("decal");if(l){var u=o.getVisual("style");u.decal=createOrUpdatePatternFromDecal(l,n)}}})}var lifecycle=new Eventful$1;const lifecycle$1=lifecycle;var implsStore={};function registerImpl(a,n){implsStore[a]&&error("Already has an implementation of "+a+"."),implsStore[a]=n}function getImpl(a){return implsStore[a]||error("Implementation of "+a+" doesn't exists."),implsStore[a]}var version="5.6.0",dependencies={zrender:"5.6.1"},TEST_FRAME_REMAIN_TIME=1,PRIORITY_PROCESSOR_SERIES_FILTER=800,PRIORITY_PROCESSOR_DATASTACK=900,PRIORITY_PROCESSOR_FILTER=1e3,PRIORITY_PROCESSOR_DEFAULT=2e3,PRIORITY_PROCESSOR_STATISTIC=5e3,PRIORITY_VISUAL_LAYOUT=1e3,PRIORITY_VISUAL_PROGRESSIVE_LAYOUT=1100,PRIORITY_VISUAL_GLOBAL=2e3,PRIORITY_VISUAL_CHART=3e3,PRIORITY_VISUAL_COMPONENT=4e3,PRIORITY_VISUAL_CHART_DATA_CUSTOM=4500,PRIORITY_VISUAL_POST_CHART_LAYOUT=4600,PRIORITY_VISUAL_BRUSH=5e3,PRIORITY_VISUAL_ARIA=6e3,PRIORITY_VISUAL_DECAL=7e3,PRIORITY={PROCESSOR:{FILTER:PRIORITY_PROCESSOR_FILTER,SERIES_FILTER:PRIORITY_PROCESSOR_SERIES_FILTER,STATISTIC:PRIORITY_PROCESSOR_STATISTIC},VISUAL:{LAYOUT:PRIORITY_VISUAL_LAYOUT,PROGRESSIVE_LAYOUT:PRIORITY_VISUAL_PROGRESSIVE_LAYOUT,GLOBAL:PRIORITY_VISUAL_GLOBAL,CHART:PRIORITY_VISUAL_CHART,POST_CHART_LAYOUT:PRIORITY_VISUAL_POST_CHART_LAYOUT,COMPONENT:PRIORITY_VISUAL_COMPONENT,BRUSH:PRIORITY_VISUAL_BRUSH,CHART_ITEM:PRIORITY_VISUAL_CHART_DATA_CUSTOM,ARIA:PRIORITY_VISUAL_ARIA,DECAL:PRIORITY_VISUAL_DECAL}},IN_MAIN_PROCESS_KEY="__flagInMainProcess",PENDING_UPDATE="__pendingUpdate",STATUS_NEEDS_UPDATE_KEY="__needsUpdateStatus",ACTION_REG=/^[a-zA-Z0-9_]+$/,CONNECT_STATUS_KEY="__connectUpdateStatus",CONNECT_STATUS_PENDING=0,CONNECT_STATUS_UPDATING=1,CONNECT_STATUS_UPDATED=2;function createRegisterEventWithLowercaseECharts(a){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];if(this.isDisposed()){disposedWarning(this.id);return}return toLowercaseNameAndCallEventful(this,a,n)}}function createRegisterEventWithLowercaseMessageCenter(a){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return toLowercaseNameAndCallEventful(this,a,n)}}function toLowercaseNameAndCallEventful(a,n,r){return r[0]=r[0]&&r[0].toLowerCase(),Eventful$1.prototype[n].apply(a,r)}var MessageCenter=function(a){__extends(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n}(Eventful$1),messageCenterProto=MessageCenter.prototype;messageCenterProto.on=createRegisterEventWithLowercaseMessageCenter("on");messageCenterProto.off=createRegisterEventWithLowercaseMessageCenter("off");var prepare,prepareView,updateDirectly,updateMethods,doConvertPixel,updateStreamModes,doDispatchAction,flushPendingActions,triggerUpdatedEvent,bindRenderedEvent,bindMouseEvent,render,renderComponents,renderSeries,createExtensionAPI,enableConnect,markStatusToUpdate,applyChangedStates,ECharts=function(a){__extends(n,a);function n(r,o,l){var u=a.call(this,new ECEventProcessor)||this;u._chartsViews=[],u._chartsMap={},u._componentsViews=[],u._componentsMap={},u._pendingActions=[],l=l||{},isString(o)&&(o=themeStorage[o]),u._dom=r;var c="canvas",h="auto",d=!1;{var p=env$1.hasGlobalWindow?window:global;p&&(c=retrieve2(p.__ECHARTS__DEFAULT__RENDERER__,c),h=retrieve2(p.__ECHARTS__DEFAULT__COARSE_POINTER,h),d=retrieve2(p.__ECHARTS__DEFAULT__USE_DIRTY_RECT__,d))}l.ssr&&registerSSRDataGetter(function(v){var _=getECData(v),x=_.dataIndex;if(x!=null){var S=createHashMap();return S.set("series_index",_.seriesIndex),S.set("data_index",x),_.ssrType&&S.set("ssr_type",_.ssrType),S}});var f=u._zr=init$2(r,{renderer:l.renderer||c,devicePixelRatio:l.devicePixelRatio,width:l.width,height:l.height,ssr:l.ssr,useDirtyRect:retrieve2(l.useDirtyRect,d),useCoarsePointer:retrieve2(l.useCoarsePointer,h),pointerSize:l.pointerSize});u._ssr=l.ssr,u._throttledZrFlush=throttle(bind$1(f.flush,f),17),o=clone$4(o),o&&globalBackwardCompat(o,!0),u._theme=o,u._locale=createLocaleObject(l.locale||SYSTEM_LANG),u._coordSysMgr=new CoordinateSystem;var g=u._api=createExtensionAPI(u);function y(v,_){return v.__prio-_.__prio}return sort$2(visualFuncs,y),sort$2(dataProcessorFuncs,y),u._scheduler=new Scheduler$1(u,g,dataProcessorFuncs,visualFuncs),u._messageCenter=new MessageCenter,u._initEvents(),u.resize=bind$1(u.resize,u),f.animation.on("frame",u._onframe,u),bindRenderedEvent(f,u),bindMouseEvent(f,u),setAsPrimitive(u),u}return n.prototype._onframe=function(){if(!this._disposed){applyChangedStates(this);var r=this._scheduler;if(this[PENDING_UPDATE]){var o=this[PENDING_UPDATE].silent;this[IN_MAIN_PROCESS_KEY]=!0;try{prepare(this),updateMethods.update.call(this,null,this[PENDING_UPDATE].updateParams)}catch(d){throw this[IN_MAIN_PROCESS_KEY]=!1,this[PENDING_UPDATE]=null,d}this._zr.flush(),this[IN_MAIN_PROCESS_KEY]=!1,this[PENDING_UPDATE]=null,flushPendingActions.call(this,o),triggerUpdatedEvent.call(this,o)}else if(r.unfinished){var l=TEST_FRAME_REMAIN_TIME,u=this._model,c=this._api;r.unfinished=!1;do{var h=+new Date;r.performSeriesTasks(u),r.performDataProcessorTasks(u),updateStreamModes(this,u),r.performVisualTasks(u),renderSeries(this,this._model,c,"remain",{}),l-=+new Date-h}while(l>0&&r.unfinished);r.unfinished||this._zr.flush()}}},n.prototype.getDom=function(){return this._dom},n.prototype.getId=function(){return this.id},n.prototype.getZr=function(){return this._zr},n.prototype.isSSR=function(){return this._ssr},n.prototype.setOption=function(r,o,l){if(this[IN_MAIN_PROCESS_KEY]){error("`setOption` should not be called during main process.");return}if(this._disposed){disposedWarning(this.id);return}var u,c,h;if(isObject$3(o)&&(l=o.lazyUpdate,u=o.silent,c=o.replaceMerge,h=o.transition,o=o.notMerge),this[IN_MAIN_PROCESS_KEY]=!0,!this._model||o){var d=new OptionManager$1(this._api),p=this._theme,f=this._model=new GlobalModel$1;f.scheduler=this._scheduler,f.ssr=this._ssr,f.init(null,null,null,p,this._locale,d)}this._model.setOption(r,{replaceMerge:c},optionPreprocessorFuncs);var g={seriesTransition:h,optionChanged:!0};if(l)this[PENDING_UPDATE]={silent:u,updateParams:g},this[IN_MAIN_PROCESS_KEY]=!1,this.getZr().wakeUp();else{try{prepare(this),updateMethods.update.call(this,null,g)}catch(y){throw this[PENDING_UPDATE]=null,this[IN_MAIN_PROCESS_KEY]=!1,y}this._ssr||this._zr.flush(),this[PENDING_UPDATE]=null,this[IN_MAIN_PROCESS_KEY]=!1,flushPendingActions.call(this,u),triggerUpdatedEvent.call(this,u)}},n.prototype.setTheme=function(){deprecateLog("ECharts#setTheme() is DEPRECATED in ECharts 3.0")},n.prototype.getModel=function(){return this._model},n.prototype.getOption=function(){return this._model&&this._model.getOption()},n.prototype.getWidth=function(){return this._zr.getWidth()},n.prototype.getHeight=function(){return this._zr.getHeight()},n.prototype.getDevicePixelRatio=function(){return this._zr.painter.dpr||env$1.hasGlobalWindow&&window.devicePixelRatio||1},n.prototype.getRenderedCanvas=function(r){return deprecateReplaceLog("getRenderedCanvas","renderToCanvas"),this.renderToCanvas(r)},n.prototype.renderToCanvas=function(r){r=r||{};var o=this._zr.painter;if(o.type!=="canvas")throw new Error("renderToCanvas can only be used in the canvas renderer.");return o.getRenderedCanvas({backgroundColor:r.backgroundColor||this._model.get("backgroundColor"),pixelRatio:r.pixelRatio||this.getDevicePixelRatio()})},n.prototype.renderToSVGString=function(r){r=r||{};var o=this._zr.painter;if(o.type!=="svg")throw new Error("renderToSVGString can only be used in the svg renderer.");return o.renderToString({useViewBox:r.useViewBox})},n.prototype.getSvgDataURL=function(){if(env$1.svgSupported){var r=this._zr,o=r.storage.getDisplayList();return each$f(o,function(l){l.stopAnimation(null,!0)}),r.painter.toDataURL()}},n.prototype.getDataURL=function(r){if(this._disposed){disposedWarning(this.id);return}r=r||{};var o=r.excludeComponents,l=this._model,u=[],c=this;each$f(o,function(d){l.eachComponent({mainType:d},function(p){var f=c._componentsMap[p.__viewId];f.group.ignore||(u.push(f),f.group.ignore=!0)})});var h=this._zr.painter.getType()==="svg"?this.getSvgDataURL():this.renderToCanvas(r).toDataURL("image/"+(r&&r.type||"png"));return each$f(u,function(d){d.group.ignore=!1}),h},n.prototype.getConnectedDataURL=function(r){if(this._disposed){disposedWarning(this.id);return}var o=r.type==="svg",l=this.group,u=Math.min,c=Math.max,h=1/0;if(connectedGroups[l]){var d=h,p=h,f=-h,g=-h,y=[],v=r&&r.pixelRatio||this.getDevicePixelRatio();each$f(instances,function(b,A){if(b.group===l){var I=o?b.getZr().painter.getSvgDom().innerHTML:b.renderToCanvas(clone$4(r)),w=b.getDom().getBoundingClientRect();d=u(w.left,d),p=u(w.top,p),f=c(w.right,f),g=c(w.bottom,g),y.push({dom:I,left:w.left,top:w.top})}}),d*=v,p*=v,f*=v,g*=v;var _=f-d,x=g-p,S=platformApi.createCanvas(),T=init$2(S,{renderer:o?"svg":"canvas"});if(T.resize({width:_,height:x}),o){var M="";return each$f(y,function(b){var A=b.left-d,I=b.top-p;M+='<g transform="translate('+A+","+I+')">'+b.dom+"</g>"}),T.painter.getSvgRoot().innerHTML=M,r.connectedBackgroundColor&&T.painter.setBackgroundColor(r.connectedBackgroundColor),T.refreshImmediately(),T.painter.toDataURL()}else return r.connectedBackgroundColor&&T.add(new Rect$3({shape:{x:0,y:0,width:_,height:x},style:{fill:r.connectedBackgroundColor}})),each$f(y,function(b){var A=new ZRImage$1({style:{x:b.left*v-d,y:b.top*v-p,image:b.dom}});T.add(A)}),T.refreshImmediately(),S.toDataURL("image/"+(r&&r.type||"png"))}else return this.getDataURL(r)},n.prototype.convertToPixel=function(r,o){return doConvertPixel(this,"convertToPixel",r,o)},n.prototype.convertFromPixel=function(r,o){return doConvertPixel(this,"convertFromPixel",r,o)},n.prototype.containPixel=function(r,o){if(this._disposed){disposedWarning(this.id);return}var l=this._model,u,c=parseFinder$1(l,r);return each$f(c,function(h,d){d.indexOf("Models")>=0&&each$f(h,function(p){var f=p.coordinateSystem;if(f&&f.containPoint)u=u||!!f.containPoint(o);else if(d==="seriesModels"){var g=this._chartsMap[p.__viewId];g&&g.containPoint?u=u||g.containPoint(o,p):warn(d+": "+(g?"The found component do not support containPoint.":"No view mapping to the found component."))}else warn(d+": containPoint is not supported")},this)},this),!!u},n.prototype.getVisual=function(r,o){var l=this._model,u=parseFinder$1(l,r,{defaultMainType:"series"}),c=u.seriesModel;c||warn("There is no specified series model");var h=c.getData(),d=u.hasOwnProperty("dataIndexInside")?u.dataIndexInside:u.hasOwnProperty("dataIndex")?h.indexOfRawIndex(u.dataIndex):null;return d!=null?getItemVisualFromData(h,d,o):getVisualFromData(h,o)},n.prototype.getViewOfComponentModel=function(r){return this._componentsMap[r.__viewId]},n.prototype.getViewOfSeriesModel=function(r){return this._chartsMap[r.__viewId]},n.prototype._initEvents=function(){var r=this;each$f(MOUSE_EVENT_NAMES,function(o){var l=function(u){var c=r.getModel(),h=u.target,d,p=o==="globalout";if(p?d={}:h&&findEventDispatcher(h,function(_){var x=getECData(_);if(x&&x.dataIndex!=null){var S=x.dataModel||c.getSeriesByIndex(x.seriesIndex);return d=S&&S.getDataParams(x.dataIndex,x.dataType,h)||{},!0}else if(x.eventData)return d=extend({},x.eventData),!0},!0),d){var f=d.componentType,g=d.componentIndex;(f==="markLine"||f==="markPoint"||f==="markArea")&&(f="series",g=d.seriesIndex);var y=f&&g!=null&&c.getComponent(f,g),v=y&&r[y.mainType==="series"?"_chartsMap":"_componentsMap"][y.__viewId];!p&&!(y&&v)&&warn("model or view can not be found by params"),d.event=u,d.type=o,r._$eventProcessor.eventInfo={targetEl:h,packedEvent:d,model:y,view:v},r.trigger(o,d)}};l.zrEventfulCallAtLast=!0,r._zr.on(o,l,r)}),each$f(eventActionMap,function(o,l){r._messageCenter.on(l,function(u){this.trigger(l,u)},r)}),each$f(["selectchanged"],function(o){r._messageCenter.on(o,function(l){this.trigger(o,l)},r)}),handleLegacySelectEvents(this._messageCenter,this,this._api)},n.prototype.isDisposed=function(){return this._disposed},n.prototype.clear=function(){if(this._disposed){disposedWarning(this.id);return}this.setOption({series:[]},!0)},n.prototype.dispose=function(){if(this._disposed){disposedWarning(this.id);return}this._disposed=!0;var r=this.getDom();r&&setAttribute(this.getDom(),DOM_ATTRIBUTE_KEY,"");var o=this,l=o._api,u=o._model;each$f(o._componentsViews,function(c){c.dispose(u,l)}),each$f(o._chartsViews,function(c){c.dispose(u,l)}),o._zr.dispose(),o._dom=o._model=o._chartsMap=o._componentsMap=o._chartsViews=o._componentsViews=o._scheduler=o._api=o._zr=o._throttledZrFlush=o._theme=o._coordSysMgr=o._messageCenter=null,delete instances[o.id]},n.prototype.resize=function(r){if(this[IN_MAIN_PROCESS_KEY]){error("`resize` should not be called during main process.");return}if(this._disposed){disposedWarning(this.id);return}this._zr.resize(r);var o=this._model;if(this._loadingFX&&this._loadingFX.resize(),!!o){var l=o.resetOption("media"),u=r&&r.silent;this[PENDING_UPDATE]&&(u==null&&(u=this[PENDING_UPDATE].silent),l=!0,this[PENDING_UPDATE]=null),this[IN_MAIN_PROCESS_KEY]=!0;try{l&&prepare(this),updateMethods.update.call(this,{type:"resize",animation:extend({duration:0},r&&r.animation)})}catch(c){throw this[IN_MAIN_PROCESS_KEY]=!1,c}this[IN_MAIN_PROCESS_KEY]=!1,flushPendingActions.call(this,u),triggerUpdatedEvent.call(this,u)}},n.prototype.showLoading=function(r,o){if(this._disposed){disposedWarning(this.id);return}if(isObject$3(r)&&(o=r,r=""),r=r||"default",this.hideLoading(),!loadingEffects[r]){warn("Loading effects "+r+" not exists.");return}var l=loadingEffects[r](this._api,o),u=this._zr;this._loadingFX=l,u.add(l)},n.prototype.hideLoading=function(){if(this._disposed){disposedWarning(this.id);return}this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null},n.prototype.makeActionFromEvent=function(r){var o=extend({},r);return o.type=eventActionMap[r.type],o},n.prototype.dispatchAction=function(r,o){if(this._disposed){disposedWarning(this.id);return}if(isObject$3(o)||(o={silent:!!o}),!!actions[r.type]&&!!this._model){if(this[IN_MAIN_PROCESS_KEY]){this._pendingActions.push(r);return}var l=o.silent;doDispatchAction.call(this,r,l);var u=o.flush;u?this._zr.flush():u!==!1&&env$1.browser.weChat&&this._throttledZrFlush(),flushPendingActions.call(this,l),triggerUpdatedEvent.call(this,l)}},n.prototype.updateLabelLayout=function(){lifecycle$1.trigger("series:layoutlabels",this._model,this._api,{updatedSeries:[]})},n.prototype.appendData=function(r){if(this._disposed){disposedWarning(this.id);return}var o=r.seriesIndex,l=this.getModel(),u=l.getSeriesByIndex(o);assert(r.data&&u),u.appendData(r),this._scheduler.unfinished=!0,this.getZr().wakeUp()},n.internalField=function(){prepare=function(g){var y=g._scheduler;y.restorePipelines(g._model),y.prepareStageTasks(),prepareView(g,!0),prepareView(g,!1),y.plan()},prepareView=function(g,y){for(var v=g._model,_=g._scheduler,x=y?g._componentsViews:g._chartsViews,S=y?g._componentsMap:g._chartsMap,T=g._zr,M=g._api,b=0;b<x.length;b++)x[b].__alive=!1;y?v.eachComponent(function(w,C){w!=="series"&&A(C)}):v.eachSeries(A);function A(w){var C=w.__requireNewView;w.__requireNewView=!1;var E="_ec_"+w.id+"_"+w.type,P=!C&&S[E];if(!P){var D=parseClassType(w.type),L=y?ComponentView$1.getClass(D.main,D.sub):ChartView$1.getClass(D.sub);assert(L,D.sub+" does not exist."),P=new L,P.init(v,M),S[E]=P,x.push(P),T.add(P.group)}w.__viewId=P.__id=E,P.__alive=!0,P.__model=w,P.group.__ecComponentInfo={mainType:w.mainType,index:w.componentIndex},!y&&_.prepareView(P,w,v,M)}for(var b=0;b<x.length;){var I=x[b];I.__alive?b++:(!y&&I.renderTask.dispose(),T.remove(I.group),I.dispose(v,M),x.splice(b,1),S[I.__id]===I&&delete S[I.__id],I.__id=I.group.__ecComponentInfo=null)}},updateDirectly=function(g,y,v,_,x){var S=g._model;if(S.setUpdatePayload(v),!_){each$f([].concat(g._componentsViews).concat(g._chartsViews),I);return}var T={};T[_+"Id"]=v[_+"Id"],T[_+"Index"]=v[_+"Index"],T[_+"Name"]=v[_+"Name"];var M={mainType:_,query:T};x&&(M.subType=x);var b=v.excludeSeriesId,A;b!=null&&(A=createHashMap(),each$f(normalizeToArray(b),function(w){var C=convertOptionIdName(w,null);C!=null&&A.set(C,!0)})),S&&S.eachComponent(M,function(w){var C=A&&A.get(w.id)!=null;if(!C)if(isHighDownPayload(v))if(w instanceof SeriesModel$1)v.type===HIGHLIGHT_ACTION_TYPE&&!v.notBlur&&!w.get(["emphasis","disabled"])&&blurSeriesFromHighlightPayload(w,v,g._api);else{var E=findComponentHighDownDispatchers(w.mainType,w.componentIndex,v.name,g._api),P=E.focusSelf,D=E.dispatchers;v.type===HIGHLIGHT_ACTION_TYPE&&P&&!v.notBlur&&blurComponent(w.mainType,w.componentIndex,g._api),D&&each$f(D,function(L){v.type===HIGHLIGHT_ACTION_TYPE?enterEmphasis(L):leaveEmphasis(L)})}else isSelectChangePayload(v)&&w instanceof SeriesModel$1&&(toggleSelectionFromPayload(w,v,g._api),updateSeriesElementSelection(w),markStatusToUpdate(g))},g),S&&S.eachComponent(M,function(w){var C=A&&A.get(w.id)!=null;C||I(g[_==="series"?"_chartsMap":"_componentsMap"][w.__viewId])},g);function I(w){w&&w.__alive&&w[y]&&w[y](w.__model,S,g._api,v)}},updateMethods={prepareAndUpdate:function(g){prepare(this),updateMethods.update.call(this,g,{optionChanged:g.newOption!=null})},update:function(g,y){var v=this._model,_=this._api,x=this._zr,S=this._coordSysMgr,T=this._scheduler;if(v){v.setUpdatePayload(g),T.restoreData(v,g),T.performSeriesTasks(v),S.create(v,_),T.performDataProcessorTasks(v,g),updateStreamModes(this,v),S.update(v,_),r(v),T.performVisualTasks(v,g),render(this,v,_,g,y);var M=v.get("backgroundColor")||"transparent",b=v.get("darkMode");x.setBackgroundColor(M),b!=null&&b!=="auto"&&x.setDarkMode(b),lifecycle$1.trigger("afterupdate",v,_)}},updateTransform:function(g){var y=this,v=this._model,_=this._api;if(v){v.setUpdatePayload(g);var x=[];v.eachComponent(function(T,M){if(T!=="series"){var b=y.getViewOfComponentModel(M);if(b&&b.__alive)if(b.updateTransform){var A=b.updateTransform(M,v,_,g);A&&A.update&&x.push(b)}else x.push(b)}});var S=createHashMap();v.eachSeries(function(T){var M=y._chartsMap[T.__viewId];if(M.updateTransform){var b=M.updateTransform(T,v,_,g);b&&b.update&&S.set(T.uid,1)}else S.set(T.uid,1)}),r(v),this._scheduler.performVisualTasks(v,g,{setDirty:!0,dirtyMap:S}),renderSeries(this,v,_,g,{},S),lifecycle$1.trigger("afterupdate",v,_)}},updateView:function(g){var y=this._model;!y||(y.setUpdatePayload(g),ChartView$1.markUpdateMethod(g,"updateView"),r(y),this._scheduler.performVisualTasks(y,g,{setDirty:!0}),render(this,y,this._api,g,{}),lifecycle$1.trigger("afterupdate",y,this._api))},updateVisual:function(g){var y=this,v=this._model;!v||(v.setUpdatePayload(g),v.eachSeries(function(_){_.getData().clearAllVisual()}),ChartView$1.markUpdateMethod(g,"updateVisual"),r(v),this._scheduler.performVisualTasks(v,g,{visualType:"visual",setDirty:!0}),v.eachComponent(function(_,x){if(_!=="series"){var S=y.getViewOfComponentModel(x);S&&S.__alive&&S.updateVisual(x,v,y._api,g)}}),v.eachSeries(function(_){var x=y._chartsMap[_.__viewId];x.updateVisual(_,v,y._api,g)}),lifecycle$1.trigger("afterupdate",v,this._api))},updateLayout:function(g){updateMethods.update.call(this,g)}},doConvertPixel=function(g,y,v,_){if(g._disposed){disposedWarning(g.id);return}for(var x=g._model,S=g._coordSysMgr.getCoordinateSystems(),T,M=parseFinder$1(x,v),b=0;b<S.length;b++){var A=S[b];if(A[y]&&(T=A[y](x,M,_))!=null)return T}warn("No coordinate system that supports "+y+" found by the given finder.")},updateStreamModes=function(g,y){var v=g._chartsMap,_=g._scheduler;y.eachSeries(function(x){_.updateStreamModes(x,v[x.__viewId])})},doDispatchAction=function(g,y){var v=this,_=this.getModel(),x=g.type,S=g.escapeConnect,T=actions[x],M=T.actionInfo,b=(M.update||"update").split(":"),A=b.pop(),I=b[0]!=null&&parseClassType(b[0]);this[IN_MAIN_PROCESS_KEY]=!0;var w=[g],C=!1;g.batch&&(C=!0,w=map$1(g.batch,function(N){return N=defaults(extend({},N),g),N.batch=null,N}));var E=[],P,D=isSelectChangePayload(g),L=isHighDownPayload(g);if(L&&allLeaveBlur(this._api),each$f(w,function(N){if(P=T.action(N,v._model,v._api),P=P||extend({},N),P.type=M.event||P.type,E.push(P),L){var V=preParseFinder(g),B=V.queryOptionMap,G=V.mainTypeSpecified,F=G?B.keys()[0]:"series";updateDirectly(v,A,N,F),markStatusToUpdate(v)}else D?(updateDirectly(v,A,N,"series"),markStatusToUpdate(v)):I&&updateDirectly(v,A,N,I.main,I.sub)}),A!=="none"&&!L&&!D&&!I)try{this[PENDING_UPDATE]?(prepare(this),updateMethods.update.call(this,g),this[PENDING_UPDATE]=null):updateMethods[A].call(this,g)}catch(N){throw this[IN_MAIN_PROCESS_KEY]=!1,N}if(C?P={type:M.event||x,escapeConnect:S,batch:E}:P=E[0],this[IN_MAIN_PROCESS_KEY]=!1,!y){var R=this._messageCenter;if(R.trigger(P.type,P),D){var O={type:"selectchanged",escapeConnect:S,selected:getAllSelectedIndices(_),isFromClick:g.isFromClick||!1,fromAction:g.type,fromActionPayload:g};R.trigger(O.type,O)}}},flushPendingActions=function(g){for(var y=this._pendingActions;y.length;){var v=y.shift();doDispatchAction.call(this,v,g)}},triggerUpdatedEvent=function(g){!g&&this.trigger("updated")},bindRenderedEvent=function(g,y){g.on("rendered",function(v){y.trigger("rendered",v),g.animation.isFinished()&&!y[PENDING_UPDATE]&&!y._scheduler.unfinished&&!y._pendingActions.length&&y.trigger("finished")})},bindMouseEvent=function(g,y){g.on("mouseover",function(v){var _=v.target,x=findEventDispatcher(_,isHighDownDispatcher);x&&(handleGlobalMouseOverForHighDown(x,v,y._api),markStatusToUpdate(y))}).on("mouseout",function(v){var _=v.target,x=findEventDispatcher(_,isHighDownDispatcher);x&&(handleGlobalMouseOutForHighDown(x,v,y._api),markStatusToUpdate(y))}).on("click",function(v){var _=v.target,x=findEventDispatcher(_,function(M){return getECData(M).dataIndex!=null},!0);if(x){var S=x.selected?"unselect":"select",T=getECData(x);y._api.dispatchAction({type:S,dataType:T.dataType,dataIndexInside:T.dataIndex,seriesIndex:T.seriesIndex,isFromClick:!0})}})};function r(g){g.clearColorPalette(),g.eachSeries(function(y){y.clearColorPalette()})}function o(g){var y=[],v=[],_=!1;if(g.eachComponent(function(M,b){var A=b.get("zlevel")||0,I=b.get("z")||0,w=b.getZLevelKey();_=_||!!w,(M==="series"?v:y).push({zlevel:A,z:I,idx:b.componentIndex,type:M,key:w})}),_){var x=y.concat(v),S,T;sort$2(x,function(M,b){return M.zlevel===b.zlevel?M.z-b.z:M.zlevel-b.zlevel}),each$f(x,function(M){var b=g.getComponent(M.type,M.idx),A=M.zlevel,I=M.key;S!=null&&(A=Math.max(S,A)),I?(A===S&&I!==T&&A++,T=I):T&&(A===S&&A++,T=""),S=A,b.setZLevel(A)})}}render=function(g,y,v,_,x){o(y),renderComponents(g,y,v,_,x),each$f(g._chartsViews,function(S){S.__alive=!1}),renderSeries(g,y,v,_,x),each$f(g._chartsViews,function(S){S.__alive||S.remove(y,v)})},renderComponents=function(g,y,v,_,x,S){each$f(S||g._componentsViews,function(T){var M=T.__model;p(M,T),T.render(M,y,v,_),h(M,T),f(M,T)})},renderSeries=function(g,y,v,_,x,S){var T=g._scheduler;x=extend(x||{},{updatedSeries:y.getSeries()}),lifecycle$1.trigger("series:beforeupdate",y,v,x);var M=!1;y.eachSeries(function(b){var A=g._chartsMap[b.__viewId];A.__alive=!0;var I=A.renderTask;T.updatePayload(I,_),p(b,A),S&&S.get(b.uid)&&I.dirty(),I.perform(T.getPerformArgs(I))&&(M=!0),A.group.silent=!!b.get("silent"),c(b,A),updateSeriesElementSelection(b)}),T.unfinished=M||T.unfinished,lifecycle$1.trigger("series:layoutlabels",y,v,x),lifecycle$1.trigger("series:transition",y,v,x),y.eachSeries(function(b){var A=g._chartsMap[b.__viewId];h(b,A),f(b,A)}),u(g,y),lifecycle$1.trigger("series:afterupdate",y,v,x)},markStatusToUpdate=function(g){g[STATUS_NEEDS_UPDATE_KEY]=!0,g.getZr().wakeUp()},applyChangedStates=function(g){!g[STATUS_NEEDS_UPDATE_KEY]||(g.getZr().storage.traverse(function(y){isElementRemoved(y)||l(y)}),g[STATUS_NEEDS_UPDATE_KEY]=!1)};function l(g){for(var y=[],v=g.currentStates,_=0;_<v.length;_++){var x=v[_];x==="emphasis"||x==="blur"||x==="select"||y.push(x)}g.selected&&g.states.select&&y.push("select"),g.hoverState===HOVER_STATE_EMPHASIS&&g.states.emphasis?y.push("emphasis"):g.hoverState===HOVER_STATE_BLUR&&g.states.blur&&y.push("blur"),g.useStates(y)}function u(g,y){var v=g._zr,_=v.storage,x=0;_.traverse(function(S){S.isGroup||x++}),x>y.get("hoverLayerThreshold")&&!env$1.node&&!env$1.worker&&y.eachSeries(function(S){if(!S.preventUsingHoverLayer){var T=g._chartsMap[S.__viewId];T.__alive&&T.eachRendered(function(M){M.states.emphasis&&(M.states.emphasis.hoverLayer=!0)})}})}function c(g,y){var v=g.get("blendMode")||null;y.eachRendered(function(_){_.isGroup||(_.style.blend=v)})}function h(g,y){if(!g.preventAutoZ){var v=g.get("z")||0,_=g.get("zlevel")||0;y.eachRendered(function(x){return d(x,v,_,-1/0),!0})}}function d(g,y,v,_){var x=g.getTextContent(),S=g.getTextGuideLine(),T=g.isGroup;if(T)for(var M=g.childrenRef(),b=0;b<M.length;b++)_=Math.max(d(M[b],y,v,_),_);else g.z=y,g.zlevel=v,_=Math.max(g.z2,_);if(x&&(x.z=y,x.zlevel=v,isFinite(_)&&(x.z2=_+2)),S){var A=g.textGuideLineConfig;S.z=y,S.zlevel=v,isFinite(_)&&(S.z2=_+(A&&A.showAbove?1:-1))}return _}function p(g,y){y.eachRendered(function(v){if(!isElementRemoved(v)){var _=v.getTextContent(),x=v.getTextGuideLine();v.stateTransition&&(v.stateTransition=null),_&&_.stateTransition&&(_.stateTransition=null),x&&x.stateTransition&&(x.stateTransition=null),v.hasState()?(v.prevStates=v.currentStates,v.clearStates()):v.prevStates&&(v.prevStates=null)}})}function f(g,y){var v=g.getModel("stateAnimation"),_=g.isAnimationEnabled(),x=v.get("duration"),S=x>0?{duration:x,delay:v.get("delay"),easing:v.get("easing")}:null;y.eachRendered(function(T){if(T.states&&T.states.emphasis){if(isElementRemoved(T))return;if(T instanceof Path$1&&savePathStates(T),T.__dirty){var M=T.prevStates;M&&T.useStates(M)}if(_){T.stateTransition=S;var b=T.getTextContent(),A=T.getTextGuideLine();b&&(b.stateTransition=S),A&&(A.stateTransition=S)}T.__dirty&&l(T)}})}createExtensionAPI=function(g){return new(function(y){__extends(v,y);function v(){return y!==null&&y.apply(this,arguments)||this}return v.prototype.getCoordinateSystems=function(){return g._coordSysMgr.getCoordinateSystems()},v.prototype.getComponentByElement=function(_){for(;_;){var x=_.__ecComponentInfo;if(x!=null)return g._model.getComponent(x.mainType,x.index);_=_.parent}},v.prototype.enterEmphasis=function(_,x){enterEmphasis(_,x),markStatusToUpdate(g)},v.prototype.leaveEmphasis=function(_,x){leaveEmphasis(_,x),markStatusToUpdate(g)},v.prototype.enterBlur=function(_){enterBlur(_),markStatusToUpdate(g)},v.prototype.leaveBlur=function(_){leaveBlur(_),markStatusToUpdate(g)},v.prototype.enterSelect=function(_){enterSelect(_),markStatusToUpdate(g)},v.prototype.leaveSelect=function(_){leaveSelect(_),markStatusToUpdate(g)},v.prototype.getModel=function(){return g.getModel()},v.prototype.getViewOfComponentModel=function(_){return g.getViewOfComponentModel(_)},v.prototype.getViewOfSeriesModel=function(_){return g.getViewOfSeriesModel(_)},v}(ExtensionAPI$1))(g)},enableConnect=function(g){function y(v,_){for(var x=0;x<v.length;x++){var S=v[x];S[CONNECT_STATUS_KEY]=_}}each$f(eventActionMap,function(v,_){g._messageCenter.on(_,function(x){if(connectedGroups[g.group]&&g[CONNECT_STATUS_KEY]!==CONNECT_STATUS_PENDING){if(x&&x.escapeConnect)return;var S=g.makeActionFromEvent(x),T=[];each$f(instances,function(M){M!==g&&M.group===g.group&&T.push(M)}),y(T,CONNECT_STATUS_PENDING),each$f(T,function(M){M[CONNECT_STATUS_KEY]!==CONNECT_STATUS_UPDATING&&M.dispatchAction(S)}),y(T,CONNECT_STATUS_UPDATED)}})})}}(),n}(Eventful$1),echartsProto=ECharts.prototype;echartsProto.on=createRegisterEventWithLowercaseECharts("on");echartsProto.off=createRegisterEventWithLowercaseECharts("off");echartsProto.one=function(a,n,r){var o=this;deprecateLog("ECharts#one is deprecated.");function l(){for(var u=[],c=0;c<arguments.length;c++)u[c]=arguments[c];n&&n.apply&&n.apply(this,u),o.off(a,l)}this.on.call(this,a,l,r)};var MOUSE_EVENT_NAMES=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"];function disposedWarning(a){warn("Instance "+a+" has been disposed")}var actions={},eventActionMap={},dataProcessorFuncs=[],optionPreprocessorFuncs=[],visualFuncs=[],themeStorage={},loadingEffects={},instances={},connectedGroups={},idBase=+new Date-0,groupIdBase=+new Date-0,DOM_ATTRIBUTE_KEY="_echarts_instance_";function init$1(a,n,r){var o=!(r&&r.ssr);if(o){if(!a)throw new Error("Initialize failed: invalid dom.");var l=getInstanceByDom(a);if(l)return warn("There is a chart instance already initialized on the dom."),l;isDom(a)&&a.nodeName.toUpperCase()!=="CANVAS"&&(!a.clientWidth&&(!r||r.width==null)||!a.clientHeight&&(!r||r.height==null))&&warn("Can't get DOM width or height. Please check dom.clientWidth and dom.clientHeight. They should not be 0.For example, you may need to call this in the callback of window.onload.")}var u=new ECharts(a,n,r);return u.id="ec_"+idBase++,instances[u.id]=u,o&&setAttribute(a,DOM_ATTRIBUTE_KEY,u.id),enableConnect(u),lifecycle$1.trigger("afterinit",u),u}function connect(a){if(isArray$1(a)){var n=a;a=null,each$f(n,function(r){r.group!=null&&(a=r.group)}),a=a||"g_"+groupIdBase++,each$f(n,function(r){r.group=a})}return connectedGroups[a]=!0,a}function disconnect(a){connectedGroups[a]=!1}var disConnect=disconnect;function dispose(a){isString(a)?a=instances[a]:a instanceof ECharts||(a=getInstanceByDom(a)),a instanceof ECharts&&!a.isDisposed()&&a.dispose()}function getInstanceByDom(a){return instances[getAttribute(a,DOM_ATTRIBUTE_KEY)]}function getInstanceById(a){return instances[a]}function registerTheme(a,n){themeStorage[a]=n}function registerPreprocessor(a){indexOf(optionPreprocessorFuncs,a)<0&&optionPreprocessorFuncs.push(a)}function registerProcessor(a,n){normalizeRegister(dataProcessorFuncs,a,n,PRIORITY_PROCESSOR_DEFAULT)}function registerPostInit(a){registerUpdateLifecycle("afterinit",a)}function registerPostUpdate(a){registerUpdateLifecycle("afterupdate",a)}function registerUpdateLifecycle(a,n){lifecycle$1.on(a,n)}function registerAction(a,n,r){isFunction(n)&&(r=n,n="");var o=isObject$3(a)?a.type:[a,a={event:n}][0];a.event=(a.event||o).toLowerCase(),n=a.event,!eventActionMap[n]&&(assert(ACTION_REG.test(o)&&ACTION_REG.test(n)),actions[o]||(actions[o]={action:r,actionInfo:a}),eventActionMap[n]=o)}function registerCoordinateSystem(a,n){CoordinateSystem.register(a,n)}function getCoordinateSystemDimensions(a){var n=CoordinateSystem.get(a);if(n)return n.getDimensionsInfo?n.getDimensionsInfo():n.dimensions.slice()}function registerLayout(a,n){normalizeRegister(visualFuncs,a,n,PRIORITY_VISUAL_LAYOUT,"layout")}function registerVisual(a,n){normalizeRegister(visualFuncs,a,n,PRIORITY_VISUAL_CHART,"visual")}var registeredTasks=[];function normalizeRegister(a,n,r,o,l){(isFunction(n)||isObject$3(n))&&(r=n,n=o);{if(isNaN(n)||n==null)throw new Error("Illegal priority");each$f(a,function(c){assert(c.__raw!==r)})}if(!(indexOf(registeredTasks,r)>=0)){registeredTasks.push(r);var u=Scheduler$1.wrapStageHandler(r,l);u.__prio=n,u.__raw=r,a.push(u)}}function registerLoading(a,n){loadingEffects[a]=n}function setCanvasCreator(a){deprecateLog("setCanvasCreator is deprecated. Use setPlatformAPI({ createCanvas }) instead."),setPlatformAPI({createCanvas:a})}function registerMap$1(a,n,r){var o=getImpl("registerMap");o&&o(a,n,r)}function getMap(a){var n=getImpl("getMap");return n&&n(a)}var registerTransform=registerExternalTransform;registerVisual(PRIORITY_VISUAL_GLOBAL,seriesStyleTask);registerVisual(PRIORITY_VISUAL_CHART_DATA_CUSTOM,dataStyleTask);registerVisual(PRIORITY_VISUAL_CHART_DATA_CUSTOM,dataColorPaletteTask);registerVisual(PRIORITY_VISUAL_GLOBAL,seriesSymbolTask);registerVisual(PRIORITY_VISUAL_CHART_DATA_CUSTOM,dataSymbolTask);registerVisual(PRIORITY_VISUAL_DECAL,decalVisual);registerPreprocessor(globalBackwardCompat);registerProcessor(PRIORITY_PROCESSOR_DATASTACK,dataStack$1);registerLoading("default",defaultLoading);registerAction({type:HIGHLIGHT_ACTION_TYPE,event:HIGHLIGHT_ACTION_TYPE,update:HIGHLIGHT_ACTION_TYPE},noop);registerAction({type:DOWNPLAY_ACTION_TYPE,event:DOWNPLAY_ACTION_TYPE,update:DOWNPLAY_ACTION_TYPE},noop);registerAction({type:SELECT_ACTION_TYPE,event:SELECT_ACTION_TYPE,update:SELECT_ACTION_TYPE},noop);registerAction({type:UNSELECT_ACTION_TYPE,event:UNSELECT_ACTION_TYPE,update:UNSELECT_ACTION_TYPE},noop);registerAction({type:TOGGLE_SELECT_ACTION_TYPE,event:TOGGLE_SELECT_ACTION_TYPE,update:TOGGLE_SELECT_ACTION_TYPE},noop);registerTheme("light",lightTheme);registerTheme("dark",darkTheme);var dataTool={},extensions=[],extensionRegisters={registerPreprocessor,registerProcessor,registerPostInit,registerPostUpdate,registerUpdateLifecycle,registerAction,registerCoordinateSystem,registerLayout,registerVisual,registerTransform,registerLoading,registerMap:registerMap$1,registerImpl,PRIORITY,ComponentModel:ComponentModel$1,ComponentView:ComponentView$1,SeriesModel:SeriesModel$1,ChartView:ChartView$1,registerComponentModel:function(a){ComponentModel$1.registerClass(a)},registerComponentView:function(a){ComponentView$1.registerClass(a)},registerSeriesModel:function(a){SeriesModel$1.registerClass(a)},registerChartView:function(a){ChartView$1.registerClass(a)},registerSubTypeDefaulter:function(a,n){ComponentModel$1.registerSubTypeDefaulter(a,n)},registerPainter:function(a,n){registerPainter(a,n)}};function use(a){if(isArray$1(a)){each$f(a,function(n){use(n)});return}indexOf(extensions,a)>=0||(extensions.push(a),isFunction(a)&&(a={install:a}),a.install(extensionRegisters))}function dataIndexMapValueLength(a){return a==null?0:a.length||1}function defaultKeyGetter(a){return a}var DataDiffer=function(){function a(n,r,o,l,u,c){this._old=n,this._new=r,this._oldKeyGetter=o||defaultKeyGetter,this._newKeyGetter=l||defaultKeyGetter,this.context=u,this._diffModeMultiple=c==="multiple"}return a.prototype.add=function(n){return this._add=n,this},a.prototype.update=function(n){return this._update=n,this},a.prototype.updateManyToOne=function(n){return this._updateManyToOne=n,this},a.prototype.updateOneToMany=function(n){return this._updateOneToMany=n,this},a.prototype.updateManyToMany=function(n){return this._updateManyToMany=n,this},a.prototype.remove=function(n){return this._remove=n,this},a.prototype.execute=function(){this[this._diffModeMultiple?"_executeMultiple":"_executeOneToOne"]()},a.prototype._executeOneToOne=function(){var n=this._old,r=this._new,o={},l=new Array(n.length),u=new Array(r.length);this._initIndexMap(n,null,l,"_oldKeyGetter"),this._initIndexMap(r,o,u,"_newKeyGetter");for(var c=0;c<n.length;c++){var h=l[c],d=o[h],p=dataIndexMapValueLength(d);if(p>1){var f=d.shift();d.length===1&&(o[h]=d[0]),this._update&&this._update(f,c)}else p===1?(o[h]=null,this._update&&this._update(d,c)):this._remove&&this._remove(c)}this._performRestAdd(u,o)},a.prototype._executeMultiple=function(){var n=this._old,r=this._new,o={},l={},u=[],c=[];this._initIndexMap(n,o,u,"_oldKeyGetter"),this._initIndexMap(r,l,c,"_newKeyGetter");for(var h=0;h<u.length;h++){var d=u[h],p=o[d],f=l[d],g=dataIndexMapValueLength(p),y=dataIndexMapValueLength(f);if(g>1&&y===1)this._updateManyToOne&&this._updateManyToOne(f,p),l[d]=null;else if(g===1&&y>1)this._updateOneToMany&&this._updateOneToMany(f,p),l[d]=null;else if(g===1&&y===1)this._update&&this._update(f,p),l[d]=null;else if(g>1&&y>1)this._updateManyToMany&&this._updateManyToMany(f,p),l[d]=null;else if(g>1)for(var v=0;v<g;v++)this._remove&&this._remove(p[v]);else this._remove&&this._remove(p)}this._performRestAdd(c,l)},a.prototype._performRestAdd=function(n,r){for(var o=0;o<n.length;o++){var l=n[o],u=r[l],c=dataIndexMapValueLength(u);if(c>1)for(var h=0;h<c;h++)this._add&&this._add(u[h]);else c===1&&this._add&&this._add(u);r[l]=null}},a.prototype._initIndexMap=function(n,r,o,l){for(var u=this._diffModeMultiple,c=0;c<n.length;c++){var h="_ec_"+this[l](n[c],c);if(u||(o[c]=h),!!r){var d=r[h],p=dataIndexMapValueLength(d);p===0?(r[h]=c,u&&o.push(h)):p===1?r[h]=[d,c]:d.push(c)}}},a}();const DataDiffer$1=DataDiffer;var DimensionUserOuput=function(){function a(n,r){this._encode=n,this._schema=r}return a.prototype.get=function(){return{fullDimensions:this._getFullDimensionNames(),encode:this._encode}},a.prototype._getFullDimensionNames=function(){return this._cachedDimNames||(this._cachedDimNames=this._schema?this._schema.makeOutputDimensionNames():[]),this._cachedDimNames},a}();function summarizeDimensions(a,n){var r={},o=r.encode={},l=createHashMap(),u=[],c=[],h={};each$f(a.dimensions,function(y){var v=a.getDimensionInfo(y),_=v.coordDim;if(_){assert(VISUAL_DIMENSIONS.get(_)==null);var x=v.coordDimIndex;getOrCreateEncodeArr(o,_)[x]=y,v.isExtraCoord||(l.set(_,1),mayLabelDimType(v.type)&&(u[0]=y),getOrCreateEncodeArr(h,_)[x]=a.getDimensionIndex(v.name)),v.defaultTooltip&&c.push(y)}VISUAL_DIMENSIONS.each(function(S,T){var M=getOrCreateEncodeArr(o,T),b=v.otherDims[T];b!=null&&b!==!1&&(M[b]=v.name)})});var d=[],p={};l.each(function(y,v){var _=o[v];p[v]=_[0],d=d.concat(_)}),r.dataDimsOnCoord=d,r.dataDimIndicesOnCoord=map$1(d,function(y){return a.getDimensionInfo(y).storeDimIndex}),r.encodeFirstDimNotExtra=p;var f=o.label;f&&f.length&&(u=f.slice());var g=o.tooltip;return g&&g.length?c=g.slice():c.length||(c=u.slice()),o.defaultedLabel=u,o.defaultedTooltip=c,r.userOutput=new DimensionUserOuput(h,n),r}function getOrCreateEncodeArr(a,n){return a.hasOwnProperty(n)||(a[n]=[]),a[n]}function getDimensionTypeByAxis(a){return a==="category"?"ordinal":a==="time"?"time":"float"}function mayLabelDimType(a){return!(a==="ordinal"||a==="time")}var SeriesDimensionDefine=function(){function a(n){this.otherDims={},n!=null&&extend(this,n)}return a}();const SeriesDimensionDefine$1=SeriesDimensionDefine;var inner$h=makeInner(),dimTypeShort={float:"f",int:"i",ordinal:"o",number:"n",time:"t"},SeriesDataSchema=function(){function a(n){this.dimensions=n.dimensions,this._dimOmitted=n.dimensionOmitted,this.source=n.source,this._fullDimCount=n.fullDimensionCount,this._updateDimOmitted(n.dimensionOmitted)}return a.prototype.isDimensionOmitted=function(){return this._dimOmitted},a.prototype._updateDimOmitted=function(n){this._dimOmitted=n,n&&(this._dimNameMap||(this._dimNameMap=ensureSourceDimNameMap(this.source)))},a.prototype.getSourceDimensionIndex=function(n){return retrieve2(this._dimNameMap.get(n),-1)},a.prototype.getSourceDimension=function(n){var r=this.source.dimensionsDefine;if(r)return r[n]},a.prototype.makeStoreSchema=function(){for(var n=this._fullDimCount,r=shouldRetrieveDataByName(this.source),o=!shouldOmitUnusedDimensions(n),l="",u=[],c=0,h=0;c<n;c++){var d=void 0,p=void 0,f=void 0,g=this.dimensions[h];if(g&&g.storeDimIndex===c)d=r?g.name:null,p=g.type,f=g.ordinalMeta,h++;else{var y=this.getSourceDimension(c);y&&(d=r?y.name:null,p=y.type)}u.push({property:d,type:p,ordinalMeta:f}),r&&d!=null&&(!g||!g.isCalculationCoord)&&(l+=o?d.replace(/\`/g,"`1").replace(/\$/g,"`2"):d),l+="$",l+=dimTypeShort[p]||"f",f&&(l+=f.uid),l+="$"}var v=this.source,_=[v.seriesLayoutBy,v.startIndex,l].join("$$");return{dimensions:u,hash:_}},a.prototype.makeOutputDimensionNames=function(){for(var n=[],r=0,o=0;r<this._fullDimCount;r++){var l=void 0,u=this.dimensions[o];if(u&&u.storeDimIndex===r)u.isCalculationCoord||(l=u.name),o++;else{var c=this.getSourceDimension(r);c&&(l=c.name)}n.push(l)}return n},a.prototype.appendCalculationDimension=function(n){this.dimensions.push(n),n.isCalculationCoord=!0,this._fullDimCount++,this._updateDimOmitted(!0)},a}();function isSeriesDataSchema(a){return a instanceof SeriesDataSchema}function createDimNameMap(a){for(var n=createHashMap(),r=0;r<(a||[]).length;r++){var o=a[r],l=isObject$3(o)?o.name:o;l!=null&&n.get(l)==null&&n.set(l,r)}return n}function ensureSourceDimNameMap(a){var n=inner$h(a);return n.dimNameMap||(n.dimNameMap=createDimNameMap(a.dimensionsDefine))}function shouldOmitUnusedDimensions(a){return a>30}var isObject$1=isObject$3,map=map$1,CtorInt32Array=typeof Int32Array>"u"?Array:Int32Array,ID_PREFIX="e\0\0",INDEX_NOT_FOUND=-1,TRANSFERABLE_PROPERTIES=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_dimSummary","userOutput","_rawData","_dimValueGetter","_nameDimIdx","_idDimIdx","_nameRepeatCount"],CLONE_PROPERTIES=["_approximateExtent"],prepareInvertedIndex,getId,getIdNameFromStore,normalizeDimensions,transferProperties,cloneListForMapAndSample,makeIdFromName,SeriesData=function(){function a(n,r){this.type="list",this._dimOmitted=!1,this._nameList=[],this._idList=[],this._visual={},this._layout={},this._itemVisuals=[],this._itemLayouts=[],this._graphicEls=[],this._approximateExtent={},this._calculationInfo={},this.hasItemOption=!1,this.TRANSFERABLE_METHODS=["cloneShallow","downSample","minmaxDownSample","lttbDownSample","map"],this.CHANGABLE_METHODS=["filterSelf","selectRange"],this.DOWNSAMPLE_METHODS=["downSample","minmaxDownSample","lttbDownSample"];var o,l=!1;isSeriesDataSchema(n)?(o=n.dimensions,this._dimOmitted=n.isDimensionOmitted(),this._schema=n):(l=!0,o=n),o=o||["x","y"];for(var u={},c=[],h={},d=!1,p={},f=0;f<o.length;f++){var g=o[f],y=isString(g)?new SeriesDimensionDefine$1({name:g}):g instanceof SeriesDimensionDefine$1?g:new SeriesDimensionDefine$1(g),v=y.name;y.type=y.type||"float",y.coordDim||(y.coordDim=v,y.coordDimIndex=0);var _=y.otherDims=y.otherDims||{};c.push(v),u[v]=y,p[v]!=null&&(d=!0),y.createInvertedIndices&&(h[v]=[]),_.itemName===0&&(this._nameDimIdx=f),_.itemId===0&&(this._idDimIdx=f),assert(l||y.storeDimIndex>=0),l&&(y.storeDimIndex=f)}if(this.dimensions=c,this._dimInfos=u,this._initGetDimensionInfo(d),this.hostModel=r,this._invertedIndicesMap=h,this._dimOmitted){var x=this._dimIdxToName=createHashMap();each$f(c,function(S){x.set(u[S].storeDimIndex,S)})}}return a.prototype.getDimension=function(n){var r=this._recognizeDimIndex(n);if(r==null)return n;if(r=n,!this._dimOmitted)return this.dimensions[r];var o=this._dimIdxToName.get(r);if(o!=null)return o;var l=this._schema.getSourceDimension(r);if(l)return l.name},a.prototype.getDimensionIndex=function(n){var r=this._recognizeDimIndex(n);if(r!=null)return r;if(n==null)return-1;var o=this._getDimInfo(n);return o?o.storeDimIndex:this._dimOmitted?this._schema.getSourceDimensionIndex(n):-1},a.prototype._recognizeDimIndex=function(n){if(isNumber(n)||n!=null&&!isNaN(n)&&!this._getDimInfo(n)&&(!this._dimOmitted||this._schema.getSourceDimensionIndex(n)<0))return+n},a.prototype._getStoreDimIndex=function(n){var r=this.getDimensionIndex(n);if(r==null)throw new Error("Unknown dimension "+n);return r},a.prototype.getDimensionInfo=function(n){return this._getDimInfo(this.getDimension(n))},a.prototype._initGetDimensionInfo=function(n){var r=this._dimInfos;this._getDimInfo=n?function(o){return r.hasOwnProperty(o)?r[o]:void 0}:function(o){return r[o]}},a.prototype.getDimensionsOnCoord=function(){return this._dimSummary.dataDimsOnCoord.slice()},a.prototype.mapDimension=function(n,r){var o=this._dimSummary;if(r==null)return o.encodeFirstDimNotExtra[n];var l=o.encode[n];return l?l[r]:null},a.prototype.mapDimensionsAll=function(n){var r=this._dimSummary,o=r.encode[n];return(o||[]).slice()},a.prototype.getStore=function(){return this._store},a.prototype.initData=function(n,r,o){var l=this,u;if(n instanceof DataStore$1&&(u=n),!u){var c=this.dimensions,h=isSourceInstance(n)||isArrayLike(n)?new DefaultDataProvider(n,c.length):n;u=new DataStore$1;var d=map(c,function(p){return{type:l._dimInfos[p].type,property:p}});u.initData(h,d,o)}this._store=u,this._nameList=(r||[]).slice(),this._idList=[],this._nameRepeatCount={},this._doInit(0,u.count()),this._dimSummary=summarizeDimensions(this,this._schema),this.userOutput=this._dimSummary.userOutput},a.prototype.appendData=function(n){var r=this._store.appendData(n);this._doInit(r[0],r[1])},a.prototype.appendValues=function(n,r){var o=this._store.appendValues(n,r&&r.length),l=o.start,u=o.end,c=this._shouldMakeIdFromName();if(this._updateOrdinalMeta(),r)for(var h=l;h<u;h++){var d=h-l;this._nameList[h]=r[d],c&&makeIdFromName(this,h)}},a.prototype._updateOrdinalMeta=function(){for(var n=this._store,r=this.dimensions,o=0;o<r.length;o++){var l=this._dimInfos[r[o]];l.ordinalMeta&&n.collectOrdinalMeta(l.storeDimIndex,l.ordinalMeta)}},a.prototype._shouldMakeIdFromName=function(){var n=this._store.getProvider();return this._idDimIdx==null&&n.getSource().sourceFormat!==SOURCE_FORMAT_TYPED_ARRAY&&!n.fillStorage},a.prototype._doInit=function(n,r){if(!(n>=r)){var o=this._store,l=o.getProvider();this._updateOrdinalMeta();var u=this._nameList,c=this._idList,h=l.getSource().sourceFormat,d=h===SOURCE_FORMAT_ORIGINAL;if(d&&!l.pure)for(var p=[],f=n;f<r;f++){var g=l.getItem(f,p);if(!this.hasItemOption&&isDataItemOption(g)&&(this.hasItemOption=!0),g){var y=g.name;u[f]==null&&y!=null&&(u[f]=convertOptionIdName(y,null));var v=g.id;c[f]==null&&v!=null&&(c[f]=convertOptionIdName(v,null))}}if(this._shouldMakeIdFromName())for(var f=n;f<r;f++)makeIdFromName(this,f);prepareInvertedIndex(this)}},a.prototype.getApproximateExtent=function(n){return this._approximateExtent[n]||this._store.getDataExtent(this._getStoreDimIndex(n))},a.prototype.setApproximateExtent=function(n,r){r=this.getDimension(r),this._approximateExtent[r]=n.slice()},a.prototype.getCalculationInfo=function(n){return this._calculationInfo[n]},a.prototype.setCalculationInfo=function(n,r){isObject$1(n)?extend(this._calculationInfo,n):this._calculationInfo[n]=r},a.prototype.getName=function(n){var r=this.getRawIndex(n),o=this._nameList[r];return o==null&&this._nameDimIdx!=null&&(o=getIdNameFromStore(this,this._nameDimIdx,r)),o==null&&(o=""),o},a.prototype._getCategory=function(n,r){var o=this._store.get(n,r),l=this._store.getOrdinalMeta(n);return l?l.categories[o]:o},a.prototype.getId=function(n){return getId(this,this.getRawIndex(n))},a.prototype.count=function(){return this._store.count()},a.prototype.get=function(n,r){var o=this._store,l=this._dimInfos[n];if(l)return o.get(l.storeDimIndex,r)},a.prototype.getByRawIndex=function(n,r){var o=this._store,l=this._dimInfos[n];if(l)return o.getByRawIndex(l.storeDimIndex,r)},a.prototype.getIndices=function(){return this._store.getIndices()},a.prototype.getDataExtent=function(n){return this._store.getDataExtent(this._getStoreDimIndex(n))},a.prototype.getSum=function(n){return this._store.getSum(this._getStoreDimIndex(n))},a.prototype.getMedian=function(n){return this._store.getMedian(this._getStoreDimIndex(n))},a.prototype.getValues=function(n,r){var o=this,l=this._store;return isArray$1(n)?l.getValues(map(n,function(u){return o._getStoreDimIndex(u)}),r):l.getValues(n)},a.prototype.hasValue=function(n){for(var r=this._dimSummary.dataDimIndicesOnCoord,o=0,l=r.length;o<l;o++)if(isNaN(this._store.get(r[o],n)))return!1;return!0},a.prototype.indexOfName=function(n){for(var r=0,o=this._store.count();r<o;r++)if(this.getName(r)===n)return r;return-1},a.prototype.getRawIndex=function(n){return this._store.getRawIndex(n)},a.prototype.indexOfRawIndex=function(n){return this._store.indexOfRawIndex(n)},a.prototype.rawIndexOf=function(n,r){var o=n&&this._invertedIndicesMap[n];if(!o)throw new Error("Do not supported yet");var l=o&&o[r];return l==null||isNaN(l)?INDEX_NOT_FOUND:l},a.prototype.indicesOfNearest=function(n,r,o){return this._store.indicesOfNearest(this._getStoreDimIndex(n),r,o)},a.prototype.each=function(n,r,o){isFunction(n)&&(o=r,r=n,n=[]);var l=o||this,u=map(normalizeDimensions(n),this._getStoreDimIndex,this);this._store.each(u,l?bind$1(r,l):r)},a.prototype.filterSelf=function(n,r,o){isFunction(n)&&(o=r,r=n,n=[]);var l=o||this,u=map(normalizeDimensions(n),this._getStoreDimIndex,this);return this._store=this._store.filter(u,l?bind$1(r,l):r),this},a.prototype.selectRange=function(n){var r=this,o={},l=keys(n);return each$f(l,function(u){var c=r._getStoreDimIndex(u);o[c]=n[u]}),this._store=this._store.selectRange(o),this},a.prototype.mapArray=function(n,r,o){isFunction(n)&&(o=r,r=n,n=[]),o=o||this;var l=[];return this.each(n,function(){l.push(r&&r.apply(this,arguments))},o),l},a.prototype.map=function(n,r,o,l){var u=o||l||this,c=map(normalizeDimensions(n),this._getStoreDimIndex,this),h=cloneListForMapAndSample(this);return h._store=this._store.map(c,u?bind$1(r,u):r),h},a.prototype.modify=function(n,r,o,l){var u=this,c=o||l||this;each$f(normalizeDimensions(n),function(d){var p=u.getDimensionInfo(d);p.isCalculationCoord||console.error("Danger: only stack dimension can be modified")});var h=map(normalizeDimensions(n),this._getStoreDimIndex,this);this._store.modify(h,c?bind$1(r,c):r)},a.prototype.downSample=function(n,r,o,l){var u=cloneListForMapAndSample(this);return u._store=this._store.downSample(this._getStoreDimIndex(n),r,o,l),u},a.prototype.minmaxDownSample=function(n,r){var o=cloneListForMapAndSample(this);return o._store=this._store.minmaxDownSample(this._getStoreDimIndex(n),r),o},a.prototype.lttbDownSample=function(n,r){var o=cloneListForMapAndSample(this);return o._store=this._store.lttbDownSample(this._getStoreDimIndex(n),r),o},a.prototype.getRawDataItem=function(n){return this._store.getRawDataItem(n)},a.prototype.getItemModel=function(n){var r=this.hostModel,o=this.getRawDataItem(n);return new Model$1(o,r,r&&r.ecModel)},a.prototype.diff=function(n){var r=this;return new DataDiffer$1(n?n.getStore().getIndices():[],this.getStore().getIndices(),function(o){return getId(n,o)},function(o){return getId(r,o)})},a.prototype.getVisual=function(n){var r=this._visual;return r&&r[n]},a.prototype.setVisual=function(n,r){this._visual=this._visual||{},isObject$1(n)?extend(this._visual,n):this._visual[n]=r},a.prototype.getItemVisual=function(n,r){var o=this._itemVisuals[n],l=o&&o[r];return l==null?this.getVisual(r):l},a.prototype.hasItemVisual=function(){return this._itemVisuals.length>0},a.prototype.ensureUniqueItemVisual=function(n,r){var o=this._itemVisuals,l=o[n];l||(l=o[n]={});var u=l[r];return u==null&&(u=this.getVisual(r),isArray$1(u)?u=u.slice():isObject$1(u)&&(u=extend({},u)),l[r]=u),u},a.prototype.setItemVisual=function(n,r,o){var l=this._itemVisuals[n]||{};this._itemVisuals[n]=l,isObject$1(r)?extend(l,r):l[r]=o},a.prototype.clearAllVisual=function(){this._visual={},this._itemVisuals=[]},a.prototype.setLayout=function(n,r){isObject$1(n)?extend(this._layout,n):this._layout[n]=r},a.prototype.getLayout=function(n){return this._layout[n]},a.prototype.getItemLayout=function(n){return this._itemLayouts[n]},a.prototype.setItemLayout=function(n,r,o){this._itemLayouts[n]=o?extend(this._itemLayouts[n]||{},r):r},a.prototype.clearItemLayouts=function(){this._itemLayouts.length=0},a.prototype.setItemGraphicEl=function(n,r){var o=this.hostModel&&this.hostModel.seriesIndex;setCommonECData(o,this.dataType,n,r),this._graphicEls[n]=r},a.prototype.getItemGraphicEl=function(n){return this._graphicEls[n]},a.prototype.eachItemGraphicEl=function(n,r){each$f(this._graphicEls,function(o,l){o&&n&&n.call(r,o,l)})},a.prototype.cloneShallow=function(n){return n||(n=new a(this._schema?this._schema:map(this.dimensions,this._getDimInfo,this),this.hostModel)),transferProperties(n,this),n._store=this._store,n},a.prototype.wrapMethod=function(n,r){var o=this[n];!isFunction(o)||(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(n),this[n]=function(){var l=o.apply(this,arguments);return r.apply(this,[l].concat(slice(arguments)))})},a.internalField=function(){prepareInvertedIndex=function(n){var r=n._invertedIndicesMap;each$f(r,function(o,l){var u=n._dimInfos[l],c=u.ordinalMeta,h=n._store;if(c){o=r[l]=new CtorInt32Array(c.categories.length);for(var d=0;d<o.length;d++)o[d]=INDEX_NOT_FOUND;for(var d=0;d<h.count();d++)o[h.get(u.storeDimIndex,d)]=d}})},getIdNameFromStore=function(n,r,o){return convertOptionIdName(n._getCategory(r,o),null)},getId=function(n,r){var o=n._idList[r];return o==null&&n._idDimIdx!=null&&(o=getIdNameFromStore(n,n._idDimIdx,r)),o==null&&(o=ID_PREFIX+r),o},normalizeDimensions=function(n){return isArray$1(n)||(n=n!=null?[n]:[]),n},cloneListForMapAndSample=function(n){var r=new a(n._schema?n._schema:map(n.dimensions,n._getDimInfo,n),n.hostModel);return transferProperties(r,n),r},transferProperties=function(n,r){each$f(TRANSFERABLE_PROPERTIES.concat(r.__wrappedMethods||[]),function(o){r.hasOwnProperty(o)&&(n[o]=r[o])}),n.__wrappedMethods=r.__wrappedMethods,each$f(CLONE_PROPERTIES,function(o){n[o]=clone$4(r[o])}),n._calculationInfo=extend({},r._calculationInfo)},makeIdFromName=function(n,r){var o=n._nameList,l=n._idList,u=n._nameDimIdx,c=n._idDimIdx,h=o[r],d=l[r];if(h==null&&u!=null&&(o[r]=h=getIdNameFromStore(n,u,r)),d==null&&c!=null&&(l[r]=d=getIdNameFromStore(n,c,r)),d==null&&h!=null){var p=n._nameRepeatCount,f=p[h]=(p[h]||0)+1;d=h,f>1&&(d+="__ec__"+f),l[r]=d}}}(),a}();const SeriesData$1=SeriesData;function createDimensions(a,n){return prepareSeriesDataSchema(a,n).dimensions}function prepareSeriesDataSchema(a,n){isSourceInstance(a)||(a=createSourceFromSeriesDataOption(a)),n=n||{};var r=n.coordDimensions||[],o=n.dimensionsDefine||a.dimensionsDefine||[],l=createHashMap(),u=[],c=getDimCount(a,r,o,n.dimensionsCount),h=n.canOmitUnusedDimensions&&shouldOmitUnusedDimensions(c),d=o===a.dimensionsDefine,p=d?ensureSourceDimNameMap(a):createDimNameMap(o),f=n.encodeDefine;!f&&n.encodeDefaulter&&(f=n.encodeDefaulter(a,c));for(var g=createHashMap(f),y=new CtorInt32Array$1(c),v=0;v<y.length;v++)y[v]=-1;function _(P){var D=y[P];if(D<0){var L=o[P],R=isObject$3(L)?L:{name:L},O=new SeriesDimensionDefine$1,N=R.name;N!=null&&p.get(N)!=null&&(O.name=O.displayName=N),R.type!=null&&(O.type=R.type),R.displayName!=null&&(O.displayName=R.displayName);var V=u.length;return y[P]=V,O.storeDimIndex=P,u.push(O),O}return u[D]}if(!h)for(var v=0;v<c;v++)_(v);g.each(function(P,D){var L=normalizeToArray(P).slice();if(L.length===1&&!isString(L[0])&&L[0]<0){g.set(D,!1);return}var R=g.set(D,[]);each$f(L,function(O,N){var V=isString(O)?p.get(O):O;V!=null&&V<c&&(R[N]=V,S(_(V),D,N))})});var x=0;each$f(r,function(P){var D,L,R,O;if(isString(P))D=P,O={};else{O=P,D=O.name;var N=O.ordinalMeta;O.ordinalMeta=null,O=extend({},O),O.ordinalMeta=N,L=O.dimsDef,R=O.otherDims,O.name=O.coordDim=O.coordDimIndex=O.dimsDef=O.otherDims=null}var V=g.get(D);if(V!==!1){if(V=normalizeToArray(V),!V.length)for(var B=0;B<(L&&L.length||1);B++){for(;x<c&&_(x).coordDim!=null;)x++;x<c&&V.push(x++)}each$f(V,function(G,F){var z=_(G);if(d&&O.type!=null&&(z.type=O.type),S(defaults(z,O),D,F),z.name==null&&L){var H=L[F];!isObject$3(H)&&(H={name:H}),z.name=z.displayName=H.name,z.defaultTooltip=H.defaultTooltip}R&&defaults(z.otherDims,R)})}});function S(P,D,L){VISUAL_DIMENSIONS.get(D)!=null?P.otherDims[D]=L:(P.coordDim=D,P.coordDimIndex=L,l.set(D,!0))}var T=n.generateCoord,M=n.generateCoordCount,b=M!=null;M=T?M||1:0;var A=T||"value";function I(P){P.name==null&&(P.name=P.coordDim)}if(h)each$f(u,function(P){I(P)}),u.sort(function(P,D){return P.storeDimIndex-D.storeDimIndex});else for(var w=0;w<c;w++){var C=_(w),E=C.coordDim;E==null&&(C.coordDim=genCoordDimName(A,l,b),C.coordDimIndex=0,(!T||M<=0)&&(C.isExtraCoord=!0),M--),I(C),C.type==null&&(guessOrdinal(a,w)===BE_ORDINAL.Must||C.isExtraCoord&&(C.otherDims.itemName!=null||C.otherDims.seriesName!=null))&&(C.type="ordinal")}return removeDuplication(u),new SeriesDataSchema({source:a,dimensions:u,fullDimensionCount:c,dimensionOmitted:h})}function removeDuplication(a){for(var n=createHashMap(),r=0;r<a.length;r++){var o=a[r],l=o.name,u=n.get(l)||0;u>0&&(o.name=l+(u-1)),u++,n.set(l,u)}}function getDimCount(a,n,r,o){var l=Math.max(a.dimensionsDetectedCount||1,n.length,r.length,o||0);return each$f(n,function(u){var c;isObject$3(u)&&(c=u.dimsDef)&&(l=Math.max(l,c.length))}),l}function genCoordDimName(a,n,r){if(r||n.hasKey(a)){for(var o=0;n.hasKey(a+o);)o++;a+=o}return n.set(a,!0),a}var CoordSysInfo=function(){function a(n){this.coordSysDims=[],this.axisMap=createHashMap(),this.categoryAxisMap=createHashMap(),this.coordSysName=n}return a}();function getCoordSysInfoBySeries(a){var n=a.get("coordinateSystem"),r=new CoordSysInfo(n),o=fetchers[n];if(o)return o(a,r,r.axisMap,r.categoryAxisMap),r}var fetchers={cartesian2d:function(a,n,r,o){var l=a.getReferringComponents("xAxis",SINGLE_REFERRING).models[0],u=a.getReferringComponents("yAxis",SINGLE_REFERRING).models[0];{if(!l)throw new Error('xAxis "'+retrieve(a.get("xAxisIndex"),a.get("xAxisId"),0)+'" not found');if(!u)throw new Error('yAxis "'+retrieve(a.get("xAxisIndex"),a.get("yAxisId"),0)+'" not found')}n.coordSysDims=["x","y"],r.set("x",l),r.set("y",u),isCategory(l)&&(o.set("x",l),n.firstCategoryDimIndex=0),isCategory(u)&&(o.set("y",u),n.firstCategoryDimIndex==null&&(n.firstCategoryDimIndex=1))},singleAxis:function(a,n,r,o){var l=a.getReferringComponents("singleAxis",SINGLE_REFERRING).models[0];if(!l)throw new Error("singleAxis should be specified.");n.coordSysDims=["single"],r.set("single",l),isCategory(l)&&(o.set("single",l),n.firstCategoryDimIndex=0)},polar:function(a,n,r,o){var l=a.getReferringComponents("polar",SINGLE_REFERRING).models[0],u=l.findAxisModel("radiusAxis"),c=l.findAxisModel("angleAxis");{if(!c)throw new Error("angleAxis option not found");if(!u)throw new Error("radiusAxis option not found")}n.coordSysDims=["radius","angle"],r.set("radius",u),r.set("angle",c),isCategory(u)&&(o.set("radius",u),n.firstCategoryDimIndex=0),isCategory(c)&&(o.set("angle",c),n.firstCategoryDimIndex==null&&(n.firstCategoryDimIndex=1))},geo:function(a,n,r,o){n.coordSysDims=["lng","lat"]},parallel:function(a,n,r,o){var l=a.ecModel,u=l.getComponent("parallel",a.get("parallelIndex")),c=n.coordSysDims=u.dimensions.slice();each$f(u.parallelAxisIndex,function(h,d){var p=l.getComponent("parallelAxis",h),f=c[d];r.set(f,p),isCategory(p)&&(o.set(f,p),n.firstCategoryDimIndex==null&&(n.firstCategoryDimIndex=d))})}};function isCategory(a){return a.get("type")==="category"}function enableDataStack(a,n,r){r=r||{};var o=r.byIndex,l=r.stackedCoordDimension,u,c,h;isLegacyDimensionsInput(n)?u=n:(c=n.schema,u=c.dimensions,h=n.store);var d=!!(a&&a.get("stack")),p,f,g,y;if(each$f(u,function(M,b){isString(M)&&(u[b]=M={name:M}),d&&!M.isExtraCoord&&(!o&&!p&&M.ordinalMeta&&(p=M),!f&&M.type!=="ordinal"&&M.type!=="time"&&(!l||l===M.coordDim)&&(f=M))}),f&&!o&&!p&&(o=!0),f){g="__\0ecstackresult_"+a.id,y="__\0ecstackedover_"+a.id,p&&(p.createInvertedIndices=!0);var v=f.coordDim,_=f.type,x=0;each$f(u,function(M){M.coordDim===v&&x++});var S={name:g,coordDim:v,coordDimIndex:x,type:_,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:u.length},T={name:y,coordDim:y,coordDimIndex:x+1,type:_,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:u.length+1};c?(h&&(S.storeDimIndex=h.ensureCalculationDimension(y,_),T.storeDimIndex=h.ensureCalculationDimension(g,_)),c.appendCalculationDimension(S),c.appendCalculationDimension(T)):(u.push(S),u.push(T))}return{stackedDimension:f&&f.name,stackedByDimension:p&&p.name,isStackedByIndex:o,stackedOverDimension:y,stackResultDimension:g}}function isLegacyDimensionsInput(a){return!isSeriesDataSchema(a.schema)}function isDimensionStacked(a,n){return!!n&&n===a.getCalculationInfo("stackedDimension")}function getStackedDimension(a,n){return isDimensionStacked(a,n)?a.getCalculationInfo("stackResultDimension"):n}function getCoordSysDimDefs(a,n){var r=a.get("coordinateSystem"),o=CoordinateSystem.get(r),l;return n&&n.coordSysDims&&(l=map$1(n.coordSysDims,function(u){var c={name:u},h=n.axisMap.get(u);if(h){var d=h.get("type");c.type=getDimensionTypeByAxis(d)}return c})),l||(l=o&&(o.getDimensionsInfo?o.getDimensionsInfo():o.dimensions.slice())||["x","y"]),l}function injectOrdinalMeta(a,n,r){var o,l;return r&&each$f(a,function(u,c){var h=u.coordDim,d=r.categoryAxisMap.get(h);d&&(o==null&&(o=c),u.ordinalMeta=d.getOrdinalMeta(),n&&(u.createInvertedIndices=!0)),u.otherDims.itemName!=null&&(l=!0)}),!l&&o!=null&&(a[o].otherDims.itemName=0),o}function createSeriesData(a,n,r){r=r||{};var o=n.getSourceManager(),l,u=!1;a?(u=!0,l=createSourceFromSeriesDataOption(a)):(l=o.getSource(),u=l.sourceFormat===SOURCE_FORMAT_ORIGINAL);var c=getCoordSysInfoBySeries(n),h=getCoordSysDimDefs(n,c),d=r.useEncodeDefaulter,p=isFunction(d)?d:d?curry$1(makeSeriesEncodeForAxisCoordSys,h,n):null,f={coordDimensions:h,generateCoord:r.generateCoord,encodeDefine:n.getEncode(),encodeDefaulter:p,canOmitUnusedDimensions:!u},g=prepareSeriesDataSchema(l,f),y=injectOrdinalMeta(g.dimensions,r.createInvertedIndices,c),v=u?null:o.getSharedDataStore(g),_=enableDataStack(n,{schema:g,store:v}),x=new SeriesData$1(g,n);x.setCalculationInfo(_);var S=y!=null&&isNeedCompleteOrdinalData(l)?function(T,M,b,A){return A===y?b:this.defaultDimValueGetter(T,M,b,A)}:null;return x.hasItemOption=!1,x.initData(u?l:v,null,S),x}function isNeedCompleteOrdinalData(a){if(a.sourceFormat===SOURCE_FORMAT_ORIGINAL){var n=firstDataNotNull(a.data||[]);return!isArray$1(getDataItemValue(n))}}function firstDataNotNull(a){for(var n=0;n<a.length&&a[n]==null;)n++;return a[n]}var Scale=function(){function a(n){this._setting=n||{},this._extent=[1/0,-1/0]}return a.prototype.getSetting=function(n){return this._setting[n]},a.prototype.unionExtent=function(n){var r=this._extent;n[0]<r[0]&&(r[0]=n[0]),n[1]>r[1]&&(r[1]=n[1])},a.prototype.unionExtentFromData=function(n,r){this.unionExtent(n.getApproximateExtent(r))},a.prototype.getExtent=function(){return this._extent.slice()},a.prototype.setExtent=function(n,r){var o=this._extent;isNaN(n)||(o[0]=n),isNaN(r)||(o[1]=r)},a.prototype.isInExtentRange=function(n){return this._extent[0]<=n&&this._extent[1]>=n},a.prototype.isBlank=function(){return this._isBlank},a.prototype.setBlank=function(n){this._isBlank=n},a}();enableClassManagement(Scale);const Scale$1=Scale;var uidBase=0,OrdinalMeta=function(){function a(n){this.categories=n.categories||[],this._needCollect=n.needCollect,this._deduplication=n.deduplication,this.uid=++uidBase}return a.createByAxisModel=function(n){var r=n.option,o=r.data,l=o&&map$1(o,getName);return new a({categories:l,needCollect:!l,deduplication:r.dedplication!==!1})},a.prototype.getOrdinal=function(n){return this._getOrCreateMap().get(n)},a.prototype.parseAndCollect=function(n){var r,o=this._needCollect;if(!isString(n)&&!o)return n;if(o&&!this._deduplication)return r=this.categories.length,this.categories[r]=n,r;var l=this._getOrCreateMap();return r=l.get(n),r==null&&(o?(r=this.categories.length,this.categories[r]=n,l.set(n,r)):r=NaN),r},a.prototype._getOrCreateMap=function(){return this._map||(this._map=createHashMap(this.categories))},a}();function getName(a){return isObject$3(a)&&a.value!=null?a.value:a+""}const OrdinalMeta$1=OrdinalMeta;function isValueNice(a){var n=Math.pow(10,quantityExponent(Math.abs(a))),r=Math.abs(a/n);return r===0||r===1||r===2||r===3||r===5}function isIntervalOrLogScale(a){return a.type==="interval"||a.type==="log"}function intervalScaleNiceTicks(a,n,r,o){var l={},u=a[1]-a[0],c=l.interval=nice(u/n,!0);r!=null&&c<r&&(c=l.interval=r),o!=null&&c>o&&(c=l.interval=o);var h=l.intervalPrecision=getIntervalPrecision(c),d=l.niceTickExtent=[round$3(Math.ceil(a[0]/c)*c,h),round$3(Math.floor(a[1]/c)*c,h)];return fixExtent(d,a),l}function increaseInterval(a){var n=Math.pow(10,quantityExponent(a)),r=a/n;return r?r===2?r=3:r===3?r=5:r*=2:r=1,round$3(r*n)}function getIntervalPrecision(a){return getPrecision(a)+2}function clamp(a,n,r){a[n]=Math.max(Math.min(a[n],r[1]),r[0])}function fixExtent(a,n){!isFinite(a[0])&&(a[0]=n[0]),!isFinite(a[1])&&(a[1]=n[1]),clamp(a,0,n),clamp(a,1,n),a[0]>a[1]&&(a[0]=a[1])}function contain$1(a,n){return a>=n[0]&&a<=n[1]}function normalize$2(a,n){return n[1]===n[0]?.5:(a-n[0])/(n[1]-n[0])}function scale(a,n){return a*(n[1]-n[0])+n[0]}var OrdinalScale=function(a){__extends(n,a);function n(r){var o=a.call(this,r)||this;o.type="ordinal";var l=o.getSetting("ordinalMeta");return l||(l=new OrdinalMeta$1({})),isArray$1(l)&&(l=new OrdinalMeta$1({categories:map$1(l,function(u){return isObject$3(u)?u.value:u})})),o._ordinalMeta=l,o._extent=o.getSetting("extent")||[0,l.categories.length-1],o}return n.prototype.parse=function(r){return r==null?NaN:isString(r)?this._ordinalMeta.getOrdinal(r):Math.round(r)},n.prototype.contain=function(r){return r=this.parse(r),contain$1(r,this._extent)&&this._ordinalMeta.categories[r]!=null},n.prototype.normalize=function(r){return r=this._getTickNumber(this.parse(r)),normalize$2(r,this._extent)},n.prototype.scale=function(r){return r=Math.round(scale(r,this._extent)),this.getRawOrdinalNumber(r)},n.prototype.getTicks=function(){for(var r=[],o=this._extent,l=o[0];l<=o[1];)r.push({value:l}),l++;return r},n.prototype.getMinorTicks=function(r){},n.prototype.setSortInfo=function(r){if(r==null){this._ordinalNumbersByTick=this._ticksByOrdinalNumber=null;return}for(var o=r.ordinalNumbers,l=this._ordinalNumbersByTick=[],u=this._ticksByOrdinalNumber=[],c=0,h=this._ordinalMeta.categories.length,d=Math.min(h,o.length);c<d;++c){var p=o[c];l[c]=p,u[p]=c}for(var f=0;c<h;++c){for(;u[f]!=null;)f++;l.push(f),u[f]=c}},n.prototype._getTickNumber=function(r){var o=this._ticksByOrdinalNumber;return o&&r>=0&&r<o.length?o[r]:r},n.prototype.getRawOrdinalNumber=function(r){var o=this._ordinalNumbersByTick;return o&&r>=0&&r<o.length?o[r]:r},n.prototype.getLabel=function(r){if(!this.isBlank()){var o=this.getRawOrdinalNumber(r.value),l=this._ordinalMeta.categories[o];return l==null?"":l+""}},n.prototype.count=function(){return this._extent[1]-this._extent[0]+1},n.prototype.unionExtentFromData=function(r,o){this.unionExtent(r.getApproximateExtent(o))},n.prototype.isInExtentRange=function(r){return r=this._getTickNumber(r),this._extent[0]<=r&&this._extent[1]>=r},n.prototype.getOrdinalMeta=function(){return this._ordinalMeta},n.prototype.calcNiceTicks=function(){},n.prototype.calcNiceExtent=function(){},n.type="ordinal",n}(Scale$1);Scale$1.registerClass(OrdinalScale);const OrdinalScale$1=OrdinalScale;var roundNumber=round$3,IntervalScale=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type="interval",r._interval=0,r._intervalPrecision=2,r}return n.prototype.parse=function(r){return r},n.prototype.contain=function(r){return contain$1(r,this._extent)},n.prototype.normalize=function(r){return normalize$2(r,this._extent)},n.prototype.scale=function(r){return scale(r,this._extent)},n.prototype.setExtent=function(r,o){var l=this._extent;isNaN(r)||(l[0]=parseFloat(r)),isNaN(o)||(l[1]=parseFloat(o))},n.prototype.unionExtent=function(r){var o=this._extent;r[0]<o[0]&&(o[0]=r[0]),r[1]>o[1]&&(o[1]=r[1]),this.setExtent(o[0],o[1])},n.prototype.getInterval=function(){return this._interval},n.prototype.setInterval=function(r){this._interval=r,this._niceExtent=this._extent.slice(),this._intervalPrecision=getIntervalPrecision(r)},n.prototype.getTicks=function(r){var o=this._interval,l=this._extent,u=this._niceExtent,c=this._intervalPrecision,h=[];if(!o)return h;var d=1e4;l[0]<u[0]&&(r?h.push({value:roundNumber(u[0]-o,c)}):h.push({value:l[0]}));for(var p=u[0];p<=u[1]&&(h.push({value:p}),p=roundNumber(p+o,c),p!==h[h.length-1].value);)if(h.length>d)return[];var f=h.length?h[h.length-1].value:u[1];return l[1]>f&&(r?h.push({value:roundNumber(f+o,c)}):h.push({value:l[1]})),h},n.prototype.getMinorTicks=function(r){for(var o=this.getTicks(!0),l=[],u=this.getExtent(),c=1;c<o.length;c++){for(var h=o[c],d=o[c-1],p=0,f=[],g=h.value-d.value,y=g/r;p<r-1;){var v=roundNumber(d.value+(p+1)*y);v>u[0]&&v<u[1]&&f.push(v),p++}l.push(f)}return l},n.prototype.getLabel=function(r,o){if(r==null)return"";var l=o&&o.precision;l==null?l=getPrecision(r.value)||0:l==="auto"&&(l=this._intervalPrecision);var u=roundNumber(r.value,l,!0);return addCommas(u)},n.prototype.calcNiceTicks=function(r,o,l){r=r||5;var u=this._extent,c=u[1]-u[0];if(isFinite(c)){c<0&&(c=-c,u.reverse());var h=intervalScaleNiceTicks(u,r,o,l);this._intervalPrecision=h.intervalPrecision,this._interval=h.interval,this._niceExtent=h.niceTickExtent}},n.prototype.calcNiceExtent=function(r){var o=this._extent;if(o[0]===o[1])if(o[0]!==0){var l=Math.abs(o[0]);r.fixMax||(o[1]+=l/2),o[0]-=l/2}else o[1]=1;var u=o[1]-o[0];isFinite(u)||(o[0]=0,o[1]=1),this.calcNiceTicks(r.splitNumber,r.minInterval,r.maxInterval);var c=this._interval;r.fixMin||(o[0]=roundNumber(Math.floor(o[0]/c)*c)),r.fixMax||(o[1]=roundNumber(Math.ceil(o[1]/c)*c))},n.prototype.setNiceExtent=function(r,o){this._niceExtent=[r,o]},n.type="interval",n}(Scale$1);Scale$1.registerClass(IntervalScale);const IntervalScale$1=IntervalScale;var supportFloat32Array=typeof Float32Array<"u",Float32ArrayCtor=supportFloat32Array?Float32Array:Array;function createFloat32Array(a){return isArray$1(a)?supportFloat32Array?new Float32Array(a):a:new Float32ArrayCtor(a)}var STACK_PREFIX="__ec_stack_";function getSeriesStackId$1(a){return a.get("stack")||STACK_PREFIX+a.seriesIndex}function getAxisKey$1(a){return a.dim+a.index}function getLayoutOnAxis(a){var n=[],r=a.axis,o="axis0";if(r.type==="category"){for(var l=r.getBandWidth(),u=0;u<a.count;u++)n.push(defaults({bandWidth:l,axisKey:o,stackId:STACK_PREFIX+u},a));for(var c=doCalBarWidthAndOffset(n),h=[],u=0;u<a.count;u++){var d=c[o][STACK_PREFIX+u];d.offsetCenter=d.offset+d.width/2,h.push(d)}return h}}function prepareLayoutBarSeries(a,n){var r=[];return n.eachSeriesByType(a,function(o){isOnCartesian(o)&&r.push(o)}),r}function getValueAxesMinGaps(a){var n={};each$f(a,function(d){var p=d.coordinateSystem,f=p.getBaseAxis();if(!(f.type!=="time"&&f.type!=="value"))for(var g=d.getData(),y=f.dim+"_"+f.index,v=g.getDimensionIndex(g.mapDimension(f.dim)),_=g.getStore(),x=0,S=_.count();x<S;++x){var T=_.get(v,x);n[y]?n[y].push(T):n[y]=[T]}});var r={};for(var o in n)if(n.hasOwnProperty(o)){var l=n[o];if(l){l.sort(function(d,p){return d-p});for(var u=null,c=1;c<l.length;++c){var h=l[c]-l[c-1];h>0&&(u=u===null?h:Math.min(u,h))}r[o]=u}}return r}function makeColumnLayout(a){var n=getValueAxesMinGaps(a),r=[];return each$f(a,function(o){var l=o.coordinateSystem,u=l.getBaseAxis(),c=u.getExtent(),h;if(u.type==="category")h=u.getBandWidth();else if(u.type==="value"||u.type==="time"){var d=u.dim+"_"+u.index,p=n[d],f=Math.abs(c[1]-c[0]),g=u.scale.getExtent(),y=Math.abs(g[1]-g[0]);h=p?f/y*p:f}else{var v=o.getData();h=Math.abs(c[1]-c[0])/v.count()}var _=parsePercent(o.get("barWidth"),h),x=parsePercent(o.get("barMaxWidth"),h),S=parsePercent(o.get("barMinWidth")||(isInLargeMode(o)?.5:1),h),T=o.get("barGap"),M=o.get("barCategoryGap");r.push({bandWidth:h,barWidth:_,barMaxWidth:x,barMinWidth:S,barGap:T,barCategoryGap:M,axisKey:getAxisKey$1(u),stackId:getSeriesStackId$1(o)})}),doCalBarWidthAndOffset(r)}function doCalBarWidthAndOffset(a){var n={};each$f(a,function(o,l){var u=o.axisKey,c=o.bandWidth,h=n[u]||{bandWidth:c,remainedWidth:c,autoWidthCount:0,categoryGap:null,gap:"20%",stacks:{}},d=h.stacks;n[u]=h;var p=o.stackId;d[p]||h.autoWidthCount++,d[p]=d[p]||{width:0,maxWidth:0};var f=o.barWidth;f&&!d[p].width&&(d[p].width=f,f=Math.min(h.remainedWidth,f),h.remainedWidth-=f);var g=o.barMaxWidth;g&&(d[p].maxWidth=g);var y=o.barMinWidth;y&&(d[p].minWidth=y);var v=o.barGap;v!=null&&(h.gap=v);var _=o.barCategoryGap;_!=null&&(h.categoryGap=_)});var r={};return each$f(n,function(o,l){r[l]={};var u=o.stacks,c=o.bandWidth,h=o.categoryGap;if(h==null){var d=keys(u).length;h=Math.max(35-d*4,15)+"%"}var p=parsePercent(h,c),f=parsePercent(o.gap,1),g=o.remainedWidth,y=o.autoWidthCount,v=(g-p)/(y+(y-1)*f);v=Math.max(v,0),each$f(u,function(T){var M=T.maxWidth,b=T.minWidth;if(T.width){var A=T.width;M&&(A=Math.min(A,M)),b&&(A=Math.max(A,b)),T.width=A,g-=A+f*A,y--}else{var A=v;M&&M<A&&(A=Math.min(M,g)),b&&b>A&&(A=b),A!==v&&(T.width=A,g-=A+f*A,y--)}}),v=(g-p)/(y+(y-1)*f),v=Math.max(v,0);var _=0,x;each$f(u,function(T,M){T.width||(T.width=v),x=T,_+=T.width*(1+f)}),x&&(_-=x.width*f);var S=-_/2;each$f(u,function(T,M){r[l][M]=r[l][M]||{bandWidth:c,offset:S,width:T.width},S+=T.width*(1+f)})}),r}function retrieveColumnLayout(a,n,r){if(a&&n){var o=a[getAxisKey$1(n)];return o!=null&&r!=null?o[getSeriesStackId$1(r)]:o}}function layout$3(a,n){var r=prepareLayoutBarSeries(a,n),o=makeColumnLayout(r);each$f(r,function(l){var u=l.getData(),c=l.coordinateSystem,h=c.getBaseAxis(),d=getSeriesStackId$1(l),p=o[getAxisKey$1(h)][d],f=p.offset,g=p.width;u.setLayout({bandWidth:p.bandWidth,offset:f,size:g})})}function createProgressiveLayout(a){return{seriesType:a,plan:createRenderPlanner(),reset:function(n){if(isOnCartesian(n)){var r=n.getData(),o=n.coordinateSystem,l=o.getBaseAxis(),u=o.getOtherAxis(l),c=r.getDimensionIndex(r.mapDimension(u.dim)),h=r.getDimensionIndex(r.mapDimension(l.dim)),d=n.get("showBackground",!0),p=r.mapDimension(u.dim),f=r.getCalculationInfo("stackResultDimension"),g=isDimensionStacked(r,p)&&!!r.getCalculationInfo("stackedOnSeries"),y=u.isHorizontal(),v=getValueAxisStart(l,u),_=isInLargeMode(n),x=n.get("barMinHeight")||0,S=f&&r.getDimensionIndex(f),T=r.getLayout("size"),M=r.getLayout("offset");return{progress:function(b,A){for(var I=b.count,w=_&&createFloat32Array(I*3),C=_&&d&&createFloat32Array(I*3),E=_&&createFloat32Array(I),P=o.master.getRect(),D=y?P.width:P.height,L,R=A.getStore(),O=0;(L=b.next())!=null;){var N=R.get(g?S:c,L),V=R.get(h,L),B=v,G=void 0;g&&(G=+N-R.get(c,L));var F=void 0,z=void 0,H=void 0,U=void 0;if(y){var Y=o.dataToPoint([N,V]);if(g){var Z=o.dataToPoint([G,V]);B=Z[0]}F=B,z=Y[1]+M,H=Y[0]-B,U=T,Math.abs(H)<x&&(H=(H<0?-1:1)*x)}else{var Y=o.dataToPoint([V,N]);if(g){var Z=o.dataToPoint([V,G]);B=Z[1]}F=Y[0]+M,z=B,H=T,U=Y[1]-B,Math.abs(U)<x&&(U=(U<=0?-1:1)*x)}_?(w[O]=F,w[O+1]=z,w[O+2]=y?H:U,C&&(C[O]=y?P.x:F,C[O+1]=y?z:P.y,C[O+2]=D),E[L]=L):A.setItemLayout(L,{x:F,y:z,width:H,height:U}),O+=3}_&&A.setLayout({largePoints:w,largeDataIndices:E,largeBackgroundPoints:C,valueAxisHorizontal:y})}}}}}}function isOnCartesian(a){return a.coordinateSystem&&a.coordinateSystem.type==="cartesian2d"}function isInLargeMode(a){return a.pipelineContext&&a.pipelineContext.large}function getValueAxisStart(a,n){var r=n.model.get("startValue");return r||(r=0),n.toGlobalCoord(n.dataToCoord(n.type==="log"?r>0?r:1:r))}var bisect=function(a,n,r,o){for(;r<o;){var l=r+o>>>1;a[l][1]<n?r=l+1:o=l}return r},TimeScale=function(a){__extends(n,a);function n(r){var o=a.call(this,r)||this;return o.type="time",o}return n.prototype.getLabel=function(r){var o=this.getSetting("useUTC");return format$1(r.value,fullLeveledFormatter[getDefaultFormatPrecisionOfInterval(getPrimaryTimeUnit(this._minLevelUnit))]||fullLeveledFormatter.second,o,this.getSetting("locale"))},n.prototype.getFormattedLabel=function(r,o,l){var u=this.getSetting("useUTC"),c=this.getSetting("locale");return leveledFormat(r,o,l,c,u)},n.prototype.getTicks=function(){var r=this._interval,o=this._extent,l=[];if(!r)return l;l.push({value:o[0],level:0});var u=this.getSetting("useUTC"),c=getIntervalTicks(this._minLevelUnit,this._approxInterval,u,o);return l=l.concat(c),l.push({value:o[1],level:0}),l},n.prototype.calcNiceExtent=function(r){var o=this._extent;if(o[0]===o[1]&&(o[0]-=ONE_DAY,o[1]+=ONE_DAY),o[1]===-1/0&&o[0]===1/0){var l=new Date;o[1]=+new Date(l.getFullYear(),l.getMonth(),l.getDate()),o[0]=o[1]-ONE_DAY}this.calcNiceTicks(r.splitNumber,r.minInterval,r.maxInterval)},n.prototype.calcNiceTicks=function(r,o,l){r=r||10;var u=this._extent,c=u[1]-u[0];this._approxInterval=c/r,o!=null&&this._approxInterval<o&&(this._approxInterval=o),l!=null&&this._approxInterval>l&&(this._approxInterval=l);var h=scaleIntervals.length,d=Math.min(bisect(scaleIntervals,this._approxInterval,0,h),h-1);this._interval=scaleIntervals[d][1],this._minLevelUnit=scaleIntervals[Math.max(d-1,0)][0]},n.prototype.parse=function(r){return isNumber(r)?r:+parseDate(r)},n.prototype.contain=function(r){return contain$1(this.parse(r),this._extent)},n.prototype.normalize=function(r){return normalize$2(this.parse(r),this._extent)},n.prototype.scale=function(r){return scale(r,this._extent)},n.type="time",n}(IntervalScale$1),scaleIntervals=[["second",ONE_SECOND],["minute",ONE_MINUTE],["hour",ONE_HOUR],["quarter-day",ONE_HOUR*6],["half-day",ONE_HOUR*12],["day",ONE_DAY*1.2],["half-week",ONE_DAY*3.5],["week",ONE_DAY*7],["month",ONE_DAY*31],["quarter",ONE_DAY*95],["half-year",ONE_YEAR/2],["year",ONE_YEAR]];function isUnitValueSame(a,n,r,o){var l=parseDate(n),u=parseDate(r),c=function(_){return getUnitValue(l,_,o)===getUnitValue(u,_,o)},h=function(){return c("year")},d=function(){return h()&&c("month")},p=function(){return d()&&c("day")},f=function(){return p()&&c("hour")},g=function(){return f()&&c("minute")},y=function(){return g()&&c("second")},v=function(){return y()&&c("millisecond")};switch(a){case"year":return h();case"month":return d();case"day":return p();case"hour":return f();case"minute":return g();case"second":return y();case"millisecond":return v()}}function getDateInterval(a,n){return a/=ONE_DAY,a>16?16:a>7.5?7:a>3.5?4:a>1.5?2:1}function getMonthInterval(a){var n=30*ONE_DAY;return a/=n,a>6?6:a>3?3:a>2?2:1}function getHourInterval(a){return a/=ONE_HOUR,a>12?12:a>6?6:a>3.5?4:a>2?2:1}function getMinutesAndSecondsInterval(a,n){return a/=n?ONE_MINUTE:ONE_SECOND,a>30?30:a>20?20:a>15?15:a>10?10:a>5?5:a>2?2:1}function getMillisecondsInterval(a){return nice(a,!0)}function getFirstTimestampOfUnit(a,n,r){var o=new Date(a);switch(getPrimaryTimeUnit(n)){case"year":case"month":o[monthSetterName(r)](0);case"day":o[dateSetterName(r)](1);case"hour":o[hoursSetterName(r)](0);case"minute":o[minutesSetterName(r)](0);case"second":o[secondsSetterName(r)](0),o[millisecondsSetterName(r)](0)}return o.getTime()}function getIntervalTicks(a,n,r,o){var l=1e4,u=timeUnits,c=0;function h(D,L,R,O,N,V,B){for(var G=new Date(L),F=L,z=G[O]();F<R&&F<=o[1];)B.push({value:F}),z+=D,G[N](z),F=G.getTime();B.push({value:F,notAdd:!0})}function d(D,L,R){var O=[],N=!L.length;if(!isUnitValueSame(getPrimaryTimeUnit(D),o[0],o[1],r)){N&&(L=[{value:getFirstTimestampOfUnit(new Date(o[0]),D,r)},{value:o[1]}]);for(var V=0;V<L.length-1;V++){var B=L[V].value,G=L[V+1].value;if(B!==G){var F=void 0,z=void 0,H=void 0,U=!1;switch(D){case"year":F=Math.max(1,Math.round(n/ONE_DAY/365)),z=fullYearGetterName(r),H=fullYearSetterName(r);break;case"half-year":case"quarter":case"month":F=getMonthInterval(n),z=monthGetterName(r),H=monthSetterName(r);break;case"week":case"half-week":case"day":F=getDateInterval(n),z=dateGetterName(r),H=dateSetterName(r),U=!0;break;case"half-day":case"quarter-day":case"hour":F=getHourInterval(n),z=hoursGetterName(r),H=hoursSetterName(r);break;case"minute":F=getMinutesAndSecondsInterval(n,!0),z=minutesGetterName(r),H=minutesSetterName(r);break;case"second":F=getMinutesAndSecondsInterval(n,!1),z=secondsGetterName(r),H=secondsSetterName(r);break;case"millisecond":F=getMillisecondsInterval(n),z=millisecondsGetterName(r),H=millisecondsSetterName(r);break}h(F,B,G,z,H,U,O),D==="year"&&R.length>1&&V===0&&R.unshift({value:R[0].value-F})}}for(var V=0;V<O.length;V++)R.push(O[V]);return O}}for(var p=[],f=[],g=0,y=0,v=0;v<u.length&&c++<l;++v){var _=getPrimaryTimeUnit(u[v]);if(isPrimaryTimeUnit(u[v])){d(u[v],p[p.length-1]||[],f);var x=u[v+1]?getPrimaryTimeUnit(u[v+1]):null;if(_!==x){if(f.length){y=g,f.sort(function(D,L){return D.value-L.value});for(var S=[],T=0;T<f.length;++T){var M=f[T].value;(T===0||f[T-1].value!==M)&&(S.push(f[T]),M>=o[0]&&M<=o[1]&&g++)}var b=(o[1]-o[0])/n;if(g>b*1.5&&y>b/1.5||(p.push(S),g>b||a===u[v]))break}f=[]}}}c>=l&&warn("Exceed safe limit.");for(var A=filter(map$1(p,function(L){return filter(L,function(R){return R.value>=o[0]&&R.value<=o[1]&&!R.notAdd})}),function(L){return L.length>0}),I=[],w=A.length-1,v=0;v<A.length;++v)for(var C=A[v],E=0;E<C.length;++E)I.push({value:C[E].value,level:w-v});I.sort(function(D,L){return D.value-L.value});for(var P=[],v=0;v<I.length;++v)(v===0||I[v].value!==I[v-1].value)&&P.push(I[v]);return P}Scale$1.registerClass(TimeScale);const TimeScale$1=TimeScale;var scaleProto=Scale$1.prototype,intervalScaleProto=IntervalScale$1.prototype,roundingErrorFix=round$3,mathFloor$1=Math.floor,mathCeil$1=Math.ceil,mathPow$1=Math.pow,mathLog$1=Math.log,LogScale=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type="log",r.base=10,r._originalScale=new IntervalScale$1,r._interval=0,r}return n.prototype.getTicks=function(r){var o=this._originalScale,l=this._extent,u=o.getExtent(),c=intervalScaleProto.getTicks.call(this,r);return map$1(c,function(h){var d=h.value,p=round$3(mathPow$1(this.base,d));return p=d===l[0]&&this._fixMin?fixRoundingError(p,u[0]):p,p=d===l[1]&&this._fixMax?fixRoundingError(p,u[1]):p,{value:p}},this)},n.prototype.setExtent=function(r,o){var l=mathLog$1(this.base);r=mathLog$1(Math.max(0,r))/l,o=mathLog$1(Math.max(0,o))/l,intervalScaleProto.setExtent.call(this,r,o)},n.prototype.getExtent=function(){var r=this.base,o=scaleProto.getExtent.call(this);o[0]=mathPow$1(r,o[0]),o[1]=mathPow$1(r,o[1]);var l=this._originalScale,u=l.getExtent();return this._fixMin&&(o[0]=fixRoundingError(o[0],u[0])),this._fixMax&&(o[1]=fixRoundingError(o[1],u[1])),o},n.prototype.unionExtent=function(r){this._originalScale.unionExtent(r);var o=this.base;r[0]=mathLog$1(r[0])/mathLog$1(o),r[1]=mathLog$1(r[1])/mathLog$1(o),scaleProto.unionExtent.call(this,r)},n.prototype.unionExtentFromData=function(r,o){this.unionExtent(r.getApproximateExtent(o))},n.prototype.calcNiceTicks=function(r){r=r||10;var o=this._extent,l=o[1]-o[0];if(!(l===1/0||l<=0)){var u=quantity(l),c=r/l*u;for(c<=.5&&(u*=10);!isNaN(u)&&Math.abs(u)<1&&Math.abs(u)>0;)u*=10;var h=[round$3(mathCeil$1(o[0]/u)*u),round$3(mathFloor$1(o[1]/u)*u)];this._interval=u,this._niceExtent=h}},n.prototype.calcNiceExtent=function(r){intervalScaleProto.calcNiceExtent.call(this,r),this._fixMin=r.fixMin,this._fixMax=r.fixMax},n.prototype.parse=function(r){return r},n.prototype.contain=function(r){return r=mathLog$1(r)/mathLog$1(this.base),contain$1(r,this._extent)},n.prototype.normalize=function(r){return r=mathLog$1(r)/mathLog$1(this.base),normalize$2(r,this._extent)},n.prototype.scale=function(r){return r=scale(r,this._extent),mathPow$1(this.base,r)},n.type="log",n}(Scale$1),proto=LogScale.prototype;proto.getMinorTicks=intervalScaleProto.getMinorTicks;proto.getLabel=intervalScaleProto.getLabel;function fixRoundingError(a,n){return roundingErrorFix(a,getPrecision(n))}Scale$1.registerClass(LogScale);const LogScale$1=LogScale;var ScaleRawExtentInfo=function(){function a(n,r,o){this._prepareParams(n,r,o)}return a.prototype._prepareParams=function(n,r,o){o[1]<o[0]&&(o=[NaN,NaN]),this._dataMin=o[0],this._dataMax=o[1];var l=this._isOrdinal=n.type==="ordinal";this._needCrossZero=n.type==="interval"&&r.getNeedCrossZero&&r.getNeedCrossZero();var u=r.get("min",!0);u==null&&(u=r.get("startValue",!0));var c=this._modelMinRaw=u;isFunction(c)?this._modelMinNum=parseAxisModelMinMax(n,c({min:o[0],max:o[1]})):c!=="dataMin"&&(this._modelMinNum=parseAxisModelMinMax(n,c));var h=this._modelMaxRaw=r.get("max",!0);if(isFunction(h)?this._modelMaxNum=parseAxisModelMinMax(n,h({min:o[0],max:o[1]})):h!=="dataMax"&&(this._modelMaxNum=parseAxisModelMinMax(n,h)),l)this._axisDataLen=r.getCategories().length;else{var d=r.get("boundaryGap"),p=isArray$1(d)?d:[d||0,d||0];typeof p[0]=="boolean"||typeof p[1]=="boolean"?(console.warn('Boolean type for boundaryGap is only allowed for ordinal axis. Please use string in percentage instead, e.g., "20%". Currently, boundaryGap is set to be 0.'),this._boundaryGapInner=[0,0]):this._boundaryGapInner=[parsePercent$1(p[0],1),parsePercent$1(p[1],1)]}},a.prototype.calculate=function(){var n=this._isOrdinal,r=this._dataMin,o=this._dataMax,l=this._axisDataLen,u=this._boundaryGapInner,c=n?null:o-r||Math.abs(r),h=this._modelMinRaw==="dataMin"?r:this._modelMinNum,d=this._modelMaxRaw==="dataMax"?o:this._modelMaxNum,p=h!=null,f=d!=null;h==null&&(h=n?l?0:NaN:r-u[0]*c),d==null&&(d=n?l?l-1:NaN:o+u[1]*c),(h==null||!isFinite(h))&&(h=NaN),(d==null||!isFinite(d))&&(d=NaN);var g=eqNaN(h)||eqNaN(d)||n&&!l;this._needCrossZero&&(h>0&&d>0&&!p&&(h=0),h<0&&d<0&&!f&&(d=0));var y=this._determinedMin,v=this._determinedMax;return y!=null&&(h=y,p=!0),v!=null&&(d=v,f=!0),{min:h,max:d,minFixed:p,maxFixed:f,isBlank:g}},a.prototype.modifyDataMinMax=function(n,r){assert(!this.frozen),this[DATA_MIN_MAX_ATTR[n]]=r},a.prototype.setDeterminedMinMax=function(n,r){var o=DETERMINED_MIN_MAX_ATTR[n];assert(!this.frozen&&this[o]==null),this[o]=r},a.prototype.freeze=function(){this.frozen=!0},a}(),DETERMINED_MIN_MAX_ATTR={min:"_determinedMin",max:"_determinedMax"},DATA_MIN_MAX_ATTR={min:"_dataMin",max:"_dataMax"};function ensureScaleRawExtentInfo(a,n,r){var o=a.rawExtentInfo;return o||(o=new ScaleRawExtentInfo(a,n,r),a.rawExtentInfo=o,o)}function parseAxisModelMinMax(a,n){return n==null?null:eqNaN(n)?NaN:a.parse(n)}function getScaleExtent(a,n){var r=a.type,o=ensureScaleRawExtentInfo(a,n,a.getExtent()).calculate();a.setBlank(o.isBlank);var l=o.min,u=o.max,c=n.ecModel;if(c&&r==="time"){var h=prepareLayoutBarSeries("bar",c),d=!1;if(each$f(h,function(g){d=d||g.getBaseAxis()===n.axis}),d){var p=makeColumnLayout(h),f=adjustScaleForOverflow(l,u,n,p);l=f.min,u=f.max}}return{extent:[l,u],fixMin:o.minFixed,fixMax:o.maxFixed}}function adjustScaleForOverflow(a,n,r,o){var l=r.axis.getExtent(),u=Math.abs(l[1]-l[0]),c=retrieveColumnLayout(o,r.axis);if(c===void 0)return{min:a,max:n};var h=1/0;each$f(c,function(v){h=Math.min(v.offset,h)});var d=-1/0;each$f(c,function(v){d=Math.max(v.offset+v.width,d)}),h=Math.abs(h),d=Math.abs(d);var p=h+d,f=n-a,g=1-(h+d)/u,y=f/g-f;return n+=y*(d/p),a-=y*(h/p),{min:a,max:n}}function niceScaleExtent(a,n){var r=n,o=getScaleExtent(a,r),l=o.extent,u=r.get("splitNumber");a instanceof LogScale$1&&(a.base=r.get("logBase"));var c=a.type,h=r.get("interval"),d=c==="interval"||c==="time";a.setExtent(l[0],l[1]),a.calcNiceExtent({splitNumber:u,fixMin:o.fixMin,fixMax:o.fixMax,minInterval:d?r.get("minInterval"):null,maxInterval:d?r.get("maxInterval"):null}),h!=null&&a.setInterval&&a.setInterval(h)}function createScaleByModel$1(a,n){if(n=n||a.get("type"),n)switch(n){case"category":return new OrdinalScale$1({ordinalMeta:a.getOrdinalMeta?a.getOrdinalMeta():a.getCategories(),extent:[1/0,-1/0]});case"time":return new TimeScale$1({locale:a.ecModel.getLocaleModel(),useUTC:a.ecModel.get("useUTC")});default:return new(Scale$1.getClass(n)||IntervalScale$1)}}function ifAxisCrossZero(a){var n=a.scale.getExtent(),r=n[0],o=n[1];return!(r>0&&o>0||r<0&&o<0)}function makeLabelFormatter(a){var n=a.getLabelModel().get("formatter"),r=a.type==="category"?a.scale.getExtent()[0]:null;return a.scale.type==="time"?function(o){return function(l,u){return a.scale.getFormattedLabel(l,u,o)}}(n):isString(n)?function(o){return function(l){var u=a.scale.getLabel(l),c=o.replace("{value}",u!=null?u:"");return c}}(n):isFunction(n)?function(o){return function(l,u){return r!=null&&(u=l.value-r),o(getAxisRawValue(a,l),u,l.level!=null?{level:l.level}:null)}}(n):function(o){return a.scale.getLabel(o)}}function getAxisRawValue(a,n){return a.type==="category"?a.scale.getLabel(n):n.value}function estimateLabelUnionRect(a){var n=a.model,r=a.scale;if(!(!n.get(["axisLabel","show"])||r.isBlank())){var o,l,u=r.getExtent();r instanceof OrdinalScale$1?l=r.count():(o=r.getTicks(),l=o.length);var c=a.getLabelModel(),h=makeLabelFormatter(a),d,p=1;l>40&&(p=Math.ceil(l/40));for(var f=0;f<l;f+=p){var g=o?o[f]:{value:u[0]+f},y=h(g,f),v=c.getTextRect(y),_=rotateTextRect(v,c.get("rotate")||0);d?d.union(_):d=_}return d}}function rotateTextRect(a,n){var r=n*Math.PI/180,o=a.width,l=a.height,u=o*Math.abs(Math.cos(r))+Math.abs(l*Math.sin(r)),c=o*Math.abs(Math.sin(r))+Math.abs(l*Math.cos(r)),h=new BoundingRect$1(a.x,a.y,u,c);return h}function getOptionCategoryInterval(a){var n=a.get("interval");return n==null?"auto":n}function shouldShowAllLabels(a){return a.type==="category"&&getOptionCategoryInterval(a.getLabelModel())===0}function getDataDimensionsOnAxis(a,n){var r={};return each$f(a.mapDimensionsAll(n),function(o){r[getStackedDimension(a,o)]=!0}),keys(r)}function unionAxisExtentFromData(a,n,r){n&&each$f(getDataDimensionsOnAxis(n,r),function(o){var l=n.getApproximateExtent(o);l[0]<a[0]&&(a[0]=l[0]),l[1]>a[1]&&(a[1]=l[1])})}var AxisModelCommonMixin=function(){function a(){}return a.prototype.getNeedCrossZero=function(){var n=this.option;return!n.scale},a.prototype.getCoordSysModel=function(){},a}();function createList$2(a){return createSeriesData(null,a)}var dataStack={isDimensionStacked,enableDataStack,getStackedDimension};function createScale(a,n){var r=n;n instanceof Model$1||(r=new Model$1(n));var o=createScaleByModel$1(r);return o.setExtent(a[0],a[1]),niceScaleExtent(o,r),o}function mixinAxisModelCommonMethods(a){mixin(a,AxisModelCommonMixin)}function createTextStyle(a,n){return n=n||{},createTextStyle$1(a,null,null,n.state!=="normal")}const helper=Object.freeze(Object.defineProperty({__proto__:null,createList:createList$2,getLayoutRect,dataStack,createScale,mixinAxisModelCommonMethods,getECData,createTextStyle,createDimensions,createSymbol:createSymbol$1,enableHoverEmphasis},Symbol.toStringTag,{value:"Module"}));var EPSILON=1e-8;function isAroundEqual(a,n){return Math.abs(a-n)<EPSILON}function contain(a,n,r){var o=0,l=a[0];if(!l)return!1;for(var u=1;u<a.length;u++){var c=a[u];o+=windingLine(l[0],l[1],c[0],c[1],n,r),l=c}var h=a[0];return(!isAroundEqual(l[0],h[0])||!isAroundEqual(l[1],h[1]))&&(o+=windingLine(l[0],l[1],h[0],h[1],n,r)),o!==0}var TMP_TRANSFORM=[];function transformPoints(a,n){for(var r=0;r<a.length;r++)applyTransform$1(a[r],a[r],n)}function updateBBoxFromPoints(a,n,r,o){for(var l=0;l<a.length;l++){var u=a[l];o&&(u=o.project(u)),u&&isFinite(u[0])&&isFinite(u[1])&&(min$1(n,n,u),max$1(r,r,u))}}function centroid$1(a){for(var n=0,r=0,o=0,l=a.length,u=a[l-1][0],c=a[l-1][1],h=0;h<l;h++){var d=a[h][0],p=a[h][1],f=u*p-d*c;n+=f,r+=(u+d)*f,o+=(c+p)*f,u=d,c=p}return n?[r/n/3,o/n/3,n]:[a[0][0]||0,a[0][1]||0]}var Region=function(){function a(n){this.name=n}return a.prototype.setCenter=function(n){this._center=n},a.prototype.getCenter=function(){var n=this._center;return n||(n=this._center=this.calcCenter()),n},a}(),GeoJSONPolygonGeometry=function(){function a(n,r){this.type="polygon",this.exterior=n,this.interiors=r}return a}(),GeoJSONLineStringGeometry=function(){function a(n){this.type="linestring",this.points=n}return a}(),GeoJSONRegion=function(a){__extends(n,a);function n(r,o,l){var u=a.call(this,r)||this;return u.type="geoJSON",u.geometries=o,u._center=l&&[l[0],l[1]],u}return n.prototype.calcCenter=function(){for(var r=this.geometries,o,l=0,u=0;u<r.length;u++){var c=r[u],h=c.exterior,d=h&&h.length;d>l&&(o=c,l=d)}if(o)return centroid$1(o.exterior);var p=this.getBoundingRect();return[p.x+p.width/2,p.y+p.height/2]},n.prototype.getBoundingRect=function(r){var o=this._rect;if(o&&!r)return o;var l=[1/0,1/0],u=[-1/0,-1/0],c=this.geometries;return each$f(c,function(h){h.type==="polygon"?updateBBoxFromPoints(h.exterior,l,u,r):each$f(h.points,function(d){updateBBoxFromPoints(d,l,u,r)})}),isFinite(l[0])&&isFinite(l[1])&&isFinite(u[0])&&isFinite(u[1])||(l[0]=l[1]=u[0]=u[1]=0),o=new BoundingRect$1(l[0],l[1],u[0]-l[0],u[1]-l[1]),r||(this._rect=o),o},n.prototype.contain=function(r){var o=this.getBoundingRect(),l=this.geometries;if(!o.contain(r[0],r[1]))return!1;e:for(var u=0,c=l.length;u<c;u++){var h=l[u];if(h.type==="polygon"){var d=h.exterior,p=h.interiors;if(contain(d,r[0],r[1])){for(var f=0;f<(p?p.length:0);f++)if(contain(p[f],r[0],r[1]))continue e;return!0}}}return!1},n.prototype.transformTo=function(r,o,l,u){var c=this.getBoundingRect(),h=c.width/c.height;l?u||(u=l/h):l=h*u;for(var d=new BoundingRect$1(r,o,l,u),p=c.calculateTransform(d),f=this.geometries,g=0;g<f.length;g++){var y=f[g];y.type==="polygon"?(transformPoints(y.exterior,p),each$f(y.interiors,function(v){transformPoints(v,p)})):each$f(y.points,function(v){transformPoints(v,p)})}c=this._rect,c.copy(d),this._center=[c.x+c.width/2,c.y+c.height/2]},n.prototype.cloneShallow=function(r){r==null&&(r=this.name);var o=new n(r,this.geometries,this._center);return o._rect=this._rect,o.transformTo=null,o},n}(Region),GeoSVGRegion=function(a){__extends(n,a);function n(r,o){var l=a.call(this,r)||this;return l.type="geoSVG",l._elOnlyForCalculate=o,l}return n.prototype.calcCenter=function(){for(var r=this._elOnlyForCalculate,o=r.getBoundingRect(),l=[o.x+o.width/2,o.y+o.height/2],u=identity(TMP_TRANSFORM),c=r;c&&!c.isGeoSVGGraphicRoot;)mul(u,c.getLocalTransform(),u),c=c.parent;return invert(u,u),applyTransform$1(l,l,u),l},n}(Region);function decode(a){if(!a.UTF8Encoding)return a;var n=a,r=n.UTF8Scale;r==null&&(r=1024);var o=n.features;return each$f(o,function(l){var u=l.geometry,c=u.encodeOffsets,h=u.coordinates;if(c)switch(u.type){case"LineString":u.coordinates=decodeRing(h,c,r);break;case"Polygon":decodeRings(h,c,r);break;case"MultiLineString":decodeRings(h,c,r);break;case"MultiPolygon":each$f(h,function(d,p){return decodeRings(d,c[p],r)})}}),n.UTF8Encoding=!1,n}function decodeRings(a,n,r){for(var o=0;o<a.length;o++)a[o]=decodeRing(a[o],n[o],r)}function decodeRing(a,n,r){for(var o=[],l=n[0],u=n[1],c=0;c<a.length;c+=2){var h=a.charCodeAt(c)-64,d=a.charCodeAt(c+1)-64;h=h>>1^-(h&1),d=d>>1^-(d&1),h+=l,d+=u,l=h,u=d,o.push([h/r,d/r])}return o}function parseGeoJSON(a,n){return a=decode(a),map$1(filter(a.features,function(r){return r.geometry&&r.properties&&r.geometry.coordinates.length>0}),function(r){var o=r.properties,l=r.geometry,u=[];switch(l.type){case"Polygon":var c=l.coordinates;u.push(new GeoJSONPolygonGeometry(c[0],c.slice(1)));break;case"MultiPolygon":each$f(l.coordinates,function(d){d[0]&&u.push(new GeoJSONPolygonGeometry(d[0],d.slice(1)))});break;case"LineString":u.push(new GeoJSONLineStringGeometry([l.coordinates]));break;case"MultiLineString":u.push(new GeoJSONLineStringGeometry(l.coordinates))}var h=new GeoJSONRegion(o[n||"name"],u,o.cp);return h.properties=o,h})}const number=Object.freeze(Object.defineProperty({__proto__:null,linearMap:linearMap$2,round:round$3,asc:asc$2,getPrecision,getPrecisionSafe,getPixelPrecision,getPercentWithPrecision,MAX_SAFE_INTEGER,remRadian,isRadianAroundZero,parseDate,quantity,quantityExponent,nice,quantile,reformIntervals,isNumeric,numericToNumber},Symbol.toStringTag,{value:"Module"})),time=Object.freeze(Object.defineProperty({__proto__:null,parse:parseDate,format:format$1},Symbol.toStringTag,{value:"Module"})),graphic=Object.freeze(Object.defineProperty({__proto__:null,extendShape,extendPath,makePath,makeImage,mergePath,resizePath,createIcon,updateProps:updateProps$1,initProps,getTransform:getTransform$1,clipPointsByRect,clipRectByRect,registerShape,getShapeClass,Group:Group$4,Image:ZRImage$1,Text:ZRText$1,Circle:Circle$1,Ellipse:Ellipse$1,Sector:Sector$1,Ring:Ring$1,Polygon:Polygon$1,Polyline:Polyline$3,Rect:Rect$3,Line:Line$3,BezierCurve:BezierCurve$1,Arc:Arc$1,IncrementalDisplayable:IncrementalDisplayable$1,CompoundPath:CompoundPath$1,LinearGradient:LinearGradient$1,RadialGradient:RadialGradient$1,BoundingRect:BoundingRect$1},Symbol.toStringTag,{value:"Module"})),format=Object.freeze(Object.defineProperty({__proto__:null,addCommas,toCamelCase,normalizeCssArray,encodeHTML,formatTpl,getTooltipMarker,formatTime,capitalFirst,truncateText,getTextRect},Symbol.toStringTag,{value:"Module"})),util=Object.freeze(Object.defineProperty({__proto__:null,map:map$1,each:each$f,indexOf,inherits,reduce,filter,bind:bind$1,curry:curry$1,isArray:isArray$1,isString,isObject:isObject$3,isFunction,extend,defaults,clone:clone$4,merge},Symbol.toStringTag,{value:"Module"}));var inner$g=makeInner();function tickValuesToNumbers(a,n){var r=map$1(n,function(o){return a.scale.parse(o)});return a.type==="time"&&r.length>0&&(r.sort(),r.unshift(r[0]),r.push(r[r.length-1])),r}function createAxisLabels(a){var n=a.getLabelModel().get("customValues");if(n){var r=makeLabelFormatter(a),o=a.scale.getExtent(),l=tickValuesToNumbers(a,n),u=filter(l,function(c){return c>=o[0]&&c<=o[1]});return{labels:map$1(u,function(c){var h={value:c};return{formattedLabel:r(h),rawLabel:a.scale.getLabel(h),tickValue:c}})}}return a.type==="category"?makeCategoryLabels(a):makeRealNumberLabels(a)}function createAxisTicks(a,n){var r=a.getTickModel().get("customValues");if(r){var o=a.scale.getExtent(),l=tickValuesToNumbers(a,r);return{ticks:filter(l,function(u){return u>=o[0]&&u<=o[1]})}}return a.type==="category"?makeCategoryTicks(a,n):{ticks:map$1(a.scale.getTicks(),function(u){return u.value})}}function makeCategoryLabels(a){var n=a.getLabelModel(),r=makeCategoryLabelsActually(a,n);return!n.get("show")||a.scale.isBlank()?{labels:[],labelCategoryInterval:r.labelCategoryInterval}:r}function makeCategoryLabelsActually(a,n){var r=getListCache(a,"labels"),o=getOptionCategoryInterval(n),l=listCacheGet(r,o);if(l)return l;var u,c;return isFunction(o)?u=makeLabelsByCustomizedCategoryInterval(a,o):(c=o==="auto"?makeAutoCategoryInterval(a):o,u=makeLabelsByNumericCategoryInterval(a,c)),listCacheSet(r,o,{labels:u,labelCategoryInterval:c})}function makeCategoryTicks(a,n){var r=getListCache(a,"ticks"),o=getOptionCategoryInterval(n),l=listCacheGet(r,o);if(l)return l;var u,c;if((!n.get("show")||a.scale.isBlank())&&(u=[]),isFunction(o))u=makeLabelsByCustomizedCategoryInterval(a,o,!0);else if(o==="auto"){var h=makeCategoryLabelsActually(a,a.getLabelModel());c=h.labelCategoryInterval,u=map$1(h.labels,function(d){return d.tickValue})}else c=o,u=makeLabelsByNumericCategoryInterval(a,c,!0);return listCacheSet(r,o,{ticks:u,tickCategoryInterval:c})}function makeRealNumberLabels(a){var n=a.scale.getTicks(),r=makeLabelFormatter(a);return{labels:map$1(n,function(o,l){return{level:o.level,formattedLabel:r(o,l),rawLabel:a.scale.getLabel(o),tickValue:o.value}})}}function getListCache(a,n){return inner$g(a)[n]||(inner$g(a)[n]=[])}function listCacheGet(a,n){for(var r=0;r<a.length;r++)if(a[r].key===n)return a[r].value}function listCacheSet(a,n,r){return a.push({key:n,value:r}),r}function makeAutoCategoryInterval(a){var n=inner$g(a).autoInterval;return n!=null?n:inner$g(a).autoInterval=a.calculateCategoryInterval()}function calculateCategoryInterval(a){var n=fetchAutoCategoryIntervalCalculationParams(a),r=makeLabelFormatter(a),o=(n.axisRotate-n.labelRotate)/180*Math.PI,l=a.scale,u=l.getExtent(),c=l.count();if(u[1]-u[0]<1)return 0;var h=1;c>40&&(h=Math.max(1,Math.floor(c/40)));for(var d=u[0],p=a.dataToCoord(d+1)-a.dataToCoord(d),f=Math.abs(p*Math.cos(o)),g=Math.abs(p*Math.sin(o)),y=0,v=0;d<=u[1];d+=h){var _=0,x=0,S=getBoundingRect(r({value:d}),n.font,"center","top");_=S.width*1.3,x=S.height*1.3,y=Math.max(y,_,7),v=Math.max(v,x,7)}var T=y/f,M=v/g;isNaN(T)&&(T=1/0),isNaN(M)&&(M=1/0);var b=Math.max(0,Math.floor(Math.min(T,M))),A=inner$g(a.model),I=a.getExtent(),w=A.lastAutoInterval,C=A.lastTickCount;return w!=null&&C!=null&&Math.abs(w-b)<=1&&Math.abs(C-c)<=1&&w>b&&A.axisExtent0===I[0]&&A.axisExtent1===I[1]?b=w:(A.lastTickCount=c,A.lastAutoInterval=b,A.axisExtent0=I[0],A.axisExtent1=I[1]),b}function fetchAutoCategoryIntervalCalculationParams(a){var n=a.getLabelModel();return{axisRotate:a.getRotate?a.getRotate():a.isHorizontal&&!a.isHorizontal()?90:0,labelRotate:n.get("rotate")||0,font:n.getFont()}}function makeLabelsByNumericCategoryInterval(a,n,r){var o=makeLabelFormatter(a),l=a.scale,u=l.getExtent(),c=a.getLabelModel(),h=[],d=Math.max((n||0)+1,1),p=u[0],f=l.count();p!==0&&d>1&&f/d>2&&(p=Math.round(Math.ceil(p/d)*d));var g=shouldShowAllLabels(a),y=c.get("showMinLabel")||g,v=c.get("showMaxLabel")||g;y&&p!==u[0]&&x(u[0]);for(var _=p;_<=u[1];_+=d)x(_);v&&_-d!==u[1]&&x(u[1]);function x(S){var T={value:S};h.push(r?S:{formattedLabel:o(T),rawLabel:l.getLabel(T),tickValue:S})}return h}function makeLabelsByCustomizedCategoryInterval(a,n,r){var o=a.scale,l=makeLabelFormatter(a),u=[];return each$f(o.getTicks(),function(c){var h=o.getLabel(c),d=c.value;n(c.value,h)&&u.push(r?d:{formattedLabel:l(c),rawLabel:h,tickValue:d})}),u}var NORMALIZED_EXTENT=[0,1],Axis=function(){function a(n,r,o){this.onBand=!1,this.inverse=!1,this.dim=n,this.scale=r,this._extent=o||[0,0]}return a.prototype.contain=function(n){var r=this._extent,o=Math.min(r[0],r[1]),l=Math.max(r[0],r[1]);return n>=o&&n<=l},a.prototype.containData=function(n){return this.scale.contain(n)},a.prototype.getExtent=function(){return this._extent.slice()},a.prototype.getPixelPrecision=function(n){return getPixelPrecision(n||this.scale.getExtent(),this._extent)},a.prototype.setExtent=function(n,r){var o=this._extent;o[0]=n,o[1]=r},a.prototype.dataToCoord=function(n,r){var o=this._extent,l=this.scale;return n=l.normalize(n),this.onBand&&l.type==="ordinal"&&(o=o.slice(),fixExtentWithBands(o,l.count())),linearMap$2(n,NORMALIZED_EXTENT,o,r)},a.prototype.coordToData=function(n,r){var o=this._extent,l=this.scale;this.onBand&&l.type==="ordinal"&&(o=o.slice(),fixExtentWithBands(o,l.count()));var u=linearMap$2(n,o,NORMALIZED_EXTENT,r);return this.scale.scale(u)},a.prototype.pointToData=function(n,r){},a.prototype.getTicksCoords=function(n){n=n||{};var r=n.tickModel||this.getTickModel(),o=createAxisTicks(this,r),l=o.ticks,u=map$1(l,function(h){return{coord:this.dataToCoord(this.scale.type==="ordinal"?this.scale.getRawOrdinalNumber(h):h),tickValue:h}},this),c=r.get("alignWithLabel");return fixOnBandTicksCoords(this,u,c,n.clamp),u},a.prototype.getMinorTicksCoords=function(){if(this.scale.type==="ordinal")return[];var n=this.model.getModel("minorTick"),r=n.get("splitNumber");r>0&&r<100||(r=5);var o=this.scale.getMinorTicks(r),l=map$1(o,function(u){return map$1(u,function(c){return{coord:this.dataToCoord(c),tickValue:c}},this)},this);return l},a.prototype.getViewLabels=function(){return createAxisLabels(this).labels},a.prototype.getLabelModel=function(){return this.model.getModel("axisLabel")},a.prototype.getTickModel=function(){return this.model.getModel("axisTick")},a.prototype.getBandWidth=function(){var n=this._extent,r=this.scale.getExtent(),o=r[1]-r[0]+(this.onBand?1:0);o===0&&(o=1);var l=Math.abs(n[1]-n[0]);return Math.abs(l)/o},a.prototype.calculateCategoryInterval=function(){return calculateCategoryInterval(this)},a}();function fixExtentWithBands(a,n){var r=a[1]-a[0],o=n,l=r/o/2;a[0]+=l,a[1]-=l}function fixOnBandTicksCoords(a,n,r,o){var l=n.length;if(!a.onBand||r||!l)return;var u=a.getExtent(),c,h;if(l===1)n[0].coord=u[0],c=n[1]={coord:u[1],tickValue:n[0].tickValue};else{var d=n[l-1].tickValue-n[0].tickValue,p=(n[l-1].coord-n[0].coord)/d;each$f(n,function(v){v.coord-=p/2});var f=a.scale.getExtent();h=1+f[1]-n[l-1].tickValue,c={coord:n[l-1].coord+p*h,tickValue:f[1]+1},n.push(c)}var g=u[0]>u[1];y(n[0].coord,u[0])&&(o?n[0].coord=u[0]:n.shift()),o&&y(u[0],n[0].coord)&&n.unshift({coord:u[0]}),y(u[1],c.coord)&&(o?c.coord=u[1]:n.pop()),o&&y(c.coord,u[1])&&n.push({coord:u[1]});function y(v,_){return v=round$3(v),_=round$3(_),g?v>_:v<_}}const Axis$1=Axis;function extendComponentModel(a){var n=ComponentModel$1.extend(a);return ComponentModel$1.registerClass(n),n}function extendComponentView(a){var n=ComponentView$1.extend(a);return ComponentView$1.registerClass(n),n}function extendSeriesModel(a){var n=SeriesModel$1.extend(a);return SeriesModel$1.registerClass(n),n}function extendChartView(a){var n=ChartView$1.extend(a);return ChartView$1.registerClass(n),n}var PI2$2=Math.PI*2,CMD$1=PathProxy$1.CMD,DEFAULT_SEARCH_SPACE=["top","right","bottom","left"];function getCandidateAnchor(a,n,r,o,l){var u=r.width,c=r.height;switch(a){case"top":o.set(r.x+u/2,r.y-n),l.set(0,-1);break;case"bottom":o.set(r.x+u/2,r.y+c+n),l.set(0,1);break;case"left":o.set(r.x-n,r.y+c/2),l.set(-1,0);break;case"right":o.set(r.x+u+n,r.y+c/2),l.set(1,0);break}}function projectPointToArc(a,n,r,o,l,u,c,h,d){c-=a,h-=n;var p=Math.sqrt(c*c+h*h);c/=p,h/=p;var f=c*r+a,g=h*r+n;if(Math.abs(o-l)%PI2$2<1e-4)return d[0]=f,d[1]=g,p-r;if(u){var y=o;o=normalizeRadian(l),l=normalizeRadian(y)}else o=normalizeRadian(o),l=normalizeRadian(l);o>l&&(l+=PI2$2);var v=Math.atan2(h,c);if(v<0&&(v+=PI2$2),v>=o&&v<=l||v+PI2$2>=o&&v+PI2$2<=l)return d[0]=f,d[1]=g,p-r;var _=r*Math.cos(o)+a,x=r*Math.sin(o)+n,S=r*Math.cos(l)+a,T=r*Math.sin(l)+n,M=(_-c)*(_-c)+(x-h)*(x-h),b=(S-c)*(S-c)+(T-h)*(T-h);return M<b?(d[0]=_,d[1]=x,Math.sqrt(M)):(d[0]=S,d[1]=T,Math.sqrt(b))}function projectPointToLine(a,n,r,o,l,u,c,h){var d=l-a,p=u-n,f=r-a,g=o-n,y=Math.sqrt(f*f+g*g);f/=y,g/=y;var v=d*f+p*g,_=v/y;h&&(_=Math.min(Math.max(_,0),1)),_*=y;var x=c[0]=a+_*f,S=c[1]=n+_*g;return Math.sqrt((x-l)*(x-l)+(S-u)*(S-u))}function projectPointToRect(a,n,r,o,l,u,c){r<0&&(a=a+r,r=-r),o<0&&(n=n+o,o=-o);var h=a+r,d=n+o,p=c[0]=Math.min(Math.max(l,a),h),f=c[1]=Math.min(Math.max(u,n),d);return Math.sqrt((p-l)*(p-l)+(f-u)*(f-u))}var tmpPt=[];function nearestPointOnRect(a,n,r){var o=projectPointToRect(n.x,n.y,n.width,n.height,a.x,a.y,tmpPt);return r.set(tmpPt[0],tmpPt[1]),o}function nearestPointOnPath(a,n,r){for(var o=0,l=0,u=0,c=0,h,d,p=1/0,f=n.data,g=a.x,y=a.y,v=0;v<f.length;){var _=f[v++];v===1&&(o=f[v],l=f[v+1],u=o,c=l);var x=p;switch(_){case CMD$1.M:u=f[v++],c=f[v++],o=u,l=c;break;case CMD$1.L:x=projectPointToLine(o,l,f[v],f[v+1],g,y,tmpPt,!0),o=f[v++],l=f[v++];break;case CMD$1.C:x=cubicProjectPoint(o,l,f[v++],f[v++],f[v++],f[v++],f[v],f[v+1],g,y,tmpPt),o=f[v++],l=f[v++];break;case CMD$1.Q:x=quadraticProjectPoint(o,l,f[v++],f[v++],f[v],f[v+1],g,y,tmpPt),o=f[v++],l=f[v++];break;case CMD$1.A:var S=f[v++],T=f[v++],M=f[v++],b=f[v++],A=f[v++],I=f[v++];v+=1;var w=!!(1-f[v++]);h=Math.cos(A)*M+S,d=Math.sin(A)*b+T,v<=1&&(u=h,c=d);var C=(g-S)*b/M+S;x=projectPointToArc(S,T,b,A,A+I,w,C,y,tmpPt),o=Math.cos(A+I)*M+S,l=Math.sin(A+I)*b+T;break;case CMD$1.R:u=o=f[v++],c=l=f[v++];var E=f[v++],P=f[v++];x=projectPointToRect(u,c,E,P,g,y,tmpPt);break;case CMD$1.Z:x=projectPointToLine(o,l,u,c,g,y,tmpPt,!0),o=u,l=c;break}x<p&&(p=x,r.set(tmpPt[0],tmpPt[1]))}return p}var pt0=new Point$1,pt1=new Point$1,pt2=new Point$1,dir=new Point$1,dir2=new Point$1;function updateLabelLinePoints(a,n){if(a){var r=a.getTextGuideLine(),o=a.getTextContent();if(o&&r){var l=a.textGuideLineConfig||{},u=[[0,0],[0,0],[0,0]],c=l.candidates||DEFAULT_SEARCH_SPACE,h=o.getBoundingRect().clone();h.applyTransform(o.getComputedTransform());var d=1/0,p=l.anchor,f=a.getComputedTransform(),g=f&&invert([],f),y=n.get("length2")||0;p&&pt2.copy(p);for(var v=0;v<c.length;v++){var _=c[v];getCandidateAnchor(_,0,h,pt0,dir),Point$1.scaleAndAdd(pt1,pt0,dir,y),pt1.transform(g);var x=a.getBoundingRect(),S=p?p.distance(pt1):a instanceof Path$1?nearestPointOnPath(pt1,a.path,pt2):nearestPointOnRect(pt1,x,pt2);S<d&&(d=S,pt1.transform(f),pt2.transform(f),pt2.toArray(u[0]),pt1.toArray(u[1]),pt0.toArray(u[2]))}limitTurnAngle(u,n.get("minTurnAngle")),r.setShape({points:u})}}}var tmpArr=[],tmpProjPoint=new Point$1;function limitTurnAngle(a,n){if(n<=180&&n>0){n=n/180*Math.PI,pt0.fromArray(a[0]),pt1.fromArray(a[1]),pt2.fromArray(a[2]),Point$1.sub(dir,pt0,pt1),Point$1.sub(dir2,pt2,pt1);var r=dir.len(),o=dir2.len();if(!(r<.001||o<.001)){dir.scale(1/r),dir2.scale(1/o);var l=dir.dot(dir2),u=Math.cos(n);if(u<l){var c=projectPointToLine(pt1.x,pt1.y,pt2.x,pt2.y,pt0.x,pt0.y,tmpArr,!1);tmpProjPoint.fromArray(tmpArr),tmpProjPoint.scaleAndAdd(dir2,c/Math.tan(Math.PI-n));var h=pt2.x!==pt1.x?(tmpProjPoint.x-pt1.x)/(pt2.x-pt1.x):(tmpProjPoint.y-pt1.y)/(pt2.y-pt1.y);if(isNaN(h))return;h<0?Point$1.copy(tmpProjPoint,pt1):h>1&&Point$1.copy(tmpProjPoint,pt2),tmpProjPoint.toArray(a[1])}}}}function limitSurfaceAngle(a,n,r){if(r<=180&&r>0){r=r/180*Math.PI,pt0.fromArray(a[0]),pt1.fromArray(a[1]),pt2.fromArray(a[2]),Point$1.sub(dir,pt1,pt0),Point$1.sub(dir2,pt2,pt1);var o=dir.len(),l=dir2.len();if(!(o<.001||l<.001)){dir.scale(1/o),dir2.scale(1/l);var u=dir.dot(n),c=Math.cos(r);if(u<c){var h=projectPointToLine(pt1.x,pt1.y,pt2.x,pt2.y,pt0.x,pt0.y,tmpArr,!1);tmpProjPoint.fromArray(tmpArr);var d=Math.PI/2,p=Math.acos(dir2.dot(n)),f=d+p-r;if(f>=d)Point$1.copy(tmpProjPoint,pt2);else{tmpProjPoint.scaleAndAdd(dir2,h/Math.tan(Math.PI/2-f));var g=pt2.x!==pt1.x?(tmpProjPoint.x-pt1.x)/(pt2.x-pt1.x):(tmpProjPoint.y-pt1.y)/(pt2.y-pt1.y);if(isNaN(g))return;g<0?Point$1.copy(tmpProjPoint,pt1):g>1&&Point$1.copy(tmpProjPoint,pt2)}tmpProjPoint.toArray(a[1])}}}}function setLabelLineState(a,n,r,o){var l=r==="normal",u=l?a:a.ensureState(r);u.ignore=n;var c=o.get("smooth");c&&c===!0&&(c=.3),u.shape=u.shape||{},c>0&&(u.shape.smooth=c);var h=o.getModel("lineStyle").getLineStyle();l?a.useStyle(h):u.style=h}function buildLabelLinePath(a,n){var r=n.smooth,o=n.points;if(o)if(a.moveTo(o[0][0],o[0][1]),r>0&&o.length>=3){var l=dist$1(o[0],o[1]),u=dist$1(o[1],o[2]);if(!l||!u){a.lineTo(o[1][0],o[1][1]),a.lineTo(o[2][0],o[2][1]);return}var c=Math.min(l,u)*r,h=lerp$1([],o[1],o[0],c/l),d=lerp$1([],o[1],o[2],c/u),p=lerp$1([],h,d,.5);a.bezierCurveTo(h[0],h[1],h[0],h[1],p[0],p[1]),a.bezierCurveTo(d[0],d[1],d[0],d[1],o[2][0],o[2][1])}else for(var f=1;f<o.length;f++)a.lineTo(o[f][0],o[f][1])}function setLabelLineStyle(a,n,r){var o=a.getTextGuideLine(),l=a.getTextContent();if(!l){o&&a.removeTextGuideLine();return}for(var u=n.normal,c=u.get("show"),h=l.ignore,d=0;d<DISPLAY_STATES.length;d++){var p=DISPLAY_STATES[d],f=n[p],g=p==="normal";if(f){var y=f.get("show"),v=g?h:retrieve2(l.states[p]&&l.states[p].ignore,h);if(v||!retrieve2(y,c)){var _=g?o:o&&o.states[p];_&&(_.ignore=!0),o&&setLabelLineState(o,!0,p,f);continue}o||(o=new Polyline$3,a.setTextGuideLine(o),!g&&(h||!c)&&setLabelLineState(o,!0,"normal",n.normal),a.stateProxy&&(o.stateProxy=a.stateProxy)),setLabelLineState(o,!1,p,f)}}if(o){defaults(o.style,r),o.style.fill=null;var x=u.get("showAbove"),S=a.textGuideLineConfig=a.textGuideLineConfig||{};S.showAbove=x||!1,o.buildPath=buildLabelLinePath}}function getLabelLineStatesModels(a,n){n=n||"labelLine";for(var r={normal:a.getModel(n)},o=0;o<SPECIAL_STATES.length;o++){var l=SPECIAL_STATES[o];r[l]=a.getModel([l,n])}return r}function prepareLayoutList(a){for(var n=[],r=0;r<a.length;r++){var o=a[r];if(!o.defaultAttr.ignore){var l=o.label,u=l.getComputedTransform(),c=l.getBoundingRect(),h=!u||u[1]<1e-5&&u[2]<1e-5,d=l.style.margin||0,p=c.clone();p.applyTransform(u),p.x-=d/2,p.y-=d/2,p.width+=d,p.height+=d;var f=h?new OrientedBoundingRect$1(c,u):null;n.push({label:l,labelLine:o.labelLine,rect:p,localRect:c,obb:f,priority:o.priority,defaultAttr:o.defaultAttr,layoutOption:o.computedLayoutOption,axisAligned:h,transform:u})}}return n}function shiftLayout(a,n,r,o,l,u){var c=a.length;if(c<2)return;a.sort(function(E,P){return E.rect[n]-P.rect[n]});for(var h=0,d,p=!1,f=0,g=0;g<c;g++){var y=a[g],v=y.rect;d=v[n]-h,d<0&&(v[n]-=d,y.label[n]-=d,p=!0);var _=Math.max(-d,0);f+=_,h=v[n]+v[r]}f>0&&u&&I(-f/c,0,c);var x=a[0],S=a[c-1],T,M;b(),T<0&&w(-T,.8),M<0&&w(M,.8),b(),A(T,M,1),A(M,T,-1),b(),T<0&&C(-T),M<0&&C(M);function b(){T=x.rect[n]-o,M=l-S.rect[n]-S.rect[r]}function A(E,P,D){if(E<0){var L=Math.min(P,-E);if(L>0){I(L*D,0,c);var R=L+E;R<0&&w(-R*D,1)}else w(-E*D,1)}}function I(E,P,D){E!==0&&(p=!0);for(var L=P;L<D;L++){var R=a[L],O=R.rect;O[n]+=E,R.label[n]+=E}}function w(E,P){for(var D=[],L=0,R=1;R<c;R++){var O=a[R-1].rect,N=Math.max(a[R].rect[n]-O[n]-O[r],0);D.push(N),L+=N}if(L){var V=Math.min(Math.abs(E)/L,P);if(E>0)for(var R=0;R<c-1;R++){var B=D[R]*V;I(B,0,R+1)}else for(var R=c-1;R>0;R--){var B=D[R-1]*V;I(-B,R,c)}}}function C(E){var P=E<0?-1:1;E=Math.abs(E);for(var D=Math.ceil(E/(c-1)),L=0;L<c-1;L++)if(P>0?I(D,0,L+1):I(-D,c-L-1,c),E-=D,E<=0)return}return p}function shiftLayoutOnX(a,n,r,o){return shiftLayout(a,"x","width",n,r,o)}function shiftLayoutOnY(a,n,r,o){return shiftLayout(a,"y","height",n,r,o)}function hideOverlap(a){var n=[];a.sort(function(x,S){return S.priority-x.priority});var r=new BoundingRect$1(0,0,0,0);function o(x){if(!x.ignore){var S=x.ensureState("emphasis");S.ignore==null&&(S.ignore=!1)}x.ignore=!0}for(var l=0;l<a.length;l++){var u=a[l],c=u.axisAligned,h=u.localRect,d=u.transform,p=u.label,f=u.labelLine;r.copy(u.rect),r.width-=.1,r.height-=.1,r.x+=.05,r.y+=.05;for(var g=u.obb,y=!1,v=0;v<n.length;v++){var _=n[v];if(r.intersect(_.rect)){if(c&&_.axisAligned){y=!0;break}if(_.obb||(_.obb=new OrientedBoundingRect$1(_.localRect,_.transform)),g||(g=new OrientedBoundingRect$1(h,d)),g.intersect(_.obb)){y=!0;break}}}y?(o(p),f&&o(f)):(p.attr("ignore",u.defaultAttr.ignore),f&&f.attr("ignore",u.defaultAttr.labelGuideIgnore),n.push(u))}}function cloneArr(a){if(a){for(var n=[],r=0;r<a.length;r++)n.push(a[r].slice());return n}}function prepareLayoutCallbackParams(a,n){var r=a.label,o=n&&n.getTextGuideLine();return{dataIndex:a.dataIndex,dataType:a.dataType,seriesIndex:a.seriesModel.seriesIndex,text:a.label.style.text,rect:a.hostRect,labelRect:a.rect,align:r.style.align,verticalAlign:r.style.verticalAlign,labelLinePoints:cloneArr(o&&o.shape.points)}}var LABEL_OPTION_TO_STYLE_KEYS=["align","verticalAlign","width","height","fontSize"],dummyTransformable=new Transformable$1,labelLayoutInnerStore=makeInner(),labelLineAnimationStore=makeInner();function extendWithKeys(a,n,r){for(var o=0;o<r.length;o++){var l=r[o];n[l]!=null&&(a[l]=n[l])}}var LABEL_LAYOUT_PROPS=["x","y","rotation"],LabelManager=function(){function a(){this._labelList=[],this._chartViewList=[]}return a.prototype.clearLabels=function(){this._labelList=[],this._chartViewList=[]},a.prototype._addLabel=function(n,r,o,l,u){var c=l.style,h=l.__hostTarget,d=h.textConfig||{},p=l.getComputedTransform(),f=l.getBoundingRect().plain();BoundingRect$1.applyTransform(f,f,p),p?dummyTransformable.setLocalTransform(p):(dummyTransformable.x=dummyTransformable.y=dummyTransformable.rotation=dummyTransformable.originX=dummyTransformable.originY=0,dummyTransformable.scaleX=dummyTransformable.scaleY=1),dummyTransformable.rotation=normalizeRadian(dummyTransformable.rotation);var g=l.__hostTarget,y;if(g){y=g.getBoundingRect().plain();var v=g.getComputedTransform();BoundingRect$1.applyTransform(y,y,v)}var _=y&&g.getTextGuideLine();this._labelList.push({label:l,labelLine:_,seriesModel:o,dataIndex:n,dataType:r,layoutOption:u,computedLayoutOption:null,rect:f,hostRect:y,priority:y?y.width*y.height:0,defaultAttr:{ignore:l.ignore,labelGuideIgnore:_&&_.ignore,x:dummyTransformable.x,y:dummyTransformable.y,scaleX:dummyTransformable.scaleX,scaleY:dummyTransformable.scaleY,rotation:dummyTransformable.rotation,style:{x:c.x,y:c.y,align:c.align,verticalAlign:c.verticalAlign,width:c.width,height:c.height,fontSize:c.fontSize},cursor:l.cursor,attachedPos:d.position,attachedRot:d.rotation}})},a.prototype.addLabelsOfSeries=function(n){var r=this;this._chartViewList.push(n);var o=n.__model,l=o.get("labelLayout");!(isFunction(l)||keys(l).length)||n.group.traverse(function(u){if(u.ignore)return!0;var c=u.getTextContent(),h=getECData(u);c&&!c.disableLabelLayout&&r._addLabel(h.dataIndex,h.dataType,o,c,l)})},a.prototype.updateLayoutConfig=function(n){var r=n.getWidth(),o=n.getHeight();function l(b,A){return function(){updateLabelLinePoints(b,A)}}for(var u=0;u<this._labelList.length;u++){var c=this._labelList[u],h=c.label,d=h.__hostTarget,p=c.defaultAttr,f=void 0;isFunction(c.layoutOption)?f=c.layoutOption(prepareLayoutCallbackParams(c,d)):f=c.layoutOption,f=f||{},c.computedLayoutOption=f;var g=Math.PI/180;d&&d.setTextConfig({local:!1,position:f.x!=null||f.y!=null?null:p.attachedPos,rotation:f.rotate!=null?f.rotate*g:p.attachedRot,offset:[f.dx||0,f.dy||0]});var y=!1;if(f.x!=null?(h.x=parsePercent(f.x,r),h.setStyle("x",0),y=!0):(h.x=p.x,h.setStyle("x",p.style.x)),f.y!=null?(h.y=parsePercent(f.y,o),h.setStyle("y",0),y=!0):(h.y=p.y,h.setStyle("y",p.style.y)),f.labelLinePoints){var v=d.getTextGuideLine();v&&(v.setShape({points:f.labelLinePoints}),y=!1)}var _=labelLayoutInnerStore(h);_.needsUpdateLabelLine=y,h.rotation=f.rotate!=null?f.rotate*g:p.rotation,h.scaleX=p.scaleX,h.scaleY=p.scaleY;for(var x=0;x<LABEL_OPTION_TO_STYLE_KEYS.length;x++){var S=LABEL_OPTION_TO_STYLE_KEYS[x];h.setStyle(S,f[S]!=null?f[S]:p.style[S])}if(f.draggable){if(h.draggable=!0,h.cursor="move",d){var T=c.seriesModel;if(c.dataIndex!=null){var M=c.seriesModel.getData(c.dataType);T=M.getItemModel(c.dataIndex)}h.on("drag",l(d,T.getModel("labelLine")))}}else h.off("drag"),h.cursor=p.cursor}},a.prototype.layout=function(n){var r=n.getWidth(),o=n.getHeight(),l=prepareLayoutList(this._labelList),u=filter(l,function(d){return d.layoutOption.moveOverlap==="shiftX"}),c=filter(l,function(d){return d.layoutOption.moveOverlap==="shiftY"});shiftLayoutOnX(u,0,r),shiftLayoutOnY(c,0,o);var h=filter(l,function(d){return d.layoutOption.hideOverlap});hideOverlap(h)},a.prototype.processLabelsOverall=function(){var n=this;each$f(this._chartViewList,function(r){var o=r.__model,l=r.ignoreLabelLineUpdate,u=o.isAnimationEnabled();r.group.traverse(function(c){if(c.ignore&&!c.forceLabelAnimation)return!0;var h=!l,d=c.getTextContent();!h&&d&&(h=labelLayoutInnerStore(d).needsUpdateLabelLine),h&&n._updateLabelLine(c,o),u&&n._animateLabels(c,o)})})},a.prototype._updateLabelLine=function(n,r){var o=n.getTextContent(),l=getECData(n),u=l.dataIndex;if(o&&u!=null){var c=r.getData(l.dataType),h=c.getItemModel(u),d={},p=c.getItemVisual(u,"style");if(p){var f=c.getVisual("drawType");d.stroke=p[f]}var g=h.getModel("labelLine");setLabelLineStyle(n,getLabelLineStatesModels(h),d),updateLabelLinePoints(n,g)}},a.prototype._animateLabels=function(n,r){var o=n.getTextContent(),l=n.getTextGuideLine();if(o&&(n.forceLabelAnimation||!o.ignore&&!o.invisible&&!n.disableLabelAnimation&&!isElementRemoved(n))){var u=labelLayoutInnerStore(o),c=u.oldLayout,h=getECData(n),d=h.dataIndex,p={x:o.x,y:o.y,rotation:o.rotation},f=r.getData(h.dataType);if(c){o.attr(c);var g=n.prevStates;g&&(indexOf(g,"select")>=0&&o.attr(u.oldLayoutSelect),indexOf(g,"emphasis")>=0&&o.attr(u.oldLayoutEmphasis)),updateProps$1(o,p,r,d)}else if(o.attr(p),!labelInner(o).valueAnimation){var y=retrieve2(o.style.opacity,1);o.style.opacity=0,initProps(o,{style:{opacity:y}},r,d)}if(u.oldLayout=p,o.states.select){var v=u.oldLayoutSelect={};extendWithKeys(v,p,LABEL_LAYOUT_PROPS),extendWithKeys(v,o.states.select,LABEL_LAYOUT_PROPS)}if(o.states.emphasis){var _=u.oldLayoutEmphasis={};extendWithKeys(_,p,LABEL_LAYOUT_PROPS),extendWithKeys(_,o.states.emphasis,LABEL_LAYOUT_PROPS)}animateLabelValue(o,d,f,r,r)}if(l&&!l.ignore&&!l.invisible){var u=labelLineAnimationStore(l),c=u.oldLayout,x={points:l.shape.points};c?(l.attr({shape:c}),updateProps$1(l,{shape:x},r)):(l.setShape(x),l.style.strokePercent=0,initProps(l,{style:{strokePercent:1}},r)),u.oldLayout=x}},a}();const LabelManager$1=LabelManager;var getLabelManager=makeInner();function installLabelLayout(a){a.registerUpdateLifecycle("series:beforeupdate",function(n,r,o){var l=getLabelManager(r).labelManager;l||(l=getLabelManager(r).labelManager=new LabelManager$1),l.clearLabels()}),a.registerUpdateLifecycle("series:layoutlabels",function(n,r,o){var l=getLabelManager(r).labelManager;o.updatedSeries.forEach(function(u){l.addLabelsOfSeries(r.getViewOfSeriesModel(u))}),l.updateLayoutConfig(r),l.layout(r),l.processLabelsOverall()})}var mathSin=Math.sin,mathCos=Math.cos,PI$4=Math.PI,PI2$1=Math.PI*2,degree=180/PI$4,SVGPathRebuilder=function(){function a(){}return a.prototype.reset=function(n){this._start=!0,this._d=[],this._str="",this._p=Math.pow(10,n||4)},a.prototype.moveTo=function(n,r){this._add("M",n,r)},a.prototype.lineTo=function(n,r){this._add("L",n,r)},a.prototype.bezierCurveTo=function(n,r,o,l,u,c){this._add("C",n,r,o,l,u,c)},a.prototype.quadraticCurveTo=function(n,r,o,l){this._add("Q",n,r,o,l)},a.prototype.arc=function(n,r,o,l,u,c){this.ellipse(n,r,o,o,0,l,u,c)},a.prototype.ellipse=function(n,r,o,l,u,c,h,d){var p=h-c,f=!d,g=Math.abs(p),y=isAroundZero(g-PI2$1)||(f?p>=PI2$1:-p>=PI2$1),v=p>0?p%PI2$1:p%PI2$1+PI2$1,_=!1;y?_=!0:isAroundZero(g)?_=!1:_=v>=PI$4==!!f;var x=n+o*mathCos(c),S=r+l*mathSin(c);this._start&&this._add("M",x,S);var T=Math.round(u*degree);if(y){var M=1/this._p,b=(f?1:-1)*(PI2$1-M);this._add("A",o,l,T,1,+f,n+o*mathCos(c+b),r+l*mathSin(c+b)),M>.01&&this._add("A",o,l,T,0,+f,x,S)}else{var A=n+o*mathCos(h),I=r+l*mathSin(h);this._add("A",o,l,T,+_,+f,A,I)}},a.prototype.rect=function(n,r,o,l){this._add("M",n,r),this._add("l",o,0),this._add("l",0,l),this._add("l",-o,0),this._add("Z")},a.prototype.closePath=function(){this._d.length>0&&this._add("Z")},a.prototype._add=function(n,r,o,l,u,c,h,d,p){for(var f=[],g=this._p,y=1;y<arguments.length;y++){var v=arguments[y];if(isNaN(v)){this._invalid=!0;return}f.push(Math.round(v*g)/g)}this._d.push(n+f.join(" ")),this._start=n==="Z"},a.prototype.generateStr=function(){this._str=this._invalid?"":this._d.join(""),this._d=[]},a.prototype.getStr=function(){return this._str},a}();const SVGPathRebuilder$1=SVGPathRebuilder;var NONE="none",mathRound=Math.round;function pathHasFill(a){var n=a.fill;return n!=null&&n!==NONE}function pathHasStroke(a){var n=a.stroke;return n!=null&&n!==NONE}var strokeProps=["lineCap","miterLimit","lineJoin"],svgStrokeProps=map$1(strokeProps,function(a){return"stroke-"+a.toLowerCase()});function mapStyleToAttrs(a,n,r,o){var l=n.opacity==null?1:n.opacity;if(r instanceof ZRImage$1){a("opacity",l);return}if(pathHasFill(n)){var u=normalizeColor(n.fill);a("fill",u.color);var c=n.fillOpacity!=null?n.fillOpacity*u.opacity*l:u.opacity*l;(o||c<1)&&a("fill-opacity",c)}else a("fill",NONE);if(pathHasStroke(n)){var h=normalizeColor(n.stroke);a("stroke",h.color);var d=n.strokeNoScale?r.getLineScale():1,p=d?(n.lineWidth||0)/d:0,f=n.strokeOpacity!=null?n.strokeOpacity*h.opacity*l:h.opacity*l,g=n.strokeFirst;if((o||p!==1)&&a("stroke-width",p),(o||g)&&a("paint-order",g?"stroke":"fill"),(o||f<1)&&a("stroke-opacity",f),n.lineDash){var y=getLineDash(r),v=y[0],_=y[1];v&&(_=mathRound(_||0),a("stroke-dasharray",v.join(",")),(_||o)&&a("stroke-dashoffset",_))}else o&&a("stroke-dasharray",NONE);for(var x=0;x<strokeProps.length;x++){var S=strokeProps[x];if(o||n[S]!==DEFAULT_PATH_STYLE[S]){var T=n[S]||DEFAULT_PATH_STYLE[S];T&&a(svgStrokeProps[x],T)}}}else o&&a("stroke",NONE)}var SVGNS="http://www.w3.org/2000/svg",XLINKNS="http://www.w3.org/1999/xlink",XMLNS="http://www.w3.org/2000/xmlns/",XML_NAMESPACE="http://www.w3.org/XML/1998/namespace",META_DATA_PREFIX="ecmeta_";function createElement(a){return document.createElementNS(SVGNS,a)}function createVNode(a,n,r,o,l){return{tag:a,attrs:r||{},children:o,text:l,key:n}}function createElementOpen(a,n){var r=[];if(n)for(var o in n){var l=n[o],u=o;l!==!1&&(l!==!0&&l!=null&&(u+='="'+l+'"'),r.push(u))}return"<"+a+" "+r.join(" ")+">"}function createElementClose(a){return"</"+a+">"}function vNodeToString(a,n){n=n||{};var r=n.newline?`
`:"";function o(l){var u=l.children,c=l.tag,h=l.attrs,d=l.text;return createElementOpen(c,h)+(c!=="style"?encodeHTML(d):d||"")+(u?""+r+map$1(u,function(p){return o(p)}).join(r)+r:"")+createElementClose(c)}return o(a)}function getCssString(a,n,r){r=r||{};var o=r.newline?`
`:"",l=" {"+o,u=o+"}",c=map$1(keys(a),function(d){return d+l+map$1(keys(a[d]),function(p){return p+":"+a[d][p]+";"}).join(o)+u}).join(o),h=map$1(keys(n),function(d){return"@keyframes "+d+l+map$1(keys(n[d]),function(p){return p+l+map$1(keys(n[d][p]),function(f){var g=n[d][p][f];return f==="d"&&(g='path("'+g+'")'),f+":"+g+";"}).join(o)+u}).join(o)+u}).join(o);return!c&&!h?"":["<![CDATA[",c,h,"]]>"].join(o)}function createBrushScope(a){return{zrId:a,shadowCache:{},patternCache:{},gradientCache:{},clipPathCache:{},defs:{},cssNodes:{},cssAnims:{},cssStyleCache:{},cssAnimIdx:0,shadowIdx:0,gradientIdx:0,patternIdx:0,clipPathIdx:0}}function createSVGVNode(a,n,r,o){return createVNode("svg","root",{width:a,height:n,xmlns:SVGNS,"xmlns:xlink":XLINKNS,version:"1.1",baseProfile:"full",viewBox:o?"0 0 "+a+" "+n:!1},r)}var cssClassIdx=0;function getClassId(){return cssClassIdx++}var EASING_MAP={cubicIn:"0.32,0,0.67,0",cubicOut:"0.33,1,0.68,1",cubicInOut:"0.65,0,0.35,1",quadraticIn:"0.11,0,0.5,0",quadraticOut:"0.5,1,0.89,1",quadraticInOut:"0.45,0,0.55,1",quarticIn:"0.5,0,0.75,0",quarticOut:"0.25,1,0.5,1",quarticInOut:"0.76,0,0.24,1",quinticIn:"0.64,0,0.78,0",quinticOut:"0.22,1,0.36,1",quinticInOut:"0.83,0,0.17,1",sinusoidalIn:"0.12,0,0.39,0",sinusoidalOut:"0.61,1,0.88,1",sinusoidalInOut:"0.37,0,0.63,1",exponentialIn:"0.7,0,0.84,0",exponentialOut:"0.16,1,0.3,1",exponentialInOut:"0.87,0,0.13,1",circularIn:"0.55,0,1,0.45",circularOut:"0,0.55,0.45,1",circularInOut:"0.85,0,0.15,1"},transformOriginKey="transform-origin";function buildPathString(a,n,r){var o=extend({},a.shape);extend(o,n),a.buildPath(r,o);var l=new SVGPathRebuilder$1;return l.reset(getPathPrecision(a)),r.rebuildPath(l,1),l.generateStr(),l.getStr()}function setTransformOrigin(a,n){var r=n.originX,o=n.originY;(r||o)&&(a[transformOriginKey]=r+"px "+o+"px")}var ANIMATE_STYLE_MAP={fill:"fill",opacity:"opacity",lineWidth:"stroke-width",lineDashOffset:"stroke-dashoffset"};function addAnimation(a,n){var r=n.zrId+"-ani-"+n.cssAnimIdx++;return n.cssAnims[r]=a,r}function createCompoundPathCSSAnimation(a,n,r){var o=a.shape.paths,l={},u,c;if(each$f(o,function(d){var p=createBrushScope(r.zrId);p.animation=!0,createCSSAnimation(d,{},p,!0);var f=p.cssAnims,g=p.cssNodes,y=keys(f),v=y.length;if(v){c=y[v-1];var _=f[c];for(var x in _){var S=_[x];l[x]=l[x]||{d:""},l[x].d+=S.d||""}for(var T in g){var M=g[T].animation;M.indexOf(c)>=0&&(u=M)}}}),!!u){n.d=!1;var h=addAnimation(l,r);return u.replace(c,h)}}function getEasingFunc(a){return isString(a)?EASING_MAP[a]?"cubic-bezier("+EASING_MAP[a]+")":createCubicEasingFunc(a)?a:"":""}function createCSSAnimation(a,n,r,o){var l=a.animators,u=l.length,c=[];if(a instanceof CompoundPath$1){var h=createCompoundPathCSSAnimation(a,n,r);if(h)c.push(h);else if(!u)return}else if(!u)return;for(var d={},p=0;p<u;p++){var f=l[p],g=[f.getMaxTime()/1e3+"s"],y=getEasingFunc(f.getClip().easing),v=f.getDelay();y?g.push(y):g.push("linear"),v&&g.push(v/1e3+"s"),f.getLoop()&&g.push("infinite");var _=g.join(" ");d[_]=d[_]||[_,[]],d[_][1].push(f)}function x(M){var b=M[1],A=b.length,I={},w={},C={},E="animation-timing-function";function P(J,j,Q){for(var W=J.getTracks(),q=J.getMaxTime(),re=0;re<W.length;re++){var ee=W[re];if(ee.needsAnimate()){var ie=ee.keyframes,ne=ee.propName;if(Q&&(ne=Q(ne)),ne)for(var oe=0;oe<ie.length;oe++){var le=ie[oe],se=Math.round(le.time/q*100)+"%",ue=getEasingFunc(le.easing),ce=le.rawValue;(isString(ce)||isNumber(ce))&&(j[se]=j[se]||{},j[se][ne]=le.rawValue,ue&&(j[se][E]=ue))}}}}for(var D=0;D<A;D++){var L=b[D],R=L.targetName;R?R==="shape"&&P(L,w):!o&&P(L,I)}for(var O in I){var N={};copyTransform(N,a),extend(N,I[O]);var V=getSRTTransformString(N),B=I[O][E];C[O]=V?{transform:V}:{},setTransformOrigin(C[O],N),B&&(C[O][E]=B)}var G,F=!0;for(var O in w){C[O]=C[O]||{};var z=!G,B=w[O][E];z&&(G=new PathProxy$1);var H=G.len();G.reset(),C[O].d=buildPathString(a,w[O],G);var U=G.len();if(!z&&H!==U){F=!1;break}B&&(C[O][E]=B)}if(!F)for(var O in C)delete C[O].d;if(!o)for(var D=0;D<A;D++){var L=b[D],R=L.targetName;R==="style"&&P(L,C,function(W){return ANIMATE_STYLE_MAP[W]})}for(var Y=keys(C),Z=!0,X,D=1;D<Y.length;D++){var K=Y[D-1],te=Y[D];if(C[K][transformOriginKey]!==C[te][transformOriginKey]){Z=!1;break}X=C[K][transformOriginKey]}if(Z&&X){for(var O in C)C[O][transformOriginKey]&&delete C[O][transformOriginKey];n[transformOriginKey]=X}if(filter(Y,function(J){return keys(C[J]).length>0}).length){var ae=addAnimation(C,r);return ae+" "+M[0]+" both"}}for(var S in d){var h=x(d[S]);h&&c.push(h)}if(c.length){var T=r.zrId+"-cls-"+getClassId();r.cssNodes["."+T]={animation:c.join(",")},n.class=T}}function createCSSEmphasis(a,n,r){if(!a.ignore)if(a.isSilent()){var o={"pointer-events":"none"};setClassAttribute(o,n,r,!0)}else{var l=a.states.emphasis&&a.states.emphasis.style?a.states.emphasis.style:{},u=l.fill;if(!u){var c=a.style&&a.style.fill,h=a.states.select&&a.states.select.style&&a.states.select.style.fill,d=a.currentStates.indexOf("select")>=0&&h||c;d&&(u=liftColor(d))}var p=l.lineWidth;if(p){var f=!l.strokeNoScale&&a.transform?a.transform[0]:1;p=p/f}var o={cursor:"pointer"};u&&(o.fill=u),l.stroke&&(o.stroke=l.stroke),p&&(o["stroke-width"]=p),setClassAttribute(o,n,r,!0)}}function setClassAttribute(a,n,r,o){var l=JSON.stringify(a),u=r.cssStyleCache[l];u||(u=r.zrId+"-cls-"+getClassId(),r.cssStyleCache[l]=u,r.cssNodes["."+u+(o?":hover":"")]=a),n.class=n.class?n.class+" "+u:u}var round$1=Math.round;function isImageLike(a){return a&&isString(a.src)}function isCanvasLike(a){return a&&isFunction(a.toDataURL)}function setStyleAttrs(a,n,r,o){mapStyleToAttrs(function(l,u){var c=l==="fill"||l==="stroke";c&&isGradient(u)?setGradient(n,a,l,o):c&&isPattern(u)?setPattern(r,a,l,o):a[l]=u,c&&o.ssr&&u==="none"&&(a["pointer-events"]="visible")},n,r,!1),setShadow(r,a,o)}function setMetaData(a,n){var r=getElementSSRData(n);r&&(r.each(function(o,l){o!=null&&(a[(META_DATA_PREFIX+l).toLowerCase()]=o+"")}),n.isSilent()&&(a[META_DATA_PREFIX+"silent"]="true"))}function noRotateScale(a){return isAroundZero(a[0]-1)&&isAroundZero(a[1])&&isAroundZero(a[2])&&isAroundZero(a[3]-1)}function noTranslate(a){return isAroundZero(a[4])&&isAroundZero(a[5])}function setTransform(a,n,r){if(n&&!(noTranslate(n)&&noRotateScale(n))){var o=r?10:1e4;a.transform=noRotateScale(n)?"translate("+round$1(n[4]*o)/o+" "+round$1(n[5]*o)/o+")":getMatrixStr(n)}}function convertPolyShape(a,n,r){for(var o=a.points,l=[],u=0;u<o.length;u++)l.push(round$1(o[u][0]*r)/r),l.push(round$1(o[u][1]*r)/r);n.points=l.join(" ")}function validatePolyShape(a){return!a.smooth}function createAttrsConvert(a){var n=map$1(a,function(r){return typeof r=="string"?[r,r]:r});return function(r,o,l){for(var u=0;u<n.length;u++){var c=n[u],h=r[c[0]];h!=null&&(o[c[1]]=round$1(h*l)/l)}}}var builtinShapesDef={circle:[createAttrsConvert(["cx","cy","r"])],polyline:[convertPolyShape,validatePolyShape],polygon:[convertPolyShape,validatePolyShape]};function hasShapeAnimation(a){for(var n=a.animators,r=0;r<n.length;r++)if(n[r].targetName==="shape")return!0;return!1}function brushSVGPath(a,n){var r=a.style,o=a.shape,l=builtinShapesDef[a.type],u={},c=n.animation,h="path",d=a.style.strokePercent,p=n.compress&&getPathPrecision(a)||4;if(l&&!n.willUpdate&&!(l[1]&&!l[1](o))&&!(c&&hasShapeAnimation(a))&&!(d<1)){h=a.type;var f=Math.pow(10,p);l[0](o,u,f)}else{var g=!a.path||a.shapeChanged();a.path||a.createPathProxy();var y=a.path;g&&(y.beginPath(),a.buildPath(y,a.shape),a.pathUpdated());var v=y.getVersion(),_=a,x=_.__svgPathBuilder;(_.__svgPathVersion!==v||!x||d!==_.__svgPathStrokePercent)&&(x||(x=_.__svgPathBuilder=new SVGPathRebuilder$1),x.reset(p),y.rebuildPath(x,d),x.generateStr(),_.__svgPathVersion=v,_.__svgPathStrokePercent=d),u.d=x.getStr()}return setTransform(u,a.transform),setStyleAttrs(u,r,a,n),setMetaData(u,a),n.animation&&createCSSAnimation(a,u,n),n.emphasis&&createCSSEmphasis(a,u,n),createVNode(h,a.id+"",u)}function brushSVGImage(a,n){var r=a.style,o=r.image;if(o&&!isString(o)&&(isImageLike(o)?o=o.src:isCanvasLike(o)&&(o=o.toDataURL())),!!o){var l=r.x||0,u=r.y||0,c=r.width,h=r.height,d={href:o,width:c,height:h};return l&&(d.x=l),u&&(d.y=u),setTransform(d,a.transform),setStyleAttrs(d,r,a,n),setMetaData(d,a),n.animation&&createCSSAnimation(a,d,n),createVNode("image",a.id+"",d)}}function brushSVGTSpan(a,n){var r=a.style,o=r.text;if(o!=null&&(o+=""),!(!o||isNaN(r.x)||isNaN(r.y))){var l=r.font||DEFAULT_FONT,u=r.x||0,c=adjustTextY$1(r.y||0,getLineHeight(l),r.textBaseline),h=TEXT_ALIGN_TO_ANCHOR[r.textAlign]||r.textAlign,d={"dominant-baseline":"central","text-anchor":h};if(hasSeparateFont(r)){var p="",f=r.fontStyle,g=parseFontSize(r.fontSize);if(!parseFloat(g))return;var y=r.fontFamily||DEFAULT_FONT_FAMILY,v=r.fontWeight;p+="font-size:"+g+";font-family:"+y+";",f&&f!=="normal"&&(p+="font-style:"+f+";"),v&&v!=="normal"&&(p+="font-weight:"+v+";"),d.style=p}else d.style="font: "+l;return o.match(/\s/)&&(d["xml:space"]="preserve"),u&&(d.x=u),c&&(d.y=c),setTransform(d,a.transform),setStyleAttrs(d,r,a,n),setMetaData(d,a),n.animation&&createCSSAnimation(a,d,n),createVNode("text",a.id+"",d,void 0,o)}}function brush(a,n){if(a instanceof Path$1)return brushSVGPath(a,n);if(a instanceof ZRImage$1)return brushSVGImage(a,n);if(a instanceof TSpan$1)return brushSVGTSpan(a,n)}function setShadow(a,n,r){var o=a.style;if(hasShadow(o)){var l=getShadowKey(a),u=r.shadowCache,c=u[l];if(!c){var h=a.getGlobalScale(),d=h[0],p=h[1];if(!d||!p)return;var f=o.shadowOffsetX||0,g=o.shadowOffsetY||0,y=o.shadowBlur,v=normalizeColor(o.shadowColor),_=v.opacity,x=v.color,S=y/2/d,T=y/2/p,M=S+" "+T;c=r.zrId+"-s"+r.shadowIdx++,r.defs[c]=createVNode("filter",c,{id:c,x:"-100%",y:"-100%",width:"300%",height:"300%"},[createVNode("feDropShadow","",{dx:f/d,dy:g/p,stdDeviation:M,"flood-color":x,"flood-opacity":_})]),u[l]=c}n.filter=getIdURL(c)}}function setGradient(a,n,r,o){var l=a[r],u,c={gradientUnits:l.global?"userSpaceOnUse":"objectBoundingBox"};if(isLinearGradient(l))u="linearGradient",c.x1=l.x,c.y1=l.y,c.x2=l.x2,c.y2=l.y2;else if(isRadialGradient(l))u="radialGradient",c.cx=retrieve2(l.x,.5),c.cy=retrieve2(l.y,.5),c.r=retrieve2(l.r,.5);else{logError("Illegal gradient type.");return}for(var h=l.colorStops,d=[],p=0,f=h.length;p<f;++p){var g=round4(h[p].offset)*100+"%",y=h[p].color,v=normalizeColor(y),_=v.color,x=v.opacity,S={offset:g};S["stop-color"]=_,x<1&&(S["stop-opacity"]=x),d.push(createVNode("stop",p+"",S))}var T=createVNode(u,"",c,d),M=vNodeToString(T),b=o.gradientCache,A=b[M];A||(A=o.zrId+"-g"+o.gradientIdx++,b[M]=A,c.id=A,o.defs[A]=createVNode(u,A,c,d)),n[r]=getIdURL(A)}function setPattern(a,n,r,o){var l=a.style[r],u=a.getBoundingRect(),c={},h=l.repeat,d=h==="no-repeat",p=h==="repeat-x",f=h==="repeat-y",g;if(isImagePattern(l)){var y=l.imageWidth,v=l.imageHeight,_=void 0,x=l.image;if(isString(x)?_=x:isImageLike(x)?_=x.src:isCanvasLike(x)&&(_=x.toDataURL()),typeof Image>"u"){var S="Image width/height must been given explictly in svg-ssr renderer.";assert(y,S),assert(v,S)}else if(y==null||v==null){var T=function(D,L){if(D){var R=D.elm,O=y||L.width,N=v||L.height;D.tag==="pattern"&&(p?(N=1,O/=u.width):f&&(O=1,N/=u.height)),D.attrs.width=O,D.attrs.height=N,R&&(R.setAttribute("width",O),R.setAttribute("height",N))}},M=createOrUpdateImage(_,null,a,function(D){d||T(w,D),T(g,D)});M&&M.width&&M.height&&(y=y||M.width,v=v||M.height)}g=createVNode("image","img",{href:_,width:y,height:v}),c.width=y,c.height=v}else l.svgElement&&(g=clone$4(l.svgElement),c.width=l.svgWidth,c.height=l.svgHeight);if(g){var b,A;d?b=A=1:p?(A=1,b=c.width/u.width):f?(b=1,A=c.height/u.height):c.patternUnits="userSpaceOnUse",b!=null&&!isNaN(b)&&(c.width=b),A!=null&&!isNaN(A)&&(c.height=A);var I=getSRTTransformString(l);I&&(c.patternTransform=I);var w=createVNode("pattern","",c,[g]),C=vNodeToString(w),E=o.patternCache,P=E[C];P||(P=o.zrId+"-p"+o.patternIdx++,E[C]=P,c.id=P,w=o.defs[P]=createVNode("pattern",P,c,[g])),n[r]=getIdURL(P)}}function setClipPath(a,n,r){var o=r.clipPathCache,l=r.defs,u=o[a.id];if(!u){u=r.zrId+"-c"+r.clipPathIdx++;var c={id:u};o[a.id]=u,l[u]=createVNode("clipPath",u,c,[brushSVGPath(a,r)])}n["clip-path"]=getIdURL(u)}function createTextNode(a){return document.createTextNode(a)}function insertBefore(a,n,r){a.insertBefore(n,r)}function removeChild(a,n){a.removeChild(n)}function appendChild(a,n){a.appendChild(n)}function parentNode(a){return a.parentNode}function nextSibling(a){return a.nextSibling}function setTextContent(a,n){a.textContent=n}var colonChar=58,xChar=120,emptyNode=createVNode("","");function isUndef(a){return a===void 0}function isDef(a){return a!==void 0}function createKeyToOldIdx(a,n,r){for(var o={},l=n;l<=r;++l){var u=a[l].key;u!==void 0&&(o[u]!=null&&console.error("Duplicate key "+u),o[u]=l)}return o}function sameVnode(a,n){var r=a.key===n.key,o=a.tag===n.tag;return o&&r}function createElm(a){var n,r=a.children,o=a.tag;if(isDef(o)){var l=a.elm=createElement(o);if(updateAttrs(emptyNode,a),isArray$1(r))for(n=0;n<r.length;++n){var u=r[n];u!=null&&appendChild(l,createElm(u))}else isDef(a.text)&&!isObject$3(a.text)&&appendChild(l,createTextNode(a.text))}else a.elm=createTextNode(a.text);return a.elm}function addVnodes(a,n,r,o,l){for(;o<=l;++o){var u=r[o];u!=null&&insertBefore(a,createElm(u),n)}}function removeVnodes(a,n,r,o){for(;r<=o;++r){var l=n[r];if(l!=null)if(isDef(l.tag)){var u=parentNode(l.elm);removeChild(u,l.elm)}else removeChild(a,l.elm)}}function updateAttrs(a,n){var r,o=n.elm,l=a&&a.attrs||{},u=n.attrs||{};if(l!==u){for(r in u){var c=u[r],h=l[r];h!==c&&(c===!0?o.setAttribute(r,""):c===!1?o.removeAttribute(r):r==="style"?o.style.cssText=c:r.charCodeAt(0)!==xChar?o.setAttribute(r,c):r==="xmlns:xlink"||r==="xmlns"?o.setAttributeNS(XMLNS,r,c):r.charCodeAt(3)===colonChar?o.setAttributeNS(XML_NAMESPACE,r,c):r.charCodeAt(5)===colonChar?o.setAttributeNS(XLINKNS,r,c):o.setAttribute(r,c))}for(r in l)r in u||o.removeAttribute(r)}}function updateChildren(a,n,r){for(var o=0,l=0,u=n.length-1,c=n[0],h=n[u],d=r.length-1,p=r[0],f=r[d],g,y,v,_;o<=u&&l<=d;)c==null?c=n[++o]:h==null?h=n[--u]:p==null?p=r[++l]:f==null?f=r[--d]:sameVnode(c,p)?(patchVnode(c,p),c=n[++o],p=r[++l]):sameVnode(h,f)?(patchVnode(h,f),h=n[--u],f=r[--d]):sameVnode(c,f)?(patchVnode(c,f),insertBefore(a,c.elm,nextSibling(h.elm)),c=n[++o],f=r[--d]):sameVnode(h,p)?(patchVnode(h,p),insertBefore(a,h.elm,c.elm),h=n[--u],p=r[++l]):(isUndef(g)&&(g=createKeyToOldIdx(n,o,u)),y=g[p.key],isUndef(y)?insertBefore(a,createElm(p),c.elm):(v=n[y],v.tag!==p.tag?insertBefore(a,createElm(p),c.elm):(patchVnode(v,p),n[y]=void 0,insertBefore(a,v.elm,c.elm))),p=r[++l]);(o<=u||l<=d)&&(o>u?(_=r[d+1]==null?null:r[d+1].elm,addVnodes(a,_,r,l,d)):removeVnodes(a,n,o,u))}function patchVnode(a,n){var r=n.elm=a.elm,o=a.children,l=n.children;a!==n&&(updateAttrs(a,n),isUndef(n.text)?isDef(o)&&isDef(l)?o!==l&&updateChildren(r,o,l):isDef(l)?(isDef(a.text)&&setTextContent(r,""),addVnodes(r,null,l,0,l.length-1)):isDef(o)?removeVnodes(r,o,0,o.length-1):isDef(a.text)&&setTextContent(r,""):a.text!==n.text&&(isDef(o)&&removeVnodes(r,o,0,o.length-1),setTextContent(r,n.text)))}function patch(a,n){if(sameVnode(a,n))patchVnode(a,n);else{var r=a.elm,o=parentNode(r);createElm(n),o!==null&&(insertBefore(o,n.elm,nextSibling(r)),removeVnodes(o,[a],0,0))}return n}var svgId=0,SVGPainter=function(){function a(n,r,o){if(this.type="svg",this.refreshHover=createMethodNotSupport("refreshHover"),this.configLayer=createMethodNotSupport("configLayer"),this.storage=r,this._opts=o=extend({},o),this.root=n,this._id="zr"+svgId++,this._oldVNode=createSVGVNode(o.width,o.height),n&&!o.ssr){var l=this._viewport=document.createElement("div");l.style.cssText="position:relative;overflow:hidden";var u=this._svgDom=this._oldVNode.elm=createElement("svg");updateAttrs(null,this._oldVNode),l.appendChild(u),n.appendChild(l)}this.resize(o.width,o.height)}return a.prototype.getType=function(){return this.type},a.prototype.getViewportRoot=function(){return this._viewport},a.prototype.getViewportRootOffset=function(){var n=this.getViewportRoot();if(n)return{offsetLeft:n.offsetLeft||0,offsetTop:n.offsetTop||0}},a.prototype.getSvgDom=function(){return this._svgDom},a.prototype.refresh=function(){if(this.root){var n=this.renderToVNode({willUpdate:!0});n.attrs.style="position:absolute;left:0;top:0;user-select:none",patch(this._oldVNode,n),this._oldVNode=n}},a.prototype.renderOneToVNode=function(n){return brush(n,createBrushScope(this._id))},a.prototype.renderToVNode=function(n){n=n||{};var r=this.storage.getDisplayList(!0),o=this._width,l=this._height,u=createBrushScope(this._id);u.animation=n.animation,u.willUpdate=n.willUpdate,u.compress=n.compress,u.emphasis=n.emphasis,u.ssr=this._opts.ssr;var c=[],h=this._bgVNode=createBackgroundVNode(o,l,this._backgroundColor,u);h&&c.push(h);var d=n.compress?null:this._mainVNode=createVNode("g","main",{},[]);this._paintList(r,u,d?d.children:c),d&&c.push(d);var p=map$1(keys(u.defs),function(y){return u.defs[y]});if(p.length&&c.push(createVNode("defs","defs",{},p)),n.animation){var f=getCssString(u.cssNodes,u.cssAnims,{newline:!0});if(f){var g=createVNode("style","stl",{},[],f);c.push(g)}}return createSVGVNode(o,l,c,n.useViewBox)},a.prototype.renderToString=function(n){return n=n||{},vNodeToString(this.renderToVNode({animation:retrieve2(n.cssAnimation,!0),emphasis:retrieve2(n.cssEmphasis,!0),willUpdate:!1,compress:!0,useViewBox:retrieve2(n.useViewBox,!0)}),{newline:!0})},a.prototype.setBackgroundColor=function(n){this._backgroundColor=n},a.prototype.getSvgRoot=function(){return this._mainVNode&&this._mainVNode.elm},a.prototype._paintList=function(n,r,o){for(var l=n.length,u=[],c=0,h,d,p=0,f=0;f<l;f++){var g=n[f];if(!g.invisible){var y=g.__clipPaths,v=y&&y.length||0,_=d&&d.length||0,x=void 0;for(x=Math.max(v-1,_-1);x>=0&&!(y&&d&&y[x]===d[x]);x--);for(var S=_-1;S>x;S--)c--,h=u[c-1];for(var T=x+1;T<v;T++){var M={};setClipPath(y[T],M,r);var b=createVNode("g","clip-g-"+p++,M,[]);(h?h.children:o).push(b),u[c++]=b,h=b}d=y;var A=brush(g,r);A&&(h?h.children:o).push(A)}}},a.prototype.resize=function(n,r){var o=this._opts,l=this.root,u=this._viewport;if(n!=null&&(o.width=n),r!=null&&(o.height=r),l&&u&&(u.style.display="none",n=getSize$1(l,0,o),r=getSize$1(l,1,o),u.style.display=""),this._width!==n||this._height!==r){if(this._width=n,this._height=r,u){var c=u.style;c.width=n+"px",c.height=r+"px"}if(isPattern(this._backgroundColor))this.refresh();else{var h=this._svgDom;h&&(h.setAttribute("width",n),h.setAttribute("height",r));var d=this._bgVNode&&this._bgVNode.elm;d&&(d.setAttribute("width",n),d.setAttribute("height",r))}}},a.prototype.getWidth=function(){return this._width},a.prototype.getHeight=function(){return this._height},a.prototype.dispose=function(){this.root&&(this.root.innerHTML=""),this._svgDom=this._viewport=this.storage=this._oldVNode=this._bgVNode=this._mainVNode=null},a.prototype.clear=function(){this._svgDom&&(this._svgDom.innerHTML=null),this._oldVNode=null},a.prototype.toDataURL=function(n){var r=this.renderToString(),o="data:image/svg+xml;";return n?(r=encodeBase64(r),r&&o+"base64,"+r):o+"charset=UTF-8,"+encodeURIComponent(r)},a}();function createMethodNotSupport(a){return function(){logError('In SVG mode painter not support method "'+a+'"')}}function createBackgroundVNode(a,n,r,o){var l;if(r&&r!=="none")if(l=createVNode("rect","bg",{width:a,height:n,x:"0",y:"0"}),isGradient(r))setGradient({fill:r},l.attrs,"fill",o);else if(isPattern(r))setPattern({style:{fill:r},dirty:noop,getBoundingRect:function(){return{width:a,height:n}}},l.attrs,"fill",o);else{var u=normalizeColor(r),c=u.color,h=u.opacity;l.attrs.fill=c,h<1&&(l.attrs["fill-opacity"]=h)}return l}const SVGPainter$1=SVGPainter;function install$S(a){a.registerPainter("svg",SVGPainter$1)}function createDom(a,n,r){var o=platformApi.createCanvas(),l=n.getWidth(),u=n.getHeight(),c=o.style;return c&&(c.position="absolute",c.left="0",c.top="0",c.width=l+"px",c.height=u+"px",o.setAttribute("data-zr-dom-id",a)),o.width=l*r,o.height=u*r,o}var Layer=function(a){__extends(n,a);function n(r,o,l){var u=a.call(this)||this;u.motionBlur=!1,u.lastFrameAlpha=.7,u.dpr=1,u.virtual=!1,u.config={},u.incremental=!1,u.zlevel=0,u.maxRepaintRectCount=5,u.__dirty=!0,u.__firstTimePaint=!0,u.__used=!1,u.__drawIndex=0,u.__startIndex=0,u.__endIndex=0,u.__prevStartIndex=null,u.__prevEndIndex=null;var c;l=l||devicePixelRatio,typeof r=="string"?c=createDom(r,o,l):isObject$3(r)&&(c=r,r=c.id),u.id=r,u.dom=c;var h=c.style;return h&&(disableUserSelect(c),c.onselectstart=function(){return!1},h.padding="0",h.margin="0",h.borderWidth="0"),u.painter=o,u.dpr=l,u}return n.prototype.getElementCount=function(){return this.__endIndex-this.__startIndex},n.prototype.afterBrush=function(){this.__prevStartIndex=this.__startIndex,this.__prevEndIndex=this.__endIndex},n.prototype.initContext=function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},n.prototype.setUnpainted=function(){this.__firstTimePaint=!0},n.prototype.createBackBuffer=function(){var r=this.dpr;this.domBack=createDom("back-"+this.id,this.painter,r),this.ctxBack=this.domBack.getContext("2d"),r!==1&&this.ctxBack.scale(r,r)},n.prototype.createRepaintRects=function(r,o,l,u){if(this.__firstTimePaint)return this.__firstTimePaint=!1,null;var c=[],h=this.maxRepaintRectCount,d=!1,p=new BoundingRect$1(0,0,0,0);function f(M){if(!(!M.isFinite()||M.isZero()))if(c.length===0){var b=new BoundingRect$1(0,0,0,0);b.copy(M),c.push(b)}else{for(var A=!1,I=1/0,w=0,C=0;C<c.length;++C){var E=c[C];if(E.intersect(M)){var P=new BoundingRect$1(0,0,0,0);P.copy(E),P.union(M),c[C]=P,A=!0;break}else if(d){p.copy(M),p.union(E);var D=M.width*M.height,L=E.width*E.height,R=p.width*p.height,O=R-D-L;O<I&&(I=O,w=C)}}if(d&&(c[w].union(M),A=!0),!A){var b=new BoundingRect$1(0,0,0,0);b.copy(M),c.push(b)}d||(d=c.length>=h)}}for(var g=this.__startIndex;g<this.__endIndex;++g){var y=r[g];if(y){var v=y.shouldBePainted(l,u,!0,!0),_=y.__isRendered&&(y.__dirty&REDRAW_BIT||!v)?y.getPrevPaintRect():null;_&&f(_);var x=v&&(y.__dirty&REDRAW_BIT||!y.__isRendered)?y.getPaintRect():null;x&&f(x)}}for(var g=this.__prevStartIndex;g<this.__prevEndIndex;++g){var y=o[g],v=y&&y.shouldBePainted(l,u,!0,!0);if(y&&(!v||!y.__zr)&&y.__isRendered){var _=y.getPrevPaintRect();_&&f(_)}}var S;do{S=!1;for(var g=0;g<c.length;){if(c[g].isZero()){c.splice(g,1);continue}for(var T=g+1;T<c.length;)c[g].intersect(c[T])?(S=!0,c[g].union(c[T]),c.splice(T,1)):T++;g++}}while(S);return this._paintRects=c,c},n.prototype.debugGetPaintRects=function(){return(this._paintRects||[]).slice()},n.prototype.resize=function(r,o){var l=this.dpr,u=this.dom,c=u.style,h=this.domBack;c&&(c.width=r+"px",c.height=o+"px"),u.width=r*l,u.height=o*l,h&&(h.width=r*l,h.height=o*l,l!==1&&this.ctxBack.scale(l,l))},n.prototype.clear=function(r,o,l){var u=this.dom,c=this.ctx,h=u.width,d=u.height;o=o||this.clearColor;var p=this.motionBlur&&!r,f=this.lastFrameAlpha,g=this.dpr,y=this;p&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(u,0,0,h/g,d/g));var v=this.domBack;function _(x,S,T,M){if(c.clearRect(x,S,T,M),o&&o!=="transparent"){var b=void 0;if(isGradientObject(o)){var A=o.global||o.__width===T&&o.__height===M;b=A&&o.__canvasGradient||getCanvasGradient(c,o,{x:0,y:0,width:T,height:M}),o.__canvasGradient=b,o.__width=T,o.__height=M}else isImagePatternObject(o)&&(o.scaleX=o.scaleX||g,o.scaleY=o.scaleY||g,b=createCanvasPattern(c,o,{dirty:function(){y.setUnpainted(),y.painter.refresh()}}));c.save(),c.fillStyle=b||o,c.fillRect(x,S,T,M),c.restore()}p&&(c.save(),c.globalAlpha=f,c.drawImage(v,x,S,T,M),c.restore())}!l||p?_(0,0,h,d):l.length&&each$f(l,function(x){_(x.x*g,x.y*g,x.width*g,x.height*g)})},n}(Eventful$1);const Layer$1=Layer;var HOVER_LAYER_ZLEVEL=1e5,CANVAS_ZLEVEL=314159,EL_AFTER_INCREMENTAL_INC=.01,INCREMENTAL_INC=.001;function isLayerValid(a){return a?a.__builtin__?!0:!(typeof a.resize!="function"||typeof a.refresh!="function"):!1}function createRoot(a,n){var r=document.createElement("div");return r.style.cssText=["position:relative","width:"+a+"px","height:"+n+"px","padding:0","margin:0","border-width:0"].join(";")+";",r}var CanvasPainter=function(){function a(n,r,o,l){this.type="canvas",this._zlevelList=[],this._prevDisplayList=[],this._layers={},this._layerConfig={},this._needsManuallyCompositing=!1,this.type="canvas";var u=!n.nodeName||n.nodeName.toUpperCase()==="CANVAS";this._opts=o=extend({},o||{}),this.dpr=o.devicePixelRatio||devicePixelRatio,this._singleCanvas=u,this.root=n;var c=n.style;c&&(disableUserSelect(n),n.innerHTML=""),this.storage=r;var h=this._zlevelList;this._prevDisplayList=[];var d=this._layers;if(u){var p=n,f=p.width,g=p.height;o.width!=null&&(f=o.width),o.height!=null&&(g=o.height),this.dpr=o.devicePixelRatio||1,p.width=f*this.dpr,p.height=g*this.dpr,this._width=f,this._height=g;var y=new Layer$1(p,this,this.dpr);y.__builtin__=!0,y.initContext(),d[CANVAS_ZLEVEL]=y,y.zlevel=CANVAS_ZLEVEL,h.push(CANVAS_ZLEVEL),this._domRoot=n}else{this._width=getSize$1(n,0,o),this._height=getSize$1(n,1,o);var v=this._domRoot=createRoot(this._width,this._height);n.appendChild(v)}}return a.prototype.getType=function(){return"canvas"},a.prototype.isSingleCanvas=function(){return this._singleCanvas},a.prototype.getViewportRoot=function(){return this._domRoot},a.prototype.getViewportRootOffset=function(){var n=this.getViewportRoot();if(n)return{offsetLeft:n.offsetLeft||0,offsetTop:n.offsetTop||0}},a.prototype.refresh=function(n){var r=this.storage.getDisplayList(!0),o=this._prevDisplayList,l=this._zlevelList;this._redrawId=Math.random(),this._paintList(r,o,n,this._redrawId);for(var u=0;u<l.length;u++){var c=l[u],h=this._layers[c];if(!h.__builtin__&&h.refresh){var d=u===0?this._backgroundColor:null;h.refresh(d)}}return this._opts.useDirtyRect&&(this._prevDisplayList=r.slice()),this},a.prototype.refreshHover=function(){this._paintHoverList(this.storage.getDisplayList(!1))},a.prototype._paintHoverList=function(n){var r=n.length,o=this._hoverlayer;if(o&&o.clear(),!!r){for(var l={inHover:!0,viewWidth:this._width,viewHeight:this._height},u,c=0;c<r;c++){var h=n[c];h.__inHover&&(o||(o=this._hoverlayer=this.getLayer(HOVER_LAYER_ZLEVEL)),u||(u=o.ctx,u.save()),brush$1(u,h,l,c===r-1))}u&&u.restore()}},a.prototype.getHoverLayer=function(){return this.getLayer(HOVER_LAYER_ZLEVEL)},a.prototype.paintOne=function(n,r){brushSingle(n,r)},a.prototype._paintList=function(n,r,o,l){if(this._redrawId===l){o=o||!1,this._updateLayerStatus(n);var u=this._doPaintList(n,r,o),c=u.finished,h=u.needsRefreshHover;if(this._needsManuallyCompositing&&this._compositeManually(),h&&this._paintHoverList(n),c)this.eachLayer(function(p){p.afterBrush&&p.afterBrush()});else{var d=this;requestAnimationFrame$1(function(){d._paintList(n,r,o,l)})}}},a.prototype._compositeManually=function(){var n=this.getLayer(CANVAS_ZLEVEL).ctx,r=this._domRoot.width,o=this._domRoot.height;n.clearRect(0,0,r,o),this.eachBuiltinLayer(function(l){l.virtual&&n.drawImage(l.dom,0,0,r,o)})},a.prototype._doPaintList=function(n,r,o){for(var l=this,u=[],c=this._opts.useDirtyRect,h=0;h<this._zlevelList.length;h++){var d=this._zlevelList[h],p=this._layers[d];p.__builtin__&&p!==this._hoverlayer&&(p.__dirty||o)&&u.push(p)}for(var f=!0,g=!1,y=function(x){var S=u[x],T=S.ctx,M=c&&S.createRepaintRects(n,r,v._width,v._height),b=o?S.__startIndex:S.__drawIndex,A=!o&&S.incremental&&Date.now,I=A&&Date.now(),w=S.zlevel===v._zlevelList[0]?v._backgroundColor:null;if(S.__startIndex===S.__endIndex)S.clear(!1,w,M);else if(b===S.__startIndex){var C=n[b];(!C.incremental||!C.notClear||o)&&S.clear(!1,w,M)}b===-1&&(console.error("For some unknown reason. drawIndex is -1"),b=S.__startIndex);var E,P=function(O){var N={inHover:!1,allClipped:!1,prevEl:null,viewWidth:l._width,viewHeight:l._height};for(E=b;E<S.__endIndex;E++){var V=n[E];if(V.__inHover&&(g=!0),l._doPaintEl(V,S,c,O,N,E===S.__endIndex-1),A){var B=Date.now()-I;if(B>15)break}}N.prevElClipPaths&&T.restore()};if(M)if(M.length===0)E=S.__endIndex;else for(var D=v.dpr,L=0;L<M.length;++L){var R=M[L];T.save(),T.beginPath(),T.rect(R.x*D,R.y*D,R.width*D,R.height*D),T.clip(),P(R),T.restore()}else T.save(),P(),T.restore();S.__drawIndex=E,S.__drawIndex<S.__endIndex&&(f=!1)},v=this,_=0;_<u.length;_++)y(_);return env$1.wxa&&each$f(this._layers,function(x){x&&x.ctx&&x.ctx.draw&&x.ctx.draw()}),{finished:f,needsRefreshHover:g}},a.prototype._doPaintEl=function(n,r,o,l,u,c){var h=r.ctx;if(o){var d=n.getPaintRect();(!l||d&&d.intersect(l))&&(brush$1(h,n,u,c),n.setPrevPaintRect(d))}else brush$1(h,n,u,c)},a.prototype.getLayer=function(n,r){this._singleCanvas&&!this._needsManuallyCompositing&&(n=CANVAS_ZLEVEL);var o=this._layers[n];return o||(o=new Layer$1("zr_"+n,this,this.dpr),o.zlevel=n,o.__builtin__=!0,this._layerConfig[n]?merge(o,this._layerConfig[n],!0):this._layerConfig[n-EL_AFTER_INCREMENTAL_INC]&&merge(o,this._layerConfig[n-EL_AFTER_INCREMENTAL_INC],!0),r&&(o.virtual=r),this.insertLayer(n,o),o.initContext()),o},a.prototype.insertLayer=function(n,r){var o=this._layers,l=this._zlevelList,u=l.length,c=this._domRoot,h=null,d=-1;if(o[n]){logError("ZLevel "+n+" has been used already");return}if(!isLayerValid(r)){logError("Layer of zlevel "+n+" is not valid");return}if(u>0&&n>l[0]){for(d=0;d<u-1&&!(l[d]<n&&l[d+1]>n);d++);h=o[l[d]]}if(l.splice(d+1,0,n),o[n]=r,!r.virtual)if(h){var p=h.dom;p.nextSibling?c.insertBefore(r.dom,p.nextSibling):c.appendChild(r.dom)}else c.firstChild?c.insertBefore(r.dom,c.firstChild):c.appendChild(r.dom);r.painter||(r.painter=this)},a.prototype.eachLayer=function(n,r){for(var o=this._zlevelList,l=0;l<o.length;l++){var u=o[l];n.call(r,this._layers[u],u)}},a.prototype.eachBuiltinLayer=function(n,r){for(var o=this._zlevelList,l=0;l<o.length;l++){var u=o[l],c=this._layers[u];c.__builtin__&&n.call(r,c,u)}},a.prototype.eachOtherLayer=function(n,r){for(var o=this._zlevelList,l=0;l<o.length;l++){var u=o[l],c=this._layers[u];c.__builtin__||n.call(r,c,u)}},a.prototype.getLayers=function(){return this._layers},a.prototype._updateLayerStatus=function(n){this.eachBuiltinLayer(function(g,y){g.__dirty=g.__used=!1});function r(g){u&&(u.__endIndex!==g&&(u.__dirty=!0),u.__endIndex=g)}if(this._singleCanvas)for(var o=1;o<n.length;o++){var l=n[o];if(l.zlevel!==n[o-1].zlevel||l.incremental){this._needsManuallyCompositing=!0;break}}var u=null,c=0,h,d;for(d=0;d<n.length;d++){var l=n[d],p=l.zlevel,f=void 0;h!==p&&(h=p,c=0),l.incremental?(f=this.getLayer(p+INCREMENTAL_INC,this._needsManuallyCompositing),f.incremental=!0,c=1):f=this.getLayer(p+(c>0?EL_AFTER_INCREMENTAL_INC:0),this._needsManuallyCompositing),f.__builtin__||logError("ZLevel "+p+" has been used by unkown layer "+f.id),f!==u&&(f.__used=!0,f.__startIndex!==d&&(f.__dirty=!0),f.__startIndex=d,f.incremental?f.__drawIndex=-1:f.__drawIndex=d,r(d),u=f),l.__dirty&REDRAW_BIT&&!l.__inHover&&(f.__dirty=!0,f.incremental&&f.__drawIndex<0&&(f.__drawIndex=d))}r(d),this.eachBuiltinLayer(function(g,y){!g.__used&&g.getElementCount()>0&&(g.__dirty=!0,g.__startIndex=g.__endIndex=g.__drawIndex=0),g.__dirty&&g.__drawIndex<0&&(g.__drawIndex=g.__startIndex)})},a.prototype.clear=function(){return this.eachBuiltinLayer(this._clearLayer),this},a.prototype._clearLayer=function(n){n.clear()},a.prototype.setBackgroundColor=function(n){this._backgroundColor=n,each$f(this._layers,function(r){r.setUnpainted()})},a.prototype.configLayer=function(n,r){if(r){var o=this._layerConfig;o[n]?merge(o[n],r,!0):o[n]=r;for(var l=0;l<this._zlevelList.length;l++){var u=this._zlevelList[l];if(u===n||u===n+EL_AFTER_INCREMENTAL_INC){var c=this._layers[u];merge(c,o[n],!0)}}}},a.prototype.delLayer=function(n){var r=this._layers,o=this._zlevelList,l=r[n];!l||(l.dom.parentNode.removeChild(l.dom),delete r[n],o.splice(indexOf(o,n),1))},a.prototype.resize=function(n,r){if(this._domRoot.style){var o=this._domRoot;o.style.display="none";var l=this._opts,u=this.root;if(n!=null&&(l.width=n),r!=null&&(l.height=r),n=getSize$1(u,0,l),r=getSize$1(u,1,l),o.style.display="",this._width!==n||r!==this._height){o.style.width=n+"px",o.style.height=r+"px";for(var c in this._layers)this._layers.hasOwnProperty(c)&&this._layers[c].resize(n,r);this.refresh(!0)}this._width=n,this._height=r}else{if(n==null||r==null)return;this._width=n,this._height=r,this.getLayer(CANVAS_ZLEVEL).resize(n,r)}return this},a.prototype.clearLayer=function(n){var r=this._layers[n];r&&r.clear()},a.prototype.dispose=function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},a.prototype.getRenderedCanvas=function(n){if(n=n||{},this._singleCanvas&&!this._compositeManually)return this._layers[CANVAS_ZLEVEL].dom;var r=new Layer$1("image",this,n.pixelRatio||this.dpr);r.initContext(),r.clear(!1,n.backgroundColor||this._backgroundColor);var o=r.ctx;if(n.pixelRatio<=this.dpr){this.refresh();var l=r.dom.width,u=r.dom.height;this.eachLayer(function(g){g.__builtin__?o.drawImage(g.dom,0,0,l,u):g.renderToCanvas&&(o.save(),g.renderToCanvas(o),o.restore())})}else for(var c={inHover:!1,viewWidth:this._width,viewHeight:this._height},h=this.storage.getDisplayList(!0),d=0,p=h.length;d<p;d++){var f=h[d];brush$1(o,f,c,d===p-1)}return r.dom},a.prototype.getWidth=function(){return this._width},a.prototype.getHeight=function(){return this._height},a}();const CanvasPainter$1=CanvasPainter;function install$R(a){a.registerPainter("canvas",CanvasPainter$1)}var LineSeriesModel=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r.hasSymbolVisual=!0,r}return n.prototype.getInitialData=function(r){{var o=r.coordinateSystem;if(o!=="polar"&&o!=="cartesian2d")throw new Error("Line not support coordinateSystem besides cartesian and polar")}return createSeriesData(null,this,{useEncodeDefaulter:!0})},n.prototype.getLegendIcon=function(r){var o=new Group$4,l=createSymbol$1("line",0,r.itemHeight/2,r.itemWidth,0,r.lineStyle.stroke,!1);o.add(l),l.setStyle(r.lineStyle);var u=this.getData().getVisual("symbol"),c=this.getData().getVisual("symbolRotate"),h=u==="none"?"circle":u,d=r.itemHeight*.8,p=createSymbol$1(h,(r.itemWidth-d)/2,(r.itemHeight-d)/2,d,d,r.itemStyle.fill);o.add(p),p.setStyle(r.itemStyle);var f=r.iconRotate==="inherit"?c:r.iconRotate||0;return p.rotation=f*Math.PI/180,p.setOrigin([r.itemWidth/2,r.itemHeight/2]),h.indexOf("empty")>-1&&(p.style.stroke=p.style.fill,p.style.fill="#fff",p.style.lineWidth=2),o},n.type="series.line",n.dependencies=["grid","polar"],n.defaultOption={z:3,coordinateSystem:"cartesian2d",legendHoverLink:!0,clip:!0,label:{position:"top"},endLabel:{show:!1,valueAnimation:!0,distance:8},lineStyle:{width:2,type:"solid"},emphasis:{scale:!0},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0,universalTransition:{divideShape:"clone"},triggerLineEvent:!1},n}(SeriesModel$1);const LineSeries=LineSeriesModel;function getDefaultLabel(a,n){var r=a.mapDimensionsAll("defaultedLabel"),o=r.length;if(o===1){var l=retrieveRawValue(a,n,r[0]);return l!=null?l+"":null}else if(o){for(var u=[],c=0;c<r.length;c++)u.push(retrieveRawValue(a,n,r[c]));return u.join(" ")}}function getDefaultInterpolatedLabel(a,n){var r=a.mapDimensionsAll("defaultedLabel");if(!isArray$1(n))return n+"";for(var o=[],l=0;l<r.length;l++){var u=a.getDimensionIndex(r[l]);u>=0&&o.push(n[u])}return o.join(" ")}var Symbol$1=function(a){__extends(n,a);function n(r,o,l,u){var c=a.call(this)||this;return c.updateData(r,o,l,u),c}return n.prototype._createSymbol=function(r,o,l,u,c){this.removeAll();var h=createSymbol$1(r,-1,-1,2,2,null,c);h.attr({z2:100,culling:!0,scaleX:u[0]/2,scaleY:u[1]/2}),h.drift=driftSymbol,this._symbolType=r,this.add(h)},n.prototype.stopSymbolAnimation=function(r){this.childAt(0).stopAnimation(null,r)},n.prototype.getSymbolType=function(){return this._symbolType},n.prototype.getSymbolPath=function(){return this.childAt(0)},n.prototype.highlight=function(){enterEmphasis(this.childAt(0))},n.prototype.downplay=function(){leaveEmphasis(this.childAt(0))},n.prototype.setZ=function(r,o){var l=this.childAt(0);l.zlevel=r,l.z=o},n.prototype.setDraggable=function(r,o){var l=this.childAt(0);l.draggable=r,l.cursor=!o&&r?"move":l.cursor},n.prototype.updateData=function(r,o,l,u){this.silent=!1;var c=r.getItemVisual(o,"symbol")||"circle",h=r.hostModel,d=n.getSymbolSize(r,o),p=c!==this._symbolType,f=u&&u.disableAnimation;if(p){var g=r.getItemVisual(o,"symbolKeepAspect");this._createSymbol(c,r,o,d,g)}else{var y=this.childAt(0);y.silent=!1;var v={scaleX:d[0]/2,scaleY:d[1]/2};f?y.attr(v):updateProps$1(y,v,h,o),saveOldStyle(y)}if(this._updateCommon(r,o,d,l,u),p){var y=this.childAt(0);if(!f){var v={scaleX:this._sizeX,scaleY:this._sizeY,style:{opacity:y.style.opacity}};y.scaleX=y.scaleY=0,y.style.opacity=0,initProps(y,v,h,o)}}f&&this.childAt(0).stopAnimation("leave")},n.prototype._updateCommon=function(r,o,l,u,c){var h=this.childAt(0),d=r.hostModel,p,f,g,y,v,_,x,S,T;if(u&&(p=u.emphasisItemStyle,f=u.blurItemStyle,g=u.selectItemStyle,y=u.focus,v=u.blurScope,x=u.labelStatesModels,S=u.hoverScale,T=u.cursorStyle,_=u.emphasisDisabled),!u||r.hasItemOption){var M=u&&u.itemModel?u.itemModel:r.getItemModel(o),b=M.getModel("emphasis");p=b.getModel("itemStyle").getItemStyle(),g=M.getModel(["select","itemStyle"]).getItemStyle(),f=M.getModel(["blur","itemStyle"]).getItemStyle(),y=b.get("focus"),v=b.get("blurScope"),_=b.get("disabled"),x=getLabelStatesModels(M),S=b.getShallow("scale"),T=M.getShallow("cursor")}var A=r.getItemVisual(o,"symbolRotate");h.attr("rotation",(A||0)*Math.PI/180||0);var I=normalizeSymbolOffset(r.getItemVisual(o,"symbolOffset"),l);I&&(h.x=I[0],h.y=I[1]),T&&h.attr("cursor",T);var w=r.getItemVisual(o,"style"),C=w.fill;if(h instanceof ZRImage$1){var E=h.style;h.useStyle(extend({image:E.image,x:E.x,y:E.y,width:E.width,height:E.height},w))}else h.__isEmptyBrush?h.useStyle(extend({},w)):h.useStyle(w),h.style.decal=null,h.setColor(C,c&&c.symbolInnerColor),h.style.strokeNoScale=!0;var P=r.getItemVisual(o,"liftZ"),D=this._z2;P!=null?D==null&&(this._z2=h.z2,h.z2+=P):D!=null&&(h.z2=D,this._z2=null);var L=c&&c.useNameLabel;setLabelStyle(h,x,{labelFetcher:d,labelDataIndex:o,defaultText:R,inheritColor:C,defaultOpacity:w.opacity});function R(V){return L?r.getName(V):getDefaultLabel(r,V)}this._sizeX=l[0]/2,this._sizeY=l[1]/2;var O=h.ensureState("emphasis");O.style=p,h.ensureState("select").style=g,h.ensureState("blur").style=f;var N=S==null||S===!0?Math.max(1.1,3/this._sizeY):isFinite(S)&&S>0?+S:1;O.scaleX=this._sizeX*N,O.scaleY=this._sizeY*N,this.setSymbolScale(1),toggleHoverEmphasis(this,y,v,_)},n.prototype.setSymbolScale=function(r){this.scaleX=this.scaleY=r},n.prototype.fadeOut=function(r,o,l){var u=this.childAt(0),c=getECData(this).dataIndex,h=l&&l.animation;if(this.silent=u.silent=!0,l&&l.fadeLabel){var d=u.getTextContent();d&&removeElement(d,{style:{opacity:0}},o,{dataIndex:c,removeOpt:h,cb:function(){u.removeTextContent()}})}else u.removeTextContent();removeElement(u,{style:{opacity:0},scaleX:0,scaleY:0},o,{dataIndex:c,cb:r,removeOpt:h})},n.getSymbolSize=function(r,o){return normalizeSymbolSize(r.getItemVisual(o,"symbolSize"))},n}(Group$4);function driftSymbol(a,n){this.parent.drift(a,n)}const SymbolClz=Symbol$1;function symbolNeedsDraw$1(a,n,r,o){return n&&!isNaN(n[0])&&!isNaN(n[1])&&!(o.isIgnore&&o.isIgnore(r))&&!(o.clipShape&&!o.clipShape.contain(n[0],n[1]))&&a.getItemVisual(r,"symbol")!=="none"}function normalizeUpdateOpt(a){return a!=null&&!isObject$3(a)&&(a={isIgnore:a}),a||{}}function makeSeriesScope$2(a){var n=a.hostModel,r=n.getModel("emphasis");return{emphasisItemStyle:r.getModel("itemStyle").getItemStyle(),blurItemStyle:n.getModel(["blur","itemStyle"]).getItemStyle(),selectItemStyle:n.getModel(["select","itemStyle"]).getItemStyle(),focus:r.get("focus"),blurScope:r.get("blurScope"),emphasisDisabled:r.get("disabled"),hoverScale:r.get("scale"),labelStatesModels:getLabelStatesModels(n),cursorStyle:n.get("cursor")}}var SymbolDraw=function(){function a(n){this.group=new Group$4,this._SymbolCtor=n||SymbolClz}return a.prototype.updateData=function(n,r){this._progressiveEls=null,r=normalizeUpdateOpt(r);var o=this.group,l=n.hostModel,u=this._data,c=this._SymbolCtor,h=r.disableAnimation,d=makeSeriesScope$2(n),p={disableAnimation:h},f=r.getSymbolPoint||function(g){return n.getItemLayout(g)};u||o.removeAll(),n.diff(u).add(function(g){var y=f(g);if(symbolNeedsDraw$1(n,y,g,r)){var v=new c(n,g,d,p);v.setPosition(y),n.setItemGraphicEl(g,v),o.add(v)}}).update(function(g,y){var v=u.getItemGraphicEl(y),_=f(g);if(!symbolNeedsDraw$1(n,_,g,r)){o.remove(v);return}var x=n.getItemVisual(g,"symbol")||"circle",S=v&&v.getSymbolType&&v.getSymbolType();if(!v||S&&S!==x)o.remove(v),v=new c(n,g,d,p),v.setPosition(_);else{v.updateData(n,g,d,p);var T={x:_[0],y:_[1]};h?v.attr(T):updateProps$1(v,T,l)}o.add(v),n.setItemGraphicEl(g,v)}).remove(function(g){var y=u.getItemGraphicEl(g);y&&y.fadeOut(function(){o.remove(y)},l)}).execute(),this._getSymbolPoint=f,this._data=n},a.prototype.updateLayout=function(){var n=this,r=this._data;r&&r.eachItemGraphicEl(function(o,l){var u=n._getSymbolPoint(l);o.setPosition(u),o.markRedraw()})},a.prototype.incrementalPrepareUpdate=function(n){this._seriesScope=makeSeriesScope$2(n),this._data=null,this.group.removeAll()},a.prototype.incrementalUpdate=function(n,r,o){this._progressiveEls=[],o=normalizeUpdateOpt(o);function l(d){d.isGroup||(d.incremental=!0,d.ensureState("emphasis").hoverLayer=!0)}for(var u=n.start;u<n.end;u++){var c=r.getItemLayout(u);if(symbolNeedsDraw$1(r,c,u,o)){var h=new this._SymbolCtor(r,u,this._seriesScope);h.traverse(l),h.setPosition(c),this.group.add(h),r.setItemGraphicEl(u,h),this._progressiveEls.push(h)}}},a.prototype.eachRendered=function(n){traverseElements(this._progressiveEls||this.group,n)},a.prototype.remove=function(n){var r=this.group,o=this._data;o&&n?o.eachItemGraphicEl(function(l){l.fadeOut(function(){r.remove(l)},o.hostModel)}):r.removeAll()},a}();const SymbolDraw$1=SymbolDraw;function prepareDataCoordInfo(a,n,r){var o=a.getBaseAxis(),l=a.getOtherAxis(o),u=getValueStart(l,r),c=o.dim,h=l.dim,d=n.mapDimension(h),p=n.mapDimension(c),f=h==="x"||h==="radius"?1:0,g=map$1(a.dimensions,function(_){return n.mapDimension(_)}),y=!1,v=n.getCalculationInfo("stackResultDimension");return isDimensionStacked(n,g[0])&&(y=!0,g[0]=v),isDimensionStacked(n,g[1])&&(y=!0,g[1]=v),{dataDimsForPoint:g,valueStart:u,valueAxisDim:h,baseAxisDim:c,stacked:!!y,valueDim:d,baseDim:p,baseDataOffset:f,stackedOverDimension:n.getCalculationInfo("stackedOverDimension")}}function getValueStart(a,n){var r=0,o=a.scale.getExtent();return n==="start"?r=o[0]:n==="end"?r=o[1]:isNumber(n)&&!isNaN(n)?r=n:o[0]>0?r=o[0]:o[1]<0&&(r=o[1]),r}function getStackedOnPoint(a,n,r,o){var l=NaN;a.stacked&&(l=r.get(r.getCalculationInfo("stackedOverDimension"),o)),isNaN(l)&&(l=a.valueStart);var u=a.baseDataOffset,c=[];return c[u]=r.get(a.baseDim,o),c[1-u]=l,n.dataToPoint(c)}function diffData(a,n){var r=[];return n.diff(a).add(function(o){r.push({cmd:"+",idx:o})}).update(function(o,l){r.push({cmd:"=",idx:l,idx1:o})}).remove(function(o){r.push({cmd:"-",idx:o})}).execute(),r}function lineAnimationDiff(a,n,r,o,l,u,c,h){for(var d=diffData(a,n),p=[],f=[],g=[],y=[],v=[],_=[],x=[],S=prepareDataCoordInfo(l,n,c),T=a.getLayout("points")||[],M=n.getLayout("points")||[],b=0;b<d.length;b++){var A=d[b],I=!0,w=void 0,C=void 0;switch(A.cmd){case"=":w=A.idx*2,C=A.idx1*2;var E=T[w],P=T[w+1],D=M[C],L=M[C+1];(isNaN(E)||isNaN(P))&&(E=D,P=L),p.push(E,P),f.push(D,L),g.push(r[w],r[w+1]),y.push(o[C],o[C+1]),x.push(n.getRawIndex(A.idx1));break;case"+":var R=A.idx,O=S.dataDimsForPoint,N=l.dataToPoint([n.get(O[0],R),n.get(O[1],R)]);C=R*2,p.push(N[0],N[1]),f.push(M[C],M[C+1]);var V=getStackedOnPoint(S,l,n,R);g.push(V[0],V[1]),y.push(o[C],o[C+1]),x.push(n.getRawIndex(R));break;case"-":I=!1}I&&(v.push(A),_.push(_.length))}_.sort(function(K,te){return x[K]-x[te]});for(var B=p.length,G=createFloat32Array(B),F=createFloat32Array(B),z=createFloat32Array(B),H=createFloat32Array(B),U=[],b=0;b<_.length;b++){var Y=_[b],Z=b*2,X=Y*2;G[Z]=p[X],G[Z+1]=p[X+1],F[Z]=f[X],F[Z+1]=f[X+1],z[Z]=g[X],z[Z+1]=g[X+1],H[Z]=y[X],H[Z+1]=y[X+1],U[b]=v[Y]}return{current:G,next:F,stackedOnCurrent:z,stackedOnNext:H,status:U}}var mathMin$5=Math.min,mathMax$5=Math.max;function isPointNull$1(a,n){return isNaN(a)||isNaN(n)}function drawSegment(a,n,r,o,l,u,c,h,d){for(var p,f,g,y,v,_,x=r,S=0;S<o;S++){var T=n[x*2],M=n[x*2+1];if(x>=l||x<0)break;if(isPointNull$1(T,M)){if(d){x+=u;continue}break}if(x===r)a[u>0?"moveTo":"lineTo"](T,M),g=T,y=M;else{var b=T-p,A=M-f;if(b*b+A*A<.5){x+=u;continue}if(c>0){for(var I=x+u,w=n[I*2],C=n[I*2+1];w===T&&C===M&&S<o;)S++,I+=u,x+=u,w=n[I*2],C=n[I*2+1],T=n[x*2],M=n[x*2+1],b=T-p,A=M-f;var E=S+1;if(d)for(;isPointNull$1(w,C)&&E<o;)E++,I+=u,w=n[I*2],C=n[I*2+1];var P=.5,D=0,L=0,R=void 0,O=void 0;if(E>=o||isPointNull$1(w,C))v=T,_=M;else{D=w-p,L=C-f;var N=T-p,V=w-T,B=M-f,G=C-M,F=void 0,z=void 0;if(h==="x"){F=Math.abs(N),z=Math.abs(V);var H=D>0?1:-1;v=T-H*F*c,_=M,R=T+H*z*c,O=M}else if(h==="y"){F=Math.abs(B),z=Math.abs(G);var U=L>0?1:-1;v=T,_=M-U*F*c,R=T,O=M+U*z*c}else F=Math.sqrt(N*N+B*B),z=Math.sqrt(V*V+G*G),P=z/(z+F),v=T-D*c*(1-P),_=M-L*c*(1-P),R=T+D*c*P,O=M+L*c*P,R=mathMin$5(R,mathMax$5(w,T)),O=mathMin$5(O,mathMax$5(C,M)),R=mathMax$5(R,mathMin$5(w,T)),O=mathMax$5(O,mathMin$5(C,M)),D=R-T,L=O-M,v=T-D*F/z,_=M-L*F/z,v=mathMin$5(v,mathMax$5(p,T)),_=mathMin$5(_,mathMax$5(f,M)),v=mathMax$5(v,mathMin$5(p,T)),_=mathMax$5(_,mathMin$5(f,M)),D=T-v,L=M-_,R=T+D*z/F,O=M+L*z/F}a.bezierCurveTo(g,y,v,_,T,M),g=R,y=O}else a.lineTo(T,M)}p=T,f=M,x+=u}return S}var ECPolylineShape=function(){function a(){this.smooth=0,this.smoothConstraint=!0}return a}(),ECPolyline=function(a){__extends(n,a);function n(r){var o=a.call(this,r)||this;return o.type="ec-polyline",o}return n.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},n.prototype.getDefaultShape=function(){return new ECPolylineShape},n.prototype.buildPath=function(r,o){var l=o.points,u=0,c=l.length/2;if(o.connectNulls){for(;c>0&&isPointNull$1(l[c*2-2],l[c*2-1]);c--);for(;u<c&&isPointNull$1(l[u*2],l[u*2+1]);u++);}for(;u<c;)u+=drawSegment(r,l,u,c,c,1,o.smooth,o.smoothMonotone,o.connectNulls)+1},n.prototype.getPointOn=function(r,o){this.path||(this.createPathProxy(),this.buildPath(this.path,this.shape));for(var l=this.path,u=l.data,c=PathProxy$1.CMD,h,d,p=o==="x",f=[],g=0;g<u.length;){var y=u[g++],v=void 0,_=void 0,x=void 0,S=void 0,T=void 0,M=void 0,b=void 0;switch(y){case c.M:h=u[g++],d=u[g++];break;case c.L:if(v=u[g++],_=u[g++],b=p?(r-h)/(v-h):(r-d)/(_-d),b<=1&&b>=0){var A=p?(_-d)*b+d:(v-h)*b+h;return p?[r,A]:[A,r]}h=v,d=_;break;case c.C:v=u[g++],_=u[g++],x=u[g++],S=u[g++],T=u[g++],M=u[g++];var I=p?cubicRootAt(h,v,x,T,r,f):cubicRootAt(d,_,S,M,r,f);if(I>0)for(var w=0;w<I;w++){var C=f[w];if(C<=1&&C>=0){var A=p?cubicAt(d,_,S,M,C):cubicAt(h,v,x,T,C);return p?[r,A]:[A,r]}}h=T,d=M;break}}},n}(Path$1),ECPolygonShape=function(a){__extends(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n}(ECPolylineShape),ECPolygon=function(a){__extends(n,a);function n(r){var o=a.call(this,r)||this;return o.type="ec-polygon",o}return n.prototype.getDefaultShape=function(){return new ECPolygonShape},n.prototype.buildPath=function(r,o){var l=o.points,u=o.stackedOnPoints,c=0,h=l.length/2,d=o.smoothMonotone;if(o.connectNulls){for(;h>0&&isPointNull$1(l[h*2-2],l[h*2-1]);h--);for(;c<h&&isPointNull$1(l[c*2],l[c*2+1]);c++);}for(;c<h;){var p=drawSegment(r,l,c,h,h,1,o.smooth,d,o.connectNulls);drawSegment(r,u,c+p-1,p,h,-1,o.stackedOnSmooth,d,o.connectNulls),c+=p+1,r.closePath()}},n}(Path$1);function createGridClipPath(a,n,r,o,l){var u=a.getArea(),c=u.x,h=u.y,d=u.width,p=u.height,f=r.get(["lineStyle","width"])||0;c-=f/2,h-=f/2,d+=f,p+=f,d=Math.ceil(d),c!==Math.floor(c)&&(c=Math.floor(c),d++);var g=new Rect$3({shape:{x:c,y:h,width:d,height:p}});if(n){var y=a.getBaseAxis(),v=y.isHorizontal(),_=y.inverse;v?(_&&(g.shape.x+=d),g.shape.width=0):(_||(g.shape.y+=p),g.shape.height=0);var x=isFunction(l)?function(S){l(S,g)}:null;initProps(g,{shape:{width:d,height:p,x:c,y:h}},r,null,o,x)}return g}function createPolarClipPath(a,n,r){var o=a.getArea(),l=round$3(o.r0,1),u=round$3(o.r,1),c=new Sector$1({shape:{cx:round$3(a.cx,1),cy:round$3(a.cy,1),r0:l,r:u,startAngle:o.startAngle,endAngle:o.endAngle,clockwise:o.clockwise}});if(n){var h=a.getBaseAxis().dim==="angle";h?c.shape.endAngle=o.startAngle:c.shape.r=l,initProps(c,{shape:{endAngle:o.endAngle,r:u}},r)}return c}function createClipPath(a,n,r,o,l){if(a){if(a.type==="polar")return createPolarClipPath(a,n,r);if(a.type==="cartesian2d")return createGridClipPath(a,n,r,o,l)}else return null;return null}function isCoordinateSystemType(a,n){return a.type===n}function isPointsSame(a,n){if(a.length===n.length){for(var r=0;r<a.length;r++)if(a[r]!==n[r])return;return!0}}function bboxFromPoints(a){for(var n=1/0,r=1/0,o=-1/0,l=-1/0,u=0;u<a.length;){var c=a[u++],h=a[u++];isNaN(c)||(n=Math.min(c,n),o=Math.max(c,o)),isNaN(h)||(r=Math.min(h,r),l=Math.max(h,l))}return[[n,r],[o,l]]}function getBoundingDiff(a,n){var r=bboxFromPoints(a),o=r[0],l=r[1],u=bboxFromPoints(n),c=u[0],h=u[1];return Math.max(Math.abs(o[0]-c[0]),Math.abs(o[1]-c[1]),Math.abs(l[0]-h[0]),Math.abs(l[1]-h[1]))}function getSmooth(a){return isNumber(a)?a:a?.5:0}function getStackedOnPoints(a,n,r){if(!r.valueDim)return[];for(var o=n.count(),l=createFloat32Array(o*2),u=0;u<o;u++){var c=getStackedOnPoint(r,a,n,u);l[u*2]=c[0],l[u*2+1]=c[1]}return l}function turnPointsIntoStep(a,n,r,o,l){var u=r.getBaseAxis(),c=u.dim==="x"||u.dim==="radius"?0:1,h=[],d=0,p=[],f=[],g=[],y=[];if(l){for(d=0;d<a.length;d+=2){var v=n||a;!isNaN(v[d])&&!isNaN(v[d+1])&&y.push(a[d],a[d+1])}a=y}for(d=0;d<a.length-2;d+=2)switch(g[0]=a[d+2],g[1]=a[d+3],f[0]=a[d],f[1]=a[d+1],h.push(f[0],f[1]),o){case"end":p[c]=g[c],p[1-c]=f[1-c],h.push(p[0],p[1]);break;case"middle":var _=(f[c]+g[c])/2,x=[];p[c]=x[c]=_,p[1-c]=f[1-c],x[1-c]=g[1-c],h.push(p[0],p[1]),h.push(x[0],x[1]);break;default:p[c]=f[c],p[1-c]=g[1-c],h.push(p[0],p[1])}return h.push(a[d++],a[d++]),h}function clipColorStops(a,n){var r=[],o=a.length,l,u;function c(f,g,y){var v=f.coord,_=(y-v)/(g.coord-v),x=lerp(_,[f.color,g.color]);return{coord:y,color:x}}for(var h=0;h<o;h++){var d=a[h],p=d.coord;if(p<0)l=d;else if(p>n){u?r.push(c(u,d,n)):l&&r.push(c(l,d,0),c(l,d,n));break}else l&&(r.push(c(l,d,0)),l=null),r.push(d),u=d}return r}function getVisualGradient(a,n,r){var o=a.getVisual("visualMeta");if(!(!o||!o.length||!a.count())){if(n.type!=="cartesian2d"){console.warn("Visual map on line style is only supported on cartesian2d.");return}for(var l,u,c=o.length-1;c>=0;c--){var h=a.getDimensionInfo(o[c].dimension);if(l=h&&h.coordDim,l==="x"||l==="y"){u=o[c];break}}if(!u){console.warn("Visual map on line style only support x or y dimension.");return}var d=n.getAxis(l),p=map$1(u.stops,function(b){return{coord:d.toGlobalCoord(d.dataToCoord(b.value)),color:b.color}}),f=p.length,g=u.outerColors.slice();f&&p[0].coord>p[f-1].coord&&(p.reverse(),g.reverse());var y=clipColorStops(p,l==="x"?r.getWidth():r.getHeight()),v=y.length;if(!v&&f)return p[0].coord<0?g[1]?g[1]:p[f-1].color:g[0]?g[0]:p[0].color;var _=10,x=y[0].coord-_,S=y[v-1].coord+_,T=S-x;if(T<.001)return"transparent";each$f(y,function(b){b.offset=(b.coord-x)/T}),y.push({offset:v?y[v-1].offset:.5,color:g[1]||"transparent"}),y.unshift({offset:v?y[0].offset:.5,color:g[0]||"transparent"});var M=new LinearGradient$1(0,0,0,0,y,!0);return M[l]=x,M[l+"2"]=S,M}}function getIsIgnoreFunc(a,n,r){var o=a.get("showAllSymbol"),l=o==="auto";if(!(o&&!l)){var u=r.getAxesByScale("ordinal")[0];if(!!u&&!(l&&canShowAllSymbolForCategory(u,n))){var c=n.mapDimension(u.dim),h={};return each$f(u.getViewLabels(),function(d){var p=u.scale.getRawOrdinalNumber(d.tickValue);h[p]=1}),function(d){return!h.hasOwnProperty(n.get(c,d))}}}}function canShowAllSymbolForCategory(a,n){var r=a.getExtent(),o=Math.abs(r[1]-r[0])/a.scale.count();isNaN(o)&&(o=0);for(var l=n.count(),u=Math.max(1,Math.round(l/5)),c=0;c<l;c+=u)if(SymbolClz.getSymbolSize(n,c)[a.isHorizontal()?1:0]*1.5>o)return!1;return!0}function isPointNull(a,n){return isNaN(a)||isNaN(n)}function getLastIndexNotNull(a){for(var n=a.length/2;n>0&&isPointNull(a[n*2-2],a[n*2-1]);n--);return n-1}function getPointAtIndex(a,n){return[a[n*2],a[n*2+1]]}function getIndexRange(a,n,r){for(var o=a.length/2,l=r==="x"?0:1,u,c,h=0,d=-1,p=0;p<o;p++)if(c=a[p*2+l],!(isNaN(c)||isNaN(a[p*2+1-l]))){if(p===0){u=c;continue}if(u<=n&&c>=n||u>=n&&c<=n){d=p;break}h=p,u=c}return{range:[h,d],t:(n-u)/(c-u)}}function anyStateShowEndLabel(a){if(a.get(["endLabel","show"]))return!0;for(var n=0;n<SPECIAL_STATES.length;n++)if(a.get([SPECIAL_STATES[n],"endLabel","show"]))return!0;return!1}function createLineClipPath(a,n,r,o){if(isCoordinateSystemType(n,"cartesian2d")){var l=o.getModel("endLabel"),u=l.get("valueAnimation"),c=o.getData(),h={lastFrameIndex:0},d=anyStateShowEndLabel(o)?function(v,_){a._endLabelOnDuring(v,_,c,h,u,l,n)}:null,p=n.getBaseAxis().isHorizontal(),f=createGridClipPath(n,r,o,function(){var v=a._endLabel;v&&r&&h.originalX!=null&&v.attr({x:h.originalX,y:h.originalY})},d);if(!o.get("clip",!0)){var g=f.shape,y=Math.max(g.width,g.height);p?(g.y-=y,g.height+=y*2):(g.x-=y,g.width+=y*2)}return d&&d(1,f),f}else return o.get(["endLabel","show"])&&console.warn("endLabel is not supported for lines in polar systems."),createPolarClipPath(n,r,o)}function getEndLabelStateSpecified(a,n){var r=n.getBaseAxis(),o=r.isHorizontal(),l=r.inverse,u=o?l?"right":"left":"center",c=o?"middle":l?"top":"bottom";return{normal:{align:a.get("align")||u,verticalAlign:a.get("verticalAlign")||c}}}var LineView=function(a){__extends(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.init=function(){var r=new Group$4,o=new SymbolDraw$1;this.group.add(o.group),this._symbolDraw=o,this._lineGroup=r,this._changePolyState=bind$1(this._changePolyState,this)},n.prototype.render=function(r,o,l){var u=r.coordinateSystem,c=this.group,h=r.getData(),d=r.getModel("lineStyle"),p=r.getModel("areaStyle"),f=h.getLayout("points")||[],g=u.type==="polar",y=this._coordSys,v=this._symbolDraw,_=this._polyline,x=this._polygon,S=this._lineGroup,T=!o.ssr&&r.get("animation"),M=!p.isEmpty(),b=p.get("origin"),A=prepareDataCoordInfo(u,h,b),I=M&&getStackedOnPoints(u,h,A),w=r.get("showSymbol"),C=r.get("connectNulls"),E=w&&!g&&getIsIgnoreFunc(r,h,u),P=this._data;P&&P.eachItemGraphicEl(function(K,te){K.__temp&&(c.remove(K),P.setItemGraphicEl(te,null))}),w||v.remove(),c.add(S);var D=g?!1:r.get("step"),L;u&&u.getArea&&r.get("clip",!0)&&(L=u.getArea(),L.width!=null?(L.x-=.1,L.y-=.1,L.width+=.2,L.height+=.2):L.r0&&(L.r0-=.5,L.r+=.5)),this._clipShapeForSymbol=L;var R=getVisualGradient(h,u,l)||h.getVisual("style")[h.getVisual("drawType")];if(!(_&&y.type===u.type&&D===this._step))w&&v.updateData(h,{isIgnore:E,clipShape:L,disableAnimation:!0,getSymbolPoint:function(K){return[f[K*2],f[K*2+1]]}}),T&&this._initSymbolLabelAnimation(h,u,L),D&&(I&&(I=turnPointsIntoStep(I,f,u,D,C)),f=turnPointsIntoStep(f,null,u,D,C)),_=this._newPolyline(f),M?x=this._newPolygon(f,I):x&&(S.remove(x),x=this._polygon=null),g||this._initOrUpdateEndLabel(r,u,convertToColorString(R)),S.setClipPath(createLineClipPath(this,u,!0,r));else{M&&!x?x=this._newPolygon(f,I):x&&!M&&(S.remove(x),x=this._polygon=null),g||this._initOrUpdateEndLabel(r,u,convertToColorString(R));var O=S.getClipPath();if(O){var N=createLineClipPath(this,u,!1,r);initProps(O,{shape:N.shape},r)}else S.setClipPath(createLineClipPath(this,u,!0,r));w&&v.updateData(h,{isIgnore:E,clipShape:L,disableAnimation:!0,getSymbolPoint:function(K){return[f[K*2],f[K*2+1]]}}),(!isPointsSame(this._stackedOnPoints,I)||!isPointsSame(this._points,f))&&(T?this._doUpdateAnimation(h,I,u,l,D,b,C):(D&&(I&&(I=turnPointsIntoStep(I,f,u,D,C)),f=turnPointsIntoStep(f,null,u,D,C)),_.setShape({points:f}),x&&x.setShape({points:f,stackedOnPoints:I})))}var V=r.getModel("emphasis"),B=V.get("focus"),G=V.get("blurScope"),F=V.get("disabled");if(_.useStyle(defaults(d.getLineStyle(),{fill:"none",stroke:R,lineJoin:"bevel"})),setStatesStylesFromModel(_,r,"lineStyle"),_.style.lineWidth>0&&r.get(["emphasis","lineStyle","width"])==="bolder"){var z=_.getState("emphasis").style;z.lineWidth=+_.style.lineWidth+1}getECData(_).seriesIndex=r.seriesIndex,toggleHoverEmphasis(_,B,G,F);var H=getSmooth(r.get("smooth")),U=r.get("smoothMonotone");if(_.setShape({smooth:H,smoothMonotone:U,connectNulls:C}),x){var Y=h.getCalculationInfo("stackedOnSeries"),Z=0;x.useStyle(defaults(p.getAreaStyle(),{fill:R,opacity:.7,lineJoin:"bevel",decal:h.getVisual("style").decal})),Y&&(Z=getSmooth(Y.get("smooth"))),x.setShape({smooth:H,stackedOnSmooth:Z,smoothMonotone:U,connectNulls:C}),setStatesStylesFromModel(x,r,"areaStyle"),getECData(x).seriesIndex=r.seriesIndex,toggleHoverEmphasis(x,B,G,F)}var X=this._changePolyState;h.eachItemGraphicEl(function(K){K&&(K.onHoverStateChange=X)}),this._polyline.onHoverStateChange=X,this._data=h,this._coordSys=u,this._stackedOnPoints=I,this._points=f,this._step=D,this._valueOrigin=b,r.get("triggerLineEvent")&&(this.packEventData(r,_),x&&this.packEventData(r,x))},n.prototype.packEventData=function(r,o){getECData(o).eventData={componentType:"series",componentSubType:"line",componentIndex:r.componentIndex,seriesIndex:r.seriesIndex,seriesName:r.name,seriesType:"line"}},n.prototype.highlight=function(r,o,l,u){var c=r.getData(),h=queryDataIndex(c,u);if(this._changePolyState("emphasis"),!(h instanceof Array)&&h!=null&&h>=0){var d=c.getLayout("points"),p=c.getItemGraphicEl(h);if(!p){var f=d[h*2],g=d[h*2+1];if(isNaN(f)||isNaN(g)||this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(f,g))return;var y=r.get("zlevel")||0,v=r.get("z")||0;p=new SymbolClz(c,h),p.x=f,p.y=g,p.setZ(y,v);var _=p.getSymbolPath().getTextContent();_&&(_.zlevel=y,_.z=v,_.z2=this._polyline.z2+1),p.__temp=!0,c.setItemGraphicEl(h,p),p.stopSymbolAnimation(!0),this.group.add(p)}p.highlight()}else ChartView$1.prototype.highlight.call(this,r,o,l,u)},n.prototype.downplay=function(r,o,l,u){var c=r.getData(),h=queryDataIndex(c,u);if(this._changePolyState("normal"),h!=null&&h>=0){var d=c.getItemGraphicEl(h);d&&(d.__temp?(c.setItemGraphicEl(h,null),this.group.remove(d)):d.downplay())}else ChartView$1.prototype.downplay.call(this,r,o,l,u)},n.prototype._changePolyState=function(r){var o=this._polygon;setStatesFlag(this._polyline,r),o&&setStatesFlag(o,r)},n.prototype._newPolyline=function(r){var o=this._polyline;return o&&this._lineGroup.remove(o),o=new ECPolyline({shape:{points:r},segmentIgnoreThreshold:2,z2:10}),this._lineGroup.add(o),this._polyline=o,o},n.prototype._newPolygon=function(r,o){var l=this._polygon;return l&&this._lineGroup.remove(l),l=new ECPolygon({shape:{points:r,stackedOnPoints:o},segmentIgnoreThreshold:2}),this._lineGroup.add(l),this._polygon=l,l},n.prototype._initSymbolLabelAnimation=function(r,o,l){var u,c,h=o.getBaseAxis(),d=h.inverse;o.type==="cartesian2d"?(u=h.isHorizontal(),c=!1):o.type==="polar"&&(u=h.dim==="angle",c=!0);var p=r.hostModel,f=p.get("animationDuration");isFunction(f)&&(f=f(null));var g=p.get("animationDelay")||0,y=isFunction(g)?g(null):g;r.eachItemGraphicEl(function(v,_){var x=v;if(x){var S=[v.x,v.y],T=void 0,M=void 0,b=void 0;if(l)if(c){var A=l,I=o.pointToCoord(S);u?(T=A.startAngle,M=A.endAngle,b=-I[1]/180*Math.PI):(T=A.r0,M=A.r,b=I[0])}else{var w=l;u?(T=w.x,M=w.x+w.width,b=v.x):(T=w.y+w.height,M=w.y,b=v.y)}var C=M===T?0:(b-T)/(M-T);d&&(C=1-C);var E=isFunction(g)?g(_):f*C+y,P=x.getSymbolPath(),D=P.getTextContent();x.attr({scaleX:0,scaleY:0}),x.animateTo({scaleX:1,scaleY:1},{duration:200,setToFinal:!0,delay:E}),D&&D.animateFrom({style:{opacity:0}},{duration:300,delay:E}),P.disableLabelAnimation=!0}})},n.prototype._initOrUpdateEndLabel=function(r,o,l){var u=r.getModel("endLabel");if(anyStateShowEndLabel(r)){var c=r.getData(),h=this._polyline,d=c.getLayout("points");if(!d){h.removeTextContent(),this._endLabel=null;return}var p=this._endLabel;p||(p=this._endLabel=new ZRText$1({z2:200}),p.ignoreClip=!0,h.setTextContent(this._endLabel),h.disableLabelAnimation=!0);var f=getLastIndexNotNull(d);f>=0&&(setLabelStyle(h,getLabelStatesModels(r,"endLabel"),{inheritColor:l,labelFetcher:r,labelDataIndex:f,defaultText:function(g,y,v){return v!=null?getDefaultInterpolatedLabel(c,v):getDefaultLabel(c,g)},enableTextSetter:!0},getEndLabelStateSpecified(u,o)),h.textConfig.position=null)}else this._endLabel&&(this._polyline.removeTextContent(),this._endLabel=null)},n.prototype._endLabelOnDuring=function(r,o,l,u,c,h,d){var p=this._endLabel,f=this._polyline;if(p){r<1&&u.originalX==null&&(u.originalX=p.x,u.originalY=p.y);var g=l.getLayout("points"),y=l.hostModel,v=y.get("connectNulls"),_=h.get("precision"),x=h.get("distance")||0,S=d.getBaseAxis(),T=S.isHorizontal(),M=S.inverse,b=o.shape,A=M?T?b.x:b.y+b.height:T?b.x+b.width:b.y,I=(T?x:0)*(M?-1:1),w=(T?0:-x)*(M?-1:1),C=T?"x":"y",E=getIndexRange(g,A,C),P=E.range,D=P[1]-P[0],L=void 0;if(D>=1){if(D>1&&!v){var R=getPointAtIndex(g,P[0]);p.attr({x:R[0]+I,y:R[1]+w}),c&&(L=y.getRawValue(P[0]))}else{var R=f.getPointOn(A,C);R&&p.attr({x:R[0]+I,y:R[1]+w});var O=y.getRawValue(P[0]),N=y.getRawValue(P[1]);c&&(L=interpolateRawValues(l,_,O,N,E.t))}u.lastFrameIndex=P[0]}else{var V=r===1||u.lastFrameIndex>0?P[0]:0,R=getPointAtIndex(g,V);c&&(L=y.getRawValue(V)),p.attr({x:R[0]+I,y:R[1]+w})}if(c){var B=labelInner(p);typeof B.setLabelText=="function"&&B.setLabelText(L)}}},n.prototype._doUpdateAnimation=function(r,o,l,u,c,h,d){var p=this._polyline,f=this._polygon,g=r.hostModel,y=lineAnimationDiff(this._data,r,this._stackedOnPoints,o,this._coordSys,l,this._valueOrigin),v=y.current,_=y.stackedOnCurrent,x=y.next,S=y.stackedOnNext;if(c&&(_=turnPointsIntoStep(y.stackedOnCurrent,y.current,l,c,d),v=turnPointsIntoStep(y.current,null,l,c,d),S=turnPointsIntoStep(y.stackedOnNext,y.next,l,c,d),x=turnPointsIntoStep(y.next,null,l,c,d)),getBoundingDiff(v,x)>3e3||f&&getBoundingDiff(_,S)>3e3){p.stopAnimation(),p.setShape({points:x}),f&&(f.stopAnimation(),f.setShape({points:x,stackedOnPoints:S}));return}p.shape.__points=y.current,p.shape.points=v;var T={shape:{points:x}};y.current!==v&&(T.shape.__points=y.next),p.stopAnimation(),updateProps$1(p,T,g),f&&(f.setShape({points:v,stackedOnPoints:_}),f.stopAnimation(),updateProps$1(f,{shape:{stackedOnPoints:S}},g),p.shape.points!==f.shape.points&&(f.shape.points=p.shape.points));for(var M=[],b=y.status,A=0;A<b.length;A++){var I=b[A].cmd;if(I==="="){var w=r.getItemGraphicEl(b[A].idx1);w&&M.push({el:w,ptIdx:A})}}p.animators&&p.animators.length&&p.animators[0].during(function(){f&&f.dirtyShape();for(var C=p.shape.__points,E=0;E<M.length;E++){var P=M[E].el,D=M[E].ptIdx*2;P.x=C[D],P.y=C[D+1],P.markRedraw()}})},n.prototype.remove=function(r){var o=this.group,l=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),l&&l.eachItemGraphicEl(function(u,c){u.__temp&&(o.remove(u),l.setItemGraphicEl(c,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._endLabel=this._data=null},n.type="line",n}(ChartView$1);const LineView$1=LineView;function pointsLayout(a,n){return{seriesType:a,plan:createRenderPlanner(),reset:function(r){var o=r.getData(),l=r.coordinateSystem,u=r.pipelineContext,c=n||u.large;if(l){var h=map$1(l.dimensions,function(v){return o.mapDimension(v)}).slice(0,2),d=h.length,p=o.getCalculationInfo("stackResultDimension");isDimensionStacked(o,h[0])&&(h[0]=p),isDimensionStacked(o,h[1])&&(h[1]=p);var f=o.getStore(),g=o.getDimensionIndex(h[0]),y=o.getDimensionIndex(h[1]);return d&&{progress:function(v,_){for(var x=v.end-v.start,S=c&&createFloat32Array(x*d),T=[],M=[],b=v.start,A=0;b<v.end;b++){var I=void 0;if(d===1){var w=f.get(g,b);I=l.dataToPoint(w,null,M)}else T[0]=f.get(g,b),T[1]=f.get(y,b),I=l.dataToPoint(T,null,M);c?(S[A++]=I[0],S[A++]=I[1]):_.setItemLayout(b,I.slice())}c&&_.setLayout("points",S)}}}}}}var samplers={average:function(a){for(var n=0,r=0,o=0;o<a.length;o++)isNaN(a[o])||(n+=a[o],r++);return r===0?NaN:n/r},sum:function(a){for(var n=0,r=0;r<a.length;r++)n+=a[r]||0;return n},max:function(a){for(var n=-1/0,r=0;r<a.length;r++)a[r]>n&&(n=a[r]);return isFinite(n)?n:NaN},min:function(a){for(var n=1/0,r=0;r<a.length;r++)a[r]<n&&(n=a[r]);return isFinite(n)?n:NaN},nearest:function(a){return a[0]}},indexSampler=function(a){return Math.round(a.length/2)};function dataSample(a){return{seriesType:a,reset:function(n,r,o){var l=n.getData(),u=n.get("sampling"),c=n.coordinateSystem,h=l.count();if(h>10&&c.type==="cartesian2d"&&u){var d=c.getBaseAxis(),p=c.getOtherAxis(d),f=d.getExtent(),g=o.getDevicePixelRatio(),y=Math.abs(f[1]-f[0])*(g||1),v=Math.round(h/y);if(isFinite(v)&&v>1){u==="lttb"?n.setData(l.lttbDownSample(l.mapDimension(p.dim),1/v)):u==="minmax"&&n.setData(l.minmaxDownSample(l.mapDimension(p.dim),1/v));var _=void 0;isString(u)?_=samplers[u]:isFunction(u)&&(_=u),_&&n.setData(l.downSample(l.mapDimension(p.dim),1/v,_,indexSampler))}}}}}function install$Q(a){a.registerChartView(LineView$1),a.registerSeriesModel(LineSeries),a.registerLayout(pointsLayout("line",!0)),a.registerVisual({seriesType:"line",reset:function(n){var r=n.getData(),o=n.getModel("lineStyle").getLineStyle();o&&!o.stroke&&(o.stroke=r.getVisual("style").fill),r.setVisual("legendLineStyle",o)}}),a.registerProcessor(a.PRIORITY.PROCESSOR.STATISTIC,dataSample("line"))}var BaseBarSeriesModel=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.prototype.getInitialData=function(r,o){return createSeriesData(null,this,{useEncodeDefaulter:!0})},n.prototype.getMarkerPosition=function(r,o,l){var u=this.coordinateSystem;if(u&&u.clampData){var c=u.clampData(r),h=u.dataToPoint(c);if(l)each$f(u.getAxes(),function(y,v){if(y.type==="category"&&o!=null){var _=y.getTicksCoords(),x=y.getTickModel().get("alignWithLabel"),S=c[v],T=o[v]==="x1"||o[v]==="y1";if(T&&!x&&(S+=1),_.length<2)return;if(_.length===2){h[v]=y.toGlobalCoord(y.getExtent()[T?1:0]);return}for(var M=void 0,b=void 0,A=1,I=0;I<_.length;I++){var w=_[I].coord,C=I===_.length-1?_[I-1].tickValue+A:_[I].tickValue;if(C===S){b=w;break}else if(C<S)M=w;else if(M!=null&&C>S){b=(w+M)/2;break}I===1&&(A=C-_[0].tickValue)}b==null&&(M?M&&(b=_[_.length-1].coord):b=_[0].coord),h[v]=y.toGlobalCoord(b)}});else{var d=this.getData(),p=d.getLayout("offset"),f=d.getLayout("size"),g=u.getBaseAxis().isHorizontal()?0:1;h[g]+=p+f/2}return h}return[NaN,NaN]},n.type="series.__base_bar__",n.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod"},n}(SeriesModel$1);SeriesModel$1.registerClass(BaseBarSeriesModel);const BaseBarSeriesModel$1=BaseBarSeriesModel;var BarSeriesModel=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.prototype.getInitialData=function(){return createSeriesData(null,this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},n.prototype.getProgressive=function(){return this.get("large")?this.get("progressive"):!1},n.prototype.getProgressiveThreshold=function(){var r=this.get("progressiveThreshold"),o=this.get("largeThreshold");return o>r&&(r=o),r},n.prototype.brushSelector=function(r,o,l){return l.rect(o.getItemLayout(r))},n.type="series.bar",n.dependencies=["grid","polar"],n.defaultOption=inheritDefaultOption(BaseBarSeriesModel$1.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:"#212121"}},realtimeSort:!1}),n}(BaseBarSeriesModel$1);const BarSeries=BarSeriesModel;var SausageShape=function(){function a(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return a}(),SausagePath=function(a){__extends(n,a);function n(r){var o=a.call(this,r)||this;return o.type="sausage",o}return n.prototype.getDefaultShape=function(){return new SausageShape},n.prototype.buildPath=function(r,o){var l=o.cx,u=o.cy,c=Math.max(o.r0||0,0),h=Math.max(o.r,0),d=(h-c)*.5,p=c+d,f=o.startAngle,g=o.endAngle,y=o.clockwise,v=Math.PI*2,_=y?g-f<v:f-g<v;_||(f=g-(y?v:-v));var x=Math.cos(f),S=Math.sin(f),T=Math.cos(g),M=Math.sin(g);_?(r.moveTo(x*c+l,S*c+u),r.arc(x*p+l,S*p+u,d,-Math.PI+f,f,!y)):r.moveTo(x*h+l,S*h+u),r.arc(l,u,h,f,g,!y),r.arc(T*p+l,M*p+u,d,g-Math.PI*2,g-Math.PI,!y),c!==0&&r.arc(l,u,c,g,f,y)},n}(Path$1);const Sausage=SausagePath;function createSectorCalculateTextPosition(a,n){n=n||{};var r=n.isRoundCap;return function(o,l,u){var c=l.position;if(!c||c instanceof Array)return calculateTextPosition(o,l,u);var h=a(c),d=l.distance!=null?l.distance:5,p=this.shape,f=p.cx,g=p.cy,y=p.r,v=p.r0,_=(y+v)/2,x=p.startAngle,S=p.endAngle,T=(x+S)/2,M=r?Math.abs(y-v)/2:0,b=Math.cos,A=Math.sin,I=f+y*b(x),w=g+y*A(x),C="left",E="top";switch(h){case"startArc":I=f+(v-d)*b(T),w=g+(v-d)*A(T),C="center",E="top";break;case"insideStartArc":I=f+(v+d)*b(T),w=g+(v+d)*A(T),C="center",E="bottom";break;case"startAngle":I=f+_*b(x)+adjustAngleDistanceX(x,d+M,!1),w=g+_*A(x)+adjustAngleDistanceY(x,d+M,!1),C="right",E="middle";break;case"insideStartAngle":I=f+_*b(x)+adjustAngleDistanceX(x,-d+M,!1),w=g+_*A(x)+adjustAngleDistanceY(x,-d+M,!1),C="left",E="middle";break;case"middle":I=f+_*b(T),w=g+_*A(T),C="center",E="middle";break;case"endArc":I=f+(y+d)*b(T),w=g+(y+d)*A(T),C="center",E="bottom";break;case"insideEndArc":I=f+(y-d)*b(T),w=g+(y-d)*A(T),C="center",E="top";break;case"endAngle":I=f+_*b(S)+adjustAngleDistanceX(S,d+M,!0),w=g+_*A(S)+adjustAngleDistanceY(S,d+M,!0),C="left",E="middle";break;case"insideEndAngle":I=f+_*b(S)+adjustAngleDistanceX(S,-d+M,!0),w=g+_*A(S)+adjustAngleDistanceY(S,-d+M,!0),C="right",E="middle";break;default:return calculateTextPosition(o,l,u)}return o=o||{},o.x=I,o.y=w,o.align=C,o.verticalAlign=E,o}}function setSectorTextRotation(a,n,r,o){if(isNumber(o)){a.setTextConfig({rotation:o});return}else if(isArray$1(n)){a.setTextConfig({rotation:0});return}var l=a.shape,u=l.clockwise?l.startAngle:l.endAngle,c=l.clockwise?l.endAngle:l.startAngle,h=(u+c)/2,d,p=r(n);switch(p){case"startArc":case"insideStartArc":case"middle":case"insideEndArc":case"endArc":d=h;break;case"startAngle":case"insideStartAngle":d=u;break;case"endAngle":case"insideEndAngle":d=c;break;default:a.setTextConfig({rotation:0});return}var f=Math.PI*1.5-d;p==="middle"&&f>Math.PI/2&&f<Math.PI*1.5&&(f-=Math.PI),a.setTextConfig({rotation:f})}function adjustAngleDistanceX(a,n,r){return n*Math.sin(a)*(r?-1:1)}function adjustAngleDistanceY(a,n,r){return n*Math.cos(a)*(r?1:-1)}function getSectorCornerRadius(a,n,r){var o=a.get("borderRadius");if(o==null)return r?{cornerRadius:0}:null;isArray$1(o)||(o=[o,o,o,o]);var l=Math.abs(n.r||0-n.r0||0);return{cornerRadius:map$1(o,function(u){return parsePercent$1(u,l)})}}var mathMax$4=Math.max,mathMin$4=Math.min;function getClipArea(a,n){var r=a.getArea&&a.getArea();if(isCoordinateSystemType(a,"cartesian2d")){var o=a.getBaseAxis();if(o.type!=="category"||!o.onBand){var l=n.getLayout("bandWidth");o.isHorizontal()?(r.x-=l,r.width+=l*2):(r.y-=l,r.height+=l*2)}}return r}var BarView=function(a){__extends(n,a);function n(){var r=a.call(this)||this;return r.type=n.type,r._isFirstFrame=!0,r}return n.prototype.render=function(r,o,l,u){this._model=r,this._removeOnRenderedListener(l),this._updateDrawMode(r);var c=r.get("coordinateSystem");c==="cartesian2d"||c==="polar"?(this._progressiveEls=null,this._isLargeDraw?this._renderLarge(r,o,l):this._renderNormal(r,o,l,u)):warn("Only cartesian2d and polar supported for bar.")},n.prototype.incrementalPrepareRender=function(r){this._clear(),this._updateDrawMode(r),this._updateLargeClip(r)},n.prototype.incrementalRender=function(r,o){this._progressiveEls=[],this._incrementalRenderLarge(r,o)},n.prototype.eachRendered=function(r){traverseElements(this._progressiveEls||this.group,r)},n.prototype._updateDrawMode=function(r){var o=r.pipelineContext.large;(this._isLargeDraw==null||o!==this._isLargeDraw)&&(this._isLargeDraw=o,this._clear())},n.prototype._renderNormal=function(r,o,l,u){var c=this.group,h=r.getData(),d=this._data,p=r.coordinateSystem,f=p.getBaseAxis(),g;p.type==="cartesian2d"?g=f.isHorizontal():p.type==="polar"&&(g=f.dim==="angle");var y=r.isAnimationEnabled()?r:null,v=shouldRealtimeSort(r,p);v&&this._enableRealtimeSort(v,h,l);var _=r.get("clip",!0)||v,x=getClipArea(p,h);c.removeClipPath();var S=r.get("roundCap",!0),T=r.get("showBackground",!0),M=r.getModel("backgroundStyle"),b=M.get("borderRadius")||0,A=[],I=this._backgroundEls,w=u&&u.isInitSort,C=u&&u.type==="changeAxisOrder";function E(L){var R=getLayout[p.type](h,L),O=createBackgroundEl(p,g,R);return O.useStyle(M.getItemStyle()),p.type==="cartesian2d"?O.setShape("r",b):O.setShape("cornerRadius",b),A[L]=O,O}h.diff(d).add(function(L){var R=h.getItemModel(L),O=getLayout[p.type](h,L,R);if(T&&E(L),!(!h.hasValue(L)||!isValidLayout[p.type](O))){var N=!1;_&&(N=clip[p.type](x,O));var V=elementCreator[p.type](r,h,L,O,g,y,f.model,!1,S);v&&(V.forceLabelAnimation=!0),updateStyle(V,h,L,R,O,r,g,p.type==="polar"),w?V.attr({shape:O}):v?updateRealtimeAnimation(v,y,V,O,L,g,!1,!1):initProps(V,{shape:O},r,L),h.setItemGraphicEl(L,V),c.add(V),V.ignore=N}}).update(function(L,R){var O=h.getItemModel(L),N=getLayout[p.type](h,L,O);if(T){var V=void 0;I.length===0?V=E(R):(V=I[R],V.useStyle(M.getItemStyle()),p.type==="cartesian2d"?V.setShape("r",b):V.setShape("cornerRadius",b),A[L]=V);var B=getLayout[p.type](h,L),G=createBackgroundShape(g,B,p);updateProps$1(V,{shape:G},y,L)}var F=d.getItemGraphicEl(R);if(!h.hasValue(L)||!isValidLayout[p.type](N)){c.remove(F);return}var z=!1;if(_&&(z=clip[p.type](x,N),z&&c.remove(F)),F?saveOldStyle(F):F=elementCreator[p.type](r,h,L,N,g,y,f.model,!!F,S),v&&(F.forceLabelAnimation=!0),C){var H=F.getTextContent();if(H){var U=labelInner(H);U.prevValue!=null&&(U.prevValue=U.value)}}else updateStyle(F,h,L,O,N,r,g,p.type==="polar");w?F.attr({shape:N}):v?updateRealtimeAnimation(v,y,F,N,L,g,!0,C):updateProps$1(F,{shape:N},r,L,null),h.setItemGraphicEl(L,F),F.ignore=z,c.add(F)}).remove(function(L){var R=d.getItemGraphicEl(L);R&&removeElementWithFadeOut(R,r,L)}).execute();var P=this._backgroundGroup||(this._backgroundGroup=new Group$4);P.removeAll();for(var D=0;D<A.length;++D)P.add(A[D]);c.add(P),this._backgroundEls=A,this._data=h},n.prototype._renderLarge=function(r,o,l){this._clear(),createLarge$1(r,this.group),this._updateLargeClip(r)},n.prototype._incrementalRenderLarge=function(r,o){this._removeBackground(),createLarge$1(o,this.group,this._progressiveEls,!0)},n.prototype._updateLargeClip=function(r){var o=r.get("clip",!0)&&createClipPath(r.coordinateSystem,!1,r),l=this.group;o?l.setClipPath(o):l.removeClipPath()},n.prototype._enableRealtimeSort=function(r,o,l){var u=this;if(o.count()){var c=r.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(o,r,l),this._isFirstFrame=!1;else{var h=function(d){var p=o.getItemGraphicEl(d),f=p&&p.shape;return f&&Math.abs(c.isHorizontal()?f.height:f.width)||0};this._onRendered=function(){u._updateSortWithinSameData(o,h,c,l)},l.getZr().on("rendered",this._onRendered)}}},n.prototype._dataSort=function(r,o,l){var u=[];return r.each(r.mapDimension(o.dim),function(c,h){var d=l(h);d=d==null?NaN:d,u.push({dataIndex:h,mappedValue:d,ordinalNumber:c})}),u.sort(function(c,h){return h.mappedValue-c.mappedValue}),{ordinalNumbers:map$1(u,function(c){return c.ordinalNumber})}},n.prototype._isOrderChangedWithinSameData=function(r,o,l){for(var u=l.scale,c=r.mapDimension(l.dim),h=Number.MAX_VALUE,d=0,p=u.getOrdinalMeta().categories.length;d<p;++d){var f=r.rawIndexOf(c,u.getRawOrdinalNumber(d)),g=f<0?Number.MIN_VALUE:o(r.indexOfRawIndex(f));if(g>h)return!0;h=g}return!1},n.prototype._isOrderDifferentInView=function(r,o){for(var l=o.scale,u=l.getExtent(),c=Math.max(0,u[0]),h=Math.min(u[1],l.getOrdinalMeta().categories.length-1);c<=h;++c)if(r.ordinalNumbers[c]!==l.getRawOrdinalNumber(c))return!0},n.prototype._updateSortWithinSameData=function(r,o,l,u){if(this._isOrderChangedWithinSameData(r,o,l)){var c=this._dataSort(r,l,o);this._isOrderDifferentInView(c,l)&&(this._removeOnRenderedListener(u),u.dispatchAction({type:"changeAxisOrder",componentType:l.dim+"Axis",axisId:l.index,sortInfo:c}))}},n.prototype._dispatchInitSort=function(r,o,l){var u=o.baseAxis,c=this._dataSort(r,u,function(h){return r.get(r.mapDimension(o.otherAxis.dim),h)});l.dispatchAction({type:"changeAxisOrder",componentType:u.dim+"Axis",isInitSort:!0,axisId:u.index,sortInfo:c})},n.prototype.remove=function(r,o){this._clear(this._model),this._removeOnRenderedListener(o)},n.prototype.dispose=function(r,o){this._removeOnRenderedListener(o)},n.prototype._removeOnRenderedListener=function(r){this._onRendered&&(r.getZr().off("rendered",this._onRendered),this._onRendered=null)},n.prototype._clear=function(r){var o=this.group,l=this._data;r&&r.isAnimationEnabled()&&l&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],l.eachItemGraphicEl(function(u){removeElementWithFadeOut(u,r,getECData(u).dataIndex)})):o.removeAll(),this._data=null,this._isFirstFrame=!0},n.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},n.type="bar",n}(ChartView$1),clip={cartesian2d:function(a,n){var r=n.width<0?-1:1,o=n.height<0?-1:1;r<0&&(n.x+=n.width,n.width=-n.width),o<0&&(n.y+=n.height,n.height=-n.height);var l=a.x+a.width,u=a.y+a.height,c=mathMax$4(n.x,a.x),h=mathMin$4(n.x+n.width,l),d=mathMax$4(n.y,a.y),p=mathMin$4(n.y+n.height,u),f=h<c,g=p<d;return n.x=f&&c>l?h:c,n.y=g&&d>u?p:d,n.width=f?0:h-c,n.height=g?0:p-d,r<0&&(n.x+=n.width,n.width=-n.width),o<0&&(n.y+=n.height,n.height=-n.height),f||g},polar:function(a,n){var r=n.r0<=n.r?1:-1;if(r<0){var o=n.r;n.r=n.r0,n.r0=o}var l=mathMin$4(n.r,a.r),u=mathMax$4(n.r0,a.r0);n.r=l,n.r0=u;var c=l-u<0;if(r<0){var o=n.r;n.r=n.r0,n.r0=o}return c}},elementCreator={cartesian2d:function(a,n,r,o,l,u,c,h,d){var p=new Rect$3({shape:extend({},o),z2:1});if(p.__dataIndex=r,p.name="item",u){var f=p.shape,g=l?"height":"width";f[g]=0}return p},polar:function(a,n,r,o,l,u,c,h,d){var p=!l&&d?Sausage:Sector$1,f=new p({shape:o,z2:1});f.name="item";var g=createPolarPositionMapping(l);if(f.calculateTextPosition=createSectorCalculateTextPosition(g,{isRoundCap:p===Sausage}),u){var y=f.shape,v=l?"r":"endAngle",_={};y[v]=l?o.r0:o.startAngle,_[v]=o[v],(h?updateProps$1:initProps)(f,{shape:_},u)}return f}};function shouldRealtimeSort(a,n){var r=a.get("realtimeSort",!0),o=n.getBaseAxis();if(r&&(o.type!=="category"&&warn("`realtimeSort` will not work because this bar series is not based on a category axis."),n.type!=="cartesian2d"&&warn("`realtimeSort` will not work because this bar series is not on cartesian2d.")),r&&o.type==="category"&&n.type==="cartesian2d")return{baseAxis:o,otherAxis:n.getOtherAxis(o)}}function updateRealtimeAnimation(a,n,r,o,l,u,c,h){var d,p;u?(p={x:o.x,width:o.width},d={y:o.y,height:o.height}):(p={y:o.y,height:o.height},d={x:o.x,width:o.width}),h||(c?updateProps$1:initProps)(r,{shape:d},n,l,null);var f=n?a.baseAxis.model:null;(c?updateProps$1:initProps)(r,{shape:p},f,l)}function checkPropertiesNotValid(a,n){for(var r=0;r<n.length;r++)if(!isFinite(a[n[r]]))return!0;return!1}var rectPropties=["x","y","width","height"],polarPropties=["cx","cy","r","startAngle","endAngle"],isValidLayout={cartesian2d:function(a){return!checkPropertiesNotValid(a,rectPropties)},polar:function(a){return!checkPropertiesNotValid(a,polarPropties)}},getLayout={cartesian2d:function(a,n,r){var o=a.getItemLayout(n),l=r?getLineWidth(r,o):0,u=o.width>0?1:-1,c=o.height>0?1:-1;return{x:o.x+u*l/2,y:o.y+c*l/2,width:o.width-u*l,height:o.height-c*l}},polar:function(a,n,r){var o=a.getItemLayout(n);return{cx:o.cx,cy:o.cy,r0:o.r0,r:o.r,startAngle:o.startAngle,endAngle:o.endAngle,clockwise:o.clockwise}}};function isZeroOnPolar(a){return a.startAngle!=null&&a.endAngle!=null&&a.startAngle===a.endAngle}function createPolarPositionMapping(a){return function(n){var r=n?"Arc":"Angle";return function(o){switch(o){case"start":case"insideStart":case"end":case"insideEnd":return o+r;default:return o}}}(a)}function updateStyle(a,n,r,o,l,u,c,h){var d=n.getItemVisual(r,"style");if(h){if(!u.get("roundCap")){var p=a.shape,f=getSectorCornerRadius(o.getModel("itemStyle"),p,!0);extend(p,f),a.setShape(p)}}else{var g=o.get(["itemStyle","borderRadius"])||0;a.setShape("r",g)}a.useStyle(d);var y=o.getShallow("cursor");y&&a.attr("cursor",y);var v=h?c?l.r>=l.r0?"endArc":"startArc":l.endAngle>=l.startAngle?"endAngle":"startAngle":c?l.height>=0?"bottom":"top":l.width>=0?"right":"left",_=getLabelStatesModels(o);setLabelStyle(a,_,{labelFetcher:u,labelDataIndex:r,defaultText:getDefaultLabel(u.getData(),r),inheritColor:d.fill,defaultOpacity:d.opacity,defaultOutsidePosition:v});var x=a.getTextContent();if(h&&x){var S=o.get(["label","position"]);a.textConfig.inside=S==="middle"?!0:null,setSectorTextRotation(a,S==="outside"?v:S,createPolarPositionMapping(c),o.get(["label","rotate"]))}setLabelValueAnimation(x,_,u.getRawValue(r),function(M){return getDefaultInterpolatedLabel(n,M)});var T=o.getModel(["emphasis"]);toggleHoverEmphasis(a,T.get("focus"),T.get("blurScope"),T.get("disabled")),setStatesStylesFromModel(a,o),isZeroOnPolar(l)&&(a.style.fill="none",a.style.stroke="none",each$f(a.states,function(M){M.style&&(M.style.fill=M.style.stroke="none")}))}function getLineWidth(a,n){var r=a.get(["itemStyle","borderColor"]);if(!r||r==="none")return 0;var o=a.get(["itemStyle","borderWidth"])||0,l=isNaN(n.width)?Number.MAX_VALUE:Math.abs(n.width),u=isNaN(n.height)?Number.MAX_VALUE:Math.abs(n.height);return Math.min(o,l,u)}var LagePathShape=function(){function a(){}return a}(),LargePath=function(a){__extends(n,a);function n(r){var o=a.call(this,r)||this;return o.type="largeBar",o}return n.prototype.getDefaultShape=function(){return new LagePathShape},n.prototype.buildPath=function(r,o){for(var l=o.points,u=this.baseDimIdx,c=1-this.baseDimIdx,h=[],d=[],p=this.barWidth,f=0;f<l.length;f+=3)d[u]=p,d[c]=l[f+2],h[u]=l[f+u],h[c]=l[f+c],r.rect(h[0],h[1],d[0],d[1])},n}(Path$1);function createLarge$1(a,n,r,o){var l=a.getData(),u=l.getLayout("valueAxisHorizontal")?1:0,c=l.getLayout("largeDataIndices"),h=l.getLayout("size"),d=a.getModel("backgroundStyle"),p=l.getLayout("largeBackgroundPoints");if(p){var f=new LargePath({shape:{points:p},incremental:!!o,silent:!0,z2:0});f.baseDimIdx=u,f.largeDataIndices=c,f.barWidth=h,f.useStyle(d.getItemStyle()),n.add(f),r&&r.push(f)}var g=new LargePath({shape:{points:l.getLayout("largePoints")},incremental:!!o,ignoreCoarsePointer:!0,z2:1});g.baseDimIdx=u,g.largeDataIndices=c,g.barWidth=h,n.add(g),g.useStyle(l.getVisual("style")),g.style.stroke=null,getECData(g).seriesIndex=a.seriesIndex,a.get("silent")||(g.on("mousedown",largePathUpdateDataIndex),g.on("mousemove",largePathUpdateDataIndex)),r&&r.push(g)}var largePathUpdateDataIndex=throttle(function(a){var n=this,r=largePathFindDataIndex(n,a.offsetX,a.offsetY);getECData(n).dataIndex=r>=0?r:null},30,!1);function largePathFindDataIndex(a,n,r){for(var o=a.baseDimIdx,l=1-o,u=a.shape.points,c=a.largeDataIndices,h=[],d=[],p=a.barWidth,f=0,g=u.length/3;f<g;f++){var y=f*3;if(d[o]=p,d[l]=u[y+2],h[o]=u[y+o],h[l]=u[y+l],d[l]<0&&(h[l]+=d[l],d[l]=-d[l]),n>=h[0]&&n<=h[0]+d[0]&&r>=h[1]&&r<=h[1]+d[1])return c[f]}return-1}function createBackgroundShape(a,n,r){if(isCoordinateSystemType(r,"cartesian2d")){var o=n,l=r.getArea();return{x:a?o.x:l.x,y:a?l.y:o.y,width:a?o.width:l.width,height:a?l.height:o.height}}else{var l=r.getArea(),u=n;return{cx:l.cx,cy:l.cy,r0:a?l.r0:u.r0,r:a?l.r:u.r,startAngle:a?u.startAngle:0,endAngle:a?u.endAngle:Math.PI*2}}}function createBackgroundEl(a,n,r){var o=a.type==="polar"?Sector$1:Rect$3;return new o({shape:createBackgroundShape(n,r,a),silent:!0,z2:0})}const BarView$1=BarView;function install$P(a){a.registerChartView(BarView$1),a.registerSeriesModel(BarSeries),a.registerLayout(a.PRIORITY.VISUAL.LAYOUT,curry$1(layout$3,"bar")),a.registerLayout(a.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,createProgressiveLayout("bar")),a.registerProcessor(a.PRIORITY.PROCESSOR.STATISTIC,dataSample("bar")),a.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},function(n,r){var o=n.componentType||"series";r.eachComponent({mainType:o,query:n},function(l){n.sortInfo&&l.axis.setCategorySortInfo(n.sortInfo)})})}var PI2=Math.PI*2,RADIAN$2=Math.PI/180;function getViewRect$5(a,n){return getLayoutRect(a.getBoxLayoutParams(),{width:n.getWidth(),height:n.getHeight()})}function getBasicPieLayout(a,n){var r=getViewRect$5(a,n),o=a.get("center"),l=a.get("radius");isArray$1(l)||(l=[0,l]);var u=parsePercent(r.width,n.getWidth()),c=parsePercent(r.height,n.getHeight()),h=Math.min(u,c),d=parsePercent(l[0],h/2),p=parsePercent(l[1],h/2),f,g,y=a.coordinateSystem;if(y){var v=y.dataToPoint(o);f=v[0]||0,g=v[1]||0}else isArray$1(o)||(o=[o,o]),f=parsePercent(o[0],u)+r.x,g=parsePercent(o[1],c)+r.y;return{cx:f,cy:g,r0:d,r:p}}function pieLayout(a,n,r){n.eachSeriesByType(a,function(o){var l=o.getData(),u=l.mapDimension("value"),c=getViewRect$5(o,r),h=getBasicPieLayout(o,r),d=h.cx,p=h.cy,f=h.r,g=h.r0,y=-o.get("startAngle")*RADIAN$2,v=o.get("endAngle"),_=o.get("padAngle")*RADIAN$2;v=v==="auto"?y-PI2:-v*RADIAN$2;var x=o.get("minAngle")*RADIAN$2,S=x+_,T=0;l.each(u,function(G){!isNaN(G)&&T++});var M=l.getSum(u),b=Math.PI/(M||T)*2,A=o.get("clockwise"),I=o.get("roseType"),w=o.get("stillShowZeroSum"),C=l.getDataExtent(u);C[0]=0;var E=A?1:-1,P=[y,v],D=E*_/2;normalizeArcAngles(P,!A),y=P[0],v=P[1];var L=getSeriesLayoutData(o);L.startAngle=y,L.endAngle=v,L.clockwise=A;var R=Math.abs(v-y),O=R,N=0,V=y;if(l.setLayout({viewRect:c,r:f}),l.each(u,function(G,F){var z;if(isNaN(G)){l.setItemLayout(F,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:A,cx:d,cy:p,r0:g,r:I?NaN:f});return}I!=="area"?z=M===0&&w?b:G*b:z=R/T,z<S?(z=S,O-=S):N+=G;var H=V+E*z,U=0,Y=0;_>z?(U=V+E*z/2,Y=U):(U=V+D,Y=H-D),l.setItemLayout(F,{angle:z,startAngle:U,endAngle:Y,clockwise:A,cx:d,cy:p,r0:g,r:I?linearMap$2(G,C,[g,f]):f}),V=H}),O<PI2&&T)if(O<=.001){var B=R/T;l.each(u,function(G,F){if(!isNaN(G)){var z=l.getItemLayout(F);z.angle=B;var H=0,U=0;B<_?(H=y+E*(F+1/2)*B,U=H):(H=y+E*F*B+D,U=y+E*(F+1)*B-D),z.startAngle=H,z.endAngle=U}})}else b=O/N,V=y,l.each(u,function(G,F){if(!isNaN(G)){var z=l.getItemLayout(F),H=z.angle===S?S:G*b,U=0,Y=0;H<_?(U=V+E*H/2,Y=U):(U=V+D,Y=V+E*H-D),z.startAngle=U,z.endAngle=Y,V+=E*H}})})}var getSeriesLayoutData=makeInner();function dataFilter$1(a){return{seriesType:a,reset:function(n,r){var o=r.findComponents({mainType:"legend"});if(!(!o||!o.length)){var l=n.getData();l.filterSelf(function(u){for(var c=l.getName(u),h=0;h<o.length;h++)if(!o[h].isSelected(c))return!1;return!0})}}}}var RADIAN$1=Math.PI/180;function adjustSingleSide(a,n,r,o,l,u,c,h,d,p){if(a.length<2)return;function f(x){for(var S=x.rB,T=S*S,M=0;M<x.list.length;M++){var b=x.list[M],A=Math.abs(b.label.y-r),I=o+b.len,w=I*I,C=Math.sqrt(Math.abs((1-A*A/T)*w)),E=n+(C+b.len2)*l,P=E-b.label.x,D=b.targetTextWidth-P*l;constrainTextWidth(b,D,!0),b.label.x=E}}function g(x){for(var S={list:[],maxY:0},T={list:[],maxY:0},M=0;M<x.length;M++)if(x[M].labelAlignTo==="none"){var b=x[M],A=b.label.y>r?T:S,I=Math.abs(b.label.y-r);if(I>=A.maxY){var w=b.label.x-n-b.len2*l,C=o+b.len,E=Math.abs(w)<C?Math.sqrt(I*I/(1-w*w/C/C)):C;A.rB=E,A.maxY=I}A.list.push(b)}f(S),f(T)}for(var y=a.length,v=0;v<y;v++)if(a[v].position==="outer"&&a[v].labelAlignTo==="labelLine"){var _=a[v].label.x-p;a[v].linePoints[1][0]+=_,a[v].label.x=p}shiftLayoutOnY(a,d,d+c)&&g(a)}function avoidOverlap(a,n,r,o,l,u,c,h){for(var d=[],p=[],f=Number.MAX_VALUE,g=-Number.MAX_VALUE,y=0;y<a.length;y++){var v=a[y].label;isPositionCenter(a[y])||(v.x<n?(f=Math.min(f,v.x),d.push(a[y])):(g=Math.max(g,v.x),p.push(a[y])))}for(var y=0;y<a.length;y++){var _=a[y];if(!isPositionCenter(_)&&_.linePoints){if(_.labelStyleWidth!=null)continue;var v=_.label,x=_.linePoints,S=void 0;_.labelAlignTo==="edge"?v.x<n?S=x[2][0]-_.labelDistance-c-_.edgeDistance:S=c+l-_.edgeDistance-x[2][0]-_.labelDistance:_.labelAlignTo==="labelLine"?v.x<n?S=f-c-_.bleedMargin:S=c+l-g-_.bleedMargin:v.x<n?S=v.x-c-_.bleedMargin:S=c+l-v.x-_.bleedMargin,_.targetTextWidth=S,constrainTextWidth(_,S)}}adjustSingleSide(p,n,r,o,1,l,u,c,h,g),adjustSingleSide(d,n,r,o,-1,l,u,c,h,f);for(var y=0;y<a.length;y++){var _=a[y];if(!isPositionCenter(_)&&_.linePoints){var v=_.label,x=_.linePoints,T=_.labelAlignTo==="edge",M=v.style.padding,b=M?M[1]+M[3]:0,A=v.style.backgroundColor?0:b,I=_.rect.width+A,w=x[1][0]-x[2][0];T?v.x<n?x[2][0]=c+_.edgeDistance+I+_.labelDistance:x[2][0]=c+l-_.edgeDistance-I-_.labelDistance:(v.x<n?x[2][0]=v.x+_.labelDistance:x[2][0]=v.x-_.labelDistance,x[1][0]=x[2][0]+w),x[1][1]=x[2][1]=v.y}}}function constrainTextWidth(a,n,r){if(r===void 0&&(r=!1),a.labelStyleWidth==null){var o=a.label,l=o.style,u=a.rect,c=l.backgroundColor,h=l.padding,d=h?h[1]+h[3]:0,p=l.overflow,f=u.width+(c?0:d);if(n<f||r){var g=u.height;if(p&&p.match("break")){o.setStyle("backgroundColor",null),o.setStyle("width",n-d);var y=o.getBoundingRect();o.setStyle("width",Math.ceil(y.width)),o.setStyle("backgroundColor",c)}else{var v=n-d,_=n<f?v:r?v>a.unconstrainedWidth?null:v:null;o.setStyle("width",_)}var x=o.getBoundingRect();u.width=x.width;var S=(o.style.margin||0)+2.1;u.height=x.height+S,u.y-=(u.height-g)/2}}}function isPositionCenter(a){return a.position==="center"}function pieLabelLayout(a){var n=a.getData(),r=[],o,l,u=!1,c=(a.get("minShowLabelAngle")||0)*RADIAN$1,h=n.getLayout("viewRect"),d=n.getLayout("r"),p=h.width,f=h.x,g=h.y,y=h.height;function v(w){w.ignore=!0}function _(w){if(!w.ignore)return!0;for(var C in w.states)if(w.states[C].ignore===!1)return!0;return!1}n.each(function(w){var C=n.getItemGraphicEl(w),E=C.shape,P=C.getTextContent(),D=C.getTextGuideLine(),L=n.getItemModel(w),R=L.getModel("label"),O=R.get("position")||L.get(["emphasis","label","position"]),N=R.get("distanceToLabelLine"),V=R.get("alignTo"),B=parsePercent(R.get("edgeDistance"),p),G=R.get("bleedMargin"),F=L.getModel("labelLine"),z=F.get("length");z=parsePercent(z,p);var H=F.get("length2");if(H=parsePercent(H,p),Math.abs(E.endAngle-E.startAngle)<c){each$f(P.states,v),P.ignore=!0,D&&(each$f(D.states,v),D.ignore=!0);return}if(_(P)){var U=(E.startAngle+E.endAngle)/2,Y=Math.cos(U),Z=Math.sin(U),X,K,te,ae;o=E.cx,l=E.cy;var J=O==="inside"||O==="inner";if(O==="center")X=E.cx,K=E.cy,ae="center";else{var j=(J?(E.r+E.r0)/2*Y:E.r*Y)+o,Q=(J?(E.r+E.r0)/2*Z:E.r*Z)+l;if(X=j+Y*3,K=Q+Z*3,!J){var W=j+Y*(z+d-E.r),q=Q+Z*(z+d-E.r),re=W+(Y<0?-1:1)*H,ee=q;V==="edge"?X=Y<0?f+B:f+p-B:X=re+(Y<0?-N:N),K=ee,te=[[j,Q],[W,q],[re,ee]]}ae=J?"center":V==="edge"?Y>0?"right":"left":Y>0?"left":"right"}var ie=Math.PI,ne=0,oe=R.get("rotate");if(isNumber(oe))ne=oe*(ie/180);else if(O==="center")ne=0;else if(oe==="radial"||oe===!0){var le=Y<0?-U+ie:-U;ne=le}else if(oe==="tangential"&&O!=="outside"&&O!=="outer"){var se=Math.atan2(Y,Z);se<0&&(se=ie*2+se);var ue=Z>0;ue&&(se=ie+se),ne=se-ie}if(u=!!ne,P.x=X,P.y=K,P.rotation=ne,P.setStyle({verticalAlign:"middle"}),J){P.setStyle({align:ae});var ce=P.states.select;ce&&(ce.x+=P.x,ce.y+=P.y)}else{var he=P.getBoundingRect().clone();he.applyTransform(P.getComputedTransform());var de=(P.style.margin||0)+2.1;he.y-=de/2,he.height+=de,r.push({label:P,labelLine:D,position:O,len:z,len2:H,minTurnAngle:F.get("minTurnAngle"),maxSurfaceAngle:F.get("maxSurfaceAngle"),surfaceNormal:new Point$1(Y,Z),linePoints:te,textAlign:ae,labelDistance:N,labelAlignTo:V,edgeDistance:B,bleedMargin:G,rect:he,unconstrainedWidth:he.width,labelStyleWidth:P.style.width})}C.setTextConfig({inside:J})}}),!u&&a.get("avoidLabelOverlap")&&avoidOverlap(r,o,l,d,p,y,f,g);for(var x=0;x<r.length;x++){var S=r[x],T=S.label,M=S.labelLine,b=isNaN(T.x)||isNaN(T.y);if(T){T.setStyle({align:S.textAlign}),b&&(each$f(T.states,v),T.ignore=!0);var A=T.states.select;A&&(A.x+=T.x,A.y+=T.y)}if(M){var I=S.linePoints;b||!I?(each$f(M.states,v),M.ignore=!0):(limitTurnAngle(I,S.minTurnAngle),limitSurfaceAngle(I,S.surfaceNormal,S.maxSurfaceAngle),M.setShape({points:I}),T.__hostTarget.textGuideLineConfig={anchor:new Point$1(I[0][0],I[0][1])})}}}var PiePiece=function(a){__extends(n,a);function n(r,o,l){var u=a.call(this)||this;u.z2=2;var c=new ZRText$1;return u.setTextContent(c),u.updateData(r,o,l,!0),u}return n.prototype.updateData=function(r,o,l,u){var c=this,h=r.hostModel,d=r.getItemModel(o),p=d.getModel("emphasis"),f=r.getItemLayout(o),g=extend(getSectorCornerRadius(d.getModel("itemStyle"),f,!0),f);if(isNaN(g.startAngle)){c.setShape(g);return}if(u){c.setShape(g);var y=h.getShallow("animationType");h.ecModel.ssr?(initProps(c,{scaleX:0,scaleY:0},h,{dataIndex:o,isFrom:!0}),c.originX=g.cx,c.originY=g.cy):y==="scale"?(c.shape.r=f.r0,initProps(c,{shape:{r:f.r}},h,o)):l!=null?(c.setShape({startAngle:l,endAngle:l}),initProps(c,{shape:{startAngle:f.startAngle,endAngle:f.endAngle}},h,o)):(c.shape.endAngle=f.startAngle,updateProps$1(c,{shape:{endAngle:f.endAngle}},h,o))}else saveOldStyle(c),updateProps$1(c,{shape:g},h,o);c.useStyle(r.getItemVisual(o,"style")),setStatesStylesFromModel(c,d);var v=(f.startAngle+f.endAngle)/2,_=h.get("selectedOffset"),x=Math.cos(v)*_,S=Math.sin(v)*_,T=d.getShallow("cursor");T&&c.attr("cursor",T),this._updateLabel(h,r,o),c.ensureState("emphasis").shape=extend({r:f.r+(p.get("scale")&&p.get("scaleSize")||0)},getSectorCornerRadius(p.getModel("itemStyle"),f)),extend(c.ensureState("select"),{x,y:S,shape:getSectorCornerRadius(d.getModel(["select","itemStyle"]),f)}),extend(c.ensureState("blur"),{shape:getSectorCornerRadius(d.getModel(["blur","itemStyle"]),f)});var M=c.getTextGuideLine(),b=c.getTextContent();M&&extend(M.ensureState("select"),{x,y:S}),extend(b.ensureState("select"),{x,y:S}),toggleHoverEmphasis(this,p.get("focus"),p.get("blurScope"),p.get("disabled"))},n.prototype._updateLabel=function(r,o,l){var u=this,c=o.getItemModel(l),h=c.getModel("labelLine"),d=o.getItemVisual(l,"style"),p=d&&d.fill,f=d&&d.opacity;setLabelStyle(u,getLabelStatesModels(c),{labelFetcher:o.hostModel,labelDataIndex:l,inheritColor:p,defaultOpacity:f,defaultText:r.getFormattedLabel(l,"normal")||o.getName(l)});var g=u.getTextContent();u.setTextConfig({position:null,rotation:null}),g.attr({z2:10});var y=r.get(["label","position"]);if(y!=="outside"&&y!=="outer")u.removeTextGuideLine();else{var v=this.getTextGuideLine();v||(v=new Polyline$3,this.setTextGuideLine(v)),setLabelLineStyle(this,getLabelLineStatesModels(c),{stroke:p,opacity:retrieve3(h.get(["lineStyle","opacity"]),f,1)})}},n}(Sector$1),PieView=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.ignoreLabelLineUpdate=!0,r}return n.prototype.render=function(r,o,l,u){var c=r.getData(),h=this._data,d=this.group,p;if(!h&&c.count()>0){for(var f=c.getItemLayout(0),g=1;isNaN(f&&f.startAngle)&&g<c.count();++g)f=c.getItemLayout(g);f&&(p=f.startAngle)}if(this._emptyCircleSector&&d.remove(this._emptyCircleSector),c.count()===0&&r.get("showEmptyCircle")){var y=getSeriesLayoutData(r),v=new Sector$1({shape:extend(getBasicPieLayout(r,l),y)});v.useStyle(r.getModel("emptyCircleStyle").getItemStyle()),this._emptyCircleSector=v,d.add(v)}c.diff(h).add(function(_){var x=new PiePiece(c,_,p);c.setItemGraphicEl(_,x),d.add(x)}).update(function(_,x){var S=h.getItemGraphicEl(x);S.updateData(c,_,p),S.off("click"),d.add(S),c.setItemGraphicEl(_,S)}).remove(function(_){var x=h.getItemGraphicEl(_);removeElementWithFadeOut(x,r,_)}).execute(),pieLabelLayout(r),r.get("animationTypeUpdate")!=="expansion"&&(this._data=c)},n.prototype.dispose=function(){},n.prototype.containPoint=function(r,o){var l=o.getData(),u=l.getItemLayout(0);if(u){var c=r[0]-u.cx,h=r[1]-u.cy,d=Math.sqrt(c*c+h*h);return d<=u.r&&d>=u.r0}},n.type="pie",n}(ChartView$1);const PieView$1=PieView;function createSeriesDataSimply(a,n,r){n=isArray$1(n)&&{coordDimensions:n}||extend({encodeDefine:a.getEncode()},n);var o=a.getSource(),l=prepareSeriesDataSchema(o,n).dimensions,u=new SeriesData$1(l,a);return u.initData(o,r),u}var LegendVisualProvider=function(){function a(n,r){this._getDataWithEncodedVisual=n,this._getRawData=r}return a.prototype.getAllNames=function(){var n=this._getRawData();return n.mapArray(n.getName)},a.prototype.containName=function(n){var r=this._getRawData();return r.indexOfName(n)>=0},a.prototype.indexOfName=function(n){var r=this._getDataWithEncodedVisual();return r.indexOfName(n)},a.prototype.getItemVisual=function(n,r){var o=this._getDataWithEncodedVisual();return o.getItemVisual(n,r)},a}();const LegendVisualProvider$1=LegendVisualProvider;var innerData=makeInner(),PieSeriesModel=function(a){__extends(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.init=function(r){a.prototype.init.apply(this,arguments),this.legendVisualProvider=new LegendVisualProvider$1(bind$1(this.getData,this),bind$1(this.getRawData,this)),this._defaultLabelLine(r)},n.prototype.mergeOption=function(){a.prototype.mergeOption.apply(this,arguments)},n.prototype.getInitialData=function(){return createSeriesDataSimply(this,{coordDimensions:["value"],encodeDefaulter:curry$1(makeSeriesEncodeForNameBased,this)})},n.prototype.getDataParams=function(r){var o=this.getData(),l=innerData(o),u=l.seats;if(!u){var c=[];o.each(o.mapDimension("value"),function(d){c.push(d)}),u=l.seats=getPercentSeats(c,o.hostModel.get("percentPrecision"))}var h=a.prototype.getDataParams.call(this,r);return h.percent=u[r]||0,h.$vars.push("percent"),h},n.prototype._defaultLabelLine=function(r){defaultEmphasis(r,"labelLine",["show"]);var o=r.labelLine,l=r.emphasis.labelLine;o.show=o.show&&r.label.show,l.show=l.show&&r.emphasis.label.show},n.type="series.pie",n.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,endAngle:"auto",padAngle:0,minAngle:0,minShowLabelAngle:0,selectedOffset:10,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:0,show:!0,overflow:"truncate",position:"outer",alignTo:"none",edgeDistance:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1,borderJoin:"round"},showEmptyCircle:!0,emptyCircleStyle:{color:"lightgray",opacity:1},labelLayout:{hideOverlap:!0},emphasis:{scale:!0,scaleSize:5},avoidLabelOverlap:!0,animationType:"expansion",animationDuration:1e3,animationTypeUpdate:"transition",animationEasingUpdate:"cubicInOut",animationDurationUpdate:500,animationEasing:"cubicInOut"},n}(SeriesModel$1);const PieSeriesModel$1=PieSeriesModel;function negativeDataFilter(a){return{seriesType:a,reset:function(n,r){var o=n.getData();o.filterSelf(function(l){var u=o.mapDimension("value"),c=o.get(u,l);return!(isNumber(c)&&!isNaN(c)&&c<0)})}}}function install$O(a){a.registerChartView(PieView$1),a.registerSeriesModel(PieSeriesModel$1),createLegacyDataSelectAction("pie",a.registerAction),a.registerLayout(curry$1(pieLayout,"pie")),a.registerProcessor(dataFilter$1("pie")),a.registerProcessor(negativeDataFilter("pie"))}var ScatterSeriesModel=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r.hasSymbolVisual=!0,r}return n.prototype.getInitialData=function(r,o){return createSeriesData(null,this,{useEncodeDefaulter:!0})},n.prototype.getProgressive=function(){var r=this.option.progressive;return r==null?this.option.large?5e3:this.get("progressive"):r},n.prototype.getProgressiveThreshold=function(){var r=this.option.progressiveThreshold;return r==null?this.option.large?1e4:this.get("progressiveThreshold"):r},n.prototype.brushSelector=function(r,o,l){return l.point(o.getItemLayout(r))},n.prototype.getZLevelKey=function(){return this.getData().count()>this.getProgressiveThreshold()?this.id:""},n.type="series.scatter",n.dependencies=["grid","polar","geo","singleAxis","calendar"],n.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:"#212121"}},universalTransition:{divideShape:"clone"}},n}(SeriesModel$1);const ScatterSeriesModel$1=ScatterSeriesModel;var BOOST_SIZE_THRESHOLD=4,LargeSymbolPathShape=function(){function a(){}return a}(),LargeSymbolPath=function(a){__extends(n,a);function n(r){var o=a.call(this,r)||this;return o._off=0,o.hoverDataIdx=-1,o}return n.prototype.getDefaultShape=function(){return new LargeSymbolPathShape},n.prototype.reset=function(){this.notClear=!1,this._off=0},n.prototype.buildPath=function(r,o){var l=o.points,u=o.size,c=this.symbolProxy,h=c.shape,d=r.getContext?r.getContext():r,p=d&&u[0]<BOOST_SIZE_THRESHOLD,f=this.softClipShape,g;if(p){this._ctx=d;return}for(this._ctx=null,g=this._off;g<l.length;){var y=l[g++],v=l[g++];isNaN(y)||isNaN(v)||f&&!f.contain(y,v)||(h.x=y-u[0]/2,h.y=v-u[1]/2,h.width=u[0],h.height=u[1],c.buildPath(r,h,!0))}this.incremental&&(this._off=g,this.notClear=!0)},n.prototype.afterBrush=function(){var r=this.shape,o=r.points,l=r.size,u=this._ctx,c=this.softClipShape,h;if(u){for(h=this._off;h<o.length;){var d=o[h++],p=o[h++];isNaN(d)||isNaN(p)||c&&!c.contain(d,p)||u.fillRect(d-l[0]/2,p-l[1]/2,l[0],l[1])}this.incremental&&(this._off=h,this.notClear=!0)}},n.prototype.findDataIndex=function(r,o){for(var l=this.shape,u=l.points,c=l.size,h=Math.max(c[0],4),d=Math.max(c[1],4),p=u.length/2-1;p>=0;p--){var f=p*2,g=u[f]-h/2,y=u[f+1]-d/2;if(r>=g&&o>=y&&r<=g+h&&o<=y+d)return p}return-1},n.prototype.contain=function(r,o){var l=this.transformCoordToLocal(r,o),u=this.getBoundingRect();if(r=l[0],o=l[1],u.contain(r,o)){var c=this.hoverDataIdx=this.findDataIndex(r,o);return c>=0}return this.hoverDataIdx=-1,!1},n.prototype.getBoundingRect=function(){var r=this._rect;if(!r){for(var o=this.shape,l=o.points,u=o.size,c=u[0],h=u[1],d=1/0,p=1/0,f=-1/0,g=-1/0,y=0;y<l.length;){var v=l[y++],_=l[y++];d=Math.min(v,d),f=Math.max(v,f),p=Math.min(_,p),g=Math.max(_,g)}r=this._rect=new BoundingRect$1(d-c/2,p-h/2,f-d+c,g-p+h)}return r},n}(Path$1),LargeSymbolDraw=function(){function a(){this.group=new Group$4}return a.prototype.updateData=function(n,r){this._clear();var o=this._create();o.setShape({points:n.getLayout("points")}),this._setCommon(o,n,r)},a.prototype.updateLayout=function(n){var r=n.getLayout("points");this.group.eachChild(function(o){if(o.startIndex!=null){var l=(o.endIndex-o.startIndex)*2,u=o.startIndex*4*2;r=new Float32Array(r.buffer,u,l)}o.setShape("points",r),o.reset()})},a.prototype.incrementalPrepareUpdate=function(n){this._clear()},a.prototype.incrementalUpdate=function(n,r,o){var l=this._newAdded[0],u=r.getLayout("points"),c=l&&l.shape.points;if(c&&c.length<2e4){var h=c.length,d=new Float32Array(h+u.length);d.set(c),d.set(u,h),l.endIndex=n.end,l.setShape({points:d})}else{this._newAdded=[];var p=this._create();p.startIndex=n.start,p.endIndex=n.end,p.incremental=!0,p.setShape({points:u}),this._setCommon(p,r,o)}},a.prototype.eachRendered=function(n){this._newAdded[0]&&n(this._newAdded[0])},a.prototype._create=function(){var n=new LargeSymbolPath({cursor:"default"});return n.ignoreCoarsePointer=!0,this.group.add(n),this._newAdded.push(n),n},a.prototype._setCommon=function(n,r,o){var l=r.hostModel;o=o||{};var u=r.getVisual("symbolSize");n.setShape("size",u instanceof Array?u:[u,u]),n.softClipShape=o.clipShape||null,n.symbolProxy=createSymbol$1(r.getVisual("symbol"),0,0,0,0),n.setColor=n.symbolProxy.setColor;var c=n.shape.size[0]<BOOST_SIZE_THRESHOLD;n.useStyle(l.getModel("itemStyle").getItemStyle(c?["color","shadowBlur","shadowColor"]:["color"]));var h=r.getVisual("style"),d=h&&h.fill;d&&n.setColor(d);var p=getECData(n);p.seriesIndex=l.seriesIndex,n.on("mousemove",function(f){p.dataIndex=null;var g=n.hoverDataIdx;g>=0&&(p.dataIndex=g+(n.startIndex||0))})},a.prototype.remove=function(){this._clear()},a.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},a}();const LargeSymbolDraw$1=LargeSymbolDraw;var ScatterView=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.prototype.render=function(r,o,l){var u=r.getData(),c=this._updateSymbolDraw(u,r);c.updateData(u,{clipShape:this._getClipShape(r)}),this._finished=!0},n.prototype.incrementalPrepareRender=function(r,o,l){var u=r.getData(),c=this._updateSymbolDraw(u,r);c.incrementalPrepareUpdate(u),this._finished=!1},n.prototype.incrementalRender=function(r,o,l){this._symbolDraw.incrementalUpdate(r,o.getData(),{clipShape:this._getClipShape(o)}),this._finished=r.end===o.getData().count()},n.prototype.updateTransform=function(r,o,l){var u=r.getData();if(this.group.dirty(),!this._finished||u.count()>1e4)return{update:!0};var c=pointsLayout("").reset(r,o,l);c.progress&&c.progress({start:0,end:u.count(),count:u.count()},u),this._symbolDraw.updateLayout(u)},n.prototype.eachRendered=function(r){this._symbolDraw&&this._symbolDraw.eachRendered(r)},n.prototype._getClipShape=function(r){if(r.get("clip",!0)){var o=r.coordinateSystem;return o&&o.getArea&&o.getArea(.1)}},n.prototype._updateSymbolDraw=function(r,o){var l=this._symbolDraw,u=o.pipelineContext,c=u.large;return(!l||c!==this._isLargeDraw)&&(l&&l.remove(),l=this._symbolDraw=c?new LargeSymbolDraw$1:new SymbolDraw$1,this._isLargeDraw=c,this.group.removeAll()),this.group.add(l.group),l},n.prototype.remove=function(r,o){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},n.prototype.dispose=function(){},n.type="scatter",n}(ChartView$1);const ScatterView$1=ScatterView;var GridModel=function(a){__extends(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.type="grid",n.dependencies=["xAxis","yAxis"],n.layoutMode="box",n.defaultOption={show:!1,z:0,left:"10%",top:60,right:"10%",bottom:70,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"},n}(ComponentModel$1);const GridModel$1=GridModel;var CartesianAxisModel=function(a){__extends(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.getCoordSysModel=function(){return this.getReferringComponents("grid",SINGLE_REFERRING).models[0]},n.type="cartesian2dAxis",n}(ComponentModel$1);mixin(CartesianAxisModel,AxisModelCommonMixin);var defaultOption$1={show:!0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#6E7079",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,showMinLine:!0,showMaxLine:!0,lineStyle:{color:["#E0E6F1"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.2)","rgba(210,219,238,0.2)"]}}},categoryAxis=merge({boundaryGap:!0,deduplication:null,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},defaultOption$1),valueAxis=merge({boundaryGap:[0,0],axisLine:{show:"auto"},axisTick:{show:"auto"},splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:"#F4F7FD",width:1}}},defaultOption$1),timeAxis=merge({splitNumber:6,axisLabel:{showMinLabel:!1,showMaxLabel:!1,rich:{primary:{fontWeight:"bold"}}},splitLine:{show:!1}},valueAxis),logAxis=defaults({logBase:10},valueAxis);const axisDefault={category:categoryAxis,value:valueAxis,time:timeAxis,log:logAxis};var AXIS_TYPES={value:1,category:1,time:1,log:1};function axisModelCreator(a,n,r,o){each$f(AXIS_TYPES,function(l,u){var c=merge(merge({},axisDefault[u],!0),o,!0),h=function(d){__extends(p,d);function p(){var f=d!==null&&d.apply(this,arguments)||this;return f.type=n+"Axis."+u,f}return p.prototype.mergeDefaultAndTheme=function(f,g){var y=fetchLayoutMode(this),v=y?getLayoutParams(f):{},_=g.getTheme();merge(f,_.get(u+"Axis")),merge(f,this.getDefaultOption()),f.type=getAxisType(f),y&&mergeLayoutParam(f,v,y)},p.prototype.optionUpdated=function(){var f=this.option;f.type==="category"&&(this.__ordinalMeta=OrdinalMeta$1.createByAxisModel(this))},p.prototype.getCategories=function(f){var g=this.option;if(g.type==="category")return f?g.data:this.__ordinalMeta.categories},p.prototype.getOrdinalMeta=function(){return this.__ordinalMeta},p.type=n+"Axis."+u,p.defaultOption=c,p}(r);a.registerComponentModel(h)}),a.registerSubTypeDefaulter(n+"Axis",getAxisType)}function getAxisType(a){return a.type||(a.data?"category":"value")}var Cartesian=function(){function a(n){this.type="cartesian",this._dimList=[],this._axes={},this.name=n||""}return a.prototype.getAxis=function(n){return this._axes[n]},a.prototype.getAxes=function(){return map$1(this._dimList,function(n){return this._axes[n]},this)},a.prototype.getAxesByScale=function(n){return n=n.toLowerCase(),filter(this.getAxes(),function(r){return r.scale.type===n})},a.prototype.addAxis=function(n){var r=n.dim;this._axes[r]=n,this._dimList.push(r)},a}();const Cartesian$1=Cartesian;var cartesian2DDimensions=["x","y"];function canCalculateAffineTransform(a){return a.type==="interval"||a.type==="time"}var Cartesian2D=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type="cartesian2d",r.dimensions=cartesian2DDimensions,r}return n.prototype.calcAffineTransform=function(){this._transform=this._invTransform=null;var r=this.getAxis("x").scale,o=this.getAxis("y").scale;if(!(!canCalculateAffineTransform(r)||!canCalculateAffineTransform(o))){var l=r.getExtent(),u=o.getExtent(),c=this.dataToPoint([l[0],u[0]]),h=this.dataToPoint([l[1],u[1]]),d=l[1]-l[0],p=u[1]-u[0];if(!(!d||!p)){var f=(h[0]-c[0])/d,g=(h[1]-c[1])/p,y=c[0]-l[0]*f,v=c[1]-u[0]*g,_=this._transform=[f,0,0,g,y,v];this._invTransform=invert([],_)}}},n.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},n.prototype.containPoint=function(r){var o=this.getAxis("x"),l=this.getAxis("y");return o.contain(o.toLocalCoord(r[0]))&&l.contain(l.toLocalCoord(r[1]))},n.prototype.containData=function(r){return this.getAxis("x").containData(r[0])&&this.getAxis("y").containData(r[1])},n.prototype.containZone=function(r,o){var l=this.dataToPoint(r),u=this.dataToPoint(o),c=this.getArea(),h=new BoundingRect$1(l[0],l[1],u[0]-l[0],u[1]-l[1]);return c.intersect(h)},n.prototype.dataToPoint=function(r,o,l){l=l||[];var u=r[0],c=r[1];if(this._transform&&u!=null&&isFinite(u)&&c!=null&&isFinite(c))return applyTransform$1(l,r,this._transform);var h=this.getAxis("x"),d=this.getAxis("y");return l[0]=h.toGlobalCoord(h.dataToCoord(u,o)),l[1]=d.toGlobalCoord(d.dataToCoord(c,o)),l},n.prototype.clampData=function(r,o){var l=this.getAxis("x").scale,u=this.getAxis("y").scale,c=l.getExtent(),h=u.getExtent(),d=l.parse(r[0]),p=u.parse(r[1]);return o=o||[],o[0]=Math.min(Math.max(Math.min(c[0],c[1]),d),Math.max(c[0],c[1])),o[1]=Math.min(Math.max(Math.min(h[0],h[1]),p),Math.max(h[0],h[1])),o},n.prototype.pointToData=function(r,o){var l=[];if(this._invTransform)return applyTransform$1(l,r,this._invTransform);var u=this.getAxis("x"),c=this.getAxis("y");return l[0]=u.coordToData(u.toLocalCoord(r[0]),o),l[1]=c.coordToData(c.toLocalCoord(r[1]),o),l},n.prototype.getOtherAxis=function(r){return this.getAxis(r.dim==="x"?"y":"x")},n.prototype.getArea=function(r){r=r||0;var o=this.getAxis("x").getGlobalExtent(),l=this.getAxis("y").getGlobalExtent(),u=Math.min(o[0],o[1])-r,c=Math.min(l[0],l[1])-r,h=Math.max(o[0],o[1])-u+r,d=Math.max(l[0],l[1])-c+r;return new BoundingRect$1(u,c,h,d)},n}(Cartesian$1),Axis2D=function(a){__extends(n,a);function n(r,o,l,u,c){var h=a.call(this,r,o,l)||this;return h.index=0,h.type=u||"value",h.position=c||"bottom",h}return n.prototype.isHorizontal=function(){var r=this.position;return r==="top"||r==="bottom"},n.prototype.getGlobalExtent=function(r){var o=this.getExtent();return o[0]=this.toGlobalCoord(o[0]),o[1]=this.toGlobalCoord(o[1]),r&&o[0]>o[1]&&o.reverse(),o},n.prototype.pointToData=function(r,o){return this.coordToData(this.toLocalCoord(r[this.dim==="x"?0:1]),o)},n.prototype.setCategorySortInfo=function(r){if(this.type!=="category")return!1;this.model.option.categorySortInfo=r,this.scale.setSortInfo(r)},n}(Axis$1);const Axis2D$1=Axis2D;function layout$2(a,n,r){r=r||{};var o=a.coordinateSystem,l=n.axis,u={},c=l.getAxesOnZeroOf()[0],h=l.position,d=c?"onZero":h,p=l.dim,f=o.getRect(),g=[f.x,f.x+f.width,f.y,f.y+f.height],y={left:0,right:1,top:0,bottom:1,onZero:2},v=n.get("offset")||0,_=p==="x"?[g[2]-v,g[3]+v]:[g[0]-v,g[1]+v];if(c){var x=c.toGlobalCoord(c.dataToCoord(0));_[y.onZero]=Math.max(Math.min(x,_[1]),_[0])}u.position=[p==="y"?_[y[d]]:g[0],p==="x"?_[y[d]]:g[3]],u.rotation=Math.PI/2*(p==="x"?0:1);var S={top:-1,bottom:1,left:-1,right:1};u.labelDirection=u.tickDirection=u.nameDirection=S[h],u.labelOffset=c?_[y[h]]-_[y.onZero]:0,n.get(["axisTick","inside"])&&(u.tickDirection=-u.tickDirection),retrieve(r.labelInside,n.get(["axisLabel","inside"]))&&(u.labelDirection=-u.labelDirection);var T=n.get(["axisLabel","rotate"]);return u.labelRotate=d==="top"?-T:T,u.z2=1,u}function isCartesian2DSeries(a){return a.get("coordinateSystem")==="cartesian2d"}function findAxisModels(a){var n={xAxisModel:null,yAxisModel:null};return each$f(n,function(r,o){var l=o.replace(/Model$/,""),u=a.getReferringComponents(l,SINGLE_REFERRING).models[0];if(!u)throw new Error(l+' "'+retrieve3(a.get(l+"Index"),a.get(l+"Id"),0)+'" not found');n[o]=u}),n}var mathLog=Math.log;function alignScaleTicks(a,n,r){var o=IntervalScale$1.prototype,l=o.getTicks.call(r),u=o.getTicks.call(r,!0),c=l.length-1,h=o.getInterval.call(r),d=getScaleExtent(a,n),p=d.extent,f=d.fixMin,g=d.fixMax;if(a.type==="log"){var y=mathLog(a.base);p=[mathLog(p[0])/y,mathLog(p[1])/y]}a.setExtent(p[0],p[1]),a.calcNiceExtent({splitNumber:c,fixMin:f,fixMax:g});var v=o.getExtent.call(a);f&&(p[0]=v[0]),g&&(p[1]=v[1]);var _=o.getInterval.call(a),x=p[0],S=p[1];if(f&&g)_=(S-x)/c;else if(f)for(S=p[0]+_*c;S<p[1]&&isFinite(S)&&isFinite(p[1]);)_=increaseInterval(_),S=p[0]+_*c;else if(g)for(x=p[1]-_*c;x>p[0]&&isFinite(x)&&isFinite(p[0]);)_=increaseInterval(_),x=p[1]-_*c;else{var T=a.getTicks().length-1;T>c&&(_=increaseInterval(_));var M=_*c;S=Math.ceil(p[1]/_)*_,x=round$3(S-M),x<0&&p[0]>=0?(x=0,S=round$3(M)):S>0&&p[1]<=0&&(S=0,x=-round$3(M))}var b=(l[0].value-u[0].value)/h,A=(l[c].value-u[c].value)/h;o.setExtent.call(a,x+_*b,S+_*A),o.setInterval.call(a,_),(b||A)&&o.setNiceExtent.call(a,x+_,S-_);{var I=o.getTicks.call(a);I[1]&&(!isValueNice(_)||getPrecisionSafe(I[1].value)>getPrecisionSafe(_))&&warn("The ticks may be not readable when set min: "+n.get("min")+", max: "+n.get("max")+" and alignTicks: true")}}var Grid=function(){function a(n,r,o){this.type="grid",this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this.axisPointerEnabled=!0,this.dimensions=cartesian2DDimensions,this._initCartesian(n,r,o),this.model=n}return a.prototype.getRect=function(){return this._rect},a.prototype.update=function(n,r){var o=this._axesMap;this._updateScale(n,this.model);function l(c){var h,d=keys(c),p=d.length;if(p){for(var f=[],g=p-1;g>=0;g--){var y=+d[g],v=c[y],_=v.model,x=v.scale;isIntervalOrLogScale(x)&&_.get("alignTicks")&&_.get("interval")==null?f.push(v):(niceScaleExtent(x,_),isIntervalOrLogScale(x)&&(h=v))}f.length&&(h||(h=f.pop(),niceScaleExtent(h.scale,h.model)),each$f(f,function(S){alignScaleTicks(S.scale,S.model,h.scale)}))}}l(o.x),l(o.y);var u={};each$f(o.x,function(c){fixAxisOnZero(o,"y",c,u)}),each$f(o.y,function(c){fixAxisOnZero(o,"x",c,u)}),this.resize(this.model,r)},a.prototype.resize=function(n,r,o){var l=n.getBoxLayoutParams(),u=!o&&n.get("containLabel"),c=getLayoutRect(l,{width:r.getWidth(),height:r.getHeight()});this._rect=c;var h=this._axesList;d(),u&&(each$f(h,function(p){if(!p.model.get(["axisLabel","inside"])){var f=estimateLabelUnionRect(p);if(f){var g=p.isHorizontal()?"height":"width",y=p.model.get(["axisLabel","margin"]);c[g]-=f[g]+y,p.position==="top"?c.y+=f.height+y:p.position==="left"&&(c.x+=f.width+y)}}}),d()),each$f(this._coordsList,function(p){p.calcAffineTransform()});function d(){each$f(h,function(p){var f=p.isHorizontal(),g=f?[0,c.width]:[0,c.height],y=p.inverse?1:0;p.setExtent(g[y],g[1-y]),updateAxisTransform(p,f?c.x:c.y)})}},a.prototype.getAxis=function(n,r){var o=this._axesMap[n];if(o!=null)return o[r||0]},a.prototype.getAxes=function(){return this._axesList.slice()},a.prototype.getCartesian=function(n,r){if(n!=null&&r!=null){var o="x"+n+"y"+r;return this._coordsMap[o]}isObject$3(n)&&(r=n.yAxisIndex,n=n.xAxisIndex);for(var l=0,u=this._coordsList;l<u.length;l++)if(u[l].getAxis("x").index===n||u[l].getAxis("y").index===r)return u[l]},a.prototype.getCartesians=function(){return this._coordsList.slice()},a.prototype.convertToPixel=function(n,r,o){var l=this._findConvertTarget(r);return l.cartesian?l.cartesian.dataToPoint(o):l.axis?l.axis.toGlobalCoord(l.axis.dataToCoord(o)):null},a.prototype.convertFromPixel=function(n,r,o){var l=this._findConvertTarget(r);return l.cartesian?l.cartesian.pointToData(o):l.axis?l.axis.coordToData(l.axis.toLocalCoord(o)):null},a.prototype._findConvertTarget=function(n){var r=n.seriesModel,o=n.xAxisModel||r&&r.getReferringComponents("xAxis",SINGLE_REFERRING).models[0],l=n.yAxisModel||r&&r.getReferringComponents("yAxis",SINGLE_REFERRING).models[0],u=n.gridModel,c=this._coordsList,h,d;if(r)h=r.coordinateSystem,indexOf(c,h)<0&&(h=null);else if(o&&l)h=this.getCartesian(o.componentIndex,l.componentIndex);else if(o)d=this.getAxis("x",o.componentIndex);else if(l)d=this.getAxis("y",l.componentIndex);else if(u){var p=u.coordinateSystem;p===this&&(h=this._coordsList[0])}return{cartesian:h,axis:d}},a.prototype.containPoint=function(n){var r=this._coordsList[0];if(r)return r.containPoint(n)},a.prototype._initCartesian=function(n,r,o){var l=this,u=this,c={left:!1,right:!1,top:!1,bottom:!1},h={x:{},y:{}},d={x:0,y:0};if(r.eachComponent("xAxis",p("x"),this),r.eachComponent("yAxis",p("y"),this),!d.x||!d.y){this._axesMap={},this._axesList=[];return}this._axesMap=h,each$f(h.x,function(f,g){each$f(h.y,function(y,v){var _="x"+g+"y"+v,x=new Cartesian2D(_);x.master=l,x.model=n,l._coordsMap[_]=x,l._coordsList.push(x),x.addAxis(f),x.addAxis(y)})});function p(f){return function(g,y){if(isAxisUsedInTheGrid(g,n)){var v=g.get("position");f==="x"?v!=="top"&&v!=="bottom"&&(v=c.bottom?"top":"bottom"):v!=="left"&&v!=="right"&&(v=c.left?"right":"left"),c[v]=!0;var _=new Axis2D$1(f,createScaleByModel$1(g),[0,0],g.get("type"),v),x=_.type==="category";_.onBand=x&&g.get("boundaryGap"),_.inverse=g.get("inverse"),g.axis=_,_.model=g,_.grid=u,_.index=y,u._axesList.push(_),h[f][y]=_,d[f]++}}}},a.prototype._updateScale=function(n,r){each$f(this._axesList,function(l){if(l.scale.setExtent(1/0,-1/0),l.type==="category"){var u=l.model.get("categorySortInfo");l.scale.setSortInfo(u)}}),n.eachSeries(function(l){if(isCartesian2DSeries(l)){var u=findAxisModels(l),c=u.xAxisModel,h=u.yAxisModel;if(!isAxisUsedInTheGrid(c,r)||!isAxisUsedInTheGrid(h,r))return;var d=this.getCartesian(c.componentIndex,h.componentIndex),p=l.getData(),f=d.getAxis("x"),g=d.getAxis("y");o(p,f),o(p,g)}},this);function o(l,u){each$f(getDataDimensionsOnAxis(l,u.dim),function(c){u.scale.unionExtentFromData(l,c)})}},a.prototype.getTooltipAxes=function(n){var r=[],o=[];return each$f(this.getCartesians(),function(l){var u=n!=null&&n!=="auto"?l.getAxis(n):l.getBaseAxis(),c=l.getOtherAxis(u);indexOf(r,u)<0&&r.push(u),indexOf(o,c)<0&&o.push(c)}),{baseAxes:r,otherAxes:o}},a.create=function(n,r){var o=[];return n.eachComponent("grid",function(l,u){var c=new a(l,n,r);c.name="grid_"+u,c.resize(l,r,!0),l.coordinateSystem=c,o.push(c)}),n.eachSeries(function(l){if(isCartesian2DSeries(l)){var u=findAxisModels(l),c=u.xAxisModel,h=u.yAxisModel,d=c.getCoordSysModel();{if(!d)throw new Error('Grid "'+retrieve3(c.get("gridIndex"),c.get("gridId"),0)+'" not found');if(c.getCoordSysModel()!==h.getCoordSysModel())throw new Error("xAxis and yAxis must use the same grid")}var p=d.coordinateSystem;l.coordinateSystem=p.getCartesian(c.componentIndex,h.componentIndex)}}),o},a.dimensions=cartesian2DDimensions,a}();function isAxisUsedInTheGrid(a,n){return a.getCoordSysModel()===n}function fixAxisOnZero(a,n,r,o){r.getAxesOnZeroOf=function(){return u?[u]:[]};var l=a[n],u,c=r.model,h=c.get(["axisLine","onZero"]),d=c.get(["axisLine","onZeroAxisIndex"]);if(!h)return;if(d!=null)canOnZeroToAxis(l[d])&&(u=l[d]);else for(var p in l)if(l.hasOwnProperty(p)&&canOnZeroToAxis(l[p])&&!o[f(l[p])]){u=l[p];break}u&&(o[f(u)]=!0);function f(g){return g.dim+"_"+g.index}}function canOnZeroToAxis(a){return a&&a.type!=="category"&&a.type!=="time"&&ifAxisCrossZero(a)}function updateAxisTransform(a,n){var r=a.getExtent(),o=r[0]+r[1];a.toGlobalCoord=a.dim==="x"?function(l){return l+n}:function(l){return o-l+n},a.toLocalCoord=a.dim==="x"?function(l){return l-n}:function(l){return o-l+n}}const Grid$1=Grid;var PI$3=Math.PI,AxisBuilder=function(){function a(n,r){this.group=new Group$4,this.opt=r,this.axisModel=n,defaults(r,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0,handleAutoShown:function(){return!0}});var o=new Group$4({x:r.position[0],y:r.position[1],rotation:r.rotation});o.updateTransform(),this._transformGroup=o}return a.prototype.hasBuilder=function(n){return!!builders[n]},a.prototype.add=function(n){builders[n](this.opt,this.axisModel,this.group,this._transformGroup)},a.prototype.getGroup=function(){return this.group},a.innerTextLayout=function(n,r,o){var l=remRadian(r-n),u,c;return isRadianAroundZero(l)?(c=o>0?"top":"bottom",u="center"):isRadianAroundZero(l-PI$3)?(c=o>0?"bottom":"top",u="center"):(c="middle",l>0&&l<PI$3?u=o>0?"right":"left":u=o>0?"left":"right"),{rotation:l,textAlign:u,textVerticalAlign:c}},a.makeAxisEventDataBase=function(n){var r={componentType:n.mainType,componentIndex:n.componentIndex};return r[n.mainType+"Index"]=n.componentIndex,r},a.isLabelSilent=function(n){var r=n.get("tooltip");return n.get("silent")||!(n.get("triggerEvent")||r&&r.show)},a}(),builders={axisLine:function(a,n,r,o){var l=n.get(["axisLine","show"]);if(l==="auto"&&a.handleAutoShown&&(l=a.handleAutoShown("axisLine")),!!l){var u=n.axis.getExtent(),c=o.transform,h=[u[0],0],d=[u[1],0],p=h[0]>d[0];c&&(applyTransform$1(h,h,c),applyTransform$1(d,d,c));var f=extend({lineCap:"round"},n.getModel(["axisLine","lineStyle"]).getLineStyle()),g=new Line$3({shape:{x1:h[0],y1:h[1],x2:d[0],y2:d[1]},style:f,strokeContainThreshold:a.strokeContainThreshold||5,silent:!0,z2:1});subPixelOptimizeLine(g.shape,g.style.lineWidth),g.anid="line",r.add(g);var y=n.get(["axisLine","symbol"]);if(y!=null){var v=n.get(["axisLine","symbolSize"]);isString(y)&&(y=[y,y]),(isString(v)||isNumber(v))&&(v=[v,v]);var _=normalizeSymbolOffset(n.get(["axisLine","symbolOffset"])||0,v),x=v[0],S=v[1];each$f([{rotate:a.rotation+Math.PI/2,offset:_[0],r:0},{rotate:a.rotation-Math.PI/2,offset:_[1],r:Math.sqrt((h[0]-d[0])*(h[0]-d[0])+(h[1]-d[1])*(h[1]-d[1]))}],function(T,M){if(y[M]!=="none"&&y[M]!=null){var b=createSymbol$1(y[M],-x/2,-S/2,x,S,f.stroke,!0),A=T.r+T.offset,I=p?d:h;b.attr({rotation:T.rotate,x:I[0]+A*Math.cos(a.rotation),y:I[1]-A*Math.sin(a.rotation),silent:!0,z2:11}),r.add(b)}})}}},axisTickLabel:function(a,n,r,o){var l=buildAxisMajorTicks(r,o,n,a),u=buildAxisLabel(r,o,n,a);if(fixMinMaxLabelShow(n,u,l),buildAxisMinorTicks(r,o,n,a.tickDirection),n.get(["axisLabel","hideOverlap"])){var c=prepareLayoutList(map$1(u,function(h){return{label:h,priority:h.z2,defaultAttr:{ignore:h.ignore}}}));hideOverlap(c)}},axisName:function(a,n,r,o){var l=retrieve(a.axisName,n.get("name"));if(l){var u=n.get("nameLocation"),c=a.nameDirection,h=n.getModel("nameTextStyle"),d=n.get("nameGap")||0,p=n.axis.getExtent(),f=p[0]>p[1]?-1:1,g=[u==="start"?p[0]-f*d:u==="end"?p[1]+f*d:(p[0]+p[1])/2,isNameLocationCenter(u)?a.labelOffset+c*d:0],y,v=n.get("nameRotate");v!=null&&(v=v*PI$3/180);var _;isNameLocationCenter(u)?y=AxisBuilder.innerTextLayout(a.rotation,v!=null?v:a.rotation,c):(y=endTextLayout(a.rotation,u,v||0,p),_=a.axisNameAvailableWidth,_!=null&&(_=Math.abs(_/Math.sin(y.rotation)),!isFinite(_)&&(_=null)));var x=h.getFont(),S=n.get("nameTruncate",!0)||{},T=S.ellipsis,M=retrieve(a.nameTruncateMaxWidth,S.maxWidth,_),b=new ZRText$1({x:g[0],y:g[1],rotation:y.rotation,silent:AxisBuilder.isLabelSilent(n),style:createTextStyle$1(h,{text:l,font:x,overflow:"truncate",width:M,ellipsis:T,fill:h.getTextColor()||n.get(["axisLine","lineStyle","color"]),align:h.get("align")||y.textAlign,verticalAlign:h.get("verticalAlign")||y.textVerticalAlign}),z2:1});if(setTooltipConfig({el:b,componentModel:n,itemName:l}),b.__fullText=l,b.anid="name",n.get("triggerEvent")){var A=AxisBuilder.makeAxisEventDataBase(n);A.targetType="axisName",A.name=l,getECData(b).eventData=A}o.add(b),b.updateTransform(),r.add(b),b.decomposeTransform()}}};function endTextLayout(a,n,r,o){var l=remRadian(r-a),u,c,h=o[0]>o[1],d=n==="start"&&!h||n!=="start"&&h;return isRadianAroundZero(l-PI$3/2)?(c=d?"bottom":"top",u="center"):isRadianAroundZero(l-PI$3*1.5)?(c=d?"top":"bottom",u="center"):(c="middle",l<PI$3*1.5&&l>PI$3/2?u=d?"left":"right":u=d?"right":"left"),{rotation:l,textAlign:u,textVerticalAlign:c}}function fixMinMaxLabelShow(a,n,r){if(!shouldShowAllLabels(a.axis)){var o=a.get(["axisLabel","showMinLabel"]),l=a.get(["axisLabel","showMaxLabel"]);n=n||[],r=r||[];var u=n[0],c=n[1],h=n[n.length-1],d=n[n.length-2],p=r[0],f=r[1],g=r[r.length-1],y=r[r.length-2];o===!1?(ignoreEl(u),ignoreEl(p)):isTwoLabelOverlapped(u,c)&&(o?(ignoreEl(c),ignoreEl(f)):(ignoreEl(u),ignoreEl(p))),l===!1?(ignoreEl(h),ignoreEl(g)):isTwoLabelOverlapped(d,h)&&(l?(ignoreEl(d),ignoreEl(y)):(ignoreEl(h),ignoreEl(g)))}}function ignoreEl(a){a&&(a.ignore=!0)}function isTwoLabelOverlapped(a,n){var r=a&&a.getBoundingRect().clone(),o=n&&n.getBoundingRect().clone();if(!(!r||!o)){var l=identity([]);return rotate(l,l,-a.rotation),r.applyTransform(mul([],l,a.getLocalTransform())),o.applyTransform(mul([],l,n.getLocalTransform())),r.intersect(o)}}function isNameLocationCenter(a){return a==="middle"||a==="center"}function createTicks(a,n,r,o,l){for(var u=[],c=[],h=[],d=0;d<a.length;d++){var p=a[d].coord;c[0]=p,c[1]=0,h[0]=p,h[1]=r,n&&(applyTransform$1(c,c,n),applyTransform$1(h,h,n));var f=new Line$3({shape:{x1:c[0],y1:c[1],x2:h[0],y2:h[1]},style:o,z2:2,autoBatch:!0,silent:!0});subPixelOptimizeLine(f.shape,f.style.lineWidth),f.anid=l+"_"+a[d].tickValue,u.push(f)}return u}function buildAxisMajorTicks(a,n,r,o){var l=r.axis,u=r.getModel("axisTick"),c=u.get("show");if(c==="auto"&&o.handleAutoShown&&(c=o.handleAutoShown("axisTick")),!(!c||l.scale.isBlank())){for(var h=u.getModel("lineStyle"),d=o.tickDirection*u.get("length"),p=l.getTicksCoords(),f=createTicks(p,n.transform,d,defaults(h.getLineStyle(),{stroke:r.get(["axisLine","lineStyle","color"])}),"ticks"),g=0;g<f.length;g++)a.add(f[g]);return f}}function buildAxisMinorTicks(a,n,r,o){var l=r.axis,u=r.getModel("minorTick");if(!(!u.get("show")||l.scale.isBlank())){var c=l.getMinorTicksCoords();if(c.length)for(var h=u.getModel("lineStyle"),d=o*u.get("length"),p=defaults(h.getLineStyle(),defaults(r.getModel("axisTick").getLineStyle(),{stroke:r.get(["axisLine","lineStyle","color"])})),f=0;f<c.length;f++)for(var g=createTicks(c[f],n.transform,d,p,"minorticks_"+f),y=0;y<g.length;y++)a.add(g[y])}}function buildAxisLabel(a,n,r,o){var l=r.axis,u=retrieve(o.axisLabelShow,r.get(["axisLabel","show"]));if(!(!u||l.scale.isBlank())){var c=r.getModel("axisLabel"),h=c.get("margin"),d=l.getViewLabels(),p=(retrieve(o.labelRotate,c.get("rotate"))||0)*PI$3/180,f=AxisBuilder.innerTextLayout(o.rotation,p,o.labelDirection),g=r.getCategories&&r.getCategories(!0),y=[],v=AxisBuilder.isLabelSilent(r),_=r.get("triggerEvent");return each$f(d,function(x,S){var T=l.scale.type==="ordinal"?l.scale.getRawOrdinalNumber(x.tickValue):x.tickValue,M=x.formattedLabel,b=x.rawLabel,A=c;if(g&&g[T]){var I=g[T];isObject$3(I)&&I.textStyle&&(A=new Model$1(I.textStyle,c,r.ecModel))}var w=A.getTextColor()||r.get(["axisLine","lineStyle","color"]),C=l.dataToCoord(T),E=A.getShallow("align",!0)||f.textAlign,P=retrieve2(A.getShallow("alignMinLabel",!0),E),D=retrieve2(A.getShallow("alignMaxLabel",!0),E),L=A.getShallow("verticalAlign",!0)||A.getShallow("baseline",!0)||f.textVerticalAlign,R=retrieve2(A.getShallow("verticalAlignMinLabel",!0),L),O=retrieve2(A.getShallow("verticalAlignMaxLabel",!0),L),N=new ZRText$1({x:C,y:o.labelOffset+o.labelDirection*h,rotation:f.rotation,silent:v,z2:10+(x.level||0),style:createTextStyle$1(A,{text:M,align:S===0?P:S===d.length-1?D:E,verticalAlign:S===0?R:S===d.length-1?O:L,fill:isFunction(w)?w(l.type==="category"?b:l.type==="value"?T+"":T,S):w})});if(N.anid="label_"+T,setTooltipConfig({el:N,componentModel:r,itemName:M,formatterParamsExtra:{isTruncated:function(){return N.isTruncated},value:b,tickIndex:S}}),_){var V=AxisBuilder.makeAxisEventDataBase(r);V.targetType="axisLabel",V.value=b,V.tickIndex=S,l.type==="category"&&(V.dataIndex=T),getECData(N).eventData=V}n.add(N),N.updateTransform(),y.push(N),a.add(N),N.decomposeTransform()}),y}}const AxisBuilder$1=AxisBuilder;function collect(a,n){var r={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return collectAxesInfo(r,a,n),r.seriesInvolved&&collectSeriesInfo(r,a),r}function collectAxesInfo(a,n,r){var o=n.getComponent("tooltip"),l=n.getComponent("axisPointer"),u=l.get("link",!0)||[],c=[];each$f(r.getCoordinateSystems(),function(h){if(!h.axisPointerEnabled)return;var d=makeKey(h.model),p=a.coordSysAxesInfo[d]={};a.coordSysMap[d]=h;var f=h.model,g=f.getModel("tooltip",o);if(each$f(h.getAxes(),curry$1(x,!1,null)),h.getTooltipAxes&&o&&g.get("show")){var y=g.get("trigger")==="axis",v=g.get(["axisPointer","type"])==="cross",_=h.getTooltipAxes(g.get(["axisPointer","axis"]));(y||v)&&each$f(_.baseAxes,curry$1(x,v?"cross":!0,y)),v&&each$f(_.otherAxes,curry$1(x,"cross",!1))}function x(S,T,M){var b=M.model.getModel("axisPointer",l),A=b.get("show");if(!(!A||A==="auto"&&!S&&!isHandleTrigger(b))){T==null&&(T=b.get("triggerTooltip")),b=S?makeAxisPointerModel(M,g,l,n,S,T):b;var I=b.get("snap"),w=b.get("triggerEmphasis"),C=makeKey(M.model),E=T||I||M.type==="category",P=a.axesInfo[C]={key:C,axis:M,coordSys:h,axisPointerModel:b,triggerTooltip:T,triggerEmphasis:w,involveSeries:E,snap:I,useHandle:isHandleTrigger(b),seriesModels:[],linkGroup:null};p[C]=P,a.seriesInvolved=a.seriesInvolved||E;var D=getLinkGroupIndex(u,M);if(D!=null){var L=c[D]||(c[D]={axesInfo:{}});L.axesInfo[C]=P,L.mapper=u[D].mapper,P.linkGroup=L}}}})}function makeAxisPointerModel(a,n,r,o,l,u){var c=n.getModel("axisPointer"),h=["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],d={};each$f(h,function(y){d[y]=clone$4(c.get(y))}),d.snap=a.type!=="category"&&!!u,c.get("type")==="cross"&&(d.type="line");var p=d.label||(d.label={});if(p.show==null&&(p.show=!1),l==="cross"){var f=c.get(["label","show"]);if(p.show=f!=null?f:!0,!u){var g=d.lineStyle=c.get("crossStyle");g&&defaults(p,g.textStyle)}}return a.model.getModel("axisPointer",new Model$1(d,r,o))}function collectSeriesInfo(a,n){n.eachSeries(function(r){var o=r.coordinateSystem,l=r.get(["tooltip","trigger"],!0),u=r.get(["tooltip","show"],!0);!o||l==="none"||l===!1||l==="item"||u===!1||r.get(["axisPointer","show"],!0)===!1||each$f(a.coordSysAxesInfo[makeKey(o.model)],function(c){var h=c.axis;o.getAxis(h.dim)===h&&(c.seriesModels.push(r),c.seriesDataCount==null&&(c.seriesDataCount=0),c.seriesDataCount+=r.getData().count())})})}function getLinkGroupIndex(a,n){for(var r=n.model,o=n.dim,l=0;l<a.length;l++){var u=a[l]||{};if(checkPropInLink(u[o+"AxisId"],r.id)||checkPropInLink(u[o+"AxisIndex"],r.componentIndex)||checkPropInLink(u[o+"AxisName"],r.name))return l}}function checkPropInLink(a,n){return a==="all"||isArray$1(a)&&indexOf(a,n)>=0||a===n}function fixValue(a){var n=getAxisInfo$1(a);if(n){var r=n.axisPointerModel,o=n.axis.scale,l=r.option,u=r.get("status"),c=r.get("value");c!=null&&(c=o.parse(c));var h=isHandleTrigger(r);u==null&&(l.status=h?"show":"hide");var d=o.getExtent().slice();d[0]>d[1]&&d.reverse(),(c==null||c>d[1])&&(c=d[1]),c<d[0]&&(c=d[0]),l.value=c,h&&(l.status=n.axis.scale.isBlank()?"hide":"show")}}function getAxisInfo$1(a){var n=(a.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return n&&n.axesInfo[makeKey(a)]}function getAxisPointerModel(a){var n=getAxisInfo$1(a);return n&&n.axisPointerModel}function isHandleTrigger(a){return!!a.get(["handle","show"])}function makeKey(a){return a.type+"||"+a.id}var axisPointerClazz={},AxisView=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.prototype.render=function(r,o,l,u){this.axisPointerClass&&fixValue(r),a.prototype.render.apply(this,arguments),this._doUpdateAxisPointerClass(r,l,!0)},n.prototype.updateAxisPointer=function(r,o,l,u){this._doUpdateAxisPointerClass(r,l,!1)},n.prototype.remove=function(r,o){var l=this._axisPointer;l&&l.remove(o)},n.prototype.dispose=function(r,o){this._disposeAxisPointer(o),a.prototype.dispose.apply(this,arguments)},n.prototype._doUpdateAxisPointerClass=function(r,o,l){var u=n.getAxisPointerClass(this.axisPointerClass);if(u){var c=getAxisPointerModel(r);c?(this._axisPointer||(this._axisPointer=new u)).render(r,c,o,l):this._disposeAxisPointer(o)}},n.prototype._disposeAxisPointer=function(r){this._axisPointer&&this._axisPointer.dispose(r),this._axisPointer=null},n.registerAxisPointerClass=function(r,o){if(axisPointerClazz[r])throw new Error("axisPointer "+r+" exists");axisPointerClazz[r]=o},n.getAxisPointerClass=function(r){return r&&axisPointerClazz[r]},n.type="axis",n}(ComponentView$1);const AxisView$1=AxisView;var inner$f=makeInner();function rectCoordAxisBuildSplitArea(a,n,r,o){var l=r.axis;if(!l.scale.isBlank()){var u=r.getModel("splitArea"),c=u.getModel("areaStyle"),h=c.get("color"),d=o.coordinateSystem.getRect(),p=l.getTicksCoords({tickModel:u,clamp:!0});if(p.length){var f=h.length,g=inner$f(a).splitAreaColors,y=createHashMap(),v=0;if(g)for(var _=0;_<p.length;_++){var x=g.get(p[_].tickValue);if(x!=null){v=(x+(f-1)*_)%f;break}}var S=l.toGlobalCoord(p[0].coord),T=c.getAreaStyle();h=isArray$1(h)?h:[h];for(var _=1;_<p.length;_++){var M=l.toGlobalCoord(p[_].coord),b=void 0,A=void 0,I=void 0,w=void 0;l.isHorizontal()?(b=S,A=d.y,I=M-b,w=d.height,S=b+I):(b=d.x,A=S,I=d.width,w=M-A,S=A+w);var C=p[_-1].tickValue;C!=null&&y.set(C,v),n.add(new Rect$3({anid:C!=null?"area_"+C:null,shape:{x:b,y:A,width:I,height:w},style:defaults({fill:h[v]},T),autoBatch:!0,silent:!0})),v=(v+1)%f}inner$f(a).splitAreaColors=y}}}function rectCoordAxisHandleRemove(a){inner$f(a).splitAreaColors=null}var axisBuilderAttrs$3=["axisLine","axisTickLabel","axisName"],selfBuilderAttrs$2=["splitArea","splitLine","minorSplitLine"],CartesianAxisView=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r.axisPointerClass="CartesianAxisPointer",r}return n.prototype.render=function(r,o,l,u){this.group.removeAll();var c=this._axisGroup;if(this._axisGroup=new Group$4,this.group.add(this._axisGroup),!!r.get("show")){var h=r.getCoordSysModel(),d=layout$2(h,r),p=new AxisBuilder$1(r,extend({handleAutoShown:function(g){for(var y=h.coordinateSystem.getCartesians(),v=0;v<y.length;v++)if(isIntervalOrLogScale(y[v].getOtherAxis(r.axis).scale))return!0;return!1}},d));each$f(axisBuilderAttrs$3,p.add,p),this._axisGroup.add(p.getGroup()),each$f(selfBuilderAttrs$2,function(g){r.get([g,"show"])&&axisElementBuilders$2[g](this,this._axisGroup,r,h)},this);var f=u&&u.type==="changeAxisOrder"&&u.isInitSort;f||groupTransition(c,this._axisGroup,r),a.prototype.render.call(this,r,o,l,u)}},n.prototype.remove=function(){rectCoordAxisHandleRemove(this)},n.type="cartesianAxis",n}(AxisView$1),axisElementBuilders$2={splitLine:function(a,n,r,o){var l=r.axis;if(!l.scale.isBlank()){var u=r.getModel("splitLine"),c=u.getModel("lineStyle"),h=c.get("color"),d=u.get("showMinLine")!==!1,p=u.get("showMaxLine")!==!1;h=isArray$1(h)?h:[h];for(var f=o.coordinateSystem.getRect(),g=l.isHorizontal(),y=0,v=l.getTicksCoords({tickModel:u}),_=[],x=[],S=c.getLineStyle(),T=0;T<v.length;T++){var M=l.toGlobalCoord(v[T].coord);if(!(T===0&&!d||T===v.length-1&&!p)){var b=v[T].tickValue;g?(_[0]=M,_[1]=f.y,x[0]=M,x[1]=f.y+f.height):(_[0]=f.x,_[1]=M,x[0]=f.x+f.width,x[1]=M);var A=y++%h.length,I=new Line$3({anid:b!=null?"line_"+b:null,autoBatch:!0,shape:{x1:_[0],y1:_[1],x2:x[0],y2:x[1]},style:defaults({stroke:h[A]},S),silent:!0});subPixelOptimizeLine(I.shape,S.lineWidth),n.add(I)}}}},minorSplitLine:function(a,n,r,o){var l=r.axis,u=r.getModel("minorSplitLine"),c=u.getModel("lineStyle"),h=o.coordinateSystem.getRect(),d=l.isHorizontal(),p=l.getMinorTicksCoords();if(p.length)for(var f=[],g=[],y=c.getLineStyle(),v=0;v<p.length;v++)for(var _=0;_<p[v].length;_++){var x=l.toGlobalCoord(p[v][_].coord);d?(f[0]=x,f[1]=h.y,g[0]=x,g[1]=h.y+h.height):(f[0]=h.x,f[1]=x,g[0]=h.x+h.width,g[1]=x);var S=new Line$3({anid:"minor_line_"+p[v][_].tickValue,autoBatch:!0,shape:{x1:f[0],y1:f[1],x2:g[0],y2:g[1]},style:y,silent:!0});subPixelOptimizeLine(S.shape,y.lineWidth),n.add(S)}},splitArea:function(a,n,r,o){rectCoordAxisBuildSplitArea(a,n,r,o)}},CartesianXAxisView=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.type="xAxis",n}(CartesianAxisView),CartesianYAxisView=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=CartesianXAxisView.type,r}return n.type="yAxis",n}(CartesianAxisView),GridView=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type="grid",r}return n.prototype.render=function(r,o){this.group.removeAll(),r.get("show")&&this.group.add(new Rect$3({shape:r.coordinateSystem.getRect(),style:defaults({fill:r.get("backgroundColor")},r.getItemStyle()),silent:!0,z2:-1}))},n.type="grid",n}(ComponentView$1),extraOption={offset:0};function install$N(a){a.registerComponentView(GridView),a.registerComponentModel(GridModel$1),a.registerCoordinateSystem("cartesian2d",Grid$1),axisModelCreator(a,"x",CartesianAxisModel,extraOption),axisModelCreator(a,"y",CartesianAxisModel,extraOption),a.registerComponentView(CartesianXAxisView),a.registerComponentView(CartesianYAxisView),a.registerPreprocessor(function(n){n.xAxis&&n.yAxis&&!n.grid&&(n.grid={})})}function install$M(a){use(install$N),a.registerSeriesModel(ScatterSeriesModel$1),a.registerChartView(ScatterView$1),a.registerLayout(pointsLayout("scatter"))}function radarLayout(a){a.eachSeriesByType("radar",function(n){var r=n.getData(),o=[],l=n.coordinateSystem;if(l){var u=l.getIndicatorAxes();each$f(u,function(c,h){r.each(r.mapDimension(u[h].dim),function(d,p){o[p]=o[p]||[];var f=l.dataToPoint(d,h);o[p][h]=isValidPoint(f)?f:getValueMissingPoint(l)})}),r.each(function(c){var h=find(o[c],function(d){return isValidPoint(d)})||getValueMissingPoint(l);o[c].push(h.slice()),r.setItemLayout(c,o[c])})}})}function isValidPoint(a){return!isNaN(a[0])&&!isNaN(a[1])}function getValueMissingPoint(a){return[a.cx,a.cy]}function radarBackwardCompat(a){var n=a.polar;if(n){isArray$1(n)||(n=[n]);var r=[];each$f(n,function(o,l){o.indicator?(o.type&&!o.shape&&(o.shape=o.type),a.radar=a.radar||[],isArray$1(a.radar)||(a.radar=[a.radar]),a.radar.push(o)):r.push(o)}),a.polar=r}each$f(a.series,function(o){o&&o.type==="radar"&&o.polarIndex&&(o.radarIndex=o.polarIndex)})}var RadarView$2=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.prototype.render=function(r,o,l){var u=r.coordinateSystem,c=this.group,h=r.getData(),d=this._data;function p(y,v){var _=y.getItemVisual(v,"symbol")||"circle";if(_!=="none"){var x=normalizeSymbolSize(y.getItemVisual(v,"symbolSize")),S=createSymbol$1(_,-1,-1,2,2),T=y.getItemVisual(v,"symbolRotate")||0;return S.attr({style:{strokeNoScale:!0},z2:100,scaleX:x[0]/2,scaleY:x[1]/2,rotation:T*Math.PI/180||0}),S}}function f(y,v,_,x,S,T){_.removeAll();for(var M=0;M<v.length-1;M++){var b=p(x,S);b&&(b.__dimIdx=M,y[M]?(b.setPosition(y[M]),graphic$1[T?"initProps":"updateProps"](b,{x:v[M][0],y:v[M][1]},r,S)):b.setPosition(v[M]),_.add(b))}}function g(y){return map$1(y,function(v){return[u.cx,u.cy]})}h.diff(d).add(function(y){var v=h.getItemLayout(y);if(v){var _=new Polygon$1,x=new Polyline$3,S={shape:{points:v}};_.shape.points=g(v),x.shape.points=g(v),initProps(_,S,r,y),initProps(x,S,r,y);var T=new Group$4,M=new Group$4;T.add(x),T.add(_),T.add(M),f(x.shape.points,v,M,h,y,!0),h.setItemGraphicEl(y,T)}}).update(function(y,v){var _=d.getItemGraphicEl(v),x=_.childAt(0),S=_.childAt(1),T=_.childAt(2),M={shape:{points:h.getItemLayout(y)}};!M.shape.points||(f(x.shape.points,M.shape.points,T,h,y,!1),saveOldStyle(S),saveOldStyle(x),updateProps$1(x,M,r),updateProps$1(S,M,r),h.setItemGraphicEl(y,_))}).remove(function(y){c.remove(d.getItemGraphicEl(y))}).execute(),h.eachItemGraphicEl(function(y,v){var _=h.getItemModel(v),x=y.childAt(0),S=y.childAt(1),T=y.childAt(2),M=h.getItemVisual(v,"style"),b=M.fill;c.add(y),x.useStyle(defaults(_.getModel("lineStyle").getLineStyle(),{fill:"none",stroke:b})),setStatesStylesFromModel(x,_,"lineStyle"),setStatesStylesFromModel(S,_,"areaStyle");var A=_.getModel("areaStyle"),I=A.isEmpty()&&A.parentModel.isEmpty();S.ignore=I,each$f(["emphasis","select","blur"],function(E){var P=_.getModel([E,"areaStyle"]),D=P.isEmpty()&&P.parentModel.isEmpty();S.ensureState(E).ignore=D&&I}),S.useStyle(defaults(A.getAreaStyle(),{fill:b,opacity:.7,decal:M.decal}));var w=_.getModel("emphasis"),C=w.getModel("itemStyle").getItemStyle();T.eachChild(function(E){if(E instanceof ZRImage$1){var P=E.style;E.useStyle(extend({image:P.image,x:P.x,y:P.y,width:P.width,height:P.height},M))}else E.useStyle(M),E.setColor(b),E.style.strokeNoScale=!0;var D=E.ensureState("emphasis");D.style=clone$4(C);var L=h.getStore().get(h.getDimensionIndex(E.__dimIdx),v);(L==null||isNaN(L))&&(L=""),setLabelStyle(E,getLabelStatesModels(_),{labelFetcher:h.hostModel,labelDataIndex:v,labelDimIndex:E.__dimIdx,defaultText:L,inheritColor:b,defaultOpacity:M.opacity})}),toggleHoverEmphasis(y,w.get("focus"),w.get("blurScope"),w.get("disabled"))}),this._data=h},n.prototype.remove=function(){this.group.removeAll(),this._data=null},n.type="radar",n}(ChartView$1);const RadarView$3=RadarView$2;var RadarSeriesModel=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r.hasSymbolVisual=!0,r}return n.prototype.init=function(r){a.prototype.init.apply(this,arguments),this.legendVisualProvider=new LegendVisualProvider$1(bind$1(this.getData,this),bind$1(this.getRawData,this))},n.prototype.getInitialData=function(r,o){return createSeriesDataSimply(this,{generateCoord:"indicator_",generateCoordCount:1/0})},n.prototype.formatTooltip=function(r,o,l){var u=this.getData(),c=this.coordinateSystem,h=c.getIndicatorAxes(),d=this.getData().getName(r),p=d===""?this.name:d,f=retrieveVisualColorForTooltipMarker(this,r);return createTooltipMarkup("section",{header:p,sortBlocks:!0,blocks:map$1(h,function(g){var y=u.get(u.mapDimension(g.dim),r);return createTooltipMarkup("nameValue",{markerType:"subItem",markerColor:f,name:g.name,value:y,sortParam:y})})})},n.prototype.getTooltipPosition=function(r){if(r!=null){for(var o=this.getData(),l=this.coordinateSystem,u=o.getValues(map$1(l.dimensions,function(p){return o.mapDimension(p)}),r),c=0,h=u.length;c<h;c++)if(!isNaN(u[c])){var d=l.getIndicatorAxes();return l.coordToPoint(d[c].dataToCoord(u[c]),c)}}},n.type="series.radar",n.dependencies=["radar"],n.defaultOption={z:2,colorBy:"data",coordinateSystem:"radar",legendHoverLink:!0,radarIndex:0,lineStyle:{width:2,type:"solid",join:"round"},label:{position:"top"},symbolSize:8},n}(SeriesModel$1);const RadarSeriesModel$1=RadarSeriesModel;var valueAxisDefault=axisDefault.value;function defaultsShow(a,n){return defaults({show:n},a)}var RadarModel=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.prototype.optionUpdated=function(){var r=this.get("boundaryGap"),o=this.get("splitNumber"),l=this.get("scale"),u=this.get("axisLine"),c=this.get("axisTick"),h=this.get("axisLabel"),d=this.get("axisName"),p=this.get(["axisName","show"]),f=this.get(["axisName","formatter"]),g=this.get("axisNameGap"),y=this.get("triggerEvent"),v=map$1(this.get("indicator")||[],function(_){_.max!=null&&_.max>0&&!_.min?_.min=0:_.min!=null&&_.min<0&&!_.max&&(_.max=0);var x=d;_.color!=null&&(x=defaults({color:_.color},d));var S=merge(clone$4(_),{boundaryGap:r,splitNumber:o,scale:l,axisLine:u,axisTick:c,axisLabel:h,name:_.text,showName:p,nameLocation:"end",nameGap:g,nameTextStyle:x,triggerEvent:y},!1);if(isString(f)){var T=S.name;S.name=f.replace("{value}",T!=null?T:"")}else isFunction(f)&&(S.name=f(S.name,S));var M=new Model$1(S,null,this.ecModel);return mixin(M,AxisModelCommonMixin.prototype),M.mainType="radar",M.componentIndex=this.componentIndex,M},this);this._indicatorModels=v},n.prototype.getIndicatorModels=function(){return this._indicatorModels},n.type="radar",n.defaultOption={z:0,center:["50%","50%"],radius:"75%",startAngle:90,axisName:{show:!0},boundaryGap:[0,0],splitNumber:5,axisNameGap:15,scale:!1,shape:"polygon",axisLine:merge({lineStyle:{color:"#bbb"}},valueAxisDefault.axisLine),axisLabel:defaultsShow(valueAxisDefault.axisLabel,!1),axisTick:defaultsShow(valueAxisDefault.axisTick,!1),splitLine:defaultsShow(valueAxisDefault.splitLine,!0),splitArea:defaultsShow(valueAxisDefault.splitArea,!0),indicator:[]},n}(ComponentModel$1);const RadarModel$1=RadarModel;var axisBuilderAttrs$2=["axisLine","axisTickLabel","axisName"],RadarView=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.prototype.render=function(r,o,l){var u=this.group;u.removeAll(),this._buildAxes(r),this._buildSplitLineAndArea(r)},n.prototype._buildAxes=function(r){var o=r.coordinateSystem,l=o.getIndicatorAxes(),u=map$1(l,function(c){var h=c.model.get("showName")?c.name:"",d=new AxisBuilder$1(c.model,{axisName:h,position:[o.cx,o.cy],rotation:c.angle,labelDirection:-1,tickDirection:-1,nameDirection:1});return d});each$f(u,function(c){each$f(axisBuilderAttrs$2,c.add,c),this.group.add(c.getGroup())},this)},n.prototype._buildSplitLineAndArea=function(r){var o=r.coordinateSystem,l=o.getIndicatorAxes();if(!l.length)return;var u=r.get("shape"),c=r.getModel("splitLine"),h=r.getModel("splitArea"),d=c.getModel("lineStyle"),p=h.getModel("areaStyle"),f=c.get("show"),g=h.get("show"),y=d.get("color"),v=p.get("color"),_=isArray$1(y)?y:[y],x=isArray$1(v)?v:[v],S=[],T=[];function M(V,B,G){var F=G%B.length;return V[F]=V[F]||[],F}if(u==="circle")for(var b=l[0].getTicksCoords(),A=o.cx,I=o.cy,w=0;w<b.length;w++){if(f){var C=M(S,_,w);S[C].push(new Circle$1({shape:{cx:A,cy:I,r:b[w].coord}}))}if(g&&w<b.length-1){var C=M(T,x,w);T[C].push(new Ring$1({shape:{cx:A,cy:I,r0:b[w].coord,r:b[w+1].coord}}))}}else for(var E,P=map$1(l,function(B,G){var F=B.getTicksCoords();return E=E==null?F.length-1:Math.min(F.length-1,E),map$1(F,function(z){return o.coordToPoint(z.coord,G)})}),D=[],w=0;w<=E;w++){for(var L=[],R=0;R<l.length;R++)L.push(P[R][w]);if(L[0]?L.push(L[0].slice()):console.error("Can't draw value axis "+w),f){var C=M(S,_,w);S[C].push(new Polyline$3({shape:{points:L}}))}if(g&&D){var C=M(T,x,w-1);T[C].push(new Polygon$1({shape:{points:L.concat(D)}}))}D=L.slice().reverse()}var O=d.getLineStyle(),N=p.getAreaStyle();each$f(T,function(V,B){this.group.add(mergePath(V,{style:defaults({stroke:"none",fill:x[B%x.length]},N),silent:!0}))},this),each$f(S,function(V,B){this.group.add(mergePath(V,{style:defaults({fill:"none",stroke:_[B%_.length]},O),silent:!0}))},this)},n.type="radar",n}(ComponentView$1);const RadarView$1=RadarView;var IndicatorAxis=function(a){__extends(n,a);function n(r,o,l){var u=a.call(this,r,o,l)||this;return u.type="value",u.angle=0,u.name="",u}return n}(Axis$1);const IndicatorAxis$1=IndicatorAxis;var Radar=function(){function a(n,r,o){this.dimensions=[],this._model=n,this._indicatorAxes=map$1(n.getIndicatorModels(),function(l,u){var c="indicator_"+u,h=new IndicatorAxis$1(c,new IntervalScale$1);return h.name=l.get("name"),h.model=l,l.axis=h,this.dimensions.push(c),h},this),this.resize(n,o)}return a.prototype.getIndicatorAxes=function(){return this._indicatorAxes},a.prototype.dataToPoint=function(n,r){var o=this._indicatorAxes[r];return this.coordToPoint(o.dataToCoord(n),r)},a.prototype.coordToPoint=function(n,r){var o=this._indicatorAxes[r],l=o.angle,u=this.cx+n*Math.cos(l),c=this.cy-n*Math.sin(l);return[u,c]},a.prototype.pointToData=function(n){var r=n[0]-this.cx,o=n[1]-this.cy,l=Math.sqrt(r*r+o*o);r/=l,o/=l;for(var u=Math.atan2(-o,r),c=1/0,h,d=-1,p=0;p<this._indicatorAxes.length;p++){var f=this._indicatorAxes[p],g=Math.abs(u-f.angle);g<c&&(h=f,d=p,c=g)}return[d,+(h&&h.coordToData(l))]},a.prototype.resize=function(n,r){var o=n.get("center"),l=r.getWidth(),u=r.getHeight(),c=Math.min(l,u)/2;this.cx=parsePercent(o[0],l),this.cy=parsePercent(o[1],u),this.startAngle=n.get("startAngle")*Math.PI/180;var h=n.get("radius");(isString(h)||isNumber(h))&&(h=[0,h]),this.r0=parsePercent(h[0],c),this.r=parsePercent(h[1],c),each$f(this._indicatorAxes,function(d,p){d.setExtent(this.r0,this.r);var f=this.startAngle+p*Math.PI*2/this._indicatorAxes.length;f=Math.atan2(Math.sin(f),Math.cos(f)),d.angle=f},this)},a.prototype.update=function(n,r){var o=this._indicatorAxes,l=this._model;each$f(o,function(h){h.scale.setExtent(1/0,-1/0)}),n.eachSeriesByType("radar",function(h,d){if(!(h.get("coordinateSystem")!=="radar"||n.getComponent("radar",h.get("radarIndex"))!==l)){var p=h.getData();each$f(o,function(f){f.scale.unionExtentFromData(p,p.mapDimension(f.dim))})}},this);var u=l.get("splitNumber"),c=new IntervalScale$1;c.setExtent(0,u),c.setInterval(1),each$f(o,function(h,d){alignScaleTicks(h.scale,h.model,c)})},a.prototype.convertToPixel=function(n,r,o){return console.warn("Not implemented."),null},a.prototype.convertFromPixel=function(n,r,o){return console.warn("Not implemented."),null},a.prototype.containPoint=function(n){return console.warn("Not implemented."),!1},a.create=function(n,r){var o=[];return n.eachComponent("radar",function(l){var u=new a(l,n,r);o.push(u),l.coordinateSystem=u}),n.eachSeriesByType("radar",function(l){l.get("coordinateSystem")==="radar"&&(l.coordinateSystem=o[l.get("radarIndex")||0])}),o},a.dimensions=[],a}();const Radar$1=Radar;function install$L(a){a.registerCoordinateSystem("radar",Radar$1),a.registerComponentModel(RadarModel$1),a.registerComponentView(RadarView$1),a.registerVisual({seriesType:"radar",reset:function(n){var r=n.getData();r.each(function(o){r.setItemVisual(o,"legendIcon","roundRect")}),r.setVisual("legendIcon","roundRect")}})}function install$K(a){use(install$L),a.registerChartView(RadarView$3),a.registerSeriesModel(RadarSeriesModel$1),a.registerLayout(radarLayout),a.registerProcessor(dataFilter$1("radar")),a.registerPreprocessor(radarBackwardCompat)}var ATTR="\0_ec_interaction_mutex";function take(a,n,r){var o=getStore(a);o[n]=r}function release(a,n,r){var o=getStore(a),l=o[n];l===r&&(o[n]=null)}function isTaken(a,n){return!!getStore(a)[n]}function getStore(a){return a[ATTR]||(a[ATTR]={})}registerAction({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},noop);var RoamController=function(a){__extends(n,a);function n(r){var o=a.call(this)||this;o._zr=r;var l=bind$1(o._mousedownHandler,o),u=bind$1(o._mousemoveHandler,o),c=bind$1(o._mouseupHandler,o),h=bind$1(o._mousewheelHandler,o),d=bind$1(o._pinchHandler,o);return o.enable=function(p,f){this.disable(),this._opt=defaults(clone$4(f)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),p==null&&(p=!0),(p===!0||p==="move"||p==="pan")&&(r.on("mousedown",l),r.on("mousemove",u),r.on("mouseup",c)),(p===!0||p==="scale"||p==="zoom")&&(r.on("mousewheel",h),r.on("pinch",d))},o.disable=function(){r.off("mousedown",l),r.off("mousemove",u),r.off("mouseup",c),r.off("mousewheel",h),r.off("pinch",d)},o}return n.prototype.isDragging=function(){return this._dragging},n.prototype.isPinching=function(){return this._pinching},n.prototype.setPointerChecker=function(r){this.pointerChecker=r},n.prototype.dispose=function(){this.disable()},n.prototype._mousedownHandler=function(r){if(!isMiddleOrRightButtonOnMouseUpDown(r)){for(var o=r.target;o;){if(o.draggable)return;o=o.__hostTarget||o.parent}var l=r.offsetX,u=r.offsetY;this.pointerChecker&&this.pointerChecker(r,l,u)&&(this._x=l,this._y=u,this._dragging=!0)}},n.prototype._mousemoveHandler=function(r){if(!(!this._dragging||!isAvailableBehavior("moveOnMouseMove",r,this._opt)||r.gestureEvent==="pinch"||isTaken(this._zr,"globalPan"))){var o=r.offsetX,l=r.offsetY,u=this._x,c=this._y,h=o-u,d=l-c;this._x=o,this._y=l,this._opt.preventDefaultMouseMove&&stop(r.event),trigger$1(this,"pan","moveOnMouseMove",r,{dx:h,dy:d,oldX:u,oldY:c,newX:o,newY:l,isAvailableBehavior:null})}},n.prototype._mouseupHandler=function(r){isMiddleOrRightButtonOnMouseUpDown(r)||(this._dragging=!1)},n.prototype._mousewheelHandler=function(r){var o=isAvailableBehavior("zoomOnMouseWheel",r,this._opt),l=isAvailableBehavior("moveOnMouseWheel",r,this._opt),u=r.wheelDelta,c=Math.abs(u),h=r.offsetX,d=r.offsetY;if(!(u===0||!o&&!l)){if(o){var p=c>3?1.4:c>1?1.2:1.1,f=u>0?p:1/p;checkPointerAndTrigger(this,"zoom","zoomOnMouseWheel",r,{scale:f,originX:h,originY:d,isAvailableBehavior:null})}if(l){var g=Math.abs(u),y=(u>0?1:-1)*(g>3?.4:g>1?.15:.05);checkPointerAndTrigger(this,"scrollMove","moveOnMouseWheel",r,{scrollDelta:y,originX:h,originY:d,isAvailableBehavior:null})}}},n.prototype._pinchHandler=function(r){if(!isTaken(this._zr,"globalPan")){var o=r.pinchScale>1?1.1:.9090909090909091;checkPointerAndTrigger(this,"zoom",null,r,{scale:o,originX:r.pinchX,originY:r.pinchY,isAvailableBehavior:null})}},n}(Eventful$1);function checkPointerAndTrigger(a,n,r,o,l){a.pointerChecker&&a.pointerChecker(o,l.originX,l.originY)&&(stop(o.event),trigger$1(a,n,r,o,l))}function trigger$1(a,n,r,o,l){l.isAvailableBehavior=bind$1(isAvailableBehavior,null,r,o),a.trigger(n,l)}function isAvailableBehavior(a,n,r){var o=r[a];return!a||o&&(!isString(o)||n.event[o+"Key"])}const RoamController$1=RoamController;function updateViewOnPan(a,n,r){var o=a.target;o.x+=n,o.y+=r,o.dirty()}function updateViewOnZoom(a,n,r,o){var l=a.target,u=a.zoomLimit,c=a.zoom=a.zoom||1;if(c*=n,u){var h=u.min||0,d=u.max||1/0;c=Math.max(Math.min(d,c),h)}var p=c/a.zoom;a.zoom=c,l.x-=(r-l.x)*(p-1),l.y-=(o-l.y)*(p-1),l.scaleX*=p,l.scaleY*=p,l.dirty()}var IRRELEVANT_EXCLUDES={axisPointer:1,tooltip:1,brush:1};function onIrrelevantElement(a,n,r){var o=n.getComponentByElement(a.topTarget),l=o&&o.coordinateSystem;return o&&o!==r&&!IRRELEVANT_EXCLUDES.hasOwnProperty(o.mainType)&&l&&l.model!==r}function parseXML(a){if(isString(a)){var n=new DOMParser;a=n.parseFromString(a,"text/xml")}var r=a;for(r.nodeType===9&&(r=r.firstChild);r.nodeName.toLowerCase()!=="svg"||r.nodeType!==1;)r=r.nextSibling;return r}var nodeParsers,INHERITABLE_STYLE_ATTRIBUTES_MAP={fill:"fill",stroke:"stroke","stroke-width":"lineWidth",opacity:"opacity","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-miterlimit":"miterLimit","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","text-anchor":"textAlign",visibility:"visibility",display:"display"},INHERITABLE_STYLE_ATTRIBUTES_MAP_KEYS=keys(INHERITABLE_STYLE_ATTRIBUTES_MAP),SELF_STYLE_ATTRIBUTES_MAP={"alignment-baseline":"textBaseline","stop-color":"stopColor"},SELF_STYLE_ATTRIBUTES_MAP_KEYS=keys(SELF_STYLE_ATTRIBUTES_MAP),SVGParser=function(){function a(){this._defs={},this._root=null}return a.prototype.parse=function(n,r){r=r||{};var o=parseXML(n);if(!o)throw new Error("Illegal svg");this._defsUsePending=[];var l=new Group$4;this._root=l;var u=[],c=o.getAttribute("viewBox")||"",h=parseFloat(o.getAttribute("width")||r.width),d=parseFloat(o.getAttribute("height")||r.height);isNaN(h)&&(h=null),isNaN(d)&&(d=null),parseAttributes(o,l,null,!0,!1);for(var p=o.firstChild;p;)this._parseNode(p,l,u,null,!1,!1),p=p.nextSibling;applyDefs(this._defs,this._defsUsePending),this._defsUsePending=[];var f,g;if(c){var y=splitNumberSequence(c);y.length>=4&&(f={x:parseFloat(y[0]||0),y:parseFloat(y[1]||0),width:parseFloat(y[2]),height:parseFloat(y[3])})}if(f&&h!=null&&d!=null&&(g=makeViewBoxTransform(f,{x:0,y:0,width:h,height:d}),!r.ignoreViewBox)){var v=l;l=new Group$4,l.add(v),v.scaleX=v.scaleY=g.scale,v.x=g.x,v.y=g.y}return!r.ignoreRootClip&&h!=null&&d!=null&&l.setClipPath(new Rect$3({shape:{x:0,y:0,width:h,height:d}})),{root:l,width:h,height:d,viewBoxRect:f,viewBoxTransform:g,named:u}},a.prototype._parseNode=function(n,r,o,l,u,c){var h=n.nodeName.toLowerCase(),d,p=l;if(h==="defs"&&(u=!0),h==="text"&&(c=!0),h==="defs"||h==="switch")d=r;else{if(!u){var f=nodeParsers[h];if(f&&hasOwn(nodeParsers,h)){d=f.call(this,n,r);var g=n.getAttribute("name");if(g){var y={name:g,namedFrom:null,svgNodeTagLower:h,el:d};o.push(y),h==="g"&&(p=y)}else l&&o.push({name:l.name,namedFrom:l,svgNodeTagLower:h,el:d});r.add(d)}}var v=paintServerParsers[h];if(v&&hasOwn(paintServerParsers,h)){var _=v.call(this,n),x=n.getAttribute("id");x&&(this._defs[x]=_)}}if(d&&d.isGroup)for(var S=n.firstChild;S;)S.nodeType===1?this._parseNode(S,d,o,p,u,c):S.nodeType===3&&c&&this._parseText(S,d),S=S.nextSibling},a.prototype._parseText=function(n,r){var o=new TSpan$1({style:{text:n.textContent},silent:!0,x:this._textX||0,y:this._textY||0});inheritStyle(r,o),parseAttributes(n,o,this._defsUsePending,!1,!1),applyTextAlignment(o,r);var l=o.style,u=l.fontSize;u&&u<9&&(l.fontSize=9,o.scaleX*=u/9,o.scaleY*=u/9);var c=(l.fontSize||l.fontFamily)&&[l.fontStyle,l.fontWeight,(l.fontSize||12)+"px",l.fontFamily||"sans-serif"].join(" ");l.font=c;var h=o.getBoundingRect();return this._textX+=h.width,r.add(o),o},a.internalField=function(){nodeParsers={g:function(n,r){var o=new Group$4;return inheritStyle(r,o),parseAttributes(n,o,this._defsUsePending,!1,!1),o},rect:function(n,r){var o=new Rect$3;return inheritStyle(r,o),parseAttributes(n,o,this._defsUsePending,!1,!1),o.setShape({x:parseFloat(n.getAttribute("x")||"0"),y:parseFloat(n.getAttribute("y")||"0"),width:parseFloat(n.getAttribute("width")||"0"),height:parseFloat(n.getAttribute("height")||"0")}),o.silent=!0,o},circle:function(n,r){var o=new Circle$1;return inheritStyle(r,o),parseAttributes(n,o,this._defsUsePending,!1,!1),o.setShape({cx:parseFloat(n.getAttribute("cx")||"0"),cy:parseFloat(n.getAttribute("cy")||"0"),r:parseFloat(n.getAttribute("r")||"0")}),o.silent=!0,o},line:function(n,r){var o=new Line$3;return inheritStyle(r,o),parseAttributes(n,o,this._defsUsePending,!1,!1),o.setShape({x1:parseFloat(n.getAttribute("x1")||"0"),y1:parseFloat(n.getAttribute("y1")||"0"),x2:parseFloat(n.getAttribute("x2")||"0"),y2:parseFloat(n.getAttribute("y2")||"0")}),o.silent=!0,o},ellipse:function(n,r){var o=new Ellipse$1;return inheritStyle(r,o),parseAttributes(n,o,this._defsUsePending,!1,!1),o.setShape({cx:parseFloat(n.getAttribute("cx")||"0"),cy:parseFloat(n.getAttribute("cy")||"0"),rx:parseFloat(n.getAttribute("rx")||"0"),ry:parseFloat(n.getAttribute("ry")||"0")}),o.silent=!0,o},polygon:function(n,r){var o=n.getAttribute("points"),l;o&&(l=parsePoints(o));var u=new Polygon$1({shape:{points:l||[]},silent:!0});return inheritStyle(r,u),parseAttributes(n,u,this._defsUsePending,!1,!1),u},polyline:function(n,r){var o=n.getAttribute("points"),l;o&&(l=parsePoints(o));var u=new Polyline$3({shape:{points:l||[]},silent:!0});return inheritStyle(r,u),parseAttributes(n,u,this._defsUsePending,!1,!1),u},image:function(n,r){var o=new ZRImage$1;return inheritStyle(r,o),parseAttributes(n,o,this._defsUsePending,!1,!1),o.setStyle({image:n.getAttribute("xlink:href")||n.getAttribute("href"),x:+n.getAttribute("x"),y:+n.getAttribute("y"),width:+n.getAttribute("width"),height:+n.getAttribute("height")}),o.silent=!0,o},text:function(n,r){var o=n.getAttribute("x")||"0",l=n.getAttribute("y")||"0",u=n.getAttribute("dx")||"0",c=n.getAttribute("dy")||"0";this._textX=parseFloat(o)+parseFloat(u),this._textY=parseFloat(l)+parseFloat(c);var h=new Group$4;return inheritStyle(r,h),parseAttributes(n,h,this._defsUsePending,!1,!0),h},tspan:function(n,r){var o=n.getAttribute("x"),l=n.getAttribute("y");o!=null&&(this._textX=parseFloat(o)),l!=null&&(this._textY=parseFloat(l));var u=n.getAttribute("dx")||"0",c=n.getAttribute("dy")||"0",h=new Group$4;return inheritStyle(r,h),parseAttributes(n,h,this._defsUsePending,!1,!0),this._textX+=parseFloat(u),this._textY+=parseFloat(c),h},path:function(n,r){var o=n.getAttribute("d")||"",l=createFromString(o);return inheritStyle(r,l),parseAttributes(n,l,this._defsUsePending,!1,!1),l.silent=!0,l}}}(),a}(),paintServerParsers={lineargradient:function(a){var n=parseInt(a.getAttribute("x1")||"0",10),r=parseInt(a.getAttribute("y1")||"0",10),o=parseInt(a.getAttribute("x2")||"10",10),l=parseInt(a.getAttribute("y2")||"0",10),u=new LinearGradient$1(n,r,o,l);return parsePaintServerUnit(a,u),parseGradientColorStops(a,u),u},radialgradient:function(a){var n=parseInt(a.getAttribute("cx")||"0",10),r=parseInt(a.getAttribute("cy")||"0",10),o=parseInt(a.getAttribute("r")||"0",10),l=new RadialGradient$1(n,r,o);return parsePaintServerUnit(a,l),parseGradientColorStops(a,l),l}};function parsePaintServerUnit(a,n){var r=a.getAttribute("gradientUnits");r==="userSpaceOnUse"&&(n.global=!0)}function parseGradientColorStops(a,n){for(var r=a.firstChild;r;){if(r.nodeType===1&&r.nodeName.toLocaleLowerCase()==="stop"){var o=r.getAttribute("offset"),l=void 0;o&&o.indexOf("%")>0?l=parseInt(o,10)/100:o?l=parseFloat(o):l=0;var u={};parseInlineStyle(r,u,u);var c=u.stopColor||r.getAttribute("stop-color")||"#000000";n.colorStops.push({offset:l,color:c})}r=r.nextSibling}}function inheritStyle(a,n){a&&a.__inheritedStyle&&(n.__inheritedStyle||(n.__inheritedStyle={}),defaults(n.__inheritedStyle,a.__inheritedStyle))}function parsePoints(a){for(var n=splitNumberSequence(a),r=[],o=0;o<n.length;o+=2){var l=parseFloat(n[o]),u=parseFloat(n[o+1]);r.push([l,u])}return r}function parseAttributes(a,n,r,o,l){var u=n,c=u.__inheritedStyle=u.__inheritedStyle||{},h={};a.nodeType===1&&(parseTransformAttribute(a,n),parseInlineStyle(a,c,h),o||parseAttributeStyle(a,c,h)),u.style=u.style||{},c.fill!=null&&(u.style.fill=getFillStrokeStyle(u,"fill",c.fill,r)),c.stroke!=null&&(u.style.stroke=getFillStrokeStyle(u,"stroke",c.stroke,r)),each$f(["lineWidth","opacity","fillOpacity","strokeOpacity","miterLimit","fontSize"],function(d){c[d]!=null&&(u.style[d]=parseFloat(c[d]))}),each$f(["lineDashOffset","lineCap","lineJoin","fontWeight","fontFamily","fontStyle","textAlign"],function(d){c[d]!=null&&(u.style[d]=c[d])}),l&&(u.__selfStyle=h),c.lineDash&&(u.style.lineDash=map$1(splitNumberSequence(c.lineDash),function(d){return parseFloat(d)})),(c.visibility==="hidden"||c.visibility==="collapse")&&(u.invisible=!0),c.display==="none"&&(u.ignore=!0)}function applyTextAlignment(a,n){var r=n.__selfStyle;if(r){var o=r.textBaseline,l=o;!o||o==="auto"||o==="baseline"?l="alphabetic":o==="before-edge"||o==="text-before-edge"?l="top":o==="after-edge"||o==="text-after-edge"?l="bottom":(o==="central"||o==="mathematical")&&(l="middle"),a.style.textBaseline=l}var u=n.__inheritedStyle;if(u){var c=u.textAlign,h=c;c&&(c==="middle"&&(h="center"),a.style.textAlign=h)}}var urlRegex=/^url\(\s*#(.*?)\)/;function getFillStrokeStyle(a,n,r,o){var l=r&&r.match(urlRegex);if(l){var u=trim$1(l[1]);o.push([a,n,u]);return}return r==="none"&&(r=null),r}function applyDefs(a,n){for(var r=0;r<n.length;r++){var o=n[r];o[0].style[o[1]]=a[o[2]]}}var numberReg=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function splitNumberSequence(a){return a.match(numberReg)||[]}var transformRegex=/(translate|scale|rotate|skewX|skewY|matrix)\(([\-\s0-9\.eE,]*)\)/g,DEGREE_TO_ANGLE=Math.PI/180;function parseTransformAttribute(a,n){var r=a.getAttribute("transform");if(r){r=r.replace(/,/g," ");var o=[],l=null;r.replace(transformRegex,function(g,y,v){return o.push(y,v),""});for(var u=o.length-1;u>0;u-=2){var c=o[u],h=o[u-1],d=splitNumberSequence(c);switch(l=l||create$1(),h){case"translate":translate(l,l,[parseFloat(d[0]),parseFloat(d[1]||"0")]);break;case"scale":scale$1(l,l,[parseFloat(d[0]),parseFloat(d[1]||d[0])]);break;case"rotate":rotate(l,l,-parseFloat(d[0])*DEGREE_TO_ANGLE,[parseFloat(d[1]||"0"),parseFloat(d[2]||"0")]);break;case"skewX":var p=Math.tan(parseFloat(d[0])*DEGREE_TO_ANGLE);mul(l,[1,0,p,1,0,0],l);break;case"skewY":var f=Math.tan(parseFloat(d[0])*DEGREE_TO_ANGLE);mul(l,[1,f,0,1,0,0],l);break;case"matrix":l[0]=parseFloat(d[0]),l[1]=parseFloat(d[1]),l[2]=parseFloat(d[2]),l[3]=parseFloat(d[3]),l[4]=parseFloat(d[4]),l[5]=parseFloat(d[5]);break}}n.setLocalTransform(l)}}var styleRegex=/([^\s:;]+)\s*:\s*([^:;]+)/g;function parseInlineStyle(a,n,r){var o=a.getAttribute("style");if(o){styleRegex.lastIndex=0;for(var l;(l=styleRegex.exec(o))!=null;){var u=l[1],c=hasOwn(INHERITABLE_STYLE_ATTRIBUTES_MAP,u)?INHERITABLE_STYLE_ATTRIBUTES_MAP[u]:null;c&&(n[c]=l[2]);var h=hasOwn(SELF_STYLE_ATTRIBUTES_MAP,u)?SELF_STYLE_ATTRIBUTES_MAP[u]:null;h&&(r[h]=l[2])}}}function parseAttributeStyle(a,n,r){for(var o=0;o<INHERITABLE_STYLE_ATTRIBUTES_MAP_KEYS.length;o++){var l=INHERITABLE_STYLE_ATTRIBUTES_MAP_KEYS[o],u=a.getAttribute(l);u!=null&&(n[INHERITABLE_STYLE_ATTRIBUTES_MAP[l]]=u)}for(var o=0;o<SELF_STYLE_ATTRIBUTES_MAP_KEYS.length;o++){var l=SELF_STYLE_ATTRIBUTES_MAP_KEYS[o],u=a.getAttribute(l);u!=null&&(r[SELF_STYLE_ATTRIBUTES_MAP[l]]=u)}}function makeViewBoxTransform(a,n){var r=n.width/a.width,o=n.height/a.height,l=Math.min(r,o);return{scale:l,x:-(a.x+a.width/2)*l+(n.x+n.width/2),y:-(a.y+a.height/2)*l+(n.y+n.height/2)}}function parseSVG(a,n){var r=new SVGParser;return r.parse(a,n)}var REGION_AVAILABLE_SVG_TAG_MAP=createHashMap(["rect","circle","line","ellipse","polygon","polyline","path","text","tspan","g"]),GeoSVGResource=function(){function a(n,r){this.type="geoSVG",this._usedGraphicMap=createHashMap(),this._freedGraphics=[],this._mapName=n,this._parsedXML=parseXML(r)}return a.prototype.load=function(){var n=this._firstGraphic;if(!n){n=this._firstGraphic=this._buildGraphic(this._parsedXML),this._freedGraphics.push(n),this._boundingRect=this._firstGraphic.boundingRect.clone();var r=createRegions(n.named),o=r.regions,l=r.regionsMap;this._regions=o,this._regionsMap=l}return{boundingRect:this._boundingRect,regions:this._regions,regionsMap:this._regionsMap}},a.prototype._buildGraphic=function(n){var r,o;try{r=n&&parseSVG(n,{ignoreViewBox:!0,ignoreRootClip:!0})||{},o=r.root,assert(o!=null)}catch(S){throw new Error(`Invalid svg format
`+S.message)}var l=new Group$4;l.add(o),l.isGeoSVGGraphicRoot=!0;var u=r.width,c=r.height,h=r.viewBoxRect,d=this._boundingRect;if(!d){var p=void 0,f=void 0,g=void 0,y=void 0;if(u!=null?(p=0,g=u):h&&(p=h.x,g=h.width),c!=null?(f=0,y=c):h&&(f=h.y,y=h.height),p==null||f==null){var v=o.getBoundingRect();p==null&&(p=v.x,g=v.width),f==null&&(f=v.y,y=v.height)}d=this._boundingRect=new BoundingRect$1(p,f,g,y)}if(h){var _=makeViewBoxTransform(h,d);o.scaleX=o.scaleY=_.scale,o.x=_.x,o.y=_.y}l.setClipPath(new Rect$3({shape:d.plain()}));var x=[];return each$f(r.named,function(S){REGION_AVAILABLE_SVG_TAG_MAP.get(S.svgNodeTagLower)!=null&&(x.push(S),setSilent(S.el))}),{root:l,boundingRect:d,named:x}},a.prototype.useGraphic=function(n){var r=this._usedGraphicMap,o=r.get(n);return o||(o=this._freedGraphics.pop()||this._buildGraphic(this._parsedXML),r.set(n,o),o)},a.prototype.freeGraphic=function(n){var r=this._usedGraphicMap,o=r.get(n);o&&(r.removeKey(n),this._freedGraphics.push(o))},a}();function setSilent(a){a.silent=!1,a.isGroup&&a.traverse(function(n){n.silent=!1})}function createRegions(a){var n=[],r=createHashMap();return each$f(a,function(o){if(o.namedFrom==null){var l=new GeoSVGRegion(o.name,o.el);n.push(l),r.set(o.name,l)}}),{regions:n,regionsMap:r}}var geoCoord=[126,25],nanhaiName="\u5357\u6D77\u8BF8\u5C9B",points$1=[[[0,3.5],[7,11.2],[15,11.9],[30,7],[42,.7],[52,.7],[56,7.7],[59,.7],[64,.7],[64,0],[5,0],[0,3.5]],[[13,16.1],[19,14.7],[16,21.7],[11,23.1],[13,16.1]],[[12,32.2],[14,38.5],[15,38.5],[13,32.2],[12,32.2]],[[16,47.6],[12,53.2],[13,53.2],[18,47.6],[16,47.6]],[[6,64.4],[8,70],[9,70],[8,64.4],[6,64.4]],[[23,82.6],[29,79.8],[30,79.8],[25,82.6],[23,82.6]],[[37,70.7],[43,62.3],[44,62.3],[39,70.7],[37,70.7]],[[48,51.1],[51,45.5],[53,45.5],[50,51.1],[48,51.1]],[[51,35],[51,28.7],[53,28.7],[53,35],[51,35]],[[52,22.4],[55,17.5],[56,17.5],[53,22.4],[52,22.4]],[[58,12.6],[62,7],[63,7],[60,12.6],[58,12.6]],[[0,3.5],[0,93.1],[64,93.1],[64,0],[63,0],[63,92.4],[1,92.4],[1,3.5],[0,3.5]]];for(var i=0;i<points$1.length;i++)for(var k=0;k<points$1[i].length;k++)points$1[i][k][0]/=10.5,points$1[i][k][1]/=-10.5/.75,points$1[i][k][0]+=geoCoord[0],points$1[i][k][1]+=geoCoord[1];function fixNanhai(a,n){if(a==="china"){for(var r=0;r<n.length;r++)if(n[r].name===nanhaiName)return;n.push(new GeoJSONRegion(nanhaiName,map$1(points$1,function(o){return{type:"polygon",exterior:o}}),geoCoord))}}var coordsOffsetMap={\u5357\u6D77\u8BF8\u5C9B:[32,80],\u5E7F\u4E1C:[0,-10],\u9999\u6E2F:[10,5],\u6FB3\u95E8:[-10,10],\u5929\u6D25:[5,5]};function fixTextCoords(a,n){if(a==="china"){var r=coordsOffsetMap[n.name];if(r){var o=n.getCenter();o[0]+=r[0]/10.5,o[1]+=-r[1]/(10.5/.75),n.setCenter(o)}}}var points=[[[123.45165252685547,25.73527164402261],[123.49731445312499,25.73527164402261],[123.49731445312499,25.750734064600884],[123.45165252685547,25.750734064600884],[123.45165252685547,25.73527164402261]]];function fixDiaoyuIsland(a,n){a==="china"&&n.name==="\u53F0\u6E7E"&&n.geometries.push({type:"polygon",exterior:points[0]})}var DEFAULT_NAME_PROPERTY="name",GeoJSONResource=function(){function a(n,r,o){this.type="geoJSON",this._parsedMap=createHashMap(),this._mapName=n,this._specialAreas=o,this._geoJSON=parseInput(r)}return a.prototype.load=function(n,r){r=r||DEFAULT_NAME_PROPERTY;var o=this._parsedMap.get(r);if(!o){var l=this._parseToRegions(r);o=this._parsedMap.set(r,{regions:l,boundingRect:calculateBoundingRect(l)})}var u=createHashMap(),c=[];return each$f(o.regions,function(h){var d=h.name;n&&hasOwn(n,d)&&(h=h.cloneShallow(d=n[d])),c.push(h),u.set(d,h)}),{regions:c,boundingRect:o.boundingRect||new BoundingRect$1(0,0,0,0),regionsMap:u}},a.prototype._parseToRegions=function(n){var r=this._mapName,o=this._geoJSON,l;try{l=o?parseGeoJSON(o,n):[]}catch(u){throw new Error(`Invalid geoJson format
`+u.message)}return fixNanhai(r,l),each$f(l,function(u){var c=u.name;fixTextCoords(r,u),fixDiaoyuIsland(r,u);var h=this._specialAreas&&this._specialAreas[c];h&&u.transformTo(h.left,h.top,h.width,h.height)},this),l},a.prototype.getMapForUser=function(){return{geoJson:this._geoJSON,geoJSON:this._geoJSON,specialAreas:this._specialAreas}},a}();function calculateBoundingRect(a){for(var n,r=0;r<a.length;r++){var o=a[r].getBoundingRect();n=n||o.clone(),n.union(o)}return n}function parseInput(a){return isString(a)?typeof JSON<"u"&&JSON.parse?JSON.parse(a):new Function("return ("+a+");")():a}var storage=createHashMap();const geoSourceManager={registerMap:function(a,n,r){if(n.svg){var o=new GeoSVGResource(a,n.svg);storage.set(a,o)}else{var l=n.geoJson||n.geoJSON;l&&!n.features?r=n.specialAreas:l=n;var o=new GeoJSONResource(a,l,r);storage.set(a,o)}},getGeoResource:function(a){return storage.get(a)},getMapForUser:function(a){var n=storage.get(a);return n&&n.type==="geoJSON"&&n.getMapForUser()},load:function(a,n,r){var o=storage.get(a);if(!o){console.error("Map "+a+" not exists. The GeoJSON of the map must be provided.");return}return o.load(n,r)}};var OPTION_STYLE_ENABLED_TAGS=["rect","circle","line","ellipse","polygon","polyline","path"],OPTION_STYLE_ENABLED_TAG_MAP=createHashMap(OPTION_STYLE_ENABLED_TAGS),STATE_TRIGGER_TAG_MAP=createHashMap(OPTION_STYLE_ENABLED_TAGS.concat(["g"])),LABEL_HOST_MAP=createHashMap(OPTION_STYLE_ENABLED_TAGS.concat(["g"])),mapLabelRaw=makeInner();function getFixedItemStyle(a){var n=a.getItemStyle(),r=a.get("areaColor");return r!=null&&(n.fill=r),n}function fixLineStyle(a){var n=a.style;n&&(n.stroke=n.stroke||n.fill,n.fill=null)}var MapDraw=function(){function a(n){var r=new Group$4;this.uid=getUID("ec_map_draw"),this._controller=new RoamController$1(n.getZr()),this._controllerHost={target:r},this.group=r,r.add(this._regionsGroup=new Group$4),r.add(this._svgGroup=new Group$4)}return a.prototype.draw=function(n,r,o,l,u){var c=n.mainType==="geo",h=n.getData&&n.getData();c&&r.eachComponent({mainType:"series",subType:"map"},function(T){!h&&T.getHostGeoModel()===n&&(h=T.getData())});var d=n.coordinateSystem,p=this._regionsGroup,f=this.group,g=d.getTransformInfo(),y=g.raw,v=g.roam,_=!p.childAt(0)||u;_?(f.x=v.x,f.y=v.y,f.scaleX=v.scaleX,f.scaleY=v.scaleY,f.dirty()):updateProps$1(f,v,n);var x=h&&h.getVisual("visualMeta")&&h.getVisual("visualMeta").length>0,S={api:o,geo:d,mapOrGeoModel:n,data:h,isVisualEncodedByVisualMap:x,isGeo:c,transformInfoRaw:y};d.resourceType==="geoJSON"?this._buildGeoJSON(S):d.resourceType==="geoSVG"&&this._buildSVG(S),this._updateController(n,r,o),this._updateMapSelectHandler(n,p,o,l)},a.prototype._buildGeoJSON=function(n){var r=this._regionsGroupByName=createHashMap(),o=createHashMap(),l=this._regionsGroup,u=n.transformInfoRaw,c=n.mapOrGeoModel,h=n.data,d=n.geo.projection,p=d&&d.stream;function f(v,_){return _&&(v=_(v)),v&&[v[0]*u.scaleX+u.x,v[1]*u.scaleY+u.y]}function g(v){for(var _=[],x=!p&&d&&d.project,S=0;S<v.length;++S){var T=f(v[S],x);T&&_.push(T)}return _}function y(v){return{shape:{points:g(v)}}}l.removeAll(),each$f(n.geo.regions,function(v){var _=v.name,x=r.get(_),S=o.get(_)||{},T=S.dataIdx,M=S.regionModel;if(!x){x=r.set(_,new Group$4),l.add(x),T=h?h.indexOfName(_):null,M=n.isGeo?c.getRegionModel(_):h?h.getItemModel(T):null;var b=M.get("silent",!0);b!=null&&(x.silent=b),o.set(_,{dataIdx:T,regionModel:M})}var A=[],I=[];each$f(v.geometries,function(E){if(E.type==="polygon"){var P=[E.exterior].concat(E.interiors||[]);p&&(P=projectPolys(P,p)),each$f(P,function(L){A.push(new Polygon$1(y(L)))})}else{var D=E.points;p&&(D=projectPolys(D,p,!0)),each$f(D,function(L){I.push(new Polyline$3(y(L)))})}});var w=f(v.getCenter(),d&&d.project);function C(E,P){if(E.length){var D=new CompoundPath$1({culling:!0,segmentIgnoreThreshold:1,shape:{paths:E}});x.add(D),applyOptionStyleForRegion(n,D,T,M),resetLabelForRegion(n,D,_,M,c,T,w),P&&(fixLineStyle(D),each$f(D.states,fixLineStyle))}}C(A),C(I,!0)}),r.each(function(v,_){var x=o.get(_),S=x.dataIdx,T=x.regionModel;resetEventTriggerForRegion(n,v,_,T,c,S),resetTooltipForRegion(n,v,_,T,c),resetStateTriggerForRegion(n,v,_,T,c)},this)},a.prototype._buildSVG=function(n){var r=n.geo.map,o=n.transformInfoRaw;this._svgGroup.x=o.x,this._svgGroup.y=o.y,this._svgGroup.scaleX=o.scaleX,this._svgGroup.scaleY=o.scaleY,this._svgResourceChanged(r)&&(this._freeSVG(),this._useSVG(r));var l=this._svgDispatcherMap=createHashMap(),u=!1;each$f(this._svgGraphicRecord.named,function(c){var h=c.name,d=n.mapOrGeoModel,p=n.data,f=c.svgNodeTagLower,g=c.el,y=p?p.indexOfName(h):null,v=d.getRegionModel(h);OPTION_STYLE_ENABLED_TAG_MAP.get(f)!=null&&g instanceof Displayable$1&&applyOptionStyleForRegion(n,g,y,v),g instanceof Displayable$1&&(g.culling=!0);var _=v.get("silent",!0);if(_!=null&&(g.silent=_),g.z2EmphasisLift=0,!c.namedFrom&&(LABEL_HOST_MAP.get(f)!=null&&resetLabelForRegion(n,g,h,v,d,y,null),resetEventTriggerForRegion(n,g,h,v,d,y),resetTooltipForRegion(n,g,h,v,d),STATE_TRIGGER_TAG_MAP.get(f)!=null)){var x=resetStateTriggerForRegion(n,g,h,v,d);x==="self"&&(u=!0);var S=l.get(h)||l.set(h,[]);S.push(g)}},this),this._enableBlurEntireSVG(u,n)},a.prototype._enableBlurEntireSVG=function(n,r){if(n&&r.isGeo){var o=r.mapOrGeoModel.getModel(["blur","itemStyle"]).getItemStyle(),l=o.opacity;this._svgGraphicRecord.root.traverse(function(u){if(!u.isGroup){setDefaultStateProxy(u);var c=u.ensureState("blur").style||{};c.opacity==null&&l!=null&&(c.opacity=l),u.ensureState("emphasis")}})}},a.prototype.remove=function(){this._regionsGroup.removeAll(),this._regionsGroupByName=null,this._svgGroup.removeAll(),this._freeSVG(),this._controller.dispose(),this._controllerHost=null},a.prototype.findHighDownDispatchers=function(n,r){if(n==null)return[];var o=r.coordinateSystem;if(o.resourceType==="geoJSON"){var l=this._regionsGroupByName;if(l){var u=l.get(n);return u?[u]:[]}}else if(o.resourceType==="geoSVG")return this._svgDispatcherMap&&this._svgDispatcherMap.get(n)||[]},a.prototype._svgResourceChanged=function(n){return this._svgMapName!==n},a.prototype._useSVG=function(n){var r=geoSourceManager.getGeoResource(n);if(r&&r.type==="geoSVG"){var o=r.useGraphic(this.uid);this._svgGroup.add(o.root),this._svgGraphicRecord=o,this._svgMapName=n}},a.prototype._freeSVG=function(){var n=this._svgMapName;if(n!=null){var r=geoSourceManager.getGeoResource(n);r&&r.type==="geoSVG"&&r.freeGraphic(this.uid),this._svgGraphicRecord=null,this._svgDispatcherMap=null,this._svgGroup.removeAll(),this._svgMapName=null}},a.prototype._updateController=function(n,r,o){var l=n.coordinateSystem,u=this._controller,c=this._controllerHost;c.zoomLimit=n.get("scaleLimit"),c.zoom=l.getZoom(),u.enable(n.get("roam")||!1);var h=n.mainType;function d(){var p={type:"geoRoam",componentType:h};return p[h+"Id"]=n.id,p}u.off("pan").on("pan",function(p){this._mouseDownFlag=!1,updateViewOnPan(c,p.dx,p.dy),o.dispatchAction(extend(d(),{dx:p.dx,dy:p.dy,animation:{duration:0}}))},this),u.off("zoom").on("zoom",function(p){this._mouseDownFlag=!1,updateViewOnZoom(c,p.scale,p.originX,p.originY),o.dispatchAction(extend(d(),{totalZoom:c.zoom,zoom:p.scale,originX:p.originX,originY:p.originY,animation:{duration:0}}))},this),u.setPointerChecker(function(p,f,g){return l.containPoint([f,g])&&!onIrrelevantElement(p,o,n)})},a.prototype.resetForLabelLayout=function(){this.group.traverse(function(n){var r=n.getTextContent();r&&(r.ignore=mapLabelRaw(r).ignore)})},a.prototype._updateMapSelectHandler=function(n,r,o,l){var u=this;r.off("mousedown"),r.off("click"),n.get("selectedMode")&&(r.on("mousedown",function(){u._mouseDownFlag=!0}),r.on("click",function(c){!u._mouseDownFlag||(u._mouseDownFlag=!1)}))},a}();function applyOptionStyleForRegion(a,n,r,o){var l=o.getModel("itemStyle"),u=o.getModel(["emphasis","itemStyle"]),c=o.getModel(["blur","itemStyle"]),h=o.getModel(["select","itemStyle"]),d=getFixedItemStyle(l),p=getFixedItemStyle(u),f=getFixedItemStyle(h),g=getFixedItemStyle(c),y=a.data;if(y){var v=y.getItemVisual(r,"style"),_=y.getItemVisual(r,"decal");a.isVisualEncodedByVisualMap&&v.fill&&(d.fill=v.fill),_&&(d.decal=createOrUpdatePatternFromDecal(_,a.api))}n.setStyle(d),n.style.strokeNoScale=!0,n.ensureState("emphasis").style=p,n.ensureState("select").style=f,n.ensureState("blur").style=g,setDefaultStateProxy(n)}function resetLabelForRegion(a,n,r,o,l,u,c){var h=a.data,d=a.isGeo,p=h&&isNaN(h.get(h.mapDimension("value"),u)),f=h&&h.getItemLayout(u);if(d||p||f&&f.showLabel){var g=d?r:u,y=void 0;(!h||u>=0)&&(y=l);var v=c?{normal:{align:"center",verticalAlign:"middle"}}:null;setLabelStyle(n,getLabelStatesModels(o),{labelFetcher:y,labelDataIndex:g,defaultText:r},v);var _=n.getTextContent();if(_&&(mapLabelRaw(_).ignore=_.ignore,n.textConfig&&c)){var x=n.getBoundingRect().clone();n.textConfig.layoutRect=x,n.textConfig.position=[(c[0]-x.x)/x.width*100+"%",(c[1]-x.y)/x.height*100+"%"]}n.disableLabelAnimation=!0}else n.removeTextContent(),n.removeTextConfig(),n.disableLabelAnimation=null}function resetEventTriggerForRegion(a,n,r,o,l,u){a.data?a.data.setItemGraphicEl(u,n):getECData(n).eventData={componentType:"geo",componentIndex:l.componentIndex,geoIndex:l.componentIndex,name:r,region:o&&o.option||{}}}function resetTooltipForRegion(a,n,r,o,l){a.data||setTooltipConfig({el:n,componentModel:l,itemName:r,itemTooltipOption:o.get("tooltip")})}function resetStateTriggerForRegion(a,n,r,o,l){n.highDownSilentOnTouch=!!l.get("selectedMode");var u=o.getModel("emphasis"),c=u.get("focus");return toggleHoverEmphasis(n,c,u.get("blurScope"),u.get("disabled")),a.isGeo&&enableComponentHighDownFeatures(n,l,r),c}function projectPolys(a,n,r){var o=[],l;function u(){l=[]}function c(){l.length&&(o.push(l),l=[])}var h=n({polygonStart:u,polygonEnd:c,lineStart:u,lineEnd:c,point:function(d,p){isFinite(d)&&isFinite(p)&&l.push([d,p])},sphere:function(){}});return!r&&h.polygonStart(),each$f(a,function(d){h.lineStart();for(var p=0;p<d.length;p++)h.point(d[p][0],d[p][1]);h.lineEnd()}),!r&&h.polygonEnd(),o}const MapDraw$1=MapDraw;var MapView=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.prototype.render=function(r,o,l,u){if(!(u&&u.type==="mapToggleSelect"&&u.from===this.uid)){var c=this.group;if(c.removeAll(),!r.getHostGeoModel()){if(this._mapDraw&&u&&u.type==="geoRoam"&&this._mapDraw.resetForLabelLayout(),u&&u.type==="geoRoam"&&u.componentType==="series"&&u.seriesId===r.id){var h=this._mapDraw;h&&c.add(h.group)}else if(r.needsDrawMap){var h=this._mapDraw||new MapDraw$1(l);c.add(h.group),h.draw(r,o,l,this,u),this._mapDraw=h}else this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;r.get("showLegendSymbol")&&o.getComponent("legend")&&this._renderSymbols(r,o,l)}}},n.prototype.remove=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null,this.group.removeAll()},n.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null},n.prototype._renderSymbols=function(r,o,l){var u=r.originalData,c=this.group;u.each(u.mapDimension("value"),function(h,d){if(!isNaN(h)){var p=u.getItemLayout(d);if(!(!p||!p.point)){var f=p.point,g=p.offset,y=new Circle$1({style:{fill:r.getData().getVisual("style").fill},shape:{cx:f[0]+g*9,cy:f[1],r:3},silent:!0,z2:8+(g?0:Z2_EMPHASIS_LIFT+1)});if(!g){var v=r.mainSeries.getData(),_=u.getName(d),x=v.indexOfName(_),S=u.getItemModel(d),T=S.getModel("label"),M=v.getItemGraphicEl(x);setLabelStyle(y,getLabelStatesModels(S),{labelFetcher:{getFormattedLabel:function(b,A){return r.getFormattedLabel(x,A)}},defaultText:_}),y.disableLabelAnimation=!0,T.get("position")||y.setTextConfig({position:"bottom"}),M.onHoverStateChange=function(b){setStatesFlag(y,b)}}c.add(y)}}})},n.type="map",n}(ChartView$1);const MapView$1=MapView;var MapSeries=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r.needsDrawMap=!1,r.seriesGroup=[],r.getTooltipPosition=function(o){if(o!=null){var l=this.getData().getName(o),u=this.coordinateSystem,c=u.getRegion(l);return c&&u.dataToPoint(c.getCenter())}},r}return n.prototype.getInitialData=function(r){for(var o=createSeriesDataSimply(this,{coordDimensions:["value"],encodeDefaulter:curry$1(makeSeriesEncodeForNameBased,this)}),l=createHashMap(),u=[],c=0,h=o.count();c<h;c++){var d=o.getName(c);l.set(d,c)}var p=geoSourceManager.load(this.getMapType(),this.option.nameMap,this.option.nameProperty);return each$f(p.regions,function(f){var g=f.name,y=l.get(g),v=f.properties&&f.properties.echartsStyle,_;y==null?(_={name:g},u.push(_)):_=o.getRawDataItem(y),v&&merge(_,v)}),o.appendData(u),o},n.prototype.getHostGeoModel=function(){var r=this.option.geoIndex;return r!=null?this.ecModel.getComponent("geo",r):null},n.prototype.getMapType=function(){return(this.getHostGeoModel()||this).option.map},n.prototype.getRawValue=function(r){var o=this.getData();return o.get(o.mapDimension("value"),r)},n.prototype.getRegionModel=function(r){var o=this.getData();return o.getItemModel(o.indexOfName(r))},n.prototype.formatTooltip=function(r,o,l){for(var u=this.getData(),c=this.getRawValue(r),h=u.getName(r),d=this.seriesGroup,p=[],f=0;f<d.length;f++){var g=d[f].originalData.indexOfName(h),y=u.mapDimension("value");isNaN(d[f].originalData.get(y,g))||p.push(d[f].name)}return createTooltipMarkup("section",{header:p.join(", "),noHeader:!p.length,blocks:[createTooltipMarkup("nameValue",{name:h,value:c})]})},n.prototype.setZoom=function(r){this.option.zoom=r},n.prototype.setCenter=function(r){this.option.center=r},n.prototype.getLegendIcon=function(r){var o=r.icon||"roundRect",l=createSymbol$1(o,0,0,r.itemWidth,r.itemHeight,r.itemStyle.fill);return l.setStyle(r.itemStyle),l.style.stroke="none",o.indexOf("empty")>-1&&(l.style.stroke=l.style.fill,l.style.fill="#fff",l.style.lineWidth=2),l},n.type="series.map",n.dependencies=["geo"],n.layoutMode="box",n.defaultOption={z:2,coordinateSystem:"geo",map:"",left:"center",top:"center",aspectScale:null,showLegendSymbol:!0,boundingCoords:null,center:null,zoom:1,scaleLimit:null,selectedMode:!0,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",areaColor:"#eee"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{areaColor:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},nameProperty:"name"},n}(SeriesModel$1);const MapSeries$1=MapSeries;function dataStatistics(a,n){var r={};return each$f(a,function(o){o.each(o.mapDimension("value"),function(l,u){var c="ec-"+o.getName(u);r[c]=r[c]||[],isNaN(l)||r[c].push(l)})}),a[0].map(a[0].mapDimension("value"),function(o,l){for(var u="ec-"+a[0].getName(l),c=0,h=1/0,d=-1/0,p=r[u].length,f=0;f<p;f++)h=Math.min(h,r[u][f]),d=Math.max(d,r[u][f]),c+=r[u][f];var g;return n==="min"?g=h:n==="max"?g=d:n==="average"?g=c/p:g=c,p===0?NaN:g})}function mapDataStatistic(a){var n={};a.eachSeriesByType("map",function(r){var o=r.getHostGeoModel(),l=o?"o"+o.id:"i"+r.getMapType();(n[l]=n[l]||[]).push(r)}),each$f(n,function(r,o){for(var l=dataStatistics(map$1(r,function(c){return c.getData()}),r[0].get("mapValueCalculation")),u=0;u<r.length;u++)r[u].originalData=r[u].getData();for(var u=0;u<r.length;u++)r[u].seriesGroup=r,r[u].needsDrawMap=u===0&&!r[u].getHostGeoModel(),r[u].setData(l.cloneShallow()),r[u].mainSeries=r[0]})}function mapSymbolLayout(a){var n={};a.eachSeriesByType("map",function(r){var o=r.getMapType();if(!(r.getHostGeoModel()||n[o])){var l={};each$f(r.seriesGroup,function(c){var h=c.coordinateSystem,d=c.originalData;c.get("showLegendSymbol")&&a.getComponent("legend")&&d.each(d.mapDimension("value"),function(p,f){var g=d.getName(f),y=h.getRegion(g);if(!(!y||isNaN(p))){var v=l[g]||0,_=h.dataToPoint(y.getCenter());l[g]=v+1,d.setItemLayout(f,{point:_,offset:v})}})});var u=r.getData();u.each(function(c){var h=u.getName(c),d=u.getItemLayout(c)||{};d.showLabel=!l[h],u.setItemLayout(c,d)}),n[o]=!0}})}var v2ApplyTransform=applyTransform$1,View=function(a){__extends(n,a);function n(r){var o=a.call(this)||this;return o.type="view",o.dimensions=["x","y"],o._roamTransformable=new Transformable$1,o._rawTransformable=new Transformable$1,o.name=r,o}return n.prototype.setBoundingRect=function(r,o,l,u){return this._rect=new BoundingRect$1(r,o,l,u),this._rect},n.prototype.getBoundingRect=function(){return this._rect},n.prototype.setViewRect=function(r,o,l,u){this._transformTo(r,o,l,u),this._viewRect=new BoundingRect$1(r,o,l,u)},n.prototype._transformTo=function(r,o,l,u){var c=this.getBoundingRect(),h=this._rawTransformable;h.transform=c.calculateTransform(new BoundingRect$1(r,o,l,u));var d=h.parent;h.parent=null,h.decomposeTransform(),h.parent=d,this._updateTransform()},n.prototype.setCenter=function(r,o){!r||(this._center=[parsePercent(r[0],o.getWidth()),parsePercent(r[1],o.getHeight())],this._updateCenterAndZoom())},n.prototype.setZoom=function(r){r=r||1;var o=this.zoomLimit;o&&(o.max!=null&&(r=Math.min(o.max,r)),o.min!=null&&(r=Math.max(o.min,r))),this._zoom=r,this._updateCenterAndZoom()},n.prototype.getDefaultCenter=function(){var r=this.getBoundingRect(),o=r.x+r.width/2,l=r.y+r.height/2;return[o,l]},n.prototype.getCenter=function(){return this._center||this.getDefaultCenter()},n.prototype.getZoom=function(){return this._zoom||1},n.prototype.getRoamTransform=function(){return this._roamTransformable.getLocalTransform()},n.prototype._updateCenterAndZoom=function(){var r=this._rawTransformable.getLocalTransform(),o=this._roamTransformable,l=this.getDefaultCenter(),u=this.getCenter(),c=this.getZoom();u=applyTransform$1([],u,r),l=applyTransform$1([],l,r),o.originX=u[0],o.originY=u[1],o.x=l[0]-u[0],o.y=l[1]-u[1],o.scaleX=o.scaleY=c,this._updateTransform()},n.prototype._updateTransform=function(){var r=this._roamTransformable,o=this._rawTransformable;o.parent=r,r.updateTransform(),o.updateTransform(),copy(this.transform||(this.transform=[]),o.transform||create$1()),this._rawTransform=o.getLocalTransform(),this.invTransform=this.invTransform||[],invert(this.invTransform,this.transform),this.decomposeTransform()},n.prototype.getTransformInfo=function(){var r=this._rawTransformable,o=this._roamTransformable,l=new Transformable$1;return l.transform=o.transform,l.decomposeTransform(),{roam:{x:l.x,y:l.y,scaleX:l.scaleX,scaleY:l.scaleY},raw:{x:r.x,y:r.y,scaleX:r.scaleX,scaleY:r.scaleY}}},n.prototype.getViewRect=function(){return this._viewRect},n.prototype.getViewRectAfterRoam=function(){var r=this.getBoundingRect().clone();return r.applyTransform(this.transform),r},n.prototype.dataToPoint=function(r,o,l){var u=o?this._rawTransform:this.transform;return l=l||[],u?v2ApplyTransform(l,r,u):copy$1(l,r)},n.prototype.pointToData=function(r){var o=this.invTransform;return o?v2ApplyTransform([],r,o):[r[0],r[1]]},n.prototype.convertToPixel=function(r,o,l){var u=getCoordSys$4(o);return u===this?u.dataToPoint(l):null},n.prototype.convertFromPixel=function(r,o,l){var u=getCoordSys$4(o);return u===this?u.pointToData(l):null},n.prototype.containPoint=function(r){return this.getViewRectAfterRoam().contain(r[0],r[1])},n.dimensions=["x","y"],n}(Transformable$1);function getCoordSys$4(a){var n=a.seriesModel;return n?n.coordinateSystem:null}const View$1=View;var GEO_DEFAULT_PARAMS={geoJSON:{aspectScale:.75,invertLongitute:!0},geoSVG:{aspectScale:1,invertLongitute:!1}},geo2DDimensions=["lng","lat"],Geo=function(a){__extends(n,a);function n(r,o,l){var u=a.call(this,r)||this;u.dimensions=geo2DDimensions,u.type="geo",u._nameCoordMap=createHashMap(),u.map=o;var c=l.projection,h=geoSourceManager.load(o,l.nameMap,l.nameProperty),d=geoSourceManager.getGeoResource(o),p=u.resourceType=d?d.type:null,f=u.regions=h.regions,g=GEO_DEFAULT_PARAMS[d.type];u._regionsMap=h.regionsMap,u.regions=h.regions,c&&(p==="geoSVG"&&(warn("Map "+o+" with SVG source can't use projection. Only GeoJSON source supports projection."),c=null),c.project&&c.unproject||(warn("project and unproject must be both provided in the projeciton."),c=null)),u.projection=c;var y;if(c)for(var v=0;v<f.length;v++){var _=f[v].getBoundingRect(c);y=y||_.clone(),y.union(_)}else y=h.boundingRect;return u.setBoundingRect(y.x,y.y,y.width,y.height),u.aspectScale=c?1:retrieve2(l.aspectScale,g.aspectScale),u._invertLongitute=c?!1:g.invertLongitute,u}return n.prototype._transformTo=function(r,o,l,u){var c=this.getBoundingRect(),h=this._invertLongitute;c=c.clone(),h&&(c.y=-c.y-c.height);var d=this._rawTransformable;d.transform=c.calculateTransform(new BoundingRect$1(r,o,l,u));var p=d.parent;d.parent=null,d.decomposeTransform(),d.parent=p,h&&(d.scaleY=-d.scaleY),this._updateTransform()},n.prototype.getRegion=function(r){return this._regionsMap.get(r)},n.prototype.getRegionByCoord=function(r){for(var o=this.regions,l=0;l<o.length;l++){var u=o[l];if(u.type==="geoJSON"&&u.contain(r))return o[l]}},n.prototype.addGeoCoord=function(r,o){this._nameCoordMap.set(r,o)},n.prototype.getGeoCoord=function(r){var o=this._regionsMap.get(r);return this._nameCoordMap.get(r)||o&&o.getCenter()},n.prototype.dataToPoint=function(r,o,l){if(isString(r)&&(r=this.getGeoCoord(r)),r){var u=this.projection;return u&&(r=u.project(r)),r&&this.projectedToPoint(r,o,l)}},n.prototype.pointToData=function(r){var o=this.projection;return o&&(r=o.unproject(r)),r&&this.pointToProjected(r)},n.prototype.pointToProjected=function(r){return a.prototype.pointToData.call(this,r)},n.prototype.projectedToPoint=function(r,o,l){return a.prototype.dataToPoint.call(this,r,o,l)},n.prototype.convertToPixel=function(r,o,l){var u=getCoordSys$3(o);return u===this?u.dataToPoint(l):null},n.prototype.convertFromPixel=function(r,o,l){var u=getCoordSys$3(o);return u===this?u.pointToData(l):null},n}(View$1);mixin(Geo,View$1);function getCoordSys$3(a){var n=a.geoModel,r=a.seriesModel;return n?n.coordinateSystem:r?r.coordinateSystem||(r.getReferringComponents("geo",SINGLE_REFERRING).models[0]||{}).coordinateSystem:null}const Geo$1=Geo;function resizeGeo(a,n){var r=a.get("boundingCoords");if(r!=null){var o=r[0],l=r[1];if(!(isFinite(o[0])&&isFinite(o[1])&&isFinite(l[0])&&isFinite(l[1])))console.error("Invalid boundingCoords");else{var u=this.projection;if(u){var c=o[0],h=o[1],d=l[0],p=l[1];o=[1/0,1/0],l=[-1/0,-1/0];var f=function(w,C,E,P){for(var D=E-w,L=P-C,R=0;R<=100;R++){var O=R/100,N=u.project([w+D*O,C+L*O]);min$1(o,o,N),max$1(l,l,N)}};f(c,h,d,h),f(d,h,d,p),f(d,p,c,p),f(c,p,d,h)}this.setBoundingRect(o[0],o[1],l[0]-o[0],l[1]-o[1])}}var g=this.getBoundingRect(),y=a.get("layoutCenter"),v=a.get("layoutSize"),_=n.getWidth(),x=n.getHeight(),S=g.width/g.height*this.aspectScale,T=!1,M,b;y&&v&&(M=[parsePercent(y[0],_),parsePercent(y[1],x)],b=parsePercent(v,Math.min(_,x)),!isNaN(M[0])&&!isNaN(M[1])&&!isNaN(b)?T=!0:console.warn("Given layoutCenter or layoutSize data are invalid. Use left/top/width/height instead."));var A;if(T)A={},S>1?(A.width=b,A.height=b/S):(A.height=b,A.width=b*S),A.y=M[1]-A.height/2,A.x=M[0]-A.width/2;else{var I=a.getBoxLayoutParams();I.aspect=S,A=getLayoutRect(I,{width:_,height:x})}this.setViewRect(A.x,A.y,A.width,A.height),this.setCenter(a.get("center"),n),this.setZoom(a.get("zoom"))}function setGeoCoords(a,n){each$f(n.get("geoCoord"),function(r,o){a.addGeoCoord(o,r)})}var GeoCreator=function(){function a(){this.dimensions=geo2DDimensions}return a.prototype.create=function(n,r){var o=[];function l(c){return{nameProperty:c.get("nameProperty"),aspectScale:c.get("aspectScale"),projection:c.get("projection")}}n.eachComponent("geo",function(c,h){var d=c.get("map"),p=new Geo$1(d+h,d,extend({nameMap:c.get("nameMap")},l(c)));p.zoomLimit=c.get("scaleLimit"),o.push(p),c.coordinateSystem=p,p.model=c,p.resize=resizeGeo,p.resize(c,r)}),n.eachSeries(function(c){var h=c.get("coordinateSystem");if(h==="geo"){var d=c.get("geoIndex")||0;c.coordinateSystem=o[d]}});var u={};return n.eachSeriesByType("map",function(c){if(!c.getHostGeoModel()){var h=c.getMapType();u[h]=u[h]||[],u[h].push(c)}}),each$f(u,function(c,h){var d=map$1(c,function(f){return f.get("nameMap")}),p=new Geo$1(h,h,extend({nameMap:mergeAll(d)},l(c[0])));p.zoomLimit=retrieve.apply(null,map$1(c,function(f){return f.get("scaleLimit")})),o.push(p),p.resize=resizeGeo,p.resize(c[0],r),each$f(c,function(f){f.coordinateSystem=p,setGeoCoords(p,f)})}),o},a.prototype.getFilledRegions=function(n,r,o,l){for(var u=(n||[]).slice(),c=createHashMap(),h=0;h<u.length;h++)c.set(u[h].name,u[h]);var d=geoSourceManager.load(r,o,l);return each$f(d.regions,function(p){var f=p.name,g=c.get(f),y=p.properties&&p.properties.echartsStyle;g||(g={name:f},u.push(g)),y&&merge(g,y)}),u},a}(),geoCreator=new GeoCreator;const geoCreator$1=geoCreator;var GeoModel=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.prototype.init=function(r,o,l){var u=geoSourceManager.getGeoResource(r.map);if(u&&u.type==="geoJSON"){var c=r.itemStyle=r.itemStyle||{};"color"in c||(c.color="#eee")}this.mergeDefaultAndTheme(r,l),defaultEmphasis(r,"label",["show"])},n.prototype.optionUpdated=function(){var r=this,o=this.option;o.regions=geoCreator$1.getFilledRegions(o.regions,o.map,o.nameMap,o.nameProperty);var l={};this._optionModelMap=reduce(o.regions||[],function(u,c){var h=c.name;return h&&(u.set(h,new Model$1(c,r,r.ecModel)),c.selected&&(l[h]=!0)),u},createHashMap()),o.selectedMap||(o.selectedMap=l)},n.prototype.getRegionModel=function(r){return this._optionModelMap.get(r)||new Model$1(null,this,this.ecModel)},n.prototype.getFormattedLabel=function(r,o){var l=this.getRegionModel(r),u=o==="normal"?l.get(["label","formatter"]):l.get(["emphasis","label","formatter"]),c={name:r};if(isFunction(u))return c.status=o,u(c);if(isString(u))return u.replace("{a}",r!=null?r:"")},n.prototype.setZoom=function(r){this.option.zoom=r},n.prototype.setCenter=function(r){this.option.center=r},n.prototype.select=function(r){var o=this.option,l=o.selectedMode;if(l){l!=="multiple"&&(o.selectedMap=null);var u=o.selectedMap||(o.selectedMap={});u[r]=!0}},n.prototype.unSelect=function(r){var o=this.option.selectedMap;o&&(o[r]=!1)},n.prototype.toggleSelected=function(r){this[this.isSelected(r)?"unSelect":"select"](r)},n.prototype.isSelected=function(r){var o=this.option.selectedMap;return!!(o&&o[r])},n.type="geo",n.layoutMode="box",n.defaultOption={z:0,show:!0,left:"center",top:"center",aspectScale:null,silent:!1,map:"",boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},regions:[]},n}(ComponentModel$1);const GeoModel$1=GeoModel;function getCenterCoord(a,n){return a.pointToProjected?a.pointToProjected(n):a.pointToData(n)}function updateCenterAndZoom(a,n,r,o){var l=a.getZoom(),u=a.getCenter(),c=n.zoom,h=a.projectedToPoint?a.projectedToPoint(u):a.dataToPoint(u);if(n.dx!=null&&n.dy!=null&&(h[0]-=n.dx,h[1]-=n.dy,a.setCenter(getCenterCoord(a,h),o)),c!=null){if(r){var d=r.min||0,p=r.max||1/0;c=Math.max(Math.min(l*c,p),d)/l}a.scaleX*=c,a.scaleY*=c;var f=(n.originX-a.x)*(c-1),g=(n.originY-a.y)*(c-1);a.x-=f,a.y-=g,a.updateTransform(),a.setCenter(getCenterCoord(a,h),o),a.setZoom(c*l)}return{center:a.getCenter(),zoom:a.getZoom()}}var GeoView=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r.focusBlurEnabled=!0,r}return n.prototype.init=function(r,o){this._api=o},n.prototype.render=function(r,o,l,u){if(this._model=r,!r.get("show")){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;return}this._mapDraw||(this._mapDraw=new MapDraw$1(l));var c=this._mapDraw;c.draw(r,o,l,this,u),c.group.on("click",this._handleRegionClick,this),c.group.silent=r.get("silent"),this.group.add(c.group),this.updateSelectStatus(r,o,l)},n.prototype._handleRegionClick=function(r){var o;findEventDispatcher(r.target,function(l){return(o=getECData(l).eventData)!=null},!0),o&&this._api.dispatchAction({type:"geoToggleSelect",geoId:this._model.id,name:o.name})},n.prototype.updateSelectStatus=function(r,o,l){var u=this;this._mapDraw.group.traverse(function(c){var h=getECData(c).eventData;if(h)return u._model.isSelected(h.name)?l.enterSelect(c):l.leaveSelect(c),!0})},n.prototype.findHighDownDispatchers=function(r){return this._mapDraw&&this._mapDraw.findHighDownDispatchers(r,this._model)},n.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove()},n.type="geo",n}(ComponentView$1);const GeoView$1=GeoView;function registerMap(a,n,r){geoSourceManager.registerMap(a,n,r)}function install$J(a){a.registerCoordinateSystem("geo",geoCreator$1),a.registerComponentModel(GeoModel$1),a.registerComponentView(GeoView$1),a.registerImpl("registerMap",registerMap),a.registerImpl("getMap",function(r){return geoSourceManager.getMapForUser(r)});function n(r,o){o.update="geo:updateSelectStatus",a.registerAction(o,function(l,u){var c={},h=[];return u.eachComponent({mainType:"geo",query:l},function(d){d[r](l.name);var p=d.coordinateSystem;each$f(p.regions,function(g){c[g.name]=d.isSelected(g.name)||!1});var f=[];each$f(c,function(g,y){c[y]&&f.push(y)}),h.push({geoIndex:d.componentIndex,name:f})}),{selected:c,allSelected:h,name:l.name}})}n("toggleSelected",{type:"geoToggleSelect",event:"geoselectchanged"}),n("select",{type:"geoSelect",event:"geoselected"}),n("unSelect",{type:"geoUnSelect",event:"geounselected"}),a.registerAction({type:"geoRoam",event:"geoRoam",update:"updateTransform"},function(r,o,l){var u=r.componentType||"series";o.eachComponent({mainType:u,query:r},function(c){var h=c.coordinateSystem;if(h.type==="geo"){var d=updateCenterAndZoom(h,r,c.get("scaleLimit"),l);c.setCenter&&c.setCenter(d.center),c.setZoom&&c.setZoom(d.zoom),u==="series"&&each$f(c.seriesGroup,function(p){p.setCenter(d.center),p.setZoom(d.zoom)})}})})}function install$I(a){use(install$J),a.registerChartView(MapView$1),a.registerSeriesModel(MapSeries$1),a.registerLayout(mapSymbolLayout),a.registerProcessor(a.PRIORITY.PROCESSOR.STATISTIC,mapDataStatistic),createLegacyDataSelectAction("map",a.registerAction)}function init(a){var n=a;n.hierNode={defaultAncestor:null,ancestor:n,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};for(var r=[n],o,l;o=r.pop();)if(l=o.children,o.isExpand&&l.length)for(var u=l.length,c=u-1;c>=0;c--){var h=l[c];h.hierNode={defaultAncestor:null,ancestor:h,prelim:0,modifier:0,change:0,shift:0,i:c,thread:null},r.push(h)}}function firstWalk(a,n){var r=a.isExpand?a.children:[],o=a.parentNode.children,l=a.hierNode.i?o[a.hierNode.i-1]:null;if(r.length){executeShifts(a);var u=(r[0].hierNode.prelim+r[r.length-1].hierNode.prelim)/2;l?(a.hierNode.prelim=l.hierNode.prelim+n(a,l),a.hierNode.modifier=a.hierNode.prelim-u):a.hierNode.prelim=u}else l&&(a.hierNode.prelim=l.hierNode.prelim+n(a,l));a.parentNode.hierNode.defaultAncestor=apportion(a,l,a.parentNode.hierNode.defaultAncestor||o[0],n)}function secondWalk(a){var n=a.hierNode.prelim+a.parentNode.hierNode.modifier;a.setLayout({x:n},!0),a.hierNode.modifier+=a.parentNode.hierNode.modifier}function separation(a){return arguments.length?a:defaultSeparation}function radialCoordinate(a,n){return a-=Math.PI/2,{x:n*Math.cos(a),y:n*Math.sin(a)}}function getViewRect$4(a,n){return getLayoutRect(a.getBoxLayoutParams(),{width:n.getWidth(),height:n.getHeight()})}function executeShifts(a){for(var n=a.children,r=n.length,o=0,l=0;--r>=0;){var u=n[r];u.hierNode.prelim+=o,u.hierNode.modifier+=o,l+=u.hierNode.change,o+=u.hierNode.shift+l}}function apportion(a,n,r,o){if(n){for(var l=a,u=a,c=u.parentNode.children[0],h=n,d=l.hierNode.modifier,p=u.hierNode.modifier,f=c.hierNode.modifier,g=h.hierNode.modifier;h=nextRight(h),u=nextLeft(u),h&&u;){l=nextRight(l),c=nextLeft(c),l.hierNode.ancestor=a;var y=h.hierNode.prelim+g-u.hierNode.prelim-p+o(h,u);y>0&&(moveSubtree(nextAncestor(h,a,r),a,y),p+=y,d+=y),g+=h.hierNode.modifier,p+=u.hierNode.modifier,d+=l.hierNode.modifier,f+=c.hierNode.modifier}h&&!nextRight(l)&&(l.hierNode.thread=h,l.hierNode.modifier+=g-d),u&&!nextLeft(c)&&(c.hierNode.thread=u,c.hierNode.modifier+=p-f,r=a)}return r}function nextRight(a){var n=a.children;return n.length&&a.isExpand?n[n.length-1]:a.hierNode.thread}function nextLeft(a){var n=a.children;return n.length&&a.isExpand?n[0]:a.hierNode.thread}function nextAncestor(a,n,r){return a.hierNode.ancestor.parentNode===n.parentNode?a.hierNode.ancestor:r}function moveSubtree(a,n,r){var o=r/(n.hierNode.i-a.hierNode.i);n.hierNode.change-=o,n.hierNode.shift+=r,n.hierNode.modifier+=r,n.hierNode.prelim+=r,a.hierNode.change+=o}function defaultSeparation(a,n){return a.parentNode===n.parentNode?1:2}var TreeEdgeShape=function(){function a(){this.parentPoint=[],this.childPoints=[]}return a}(),TreePath=function(a){__extends(n,a);function n(r){return a.call(this,r)||this}return n.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},n.prototype.getDefaultShape=function(){return new TreeEdgeShape},n.prototype.buildPath=function(r,o){var l=o.childPoints,u=l.length,c=o.parentPoint,h=l[0],d=l[u-1];if(u===1){r.moveTo(c[0],c[1]),r.lineTo(h[0],h[1]);return}var p=o.orient,f=p==="TB"||p==="BT"?0:1,g=1-f,y=parsePercent(o.forkPosition,1),v=[];v[f]=c[f],v[g]=c[g]+(d[g]-c[g])*y,r.moveTo(c[0],c[1]),r.lineTo(v[0],v[1]),r.moveTo(h[0],h[1]),v[f]=h[f],r.lineTo(v[0],v[1]),v[f]=d[f],r.lineTo(v[0],v[1]),r.lineTo(d[0],d[1]);for(var _=1;_<u-1;_++){var x=l[_];r.moveTo(x[0],x[1]),v[f]=x[f],r.lineTo(v[0],v[1])}},n}(Path$1),TreeView=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r._mainGroup=new Group$4,r}return n.prototype.init=function(r,o){this._controller=new RoamController$1(o.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},n.prototype.render=function(r,o,l){var u=r.getData(),c=r.layoutInfo,h=this._mainGroup,d=r.get("layout");d==="radial"?(h.x=c.x+c.width/2,h.y=c.y+c.height/2):(h.x=c.x,h.y=c.y),this._updateViewCoordSys(r,l),this._updateController(r,o,l);var p=this._data;u.diff(p).add(function(f){symbolNeedsDraw(u,f)&&updateNode(u,f,null,h,r)}).update(function(f,g){var y=p.getItemGraphicEl(g);if(!symbolNeedsDraw(u,f)){y&&removeNode(p,g,y,h,r);return}updateNode(u,f,y,h,r)}).remove(function(f){var g=p.getItemGraphicEl(f);g&&removeNode(p,f,g,h,r)}).execute(),this._nodeScaleRatio=r.get("nodeScaleRatio"),this._updateNodeAndLinkScale(r),r.get("expandAndCollapse")===!0&&u.eachItemGraphicEl(function(f,g){f.off("click").on("click",function(){l.dispatchAction({type:"treeExpandAndCollapse",seriesId:r.id,dataIndex:g})})}),this._data=u},n.prototype._updateViewCoordSys=function(r,o){var l=r.getData(),u=[];l.each(function(g){var y=l.getItemLayout(g);y&&!isNaN(y.x)&&!isNaN(y.y)&&u.push([+y.x,+y.y])});var c=[],h=[];fromPoints(u,c,h);var d=this._min,p=this._max;h[0]-c[0]===0&&(c[0]=d?d[0]:c[0]-1,h[0]=p?p[0]:h[0]+1),h[1]-c[1]===0&&(c[1]=d?d[1]:c[1]-1,h[1]=p?p[1]:h[1]+1);var f=r.coordinateSystem=new View$1;f.zoomLimit=r.get("scaleLimit"),f.setBoundingRect(c[0],c[1],h[0]-c[0],h[1]-c[1]),f.setCenter(r.get("center"),o),f.setZoom(r.get("zoom")),this.group.attr({x:f.x,y:f.y,scaleX:f.scaleX,scaleY:f.scaleY}),this._min=c,this._max=h},n.prototype._updateController=function(r,o,l){var u=this,c=this._controller,h=this._controllerHost,d=this.group;c.setPointerChecker(function(p,f,g){var y=d.getBoundingRect();return y.applyTransform(d.transform),y.contain(f,g)&&!onIrrelevantElement(p,l,r)}),c.enable(r.get("roam")),h.zoomLimit=r.get("scaleLimit"),h.zoom=r.coordinateSystem.getZoom(),c.off("pan").off("zoom").on("pan",function(p){updateViewOnPan(h,p.dx,p.dy),l.dispatchAction({seriesId:r.id,type:"treeRoam",dx:p.dx,dy:p.dy})}).on("zoom",function(p){updateViewOnZoom(h,p.scale,p.originX,p.originY),l.dispatchAction({seriesId:r.id,type:"treeRoam",zoom:p.scale,originX:p.originX,originY:p.originY}),u._updateNodeAndLinkScale(r),l.updateLabelLayout()})},n.prototype._updateNodeAndLinkScale=function(r){var o=r.getData(),l=this._getNodeGlobalScale(r);o.eachItemGraphicEl(function(u,c){u.setSymbolScale(l)})},n.prototype._getNodeGlobalScale=function(r){var o=r.coordinateSystem;if(o.type!=="view")return 1;var l=this._nodeScaleRatio,u=o.scaleX||1,c=o.getZoom(),h=(c-1)*l+1;return h/u},n.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},n.prototype.remove=function(){this._mainGroup.removeAll(),this._data=null},n.type="tree",n}(ChartView$1);function symbolNeedsDraw(a,n){var r=a.getItemLayout(n);return r&&!isNaN(r.x)&&!isNaN(r.y)}function updateNode(a,n,r,o,l){var u=!r,c=a.tree.getNodeByDataIndex(n),h=c.getModel(),d=c.getVisual("style").fill,p=c.isExpand===!1&&c.children.length!==0?d:"#fff",f=a.tree.root,g=c.parentNode===f?c:c.parentNode||c,y=a.getItemGraphicEl(g.dataIndex),v=g.getLayout(),_=y?{x:y.__oldX,y:y.__oldY,rawX:y.__radialOldRawX,rawY:y.__radialOldRawY}:v,x=c.getLayout();u?(r=new SymbolClz(a,n,null,{symbolInnerColor:p,useNameLabel:!0}),r.x=_.x,r.y=_.y):r.updateData(a,n,null,{symbolInnerColor:p,useNameLabel:!0}),r.__radialOldRawX=r.__radialRawX,r.__radialOldRawY=r.__radialRawY,r.__radialRawX=x.rawX,r.__radialRawY=x.rawY,o.add(r),a.setItemGraphicEl(n,r),r.__oldX=r.x,r.__oldY=r.y,updateProps$1(r,{x:x.x,y:x.y},l);var S=r.getSymbolPath();if(l.get("layout")==="radial"){var T=f.children[0],M=T.getLayout(),b=T.children.length,A=void 0,I=void 0;if(x.x===M.x&&c.isExpand===!0&&T.children.length){var w={x:(T.children[0].getLayout().x+T.children[b-1].getLayout().x)/2,y:(T.children[0].getLayout().y+T.children[b-1].getLayout().y)/2};A=Math.atan2(w.y-M.y,w.x-M.x),A<0&&(A=Math.PI*2+A),I=w.x<M.x,I&&(A=A-Math.PI)}else A=Math.atan2(x.y-M.y,x.x-M.x),A<0&&(A=Math.PI*2+A),c.children.length===0||c.children.length!==0&&c.isExpand===!1?(I=x.x<M.x,I&&(A=A-Math.PI)):(I=x.x>M.x,I||(A=A-Math.PI));var C=I?"left":"right",E=h.getModel("label"),P=E.get("rotate"),D=P*(Math.PI/180),L=S.getTextContent();L&&(S.setTextConfig({position:E.get("position")||C,rotation:P==null?-A:D,origin:"center"}),L.setStyle("verticalAlign","middle"))}var R=h.get(["emphasis","focus"]),O=R==="relative"?concatArray(c.getAncestorsIndices(),c.getDescendantIndices()):R==="ancestor"?c.getAncestorsIndices():R==="descendant"?c.getDescendantIndices():null;O&&(getECData(r).focus=O),drawEdge(l,c,f,r,_,v,x,o),r.__edge&&(r.onHoverStateChange=function(N){if(N!=="blur"){var V=c.parentNode&&a.getItemGraphicEl(c.parentNode.dataIndex);V&&V.hoverState===HOVER_STATE_BLUR||setStatesFlag(r.__edge,N)}})}function drawEdge(a,n,r,o,l,u,c,h){var d=n.getModel(),p=a.get("edgeShape"),f=a.get("layout"),g=a.getOrient(),y=a.get(["lineStyle","curveness"]),v=a.get("edgeForkPosition"),_=d.getModel("lineStyle").getLineStyle(),x=o.__edge;if(p==="curve")n.parentNode&&n.parentNode!==r&&(x||(x=o.__edge=new BezierCurve$1({shape:getEdgeShape(f,g,y,l,l)})),updateProps$1(x,{shape:getEdgeShape(f,g,y,u,c)},a));else if(p==="polyline")if(f==="orthogonal"){if(n!==r&&n.children&&n.children.length!==0&&n.isExpand===!0){for(var S=n.children,T=[],M=0;M<S.length;M++){var b=S[M].getLayout();T.push([b.x,b.y])}x||(x=o.__edge=new TreePath({shape:{parentPoint:[c.x,c.y],childPoints:[[c.x,c.y]],orient:g,forkPosition:v}})),updateProps$1(x,{shape:{parentPoint:[c.x,c.y],childPoints:T}},a)}}else throw new Error("The polyline edgeShape can only be used in orthogonal layout");x&&!(p==="polyline"&&!n.isExpand)&&(x.useStyle(defaults({strokeNoScale:!0,fill:null},_)),setStatesStylesFromModel(x,d,"lineStyle"),setDefaultStateProxy(x),h.add(x))}function removeNodeEdge(a,n,r,o,l){var u=n.tree.root,c=getSourceNode(u,a),h=c.source,d=c.sourceLayout,p=n.getItemGraphicEl(a.dataIndex);if(p){var f=n.getItemGraphicEl(h.dataIndex),g=f.__edge,y=p.__edge||(h.isExpand===!1||h.children.length===1?g:void 0),v=o.get("edgeShape"),_=o.get("layout"),x=o.get("orient"),S=o.get(["lineStyle","curveness"]);y&&(v==="curve"?removeElement(y,{shape:getEdgeShape(_,x,S,d,d),style:{opacity:0}},o,{cb:function(){r.remove(y)},removeOpt:l}):v==="polyline"&&o.get("layout")==="orthogonal"&&removeElement(y,{shape:{parentPoint:[d.x,d.y],childPoints:[[d.x,d.y]]},style:{opacity:0}},o,{cb:function(){r.remove(y)},removeOpt:l}))}}function getSourceNode(a,n){for(var r=n.parentNode===a?n:n.parentNode||n,o;o=r.getLayout(),o==null;)r=r.parentNode===a?r:r.parentNode||r;return{source:r,sourceLayout:o}}function removeNode(a,n,r,o,l){var u=a.tree.getNodeByDataIndex(n),c=a.tree.root,h=getSourceNode(c,u).sourceLayout,d={duration:l.get("animationDurationUpdate"),easing:l.get("animationEasingUpdate")};removeElement(r,{x:h.x+1,y:h.y+1},l,{cb:function(){o.remove(r),a.setItemGraphicEl(n,null)},removeOpt:d}),r.fadeOut(null,a.hostModel,{fadeLabel:!0,animation:d}),u.children.forEach(function(p){removeNodeEdge(p,a,o,l,d)}),removeNodeEdge(u,a,o,l,d)}function getEdgeShape(a,n,r,o,l){var u,c,h,d,p,f,g,y;if(a==="radial"){p=o.rawX,g=o.rawY,f=l.rawX,y=l.rawY;var v=radialCoordinate(p,g),_=radialCoordinate(p,g+(y-g)*r),x=radialCoordinate(f,y+(g-y)*r),S=radialCoordinate(f,y);return{x1:v.x||0,y1:v.y||0,x2:S.x||0,y2:S.y||0,cpx1:_.x||0,cpy1:_.y||0,cpx2:x.x||0,cpy2:x.y||0}}else p=o.x,g=o.y,f=l.x,y=l.y,(n==="LR"||n==="RL")&&(u=p+(f-p)*r,c=g,h=f+(p-f)*r,d=y),(n==="TB"||n==="BT")&&(u=p,c=g+(y-g)*r,h=f,d=y+(g-y)*r);return{x1:p,y1:g,x2:f,y2:y,cpx1:u,cpy1:c,cpx2:h,cpy2:d}}const TreeView$1=TreeView;var inner$e=makeInner();function linkSeriesData(a){var n=a.mainData,r=a.datas;r||(r={main:n},a.datasAttr={main:"data"}),a.datas=a.mainData=null,linkAll(n,r,a),each$f(r,function(o){each$f(n.TRANSFERABLE_METHODS,function(l){o.wrapMethod(l,curry$1(transferInjection,a))})}),n.wrapMethod("cloneShallow",curry$1(cloneShallowInjection,a)),each$f(n.CHANGABLE_METHODS,function(o){n.wrapMethod(o,curry$1(changeInjection,a))}),assert(r[n.dataType]===n)}function transferInjection(a,n){if(isMainData(this)){var r=extend({},inner$e(this).datas);r[this.dataType]=n,linkAll(n,r,a)}else linkSingle(n,this.dataType,inner$e(this).mainData,a);return n}function changeInjection(a,n){return a.struct&&a.struct.update(),n}function cloneShallowInjection(a,n){return each$f(inner$e(n).datas,function(r,o){r!==n&&linkSingle(r.cloneShallow(),o,n,a)}),n}function getLinkedData(a){var n=inner$e(this).mainData;return a==null||n==null?n:inner$e(n).datas[a]}function getLinkedDataAll(){var a=inner$e(this).mainData;return a==null?[{data:a}]:map$1(keys(inner$e(a).datas),function(n){return{type:n,data:inner$e(a).datas[n]}})}function isMainData(a){return inner$e(a).mainData===a}function linkAll(a,n,r){inner$e(a).datas={},each$f(n,function(o,l){linkSingle(o,l,a,r)})}function linkSingle(a,n,r,o){inner$e(r).datas[n]=a,inner$e(a).mainData=r,a.dataType=n,o.struct&&(a[o.structAttr]=o.struct,o.struct[o.datasAttr[n]]=a),a.getLinkedData=getLinkedData,a.getLinkedDataAll=getLinkedDataAll}var TreeNode=function(){function a(n,r){this.depth=0,this.height=0,this.dataIndex=-1,this.children=[],this.viewChildren=[],this.isExpand=!1,this.name=n||"",this.hostTree=r}return a.prototype.isRemoved=function(){return this.dataIndex<0},a.prototype.eachNode=function(n,r,o){isFunction(n)&&(o=r,r=n,n=null),n=n||{},isString(n)&&(n={order:n});var l=n.order||"preorder",u=this[n.attr||"children"],c;l==="preorder"&&(c=r.call(o,this));for(var h=0;!c&&h<u.length;h++)u[h].eachNode(n,r,o);l==="postorder"&&r.call(o,this)},a.prototype.updateDepthAndHeight=function(n){var r=0;this.depth=n;for(var o=0;o<this.children.length;o++){var l=this.children[o];l.updateDepthAndHeight(n+1),l.height>r&&(r=l.height)}this.height=r+1},a.prototype.getNodeById=function(n){if(this.getId()===n)return this;for(var r=0,o=this.children,l=o.length;r<l;r++){var u=o[r].getNodeById(n);if(u)return u}},a.prototype.contains=function(n){if(n===this)return!0;for(var r=0,o=this.children,l=o.length;r<l;r++){var u=o[r].contains(n);if(u)return u}},a.prototype.getAncestors=function(n){for(var r=[],o=n?this:this.parentNode;o;)r.push(o),o=o.parentNode;return r.reverse(),r},a.prototype.getAncestorsIndices=function(){for(var n=[],r=this;r;)n.push(r.dataIndex),r=r.parentNode;return n.reverse(),n},a.prototype.getDescendantIndices=function(){var n=[];return this.eachNode(function(r){n.push(r.dataIndex)}),n},a.prototype.getValue=function(n){var r=this.hostTree.data;return r.getStore().get(r.getDimensionIndex(n||"value"),this.dataIndex)},a.prototype.setLayout=function(n,r){this.dataIndex>=0&&this.hostTree.data.setItemLayout(this.dataIndex,n,r)},a.prototype.getLayout=function(){return this.hostTree.data.getItemLayout(this.dataIndex)},a.prototype.getModel=function(n){if(!(this.dataIndex<0)){var r=this.hostTree,o=r.data.getItemModel(this.dataIndex);return o.getModel(n)}},a.prototype.getLevelModel=function(){return(this.hostTree.levelModels||[])[this.depth]},a.prototype.setVisual=function(n,r){this.dataIndex>=0&&this.hostTree.data.setItemVisual(this.dataIndex,n,r)},a.prototype.getVisual=function(n){return this.hostTree.data.getItemVisual(this.dataIndex,n)},a.prototype.getRawIndex=function(){return this.hostTree.data.getRawIndex(this.dataIndex)},a.prototype.getId=function(){return this.hostTree.data.getId(this.dataIndex)},a.prototype.getChildIndex=function(){if(this.parentNode){for(var n=this.parentNode.children,r=0;r<n.length;++r)if(n[r]===this)return r;return-1}return-1},a.prototype.isAncestorOf=function(n){for(var r=n.parentNode;r;){if(r===this)return!0;r=r.parentNode}return!1},a.prototype.isDescendantOf=function(n){return n!==this&&n.isAncestorOf(this)},a}(),Tree=function(){function a(n){this.type="tree",this._nodes=[],this.hostModel=n}return a.prototype.eachNode=function(n,r,o){this.root.eachNode(n,r,o)},a.prototype.getNodeByDataIndex=function(n){var r=this.data.getRawIndex(n);return this._nodes[r]},a.prototype.getNodeById=function(n){return this.root.getNodeById(n)},a.prototype.update=function(){for(var n=this.data,r=this._nodes,o=0,l=r.length;o<l;o++)r[o].dataIndex=-1;for(var o=0,l=n.count();o<l;o++)r[n.getRawIndex(o)].dataIndex=o},a.prototype.clearLayouts=function(){this.data.clearItemLayouts()},a.createTree=function(n,r,o){var l=new a(r),u=[],c=1;h(n);function h(f,g){var y=f.value;c=Math.max(c,isArray$1(y)?y.length:1),u.push(f);var v=new TreeNode(convertOptionIdName(f.name,""),l);g?addChild(v,g):l.root=v,l._nodes.push(v);var _=f.children;if(_)for(var x=0;x<_.length;x++)h(_[x],v)}l.root.updateDepthAndHeight(0);var d=prepareSeriesDataSchema(u,{coordDimensions:["value"],dimensionsCount:c}).dimensions,p=new SeriesData$1(d,r);return p.initData(u),o&&o(p),linkSeriesData({mainData:p,struct:l,structAttr:"tree"}),l.update(),l},a}();function addChild(a,n){var r=n.children;a.parentNode!==n&&(r.push(a),a.parentNode=n)}const Tree$1=Tree;function retrieveTargetInfo(a,n,r){if(a&&indexOf(n,a.type)>=0){var o=r.getData().tree.root,l=a.targetNode;if(isString(l)&&(l=o.getNodeById(l)),l&&o.contains(l))return{node:l};var u=a.targetNodeId;if(u!=null&&(l=o.getNodeById(u)))return{node:l}}}function getPathToRoot(a){for(var n=[];a;)a=a.parentNode,a&&n.push(a);return n.reverse()}function aboveViewRoot(a,n){var r=getPathToRoot(a);return indexOf(r,n)>=0}function wrapTreePathInfo(a,n){for(var r=[];a;){var o=a.dataIndex;r.push({name:a.name,dataIndex:o,value:n.getRawValue(o)}),a=a.parentNode}return r.reverse(),r}var TreeSeriesModel=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.hasSymbolVisual=!0,r.ignoreStyleOnData=!0,r}return n.prototype.getInitialData=function(r){var o={name:r.name,children:r.data},l=r.leaves||{},u=new Model$1(l,this,this.ecModel),c=Tree$1.createTree(o,this,h);function h(g){g.wrapMethod("getItemModel",function(y,v){var _=c.getNodeByDataIndex(v);return _&&_.children.length&&_.isExpand||(y.parentModel=u),y})}var d=0;c.eachNode("preorder",function(g){g.depth>d&&(d=g.depth)});var p=r.expandAndCollapse,f=p&&r.initialTreeDepth>=0?r.initialTreeDepth:d;return c.root.eachNode("preorder",function(g){var y=g.hostTree.data.getRawDataItem(g.dataIndex);g.isExpand=y&&y.collapsed!=null?!y.collapsed:g.depth<=f}),c.data},n.prototype.getOrient=function(){var r=this.get("orient");return r==="horizontal"?r="LR":r==="vertical"&&(r="TB"),r},n.prototype.setZoom=function(r){this.option.zoom=r},n.prototype.setCenter=function(r){this.option.center=r},n.prototype.formatTooltip=function(r,o,l){for(var u=this.getData().tree,c=u.root.children[0],h=u.getNodeByDataIndex(r),d=h.getValue(),p=h.name;h&&h!==c;)p=h.parentNode.name+"."+p,h=h.parentNode;return createTooltipMarkup("nameValue",{name:p,value:d,noValue:isNaN(d)||d==null})},n.prototype.getDataParams=function(r){var o=a.prototype.getDataParams.apply(this,arguments),l=this.getData().tree.getNodeByDataIndex(r);return o.treeAncestors=wrapTreePathInfo(l,this),o.collapsed=!l.isExpand,o},n.type="series.tree",n.layoutMode="box",n.defaultOption={z:2,coordinateSystem:"view",left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",edgeShape:"curve",edgeForkPosition:"50%",roam:!1,nodeScaleRatio:.4,center:null,zoom:1,orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:!0,initialTreeDepth:2,lineStyle:{color:"#ccc",width:1.5,curveness:.5},itemStyle:{color:"lightsteelblue",borderWidth:1.5},label:{show:!0},animationEasing:"linear",animationDuration:700,animationDurationUpdate:500},n}(SeriesModel$1);const TreeSeriesModel$1=TreeSeriesModel;function eachAfter(a,n,r){for(var o=[a],l=[],u;u=o.pop();)if(l.push(u),u.isExpand){var c=u.children;if(c.length)for(var h=0;h<c.length;h++)o.push(c[h])}for(;u=l.pop();)n(u,r)}function eachBefore(a,n){for(var r=[a],o;o=r.pop();)if(n(o),o.isExpand){var l=o.children;if(l.length)for(var u=l.length-1;u>=0;u--)r.push(l[u])}}function treeLayout(a,n){a.eachSeriesByType("tree",function(r){commonLayout(r,n)})}function commonLayout(a,n){var r=getViewRect$4(a,n);a.layoutInfo=r;var o=a.get("layout"),l=0,u=0,c=null;o==="radial"?(l=2*Math.PI,u=Math.min(r.height,r.width)/2,c=separation(function(b,A){return(b.parentNode===A.parentNode?1:2)/b.depth})):(l=r.width,u=r.height,c=separation());var h=a.getData().tree.root,d=h.children[0];if(d){init(h),eachAfter(d,firstWalk,c),h.hierNode.modifier=-d.hierNode.prelim,eachBefore(d,secondWalk);var p=d,f=d,g=d;eachBefore(d,function(b){var A=b.getLayout().x;A<p.getLayout().x&&(p=b),A>f.getLayout().x&&(f=b),b.depth>g.depth&&(g=b)});var y=p===f?1:c(p,f)/2,v=y-p.getLayout().x,_=0,x=0,S=0,T=0;if(o==="radial")_=l/(f.getLayout().x+y+v),x=u/(g.depth-1||1),eachBefore(d,function(b){S=(b.getLayout().x+v)*_,T=(b.depth-1)*x;var A=radialCoordinate(S,T);b.setLayout({x:A.x,y:A.y,rawX:S,rawY:T},!0)});else{var M=a.getOrient();M==="RL"||M==="LR"?(x=u/(f.getLayout().x+y+v),_=l/(g.depth-1||1),eachBefore(d,function(b){T=(b.getLayout().x+v)*x,S=M==="LR"?(b.depth-1)*_:l-(b.depth-1)*_,b.setLayout({x:S,y:T},!0)})):(M==="TB"||M==="BT")&&(_=l/(f.getLayout().x+y+v),x=u/(g.depth-1||1),eachBefore(d,function(b){S=(b.getLayout().x+v)*_,T=M==="TB"?(b.depth-1)*x:u-(b.depth-1)*x,b.setLayout({x:S,y:T},!0)}))}}}function treeVisual(a){a.eachSeriesByType("tree",function(n){var r=n.getData(),o=r.tree;o.eachNode(function(l){var u=l.getModel(),c=u.getModel("itemStyle").getItemStyle(),h=r.ensureUniqueItemVisual(l.dataIndex,"style");extend(h,c)})})}function installTreeAction(a){a.registerAction({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},function(n,r){r.eachComponent({mainType:"series",subType:"tree",query:n},function(o){var l=n.dataIndex,u=o.getData().tree,c=u.getNodeByDataIndex(l);c.isExpand=!c.isExpand})}),a.registerAction({type:"treeRoam",event:"treeRoam",update:"none"},function(n,r,o){r.eachComponent({mainType:"series",subType:"tree",query:n},function(l){var u=l.coordinateSystem,c=updateCenterAndZoom(u,n,void 0,o);l.setCenter&&l.setCenter(c.center),l.setZoom&&l.setZoom(c.zoom)})})}function install$H(a){a.registerChartView(TreeView$1),a.registerSeriesModel(TreeSeriesModel$1),a.registerLayout(treeLayout),a.registerVisual(treeVisual),installTreeAction(a)}var actionTypes=["treemapZoomToNode","treemapRender","treemapMove"];function installTreemapAction(a){for(var n=0;n<actionTypes.length;n++)a.registerAction({type:actionTypes[n],update:"updateView"},noop);a.registerAction({type:"treemapRootToNode",update:"updateView"},function(r,o){o.eachComponent({mainType:"series",subType:"treemap",query:r},l);function l(u,c){var h=["treemapZoomToNode","treemapRootToNode"],d=retrieveTargetInfo(r,h,u);if(d){var p=u.getViewRoot();p&&(r.direction=aboveViewRoot(p,d.node)?"rollUp":"drillDown"),u.resetViewRoot(d.node)}}})}function enableAriaDecalForTree(a){var n=a.getData(),r=n.tree,o={};r.eachNode(function(l){for(var u=l;u&&u.depth>1;)u=u.parentNode;var c=getDecalFromPalette(a.ecModel,u.name||u.dataIndex+"",o);l.setVisual("decal",c)})}var TreemapSeriesModel=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r.preventUsingHoverLayer=!0,r}return n.prototype.getInitialData=function(r,o){var l={name:r.name,children:r.data};completeTreeValue$1(l);var u=r.levels||[],c=this.designatedVisualItemStyle={},h=new Model$1({itemStyle:c},this,o);u=r.levels=setDefault(u,o);var d=map$1(u||[],function(g){return new Model$1(g,h,o)},this),p=Tree$1.createTree(l,this,f);function f(g){g.wrapMethod("getItemModel",function(y,v){var _=p.getNodeByDataIndex(v),x=_?d[_.depth]:null;return y.parentModel=x||h,y})}return p.data},n.prototype.optionUpdated=function(){this.resetViewRoot()},n.prototype.formatTooltip=function(r,o,l){var u=this.getData(),c=this.getRawValue(r),h=u.getName(r);return createTooltipMarkup("nameValue",{name:h,value:c})},n.prototype.getDataParams=function(r){var o=a.prototype.getDataParams.apply(this,arguments),l=this.getData().tree.getNodeByDataIndex(r);return o.treeAncestors=wrapTreePathInfo(l,this),o.treePathInfo=o.treeAncestors,o},n.prototype.setLayoutInfo=function(r){this.layoutInfo=this.layoutInfo||{},extend(this.layoutInfo,r)},n.prototype.mapIdToIndex=function(r){var o=this._idIndexMap;o||(o=this._idIndexMap=createHashMap(),this._idIndexMapCount=0);var l=o.get(r);return l==null&&o.set(r,l=this._idIndexMapCount++),l},n.prototype.getViewRoot=function(){return this._viewRoot},n.prototype.resetViewRoot=function(r){r?this._viewRoot=r:r=this._viewRoot;var o=this.getRawData().tree.root;(!r||r!==o&&!o.contains(r))&&(this._viewRoot=o)},n.prototype.enableAriaDecal=function(){enableAriaDecalForTree(this)},n.type="series.treemap",n.layoutMode="box",n.defaultOption={progressive:0,left:"center",top:"middle",width:"80%",height:"80%",sort:!0,clipWindow:"origin",squareRatio:.5*(1+Math.sqrt(5)),leafDepth:null,drillDownIcon:"\u25B6",zoomToNodeRatio:.32*.32,scaleLimit:null,roam:!0,nodeClick:"zoomToNode",animation:!0,animationDurationUpdate:900,animationEasing:"quinticInOut",breadcrumb:{show:!0,height:22,left:"center",top:"bottom",emptyItemWidth:25,itemStyle:{color:"rgba(0,0,0,0.7)",textStyle:{color:"#fff"}},emphasis:{itemStyle:{color:"rgba(0,0,0,0.9)"}}},label:{show:!0,distance:0,padding:5,position:"inside",color:"#fff",overflow:"truncate"},upperLabel:{show:!1,position:[0,"50%"],height:20,overflow:"truncate",verticalAlign:"middle"},itemStyle:{color:null,colorAlpha:null,colorSaturation:null,borderWidth:0,gapWidth:0,borderColor:"#fff",borderColorSaturation:null},emphasis:{upperLabel:{show:!0,position:[0,"50%"],overflow:"truncate",verticalAlign:"middle"}},visualDimension:0,visualMin:null,visualMax:null,color:[],colorAlpha:null,colorSaturation:null,colorMappingBy:"index",visibleMin:10,childrenVisibleMin:null,levels:[]},n}(SeriesModel$1);function completeTreeValue$1(a){var n=0;each$f(a.children,function(o){completeTreeValue$1(o);var l=o.value;isArray$1(l)&&(l=l[0]),n+=l});var r=a.value;isArray$1(r)&&(r=r[0]),(r==null||isNaN(r))&&(r=n),r<0&&(r=0),isArray$1(a.value)?a.value[0]=r:a.value=r}function setDefault(a,n){var r=normalizeToArray(n.get("color")),o=normalizeToArray(n.get(["aria","decal","decals"]));if(r){a=a||[];var l,u;each$f(a,function(h){var d=new Model$1(h),p=d.get("color"),f=d.get("decal");(d.get(["itemStyle","color"])||p&&p!=="none")&&(l=!0),(d.get(["itemStyle","decal"])||f&&f!=="none")&&(u=!0)});var c=a[0]||(a[0]={});return l||(c.color=r.slice()),!u&&o&&(c.decal=o.slice()),a}}const TreemapSeriesModel$1=TreemapSeriesModel;var TEXT_PADDING=8,ITEM_GAP=8,ARRAY_LENGTH=5,Breadcrumb=function(){function a(n){this.group=new Group$4,n.add(this.group)}return a.prototype.render=function(n,r,o,l){var u=n.getModel("breadcrumb"),c=this.group;if(c.removeAll(),!(!u.get("show")||!o)){var h=u.getModel("itemStyle"),d=u.getModel("emphasis"),p=h.getModel("textStyle"),f=d.getModel(["itemStyle","textStyle"]),g={pos:{left:u.get("left"),right:u.get("right"),top:u.get("top"),bottom:u.get("bottom")},box:{width:r.getWidth(),height:r.getHeight()},emptyItemWidth:u.get("emptyItemWidth"),totalWidth:0,renderList:[]};this._prepare(o,g,p),this._renderContent(n,g,h,d,p,f,l),positionElement(c,g.pos,g.box)}},a.prototype._prepare=function(n,r,o){for(var l=n;l;l=l.parentNode){var u=convertOptionIdName(l.getModel().get("name"),""),c=o.getTextRect(u),h=Math.max(c.width+TEXT_PADDING*2,r.emptyItemWidth);r.totalWidth+=h+ITEM_GAP,r.renderList.push({node:l,text:u,width:h})}},a.prototype._renderContent=function(n,r,o,l,u,c,h){for(var d=0,p=r.emptyItemWidth,f=n.get(["breadcrumb","height"]),g=getAvailableSize(r.pos,r.box),y=r.totalWidth,v=r.renderList,_=l.getModel("itemStyle").getItemStyle(),x=v.length-1;x>=0;x--){var S=v[x],T=S.node,M=S.width,b=S.text;y>g.width&&(y-=M-p,M=p,b=null);var A=new Polygon$1({shape:{points:makeItemPoints(d,0,M,f,x===v.length-1,x===0)},style:defaults(o.getItemStyle(),{lineJoin:"bevel"}),textContent:new ZRText$1({style:createTextStyle$1(u,{text:b})}),textConfig:{position:"inside"},z2:Z2_EMPHASIS_LIFT*1e4,onclick:curry$1(h,T)});A.disableLabelAnimation=!0,A.getTextContent().ensureState("emphasis").style=createTextStyle$1(c,{text:b}),A.ensureState("emphasis").style=_,toggleHoverEmphasis(A,l.get("focus"),l.get("blurScope"),l.get("disabled")),this.group.add(A),packEventData(A,n,T),d+=M+ITEM_GAP}},a.prototype.remove=function(){this.group.removeAll()},a}();function makeItemPoints(a,n,r,o,l,u){var c=[[l?a:a-ARRAY_LENGTH,n],[a+r,n],[a+r,n+o],[l?a:a-ARRAY_LENGTH,n+o]];return!u&&c.splice(2,0,[a+r+ARRAY_LENGTH,n+o/2]),!l&&c.push([a,n+o/2]),c}function packEventData(a,n,r){getECData(a).eventData={componentType:"series",componentSubType:"treemap",componentIndex:n.componentIndex,seriesIndex:n.seriesIndex,seriesName:n.name,seriesType:"treemap",selfType:"breadcrumb",nodeData:{dataIndex:r&&r.dataIndex,name:r&&r.name},treePathInfo:r&&wrapTreePathInfo(r,n)}}const Breadcrumb$1=Breadcrumb;var AnimationWrap=function(){function a(){this._storage=[],this._elExistsMap={}}return a.prototype.add=function(n,r,o,l,u){return this._elExistsMap[n.id]?!1:(this._elExistsMap[n.id]=!0,this._storage.push({el:n,target:r,duration:o,delay:l,easing:u}),!0)},a.prototype.finished=function(n){return this._finishedCallback=n,this},a.prototype.start=function(){for(var n=this,r=this._storage.length,o=function(){r--,r<=0&&(n._storage.length=0,n._elExistsMap={},n._finishedCallback&&n._finishedCallback())},l=0,u=this._storage.length;l<u;l++){var c=this._storage[l];c.el.animateTo(c.target,{duration:c.duration,delay:c.delay,easing:c.easing,setToFinal:!0,done:o,aborted:o})}return this},a}();function createWrap(){return new AnimationWrap}var Group$2=Group$4,Rect$1=Rect$3,DRAG_THRESHOLD=3,PATH_LABEL_NOAMAL="label",PATH_UPPERLABEL_NORMAL="upperLabel",Z2_BASE=Z2_EMPHASIS_LIFT*10,Z2_BG=Z2_EMPHASIS_LIFT*2,Z2_CONTENT=Z2_EMPHASIS_LIFT*3,getStateItemStyle=makeStyleMapper([["fill","color"],["stroke","strokeColor"],["lineWidth","strokeWidth"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),getItemStyleNormal=function(a){var n=getStateItemStyle(a);return n.stroke=n.fill=n.lineWidth=null,n},inner$d=makeInner(),TreemapView=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r._state="ready",r._storage=createStorage(),r}return n.prototype.render=function(r,o,l,u){var c=o.findComponents({mainType:"series",subType:"treemap",query:u});if(!(indexOf(c,r)<0)){this.seriesModel=r,this.api=l,this.ecModel=o;var h=["treemapZoomToNode","treemapRootToNode"],d=retrieveTargetInfo(u,h,r),p=u&&u.type,f=r.layoutInfo,g=!this._oldTree,y=this._storage,v=p==="treemapRootToNode"&&d&&y?{rootNodeGroup:y.nodeGroup[d.node.getRawIndex()],direction:u.direction}:null,_=this._giveContainerGroup(f),x=r.get("animation"),S=this._doRender(_,r,v);x&&!g&&(!p||p==="treemapZoomToNode"||p==="treemapRootToNode")?this._doAnimation(_,S,r,v):S.renderFinally(),this._resetController(l),this._renderBreadcrumb(r,l,d)}},n.prototype._giveContainerGroup=function(r){var o=this._containerGroup;return o||(o=this._containerGroup=new Group$2,this._initEvents(o),this.group.add(o)),o.x=r.x,o.y=r.y,o},n.prototype._doRender=function(r,o,l){var u=o.getData().tree,c=this._oldTree,h=createStorage(),d=createStorage(),p=this._storage,f=[];function g(M,b,A,I){return renderNode(o,d,p,l,h,f,M,b,A,I)}x(u.root?[u.root]:[],c&&c.root?[c.root]:[],r,u===c||!c,0);var y=S(p);if(this._oldTree=u,this._storage=d,this._controllerHost){var v=this.seriesModel.layoutInfo,_=u.root.getLayout();_.width===v.width&&_.height===v.height&&(this._controllerHost.zoom=1)}return{lastsForAnimation:h,willDeleteEls:y,renderFinally:T};function x(M,b,A,I,w){I?(b=M,each$f(M,function(P,D){!P.isRemoved()&&E(D,D)})):new DataDiffer$1(b,M,C,C).add(E).update(E).remove(curry$1(E,null)).execute();function C(P){return P.getId()}function E(P,D){var L=P!=null?M[P]:null,R=D!=null?b[D]:null,O=g(L,R,A,w);O&&x(L&&L.viewChildren||[],R&&R.viewChildren||[],O,I,w+1)}}function S(M){var b=createStorage();return M&&each$f(M,function(A,I){var w=b[I];each$f(A,function(C){C&&(w.push(C),inner$d(C).willDelete=!0)})}),b}function T(){each$f(y,function(M){each$f(M,function(b){b.parent&&b.parent.remove(b)})}),each$f(f,function(M){M.invisible=!0,M.dirty()})}},n.prototype._doAnimation=function(r,o,l,u){var c=l.get("animationDurationUpdate"),h=l.get("animationEasing"),d=(isFunction(c)?0:c)||0,p=(isFunction(h)?null:h)||"cubicOut",f=createWrap();each$f(o.willDeleteEls,function(g,y){each$f(g,function(v,_){if(!v.invisible){var x=v.parent,S,T=inner$d(x);if(u&&u.direction==="drillDown")S=x===u.rootNodeGroup?{shape:{x:0,y:0,width:T.nodeWidth,height:T.nodeHeight},style:{opacity:0}}:{style:{opacity:0}};else{var M=0,b=0;T.willDelete||(M=T.nodeWidth/2,b=T.nodeHeight/2),S=y==="nodeGroup"?{x:M,y:b,style:{opacity:0}}:{shape:{x:M,y:b,width:0,height:0},style:{opacity:0}}}S&&f.add(v,S,d,0,p)}})}),each$f(this._storage,function(g,y){each$f(g,function(v,_){var x=o.lastsForAnimation[y][_],S={};!x||(v instanceof Group$4?x.oldX!=null&&(S.x=v.x,S.y=v.y,v.x=x.oldX,v.y=x.oldY):(x.oldShape&&(S.shape=extend({},v.shape),v.setShape(x.oldShape)),x.fadein?(v.setStyle("opacity",0),S.style={opacity:1}):v.style.opacity!==1&&(S.style={opacity:1})),f.add(v,S,d,0,p))})},this),this._state="animating",f.finished(bind$1(function(){this._state="ready",o.renderFinally()},this)).start()},n.prototype._resetController=function(r){var o=this._controller,l=this._controllerHost;l||(this._controllerHost={target:this.group},l=this._controllerHost),o||(o=this._controller=new RoamController$1(r.getZr()),o.enable(this.seriesModel.get("roam")),l.zoomLimit=this.seriesModel.get("scaleLimit"),l.zoom=this.seriesModel.get("zoom"),o.on("pan",bind$1(this._onPan,this)),o.on("zoom",bind$1(this._onZoom,this)));var u=new BoundingRect$1(0,0,r.getWidth(),r.getHeight());o.setPointerChecker(function(c,h,d){return u.contain(h,d)})},n.prototype._clearController=function(){var r=this._controller;this._controllerHost=null,r&&(r.dispose(),r=null)},n.prototype._onPan=function(r){if(this._state!=="animating"&&(Math.abs(r.dx)>DRAG_THRESHOLD||Math.abs(r.dy)>DRAG_THRESHOLD)){var o=this.seriesModel.getData().tree.root;if(!o)return;var l=o.getLayout();if(!l)return;this.api.dispatchAction({type:"treemapMove",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:l.x+r.dx,y:l.y+r.dy,width:l.width,height:l.height}})}},n.prototype._onZoom=function(r){var o=r.originX,l=r.originY,u=r.scale;if(this._state!=="animating"){var c=this.seriesModel.getData().tree.root;if(!c)return;var h=c.getLayout();if(!h)return;var d=new BoundingRect$1(h.x,h.y,h.width,h.height),p=null,f=this._controllerHost;p=f.zoomLimit;var g=f.zoom=f.zoom||1;if(g*=u,p){var y=p.min||0,v=p.max||1/0;g=Math.max(Math.min(v,g),y)}var _=g/f.zoom;f.zoom=g;var x=this.seriesModel.layoutInfo;o-=x.x,l-=x.y;var S=create$1();translate(S,S,[-o,-l]),scale$1(S,S,[_,_]),translate(S,S,[o,l]),d.applyTransform(S),this.api.dispatchAction({type:"treemapRender",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:d.x,y:d.y,width:d.width,height:d.height}})}},n.prototype._initEvents=function(r){var o=this;r.on("click",function(l){if(o._state==="ready"){var u=o.seriesModel.get("nodeClick",!0);if(u){var c=o.findTarget(l.offsetX,l.offsetY);if(c){var h=c.node;if(h.getLayout().isLeafRoot)o._rootToNode(c);else if(u==="zoomToNode")o._zoomToNode(c);else if(u==="link"){var d=h.hostTree.data.getItemModel(h.dataIndex),p=d.get("link",!0),f=d.get("target",!0)||"blank";p&&windowOpen(p,f)}}}}},this)},n.prototype._renderBreadcrumb=function(r,o,l){var u=this;l||(l=r.get("leafDepth",!0)!=null?{node:r.getViewRoot()}:this.findTarget(o.getWidth()/2,o.getHeight()/2),l||(l={node:r.getData().tree.root})),(this._breadcrumb||(this._breadcrumb=new Breadcrumb$1(this.group))).render(r,o,l.node,function(c){u._state!=="animating"&&(aboveViewRoot(r.getViewRoot(),c)?u._rootToNode({node:c}):u._zoomToNode({node:c}))})},n.prototype.remove=function(){this._clearController(),this._containerGroup&&this._containerGroup.removeAll(),this._storage=createStorage(),this._state="ready",this._breadcrumb&&this._breadcrumb.remove()},n.prototype.dispose=function(){this._clearController()},n.prototype._zoomToNode=function(r){this.api.dispatchAction({type:"treemapZoomToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:r.node})},n.prototype._rootToNode=function(r){this.api.dispatchAction({type:"treemapRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:r.node})},n.prototype.findTarget=function(r,o){var l,u=this.seriesModel.getViewRoot();return u.eachNode({attr:"viewChildren",order:"preorder"},function(c){var h=this._storage.background[c.getRawIndex()];if(h){var d=h.transformCoordToLocal(r,o),p=h.shape;if(p.x<=d[0]&&d[0]<=p.x+p.width&&p.y<=d[1]&&d[1]<=p.y+p.height)l={node:c,offsetX:d[0],offsetY:d[1]};else return!1}},this),l},n.type="treemap",n}(ChartView$1);function createStorage(){return{nodeGroup:[],background:[],content:[]}}function renderNode(a,n,r,o,l,u,c,h,d,p){if(!c)return;var f=c.getLayout(),g=a.getData(),y=c.getModel();if(g.setItemGraphicEl(c.dataIndex,null),!f||!f.isInView)return;var v=f.width,_=f.height,x=f.borderWidth,S=f.invisible,T=c.getRawIndex(),M=h&&h.getRawIndex(),b=c.viewChildren,A=f.upperHeight,I=b&&b.length,w=y.getModel("itemStyle"),C=y.getModel(["emphasis","itemStyle"]),E=y.getModel(["blur","itemStyle"]),P=y.getModel(["select","itemStyle"]),D=w.get("borderRadius")||0,L=K("nodeGroup",Group$2);if(!L)return;if(d.add(L),L.x=f.x||0,L.y=f.y||0,L.markRedraw(),inner$d(L).nodeWidth=v,inner$d(L).nodeHeight=_,f.isAboveViewRoot)return L;var R=K("background",Rect$1,p,Z2_BG);R&&H(L,R,I&&f.upperLabelHeight);var O=y.getModel("emphasis"),N=O.get("focus"),V=O.get("blurScope"),B=O.get("disabled"),G=N==="ancestor"?c.getAncestorsIndices():N==="descendant"?c.getDescendantIndices():N;if(I)isHighDownDispatcher(L)&&setAsHighDownDispatcher(L,!1),R&&(setAsHighDownDispatcher(R,!B),g.setItemGraphicEl(c.dataIndex,R),enableHoverFocus(R,G,V));else{var F=K("content",Rect$1,p,Z2_CONTENT);F&&U(L,F),R.disableMorphing=!0,R&&isHighDownDispatcher(R)&&setAsHighDownDispatcher(R,!1),setAsHighDownDispatcher(L,!B),g.setItemGraphicEl(c.dataIndex,L);var z=y.getShallow("cursor");z&&F.attr("cursor",z),enableHoverFocus(L,G,V)}return L;function H(J,j,Q){var W=getECData(j);if(W.dataIndex=c.dataIndex,W.seriesIndex=a.seriesIndex,j.setShape({x:0,y:0,width:v,height:_,r:D}),S)Y(j);else{j.invisible=!1;var q=c.getVisual("style"),re=q.stroke,ee=getItemStyleNormal(w);ee.fill=re;var ie=getStateItemStyle(C);ie.fill=C.get("borderColor");var ne=getStateItemStyle(E);ne.fill=E.get("borderColor");var oe=getStateItemStyle(P);if(oe.fill=P.get("borderColor"),Q){var le=v-2*x;Z(j,re,q.opacity,{x,y:0,width:le,height:A})}else j.removeTextContent();j.setStyle(ee),j.ensureState("emphasis").style=ie,j.ensureState("blur").style=ne,j.ensureState("select").style=oe,setDefaultStateProxy(j)}J.add(j)}function U(J,j){var Q=getECData(j);Q.dataIndex=c.dataIndex,Q.seriesIndex=a.seriesIndex;var W=Math.max(v-2*x,0),q=Math.max(_-2*x,0);if(j.culling=!0,j.setShape({x,y:x,width:W,height:q,r:D}),S)Y(j);else{j.invisible=!1;var re=c.getVisual("style"),ee=re.fill,ie=getItemStyleNormal(w);ie.fill=ee,ie.decal=re.decal;var ne=getStateItemStyle(C),oe=getStateItemStyle(E),le=getStateItemStyle(P);Z(j,ee,re.opacity,null),j.setStyle(ie),j.ensureState("emphasis").style=ne,j.ensureState("blur").style=oe,j.ensureState("select").style=le,setDefaultStateProxy(j)}J.add(j)}function Y(J){!J.invisible&&u.push(J)}function Z(J,j,Q,W){var q=y.getModel(W?PATH_UPPERLABEL_NORMAL:PATH_LABEL_NOAMAL),re=convertOptionIdName(y.get("name"),null),ee=q.getShallow("show");setLabelStyle(J,getLabelStatesModels(y,W?PATH_UPPERLABEL_NORMAL:PATH_LABEL_NOAMAL),{defaultText:ee?re:null,inheritColor:j,defaultOpacity:Q,labelFetcher:a,labelDataIndex:c.dataIndex});var ie=J.getTextContent();if(ie){var ne=ie.style,oe=normalizeCssArray$1(ne.padding||0);W&&(J.setTextConfig({layoutRect:W}),ie.disableLabelLayout=!0),ie.beforeUpdate=function(){var se=Math.max((W?W.width:J.shape.width)-oe[1]-oe[3],0),ue=Math.max((W?W.height:J.shape.height)-oe[0]-oe[2],0);(ne.width!==se||ne.height!==ue)&&ie.setStyle({width:se,height:ue})},ne.truncateMinChar=2,ne.lineOverflow="truncate",X(ne,W,f);var le=ie.getState("emphasis");X(le?le.style:null,W,f)}}function X(J,j,Q){var W=J?J.text:null;if(!j&&Q.isLeafRoot&&W!=null){var q=a.get("drillDownIcon",!0);J.text=q?q+" "+W:W}}function K(J,j,Q,W){var q=M!=null&&r[J][M],re=l[J];return q?(r[J][M]=null,te(re,q)):S||(q=new j,q instanceof Displayable$1&&(q.z2=calculateZ2(Q,W)),ae(re,q)),n[J][T]=q}function te(J,j){var Q=J[T]={};j instanceof Group$2?(Q.oldX=j.x,Q.oldY=j.y):Q.oldShape=extend({},j.shape)}function ae(J,j){var Q=J[T]={},W=c.parentNode,q=j instanceof Group$4;if(W&&(!o||o.direction==="drillDown")){var re=0,ee=0,ie=l.background[W.getRawIndex()];!o&&ie&&ie.oldShape&&(re=ie.oldShape.width,ee=ie.oldShape.height),q?(Q.oldX=0,Q.oldY=ee):Q.oldShape={x:re,y:ee,width:0,height:0}}Q.fadein=!q}}function calculateZ2(a,n){return a*Z2_BASE+n}const TreemapView$1=TreemapView;var each$c=each$f,isObject=isObject$3,CATEGORY_DEFAULT_VISUAL_INDEX=-1,VisualMapping=function(){function a(n){var r=n.mappingMethod,o=n.type,l=this.option=clone$4(n);this.type=o,this.mappingMethod=r,this._normalizeData=normalizers[r];var u=a.visualHandlers[o];this.applyVisual=u.applyVisual,this.getColorMapper=u.getColorMapper,this._normalizedToVisual=u._normalizedToVisual[r],r==="piecewise"?(normalizeVisualRange(l),preprocessForPiecewise(l)):r==="category"?l.categories?preprocessForSpecifiedCategory(l):normalizeVisualRange(l,!0):(assert(r!=="linear"||l.dataExtent),normalizeVisualRange(l))}return a.prototype.mapValueToVisual=function(n){var r=this._normalizeData(n);return this._normalizedToVisual(r,n)},a.prototype.getNormalizer=function(){return bind$1(this._normalizeData,this)},a.listVisualTypes=function(){return keys(a.visualHandlers)},a.isValidType=function(n){return a.visualHandlers.hasOwnProperty(n)},a.eachVisual=function(n,r,o){isObject$3(n)?each$f(n,r,o):r.call(o,n)},a.mapVisual=function(n,r,o){var l,u=isArray$1(n)?[]:isObject$3(n)?{}:(l=!0,null);return a.eachVisual(n,function(c,h){var d=r.call(o,c,h);l?u=d:u[h]=d}),u},a.retrieveVisuals=function(n){var r={},o;return n&&each$c(a.visualHandlers,function(l,u){n.hasOwnProperty(u)&&(r[u]=n[u],o=!0)}),o?r:null},a.prepareVisualTypes=function(n){if(isArray$1(n))n=n.slice();else if(isObject(n)){var r=[];each$c(n,function(o,l){r.push(l)}),n=r}else return[];return n.sort(function(o,l){return l==="color"&&o!=="color"&&o.indexOf("color")===0?1:-1}),n},a.dependsOn=function(n,r){return r==="color"?!!(n&&n.indexOf(r)===0):n===r},a.findPieceIndex=function(n,r,o){for(var l,u=1/0,c=0,h=r.length;c<h;c++){var d=r[c].value;if(d!=null){if(d===n||isString(d)&&d===n+"")return c;o&&y(d,c)}}for(var c=0,h=r.length;c<h;c++){var p=r[c],f=p.interval,g=p.close;if(f){if(f[0]===-1/0){if(littleThan(g[1],n,f[1]))return c}else if(f[1]===1/0){if(littleThan(g[0],f[0],n))return c}else if(littleThan(g[0],f[0],n)&&littleThan(g[1],n,f[1]))return c;o&&y(f[0],c),o&&y(f[1],c)}}if(o)return n===1/0?r.length-1:n===-1/0?0:l;function y(v,_){var x=Math.abs(v-n);x<u&&(u=x,l=_)}},a.visualHandlers={color:{applyVisual:makeApplyVisual("color"),getColorMapper:function(){var n=this.option;return bind$1(n.mappingMethod==="category"?function(r,o){return!o&&(r=this._normalizeData(r)),doMapCategory.call(this,r)}:function(r,o,l){var u=!!l;return!o&&(r=this._normalizeData(r)),l=fastLerp(r,n.parsedVisual,l),u?l:stringify(l,"rgba")},this)},_normalizedToVisual:{linear:function(n){return stringify(fastLerp(n,this.option.parsedVisual),"rgba")},category:doMapCategory,piecewise:function(n,r){var o=getSpecifiedVisual.call(this,r);return o==null&&(o=stringify(fastLerp(n,this.option.parsedVisual),"rgba")),o},fixed:doMapFixed}},colorHue:makePartialColorVisualHandler(function(n,r){return modifyHSL(n,r)}),colorSaturation:makePartialColorVisualHandler(function(n,r){return modifyHSL(n,null,r)}),colorLightness:makePartialColorVisualHandler(function(n,r){return modifyHSL(n,null,null,r)}),colorAlpha:makePartialColorVisualHandler(function(n,r){return modifyAlpha(n,r)}),decal:{applyVisual:makeApplyVisual("decal"),_normalizedToVisual:{linear:null,category:doMapCategory,piecewise:null,fixed:null}},opacity:{applyVisual:makeApplyVisual("opacity"),_normalizedToVisual:createNormalizedToNumericVisual([0,1])},liftZ:{applyVisual:makeApplyVisual("liftZ"),_normalizedToVisual:{linear:doMapFixed,category:doMapFixed,piecewise:doMapFixed,fixed:doMapFixed}},symbol:{applyVisual:function(n,r,o){var l=this.mapValueToVisual(n);o("symbol",l)},_normalizedToVisual:{linear:doMapToArray,category:doMapCategory,piecewise:function(n,r){var o=getSpecifiedVisual.call(this,r);return o==null&&(o=doMapToArray.call(this,n)),o},fixed:doMapFixed}},symbolSize:{applyVisual:makeApplyVisual("symbolSize"),_normalizedToVisual:createNormalizedToNumericVisual([0,1])}},a}();function preprocessForPiecewise(a){var n=a.pieceList;a.hasSpecialVisual=!1,each$f(n,function(r,o){r.originIndex=o,r.visual!=null&&(a.hasSpecialVisual=!0)})}function preprocessForSpecifiedCategory(a){var n=a.categories,r=a.categoryMap={},o=a.visual;if(each$c(n,function(c,h){r[c]=h}),!isArray$1(o)){var l=[];isObject$3(o)?each$c(o,function(c,h){var d=r[h];l[d!=null?d:CATEGORY_DEFAULT_VISUAL_INDEX]=c}):l[CATEGORY_DEFAULT_VISUAL_INDEX]=o,o=setVisualToOption(a,l)}for(var u=n.length-1;u>=0;u--)o[u]==null&&(delete r[n[u]],n.pop())}function normalizeVisualRange(a,n){var r=a.visual,o=[];isObject$3(r)?each$c(r,function(u){o.push(u)}):r!=null&&o.push(r);var l={color:1,symbol:1};!n&&o.length===1&&!l.hasOwnProperty(a.type)&&(o[1]=o[0]),setVisualToOption(a,o)}function makePartialColorVisualHandler(a){return{applyVisual:function(n,r,o){var l=this.mapValueToVisual(n);o("color",a(r("color"),l))},_normalizedToVisual:createNormalizedToNumericVisual([0,1])}}function doMapToArray(a){var n=this.option.visual;return n[Math.round(linearMap$2(a,[0,1],[0,n.length-1],!0))]||{}}function makeApplyVisual(a){return function(n,r,o){o(a,this.mapValueToVisual(n))}}function doMapCategory(a){var n=this.option.visual;return n[this.option.loop&&a!==CATEGORY_DEFAULT_VISUAL_INDEX?a%n.length:a]}function doMapFixed(){return this.option.visual[0]}function createNormalizedToNumericVisual(a){return{linear:function(n){return linearMap$2(n,a,this.option.visual,!0)},category:doMapCategory,piecewise:function(n,r){var o=getSpecifiedVisual.call(this,r);return o==null&&(o=linearMap$2(n,a,this.option.visual,!0)),o},fixed:doMapFixed}}function getSpecifiedVisual(a){var n=this.option,r=n.pieceList;if(n.hasSpecialVisual){var o=VisualMapping.findPieceIndex(a,r),l=r[o];if(l&&l.visual)return l.visual[this.type]}}function setVisualToOption(a,n){return a.visual=n,a.type==="color"&&(a.parsedVisual=map$1(n,function(r){var o=parse(r);return o||warn("'"+r+"' is an illegal color, fallback to '#000000'",!0),o||[0,0,0,1]})),n}var normalizers={linear:function(a){return linearMap$2(a,this.option.dataExtent,[0,1],!0)},piecewise:function(a){var n=this.option.pieceList,r=VisualMapping.findPieceIndex(a,n,!0);if(r!=null)return linearMap$2(r,[0,n.length-1],[0,1],!0)},category:function(a){var n=this.option.categories?this.option.categoryMap[a]:a;return n==null?CATEGORY_DEFAULT_VISUAL_INDEX:n},fixed:noop};function littleThan(a,n,r){return a?n<=r:n<r}const VisualMapping$1=VisualMapping;var ITEM_STYLE_NORMAL="itemStyle",inner$c=makeInner();const treemapVisual={seriesType:"treemap",reset:function(a){var n=a.getData().tree,r=n.root;r.isRemoved()||travelTree(r,{},a.getViewRoot().getAncestors(),a)}};function travelTree(a,n,r,o){var l=a.getModel(),u=a.getLayout(),c=a.hostTree.data;if(!(!u||u.invisible||!u.isInView)){var h=l.getModel(ITEM_STYLE_NORMAL),d=buildVisuals(h,n,o),p=c.ensureUniqueItemVisual(a.dataIndex,"style"),f=h.get("borderColor"),g=h.get("borderColorSaturation"),y;g!=null&&(y=calculateColor(d),f=calculateBorderColor(g,y)),p.stroke=f;var v=a.viewChildren;if(!v||!v.length)y=calculateColor(d),p.fill=y;else{var _=buildVisualMapping(a,l,u,h,d,v);each$f(v,function(x,S){if(x.depth>=r.length||x===r[x.depth]){var T=mapVisual$1(l,d,x,S,_,o);travelTree(x,T,r,o)}})}}}function buildVisuals(a,n,r){var o=extend({},n),l=r.designatedVisualItemStyle;return each$f(["color","colorAlpha","colorSaturation"],function(u){l[u]=n[u];var c=a.get(u);l[u]=null,c!=null&&(o[u]=c)}),o}function calculateColor(a){var n=getValueVisualDefine(a,"color");if(n){var r=getValueVisualDefine(a,"colorAlpha"),o=getValueVisualDefine(a,"colorSaturation");return o&&(n=modifyHSL(n,null,null,o)),r&&(n=modifyAlpha(n,r)),n}}function calculateBorderColor(a,n){return n!=null?modifyHSL(n,null,null,a):null}function getValueVisualDefine(a,n){var r=a[n];if(r!=null&&r!=="none")return r}function buildVisualMapping(a,n,r,o,l,u){if(!(!u||!u.length)){var c=getRangeVisual(n,"color")||l.color!=null&&l.color!=="none"&&(getRangeVisual(n,"colorAlpha")||getRangeVisual(n,"colorSaturation"));if(c){var h=n.get("visualMin"),d=n.get("visualMax"),p=r.dataExtent.slice();h!=null&&h<p[0]&&(p[0]=h),d!=null&&d>p[1]&&(p[1]=d);var f=n.get("colorMappingBy"),g={type:c.name,dataExtent:p,visual:c.range};g.type==="color"&&(f==="index"||f==="id")?(g.mappingMethod="category",g.loop=!0):g.mappingMethod="linear";var y=new VisualMapping$1(g);return inner$c(y).drColorMappingBy=f,y}}}function getRangeVisual(a,n){var r=a.get(n);return isArray$1(r)&&r.length?{name:n,range:r}:null}function mapVisual$1(a,n,r,o,l,u){var c=extend({},n);if(l){var h=l.type,d=h==="color"&&inner$c(l).drColorMappingBy,p=d==="index"?o:d==="id"?u.mapIdToIndex(r.getId()):r.getValue(a.get("visualDimension"));c[h]=l.mapValueToVisual(p)}return c}var mathMax$3=Math.max,mathMin$3=Math.min,retrieveValue=retrieve,each$b=each$f,PATH_BORDER_WIDTH=["itemStyle","borderWidth"],PATH_GAP_WIDTH=["itemStyle","gapWidth"],PATH_UPPER_LABEL_SHOW=["upperLabel","show"],PATH_UPPER_LABEL_HEIGHT=["upperLabel","height"];const treemapLayout={seriesType:"treemap",reset:function(a,n,r,o){var l=r.getWidth(),u=r.getHeight(),c=a.option,h=getLayoutRect(a.getBoxLayoutParams(),{width:r.getWidth(),height:r.getHeight()}),d=c.size||[],p=parsePercent(retrieveValue(h.width,d[0]),l),f=parsePercent(retrieveValue(h.height,d[1]),u),g=o&&o.type,y=["treemapZoomToNode","treemapRootToNode"],v=retrieveTargetInfo(o,y,a),_=g==="treemapRender"||g==="treemapMove"?o.rootRect:null,x=a.getViewRoot(),S=getPathToRoot(x);if(g!=="treemapMove"){var T=g==="treemapZoomToNode"?estimateRootSize(a,v,x,p,f):_?[_.width,_.height]:[p,f],M=c.sort;M&&M!=="asc"&&M!=="desc"&&(M="desc");var b={squareRatio:c.squareRatio,sort:M,leafDepth:c.leafDepth};x.hostTree.clearLayouts();var A={x:0,y:0,width:T[0],height:T[1],area:T[0]*T[1]};x.setLayout(A),squarify(x,b,!1,0),A=x.getLayout(),each$b(S,function(w,C){var E=(S[C+1]||x).getValue();w.setLayout(extend({dataExtent:[E,E],borderWidth:0,upperHeight:0},A))})}var I=a.getData().tree.root;I.setLayout(calculateRootPosition(h,_,v),!0),a.setLayoutInfo(h),prunning(I,new BoundingRect$1(-h.x,-h.y,l,u),S,x,0)}};function squarify(a,n,r,o){var l,u;if(!a.isRemoved()){var c=a.getLayout();l=c.width,u=c.height;var h=a.getModel(),d=h.get(PATH_BORDER_WIDTH),p=h.get(PATH_GAP_WIDTH)/2,f=getUpperLabelHeight(h),g=Math.max(d,f),y=d-p,v=g-p;a.setLayout({borderWidth:d,upperHeight:g,upperLabelHeight:f},!0),l=mathMax$3(l-2*y,0),u=mathMax$3(u-y-v,0);var _=l*u,x=initChildren$1(a,h,_,n,r,o);if(x.length){var S={x:y,y:v,width:l,height:u},T=mathMin$3(l,u),M=1/0,b=[];b.area=0;for(var A=0,I=x.length;A<I;){var w=x[A];b.push(w),b.area+=w.getLayout().area;var C=worst(b,T,n.squareRatio);C<=M?(A++,M=C):(b.area-=b.pop().getLayout().area,position(b,T,S,p,!1),T=mathMin$3(S.width,S.height),b.length=b.area=0,M=1/0)}if(b.length&&position(b,T,S,p,!0),!r){var E=h.get("childrenVisibleMin");E!=null&&_<E&&(r=!0)}for(var A=0,I=x.length;A<I;A++)squarify(x[A],n,r,o+1)}}}function initChildren$1(a,n,r,o,l,u){var c=a.children||[],h=o.sort;h!=="asc"&&h!=="desc"&&(h=null);var d=o.leafDepth!=null&&o.leafDepth<=u;if(l&&!d)return a.viewChildren=[];c=filter(c,function(v){return!v.isRemoved()}),sort$1(c,h);var p=statistic(n,c,h);if(p.sum===0)return a.viewChildren=[];if(p.sum=filterByThreshold(n,r,p.sum,h,c),p.sum===0)return a.viewChildren=[];for(var f=0,g=c.length;f<g;f++){var y=c[f].getValue()/p.sum*r;c[f].setLayout({area:y})}return d&&(c.length&&a.setLayout({isLeafRoot:!0},!0),c.length=0),a.viewChildren=c,a.setLayout({dataExtent:p.dataExtent},!0),c}function filterByThreshold(a,n,r,o,l){if(!o)return r;for(var u=a.get("visibleMin"),c=l.length,h=c,d=c-1;d>=0;d--){var p=l[o==="asc"?c-d-1:d].getValue();p/r*n<u&&(h=d,r-=p)}return o==="asc"?l.splice(0,c-h):l.splice(h,c-h),r}function sort$1(a,n){return n&&a.sort(function(r,o){var l=n==="asc"?r.getValue()-o.getValue():o.getValue()-r.getValue();return l===0?n==="asc"?r.dataIndex-o.dataIndex:o.dataIndex-r.dataIndex:l}),a}function statistic(a,n,r){for(var o=0,l=0,u=n.length;l<u;l++)o+=n[l].getValue();var c=a.get("visualDimension"),h;return!n||!n.length?h=[NaN,NaN]:c==="value"&&r?(h=[n[n.length-1].getValue(),n[0].getValue()],r==="asc"&&h.reverse()):(h=[1/0,-1/0],each$b(n,function(d){var p=d.getValue(c);p<h[0]&&(h[0]=p),p>h[1]&&(h[1]=p)})),{sum:o,dataExtent:h}}function worst(a,n,r){for(var o=0,l=1/0,u=0,c=void 0,h=a.length;u<h;u++)c=a[u].getLayout().area,c&&(c<l&&(l=c),c>o&&(o=c));var d=a.area*a.area,p=n*n*r;return d?mathMax$3(p*o/d,d/(p*l)):1/0}function position(a,n,r,o,l){var u=n===r.width?0:1,c=1-u,h=["x","y"],d=["width","height"],p=r[h[u]],f=n?a.area/n:0;(l||f>r[d[c]])&&(f=r[d[c]]);for(var g=0,y=a.length;g<y;g++){var v=a[g],_={},x=f?v.getLayout().area/f:0,S=_[d[c]]=mathMax$3(f-2*o,0),T=r[h[u]]+r[d[u]]-p,M=g===y-1||T<x?T:x,b=_[d[u]]=mathMax$3(M-2*o,0);_[h[c]]=r[h[c]]+mathMin$3(o,S/2),_[h[u]]=p+mathMin$3(o,b/2),p+=M,v.setLayout(_,!0)}r[h[c]]+=f,r[d[c]]-=f}function estimateRootSize(a,n,r,o,l){var u=(n||{}).node,c=[o,l];if(!u||u===r)return c;for(var h,d=o*l,p=d*a.option.zoomToNodeRatio;h=u.parentNode;){for(var f=0,g=h.children,y=0,v=g.length;y<v;y++)f+=g[y].getValue();var _=u.getValue();if(_===0)return c;p*=f/_;var x=h.getModel(),S=x.get(PATH_BORDER_WIDTH),T=Math.max(S,getUpperLabelHeight(x));p+=4*S*S+(3*S+T)*Math.pow(p,.5),p>MAX_SAFE_INTEGER&&(p=MAX_SAFE_INTEGER),u=h}p<d&&(p=d);var M=Math.pow(p/d,.5);return[o*M,l*M]}function calculateRootPosition(a,n,r){if(n)return{x:n.x,y:n.y};var o={x:0,y:0};if(!r)return o;var l=r.node,u=l.getLayout();if(!u)return o;for(var c=[u.width/2,u.height/2],h=l;h;){var d=h.getLayout();c[0]+=d.x,c[1]+=d.y,h=h.parentNode}return{x:a.width/2-c[0],y:a.height/2-c[1]}}function prunning(a,n,r,o,l){var u=a.getLayout(),c=r[l],h=c&&c===a;if(!(c&&!h||l===r.length&&a!==o)){a.setLayout({isInView:!0,invisible:!h&&!n.intersect(u),isAboveViewRoot:h},!0);var d=new BoundingRect$1(n.x-u.x,n.y-u.y,n.width,n.height);each$b(a.viewChildren||[],function(p){prunning(p,d,r,o,l+1)})}}function getUpperLabelHeight(a){return a.get(PATH_UPPER_LABEL_SHOW)?a.get(PATH_UPPER_LABEL_HEIGHT):0}function install$G(a){a.registerSeriesModel(TreemapSeriesModel$1),a.registerChartView(TreemapView$1),a.registerVisual(treemapVisual),a.registerLayout(treemapLayout),installTreemapAction(a)}function categoryFilter(a){var n=a.findComponents({mainType:"legend"});!n||!n.length||a.eachSeriesByType("graph",function(r){var o=r.getCategoriesData(),l=r.getGraph(),u=l.data,c=o.mapArray(o.getName);u.filterSelf(function(h){var d=u.getItemModel(h),p=d.getShallow("category");if(p!=null){isNumber(p)&&(p=c[p]);for(var f=0;f<n.length;f++)if(!n[f].isSelected(p))return!1}return!0})})}function categoryVisual(a){var n={};a.eachSeriesByType("graph",function(r){var o=r.getCategoriesData(),l=r.getData(),u={};o.each(function(c){var h=o.getName(c);u["ec-"+h]=c;var d=o.getItemModel(c),p=d.getModel("itemStyle").getItemStyle();p.fill||(p.fill=r.getColorFromPalette(h,n)),o.setItemVisual(c,"style",p);for(var f=["symbol","symbolSize","symbolKeepAspect"],g=0;g<f.length;g++){var y=d.getShallow(f[g],!0);y!=null&&o.setItemVisual(c,f[g],y)}}),o.count()&&l.each(function(c){var h=l.getItemModel(c),d=h.getShallow("category");if(d!=null){isString(d)&&(d=u["ec-"+d]);var p=o.getItemVisual(d,"style"),f=l.ensureUniqueItemVisual(c,"style");extend(f,p);for(var g=["symbol","symbolSize","symbolKeepAspect"],y=0;y<g.length;y++)l.setItemVisual(c,g[y],o.getItemVisual(d,g[y]))}})})}function normalize$1(a){return a instanceof Array||(a=[a,a]),a}function graphEdgeVisual(a){a.eachSeriesByType("graph",function(n){var r=n.getGraph(),o=n.getEdgeData(),l=normalize$1(n.get("edgeSymbol")),u=normalize$1(n.get("edgeSymbolSize"));o.setVisual("fromSymbol",l&&l[0]),o.setVisual("toSymbol",l&&l[1]),o.setVisual("fromSymbolSize",u&&u[0]),o.setVisual("toSymbolSize",u&&u[1]),o.setVisual("style",n.getModel("lineStyle").getLineStyle()),o.each(function(c){var h=o.getItemModel(c),d=r.getEdgeByIndex(c),p=normalize$1(h.getShallow("symbol",!0)),f=normalize$1(h.getShallow("symbolSize",!0)),g=h.getModel("lineStyle").getLineStyle(),y=o.ensureUniqueItemVisual(c,"style");switch(extend(y,g),y.stroke){case"source":{var v=d.node1.getVisual("style");y.stroke=v&&v.fill;break}case"target":{var v=d.node2.getVisual("style");y.stroke=v&&v.fill;break}}p[0]&&d.setVisual("fromSymbol",p[0]),p[1]&&d.setVisual("toSymbol",p[1]),f[0]&&d.setVisual("fromSymbolSize",f[0]),f[1]&&d.setVisual("toSymbolSize",f[1])})})}var KEY_DELIMITER="-->",getAutoCurvenessParams=function(a){return a.get("autoCurveness")||null},createCurveness=function(a,n){var r=getAutoCurvenessParams(a),o=20,l=[];if(isNumber(r))o=r;else if(isArray$1(r)){a.__curvenessList=r;return}n>o&&(o=n);var u=o%2?o+2:o+3;l=[];for(var c=0;c<u;c++)l.push((c%2?c+1:c)/10*(c%2?-1:1));a.__curvenessList=l},getKeyOfEdges=function(a,n,r){var o=[a.id,a.dataIndex].join("."),l=[n.id,n.dataIndex].join(".");return[r.uid,o,l].join(KEY_DELIMITER)},getOppositeKey=function(a){var n=a.split(KEY_DELIMITER);return[n[0],n[2],n[1]].join(KEY_DELIMITER)},getEdgeFromMap=function(a,n){var r=getKeyOfEdges(a.node1,a.node2,n);return n.__edgeMap[r]},getTotalLengthBetweenNodes=function(a,n){var r=getEdgeMapLengthWithKey(getKeyOfEdges(a.node1,a.node2,n),n),o=getEdgeMapLengthWithKey(getKeyOfEdges(a.node2,a.node1,n),n);return r+o},getEdgeMapLengthWithKey=function(a,n){var r=n.__edgeMap;return r[a]?r[a].length:0};function initCurvenessList(a){!getAutoCurvenessParams(a)||(a.__curvenessList=[],a.__edgeMap={},createCurveness(a))}function createEdgeMapForCurveness(a,n,r,o){if(getAutoCurvenessParams(r)){var l=getKeyOfEdges(a,n,r),u=r.__edgeMap,c=u[getOppositeKey(l)];u[l]&&!c?u[l].isForward=!0:c&&u[l]&&(c.isForward=!0,u[l].isForward=!1),u[l]=u[l]||[],u[l].push(o)}}function getCurvenessForEdge(a,n,r,o){var l=getAutoCurvenessParams(n),u=isArray$1(l);if(!l)return null;var c=getEdgeFromMap(a,n);if(!c)return null;for(var h=-1,d=0;d<c.length;d++)if(c[d]===r){h=d;break}var p=getTotalLengthBetweenNodes(a,n);createCurveness(n,p),a.lineStyle=a.lineStyle||{};var f=getKeyOfEdges(a.node1,a.node2,n),g=n.__curvenessList,y=u||p%2?0:1;if(c.isForward)return g[y+h];var v=getOppositeKey(f),_=getEdgeMapLengthWithKey(v,n),x=g[h+_+y];return o?u?l&&l[0]===0?(_+y)%2?x:-x:((_%2?0:1)+y)%2?x:-x:(_+y)%2?x:-x:g[h+_+y]}function simpleLayout(a){var n=a.coordinateSystem;if(!(n&&n.type!=="view")){var r=a.getGraph();r.eachNode(function(o){var l=o.getModel();o.setLayout([+l.get("x"),+l.get("y")])}),simpleLayoutEdge(r,a)}}function simpleLayoutEdge(a,n){a.eachEdge(function(r,o){var l=retrieve3(r.getModel().get(["lineStyle","curveness"]),-getCurvenessForEdge(r,n,o,!0),0),u=clone$3(r.node1.getLayout()),c=clone$3(r.node2.getLayout()),h=[u,c];+l&&h.push([(u[0]+c[0])/2-(u[1]-c[1])*l,(u[1]+c[1])/2-(c[0]-u[0])*l]),r.setLayout(h)})}function graphSimpleLayout(a,n){a.eachSeriesByType("graph",function(r){var o=r.get("layout"),l=r.coordinateSystem;if(l&&l.type!=="view"){var u=r.getData(),c=[];each$f(l.dimensions,function(y){c=c.concat(u.mapDimensionsAll(y))});for(var h=0;h<u.count();h++){for(var d=[],p=!1,f=0;f<c.length;f++){var g=u.get(c[f],h);isNaN(g)||(p=!0),d.push(g)}p?u.setItemLayout(h,l.dataToPoint(d)):u.setItemLayout(h,[NaN,NaN])}simpleLayoutEdge(u.graph,r)}else(!o||o==="none")&&simpleLayout(r)})}function getNodeGlobalScale(a){var n=a.coordinateSystem;if(n.type!=="view")return 1;var r=a.option.nodeScaleRatio,o=n.scaleX,l=n.getZoom(),u=(l-1)*r+1;return u/o}function getSymbolSize(a){var n=a.getVisual("symbolSize");return n instanceof Array&&(n=(n[0]+n[1])/2),+n}var PI$2=Math.PI,_symbolRadiansHalf=[];function circularLayout(a,n,r,o){var l=a.coordinateSystem;if(!(l&&l.type!=="view")){var u=l.getBoundingRect(),c=a.getData(),h=c.graph,d=u.width/2+u.x,p=u.height/2+u.y,f=Math.min(u.width,u.height)/2,g=c.count();if(c.setLayout({cx:d,cy:p}),!!g){if(r){var y=l.pointToData(o),v=y[0],_=y[1],x=[v-d,_-p];normalize$3(x,x),scale$2(x,x,f),r.setLayout([d+x[0],p+x[1]],!0);var S=a.get(["circular","rotateLabel"]);rotateNodeLabel(r,S,d,p)}_layoutNodesBasedOn[n](a,h,c,f,d,p,g),h.eachEdge(function(T,M){var b=retrieve3(T.getModel().get(["lineStyle","curveness"]),getCurvenessForEdge(T,a,M),0),A=clone$3(T.node1.getLayout()),I=clone$3(T.node2.getLayout()),w,C=(A[0]+I[0])/2,E=(A[1]+I[1])/2;+b&&(b*=3,w=[d*b+C*(1-b),p*b+E*(1-b)]),T.setLayout([A,I,w])})}}}var _layoutNodesBasedOn={value:function(a,n,r,o,l,u,c){var h=0,d=r.getSum("value"),p=Math.PI*2/(d||c);n.eachNode(function(f){var g=f.getValue("value"),y=p*(d?g:1)/2;h+=y,f.setLayout([o*Math.cos(h)+l,o*Math.sin(h)+u]),h+=y})},symbolSize:function(a,n,r,o,l,u,c){var h=0;_symbolRadiansHalf.length=c;var d=getNodeGlobalScale(a);n.eachNode(function(g){var y=getSymbolSize(g);isNaN(y)&&(y=2),y<0&&(y=0),y*=d;var v=Math.asin(y/2/o);isNaN(v)&&(v=PI$2/2),_symbolRadiansHalf[g.dataIndex]=v,h+=v*2});var p=(2*PI$2-h)/c/2,f=0;n.eachNode(function(g){var y=p+_symbolRadiansHalf[g.dataIndex];f+=y,(!g.getLayout()||!g.getLayout().fixed)&&g.setLayout([o*Math.cos(f)+l,o*Math.sin(f)+u]),f+=y})}};function rotateNodeLabel(a,n,r,o){var l=a.getGraphicEl();if(l){var u=a.getModel(),c=u.get(["label","rotate"])||0,h=l.getSymbolPath();if(n){var d=a.getLayout(),p=Math.atan2(d[1]-o,d[0]-r);p<0&&(p=Math.PI*2+p);var f=d[0]<r;f&&(p=p-Math.PI);var g=f?"left":"right";h.setTextConfig({rotation:-p,position:g,origin:"center"});var y=h.ensureState("emphasis");extend(y.textConfig||(y.textConfig={}),{position:g})}else h.setTextConfig({rotation:c*=Math.PI/180})}}function graphCircularLayout(a){a.eachSeriesByType("graph",function(n){n.get("layout")==="circular"&&circularLayout(n,"symbolSize")})}var scaleAndAdd=scaleAndAdd$1;function forceLayout(a,n,r){for(var o=a,l=n,u=r.rect,c=u.width,h=u.height,d=[u.x+c/2,u.y+h/2],p=r.gravity==null?.1:r.gravity,f=0;f<o.length;f++){var g=o[f];g.p||(g.p=create$2(c*(Math.random()-.5)+d[0],h*(Math.random()-.5)+d[1])),g.pp=clone$3(g.p),g.edges=null}var y=r.friction==null?.6:r.friction,v=y,_,x;return{warmUp:function(){v=y*.8},setFixed:function(S){o[S].fixed=!0},setUnfixed:function(S){o[S].fixed=!1},beforeStep:function(S){_=S},afterStep:function(S){x=S},step:function(S){_&&_(o,l);for(var T=[],M=o.length,b=0;b<l.length;b++){var A=l[b];if(!A.ignoreForceLayout){var I=A.n1,w=A.n2;sub(T,w.p,I.p);var C=len(T)-A.d,E=w.w/(I.w+w.w);isNaN(E)&&(E=0),normalize$3(T,T),!I.fixed&&scaleAndAdd(I.p,I.p,T,E*C*v),!w.fixed&&scaleAndAdd(w.p,w.p,T,-(1-E)*C*v)}}for(var b=0;b<M;b++){var P=o[b];P.fixed||(sub(T,d,P.p),scaleAndAdd(P.p,P.p,T,p*v))}for(var b=0;b<M;b++)for(var I=o[b],D=b+1;D<M;D++){var w=o[D];sub(T,w.p,I.p);var C=len(T);C===0&&(set$1(T,Math.random()-.5,Math.random()-.5),C=1);var L=(I.rep+w.rep)/C/C;!I.fixed&&scaleAndAdd(I.pp,I.pp,T,L),!w.fixed&&scaleAndAdd(w.pp,w.pp,T,-L)}for(var R=[],b=0;b<M;b++){var P=o[b];P.fixed||(sub(R,P.p,P.pp),scaleAndAdd(P.p,P.p,R,v),copy$1(P.pp,P.p))}v=v*.992;var O=v<.01;x&&x(o,l,O),S&&S(O)}}}function graphForceLayout(a){a.eachSeriesByType("graph",function(n){var r=n.coordinateSystem;if(!(r&&r.type!=="view"))if(n.get("layout")==="force"){var o=n.preservedPoints||{},l=n.getGraph(),u=l.data,c=l.edgeData,h=n.getModel("force"),d=h.get("initLayout");n.preservedPoints?u.each(function(b){var A=u.getId(b);u.setItemLayout(b,o[A]||[NaN,NaN])}):!d||d==="none"?simpleLayout(n):d==="circular"&&circularLayout(n,"value");var p=u.getDataExtent("value"),f=c.getDataExtent("value"),g=h.get("repulsion"),y=h.get("edgeLength"),v=isArray$1(g)?g:[g,g],_=isArray$1(y)?y:[y,y];_=[_[1],_[0]];var x=u.mapArray("value",function(b,A){var I=u.getItemLayout(A),w=linearMap$2(b,p,v);return isNaN(w)&&(w=(v[0]+v[1])/2),{w,rep:w,fixed:u.getItemModel(A).get("fixed"),p:!I||isNaN(I[0])||isNaN(I[1])?null:I}}),S=c.mapArray("value",function(b,A){var I=l.getEdgeByIndex(A),w=linearMap$2(b,f,_);isNaN(w)&&(w=(_[0]+_[1])/2);var C=I.getModel(),E=retrieve3(I.getModel().get(["lineStyle","curveness"]),-getCurvenessForEdge(I,n,A,!0),0);return{n1:x[I.node1.dataIndex],n2:x[I.node2.dataIndex],d:w,curveness:E,ignoreForceLayout:C.get("ignoreForceLayout")}}),T=r.getBoundingRect(),M=forceLayout(x,S,{rect:T,gravity:h.get("gravity"),friction:h.get("friction")});M.beforeStep(function(b,A){for(var I=0,w=b.length;I<w;I++)b[I].fixed&&copy$1(b[I].p,l.getNodeByIndex(I).getLayout())}),M.afterStep(function(b,A,I){for(var w=0,C=b.length;w<C;w++)b[w].fixed||l.getNodeByIndex(w).setLayout(b[w].p),o[u.getId(w)]=b[w].p;for(var w=0,C=A.length;w<C;w++){var E=A[w],P=l.getEdgeByIndex(w),D=E.n1.p,L=E.n2.p,R=P.getLayout();R=R?R.slice():[],R[0]=R[0]||[],R[1]=R[1]||[],copy$1(R[0],D),copy$1(R[1],L),+E.curveness&&(R[2]=[(D[0]+L[0])/2-(D[1]-L[1])*E.curveness,(D[1]+L[1])/2-(L[0]-D[0])*E.curveness]),P.setLayout(R)}}),n.forceLayout=M,n.preservedPoints=o,M.step()}else n.forceLayout=null})}function getViewRect$3(a,n,r){var o=extend(a.getBoxLayoutParams(),{aspect:r});return getLayoutRect(o,{width:n.getWidth(),height:n.getHeight()})}function createViewCoordSys(a,n){var r=[];return a.eachSeriesByType("graph",function(o){var l=o.get("coordinateSystem");if(!l||l==="view"){var u=o.getData(),c=u.mapArray(function(S){var T=u.getItemModel(S);return[+T.get("x"),+T.get("y")]}),h=[],d=[];fromPoints(c,h,d),d[0]-h[0]===0&&(d[0]+=1,h[0]-=1),d[1]-h[1]===0&&(d[1]+=1,h[1]-=1);var p=(d[0]-h[0])/(d[1]-h[1]),f=getViewRect$3(o,n,p);isNaN(p)&&(h=[f.x,f.y],d=[f.x+f.width,f.y+f.height]);var g=d[0]-h[0],y=d[1]-h[1],v=f.width,_=f.height,x=o.coordinateSystem=new View$1;x.zoomLimit=o.get("scaleLimit"),x.setBoundingRect(h[0],h[1],g,y),x.setViewRect(f.x,f.y,v,_),x.setCenter(o.get("center"),n),x.setZoom(o.get("zoom")),r.push(x)}}),r}var straightLineProto=Line$3.prototype,bezierCurveProto=BezierCurve$1.prototype,StraightLineShape=function(){function a(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return a}();(function(a){__extends(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n})(StraightLineShape);function isStraightLine(a){return isNaN(+a.cpx1)||isNaN(+a.cpy1)}var ECLinePath=function(a){__extends(n,a);function n(r){var o=a.call(this,r)||this;return o.type="ec-line",o}return n.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},n.prototype.getDefaultShape=function(){return new StraightLineShape},n.prototype.buildPath=function(r,o){isStraightLine(o)?straightLineProto.buildPath.call(this,r,o):bezierCurveProto.buildPath.call(this,r,o)},n.prototype.pointAt=function(r){return isStraightLine(this.shape)?straightLineProto.pointAt.call(this,r):bezierCurveProto.pointAt.call(this,r)},n.prototype.tangentAt=function(r){var o=this.shape,l=isStraightLine(o)?[o.x2-o.x1,o.y2-o.y1]:bezierCurveProto.tangentAt.call(this,r);return normalize$3(l,l)},n}(Path$1);const ECLinePath$1=ECLinePath;var SYMBOL_CATEGORIES=["fromSymbol","toSymbol"];function makeSymbolTypeKey(a){return"_"+a+"Type"}function makeSymbolTypeValue(a,n,r){var o=n.getItemVisual(r,a);if(!o||o==="none")return o;var l=n.getItemVisual(r,a+"Size"),u=n.getItemVisual(r,a+"Rotate"),c=n.getItemVisual(r,a+"Offset"),h=n.getItemVisual(r,a+"KeepAspect"),d=normalizeSymbolSize(l),p=normalizeSymbolOffset(c||0,d);return o+d+p+(u||"")+(h||"")}function createSymbol(a,n,r){var o=n.getItemVisual(r,a);if(!(!o||o==="none")){var l=n.getItemVisual(r,a+"Size"),u=n.getItemVisual(r,a+"Rotate"),c=n.getItemVisual(r,a+"Offset"),h=n.getItemVisual(r,a+"KeepAspect"),d=normalizeSymbolSize(l),p=normalizeSymbolOffset(c||0,d),f=createSymbol$1(o,-d[0]/2+p[0],-d[1]/2+p[1],d[0],d[1],null,h);return f.__specifiedRotation=u==null||isNaN(u)?void 0:+u*Math.PI/180||0,f.name=a,f}}function createLine(a){var n=new ECLinePath$1({name:"line",subPixelOptimize:!0});return setLinePoints(n.shape,a),n}function setLinePoints(a,n){a.x1=n[0][0],a.y1=n[0][1],a.x2=n[1][0],a.y2=n[1][1],a.percent=1;var r=n[2];r?(a.cpx1=r[0],a.cpy1=r[1]):(a.cpx1=NaN,a.cpy1=NaN)}var Line=function(a){__extends(n,a);function n(r,o,l){var u=a.call(this)||this;return u._createLine(r,o,l),u}return n.prototype._createLine=function(r,o,l){var u=r.hostModel,c=r.getItemLayout(o),h=createLine(c);h.shape.percent=0,initProps(h,{shape:{percent:1}},u,o),this.add(h),each$f(SYMBOL_CATEGORIES,function(d){var p=createSymbol(d,r,o);this.add(p),this[makeSymbolTypeKey(d)]=makeSymbolTypeValue(d,r,o)},this),this._updateCommonStl(r,o,l)},n.prototype.updateData=function(r,o,l){var u=r.hostModel,c=this.childOfName("line"),h=r.getItemLayout(o),d={shape:{}};setLinePoints(d.shape,h),updateProps$1(c,d,u,o),each$f(SYMBOL_CATEGORIES,function(p){var f=makeSymbolTypeValue(p,r,o),g=makeSymbolTypeKey(p);if(this[g]!==f){this.remove(this.childOfName(p));var y=createSymbol(p,r,o);this.add(y)}this[g]=f},this),this._updateCommonStl(r,o,l)},n.prototype.getLinePath=function(){return this.childAt(0)},n.prototype._updateCommonStl=function(r,o,l){var u=r.hostModel,c=this.childOfName("line"),h=l&&l.emphasisLineStyle,d=l&&l.blurLineStyle,p=l&&l.selectLineStyle,f=l&&l.labelStatesModels,g=l&&l.emphasisDisabled,y=l&&l.focus,v=l&&l.blurScope;if(!l||r.hasItemOption){var _=r.getItemModel(o),x=_.getModel("emphasis");h=x.getModel("lineStyle").getLineStyle(),d=_.getModel(["blur","lineStyle"]).getLineStyle(),p=_.getModel(["select","lineStyle"]).getLineStyle(),g=x.get("disabled"),y=x.get("focus"),v=x.get("blurScope"),f=getLabelStatesModels(_)}var S=r.getItemVisual(o,"style"),T=S.stroke;c.useStyle(S),c.style.fill=null,c.style.strokeNoScale=!0,c.ensureState("emphasis").style=h,c.ensureState("blur").style=d,c.ensureState("select").style=p,each$f(SYMBOL_CATEGORIES,function(w){var C=this.childOfName(w);if(C){C.setColor(T),C.style.opacity=S.opacity;for(var E=0;E<SPECIAL_STATES.length;E++){var P=SPECIAL_STATES[E],D=c.getState(P);if(D){var L=D.style||{},R=C.ensureState(P),O=R.style||(R.style={});L.stroke!=null&&(O[C.__isEmptyBrush?"stroke":"fill"]=L.stroke),L.opacity!=null&&(O.opacity=L.opacity)}}C.markRedraw()}},this);var M=u.getRawValue(o);setLabelStyle(this,f,{labelDataIndex:o,labelFetcher:{getFormattedLabel:function(w,C){return u.getFormattedLabel(w,C,r.dataType)}},inheritColor:T||"#000",defaultOpacity:S.opacity,defaultText:(M==null?r.getName(o):isFinite(M)?round$3(M):M)+""});var b=this.getTextContent();if(b){var A=f.normal;b.__align=b.style.align,b.__verticalAlign=b.style.verticalAlign,b.__position=A.get("position")||"middle";var I=A.get("distance");isArray$1(I)||(I=[I,I]),b.__labelDistance=I}this.setTextConfig({position:null,local:!0,inside:!1}),toggleHoverEmphasis(this,y,v,g)},n.prototype.highlight=function(){enterEmphasis(this)},n.prototype.downplay=function(){leaveEmphasis(this)},n.prototype.updateLayout=function(r,o){this.setLinePoints(r.getItemLayout(o))},n.prototype.setLinePoints=function(r){var o=this.childOfName("line");setLinePoints(o.shape,r),o.dirty()},n.prototype.beforeUpdate=function(){var r=this,o=r.childOfName("fromSymbol"),l=r.childOfName("toSymbol"),u=r.getTextContent();if(!o&&!l&&(!u||u.ignore))return;for(var c=1,h=this.parent;h;)h.scaleX&&(c/=h.scaleX),h=h.parent;var d=r.childOfName("line");if(!this.__dirty&&!d.__dirty)return;var p=d.shape.percent,f=d.pointAt(0),g=d.pointAt(p),y=sub([],g,f);normalize$3(y,y);function v(D,L){var R=D.__specifiedRotation;if(R==null){var O=d.tangentAt(L);D.attr("rotation",(L===1?-1:1)*Math.PI/2-Math.atan2(O[1],O[0]))}else D.attr("rotation",R)}if(o&&(o.setPosition(f),v(o,0),o.scaleX=o.scaleY=c*p,o.markRedraw()),l&&(l.setPosition(g),v(l,1),l.scaleX=l.scaleY=c*p,l.markRedraw()),u&&!u.ignore){u.x=u.y=0,u.originX=u.originY=0;var _=void 0,x=void 0,S=u.__labelDistance,T=S[0]*c,M=S[1]*c,b=p/2,A=d.tangentAt(b),I=[A[1],-A[0]],w=d.pointAt(b);I[1]>0&&(I[0]=-I[0],I[1]=-I[1]);var C=A[0]<0?-1:1;if(u.__position!=="start"&&u.__position!=="end"){var E=-Math.atan2(A[1],A[0]);g[0]<f[0]&&(E=Math.PI+E),u.rotation=E}var P=void 0;switch(u.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":P=-M,x="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":P=M,x="top";break;default:P=0,x="middle"}switch(u.__position){case"end":u.x=y[0]*T+g[0],u.y=y[1]*M+g[1],_=y[0]>.8?"left":y[0]<-.8?"right":"center",x=y[1]>.8?"top":y[1]<-.8?"bottom":"middle";break;case"start":u.x=-y[0]*T+f[0],u.y=-y[1]*M+f[1],_=y[0]>.8?"right":y[0]<-.8?"left":"center",x=y[1]>.8?"bottom":y[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":u.x=T*C+f[0],u.y=f[1]+P,_=A[0]<0?"right":"left",u.originX=-T*C,u.originY=-P;break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":u.x=w[0],u.y=w[1]+P,_="center",u.originY=-P;break;case"insideEndTop":case"insideEnd":case"insideEndBottom":u.x=-T*C+g[0],u.y=g[1]+P,_=A[0]>=0?"right":"left",u.originX=T*C,u.originY=-P;break}u.scaleX=u.scaleY=c,u.setStyle({verticalAlign:u.__verticalAlign||x,align:u.__align||_})}},n}(Group$4);const Line$1=Line;var LineDraw=function(){function a(n){this.group=new Group$4,this._LineCtor=n||Line$1}return a.prototype.updateData=function(n){var r=this;this._progressiveEls=null;var o=this,l=o.group,u=o._lineData;o._lineData=n,u||l.removeAll();var c=makeSeriesScope$1(n);n.diff(u).add(function(h){r._doAdd(n,h,c)}).update(function(h,d){r._doUpdate(u,n,d,h,c)}).remove(function(h){l.remove(u.getItemGraphicEl(h))}).execute()},a.prototype.updateLayout=function(){var n=this._lineData;!n||n.eachItemGraphicEl(function(r,o){r.updateLayout(n,o)},this)},a.prototype.incrementalPrepareUpdate=function(n){this._seriesScope=makeSeriesScope$1(n),this._lineData=null,this.group.removeAll()},a.prototype.incrementalUpdate=function(n,r){this._progressiveEls=[];function o(h){!h.isGroup&&!isEffectObject(h)&&(h.incremental=!0,h.ensureState("emphasis").hoverLayer=!0)}for(var l=n.start;l<n.end;l++){var u=r.getItemLayout(l);if(lineNeedsDraw(u)){var c=new this._LineCtor(r,l,this._seriesScope);c.traverse(o),this.group.add(c),r.setItemGraphicEl(l,c),this._progressiveEls.push(c)}}},a.prototype.remove=function(){this.group.removeAll()},a.prototype.eachRendered=function(n){traverseElements(this._progressiveEls||this.group,n)},a.prototype._doAdd=function(n,r,o){var l=n.getItemLayout(r);if(lineNeedsDraw(l)){var u=new this._LineCtor(n,r,o);n.setItemGraphicEl(r,u),this.group.add(u)}},a.prototype._doUpdate=function(n,r,o,l,u){var c=n.getItemGraphicEl(o);if(!lineNeedsDraw(r.getItemLayout(l))){this.group.remove(c);return}c?c.updateData(r,l,u):c=new this._LineCtor(r,l,u),r.setItemGraphicEl(l,c),this.group.add(c)},a}();function isEffectObject(a){return a.animators&&a.animators.length>0}function makeSeriesScope$1(a){var n=a.hostModel,r=n.getModel("emphasis");return{lineStyle:n.getModel("lineStyle").getLineStyle(),emphasisLineStyle:r.getModel(["lineStyle"]).getLineStyle(),blurLineStyle:n.getModel(["blur","lineStyle"]).getLineStyle(),selectLineStyle:n.getModel(["select","lineStyle"]).getLineStyle(),emphasisDisabled:r.get("disabled"),blurScope:r.get("blurScope"),focus:r.get("focus"),labelStatesModels:getLabelStatesModels(n)}}function isPointNaN(a){return isNaN(a[0])||isNaN(a[1])}function lineNeedsDraw(a){return a&&!isPointNaN(a[0])&&!isPointNaN(a[1])}const LineDraw$1=LineDraw;var v1=[],v2=[],v3=[],quadraticAt=quadraticAt$1,v2DistSquare=distSquare,mathAbs=Math.abs;function intersectCurveCircle(a,n,r){for(var o=a[0],l=a[1],u=a[2],c=1/0,h,d=r*r,p=.1,f=.1;f<=.9;f+=.1){v1[0]=quadraticAt(o[0],l[0],u[0],f),v1[1]=quadraticAt(o[1],l[1],u[1],f);var g=mathAbs(v2DistSquare(v1,n)-d);g<c&&(c=g,h=f)}for(var y=0;y<32;y++){var v=h+p;v2[0]=quadraticAt(o[0],l[0],u[0],h),v2[1]=quadraticAt(o[1],l[1],u[1],h),v3[0]=quadraticAt(o[0],l[0],u[0],v),v3[1]=quadraticAt(o[1],l[1],u[1],v);var g=v2DistSquare(v2,n)-d;if(mathAbs(g)<.01)break;var _=v2DistSquare(v3,n)-d;p/=2,g<0?_>=0?h=h+p:h=h-p:_>=0?h=h-p:h=h+p}return h}function adjustEdge(a,n){var r=[],o=quadraticSubdivide,l=[[],[],[]],u=[[],[]],c=[];n/=2,a.eachEdge(function(h,d){var p=h.getLayout(),f=h.getVisual("fromSymbol"),g=h.getVisual("toSymbol");p.__original||(p.__original=[clone$3(p[0]),clone$3(p[1])],p[2]&&p.__original.push(clone$3(p[2])));var y=p.__original;if(p[2]!=null){if(copy$1(l[0],y[0]),copy$1(l[1],y[2]),copy$1(l[2],y[1]),f&&f!=="none"){var v=getSymbolSize(h.node1),_=intersectCurveCircle(l,y[0],v*n);o(l[0][0],l[1][0],l[2][0],_,r),l[0][0]=r[3],l[1][0]=r[4],o(l[0][1],l[1][1],l[2][1],_,r),l[0][1]=r[3],l[1][1]=r[4]}if(g&&g!=="none"){var v=getSymbolSize(h.node2),_=intersectCurveCircle(l,y[1],v*n);o(l[0][0],l[1][0],l[2][0],_,r),l[1][0]=r[1],l[2][0]=r[2],o(l[0][1],l[1][1],l[2][1],_,r),l[1][1]=r[1],l[2][1]=r[2]}copy$1(p[0],l[0]),copy$1(p[1],l[2]),copy$1(p[2],l[1])}else{if(copy$1(u[0],y[0]),copy$1(u[1],y[1]),sub(c,u[1],u[0]),normalize$3(c,c),f&&f!=="none"){var v=getSymbolSize(h.node1);scaleAndAdd$1(u[0],u[0],c,v*n)}if(g&&g!=="none"){var v=getSymbolSize(h.node2);scaleAndAdd$1(u[1],u[1],c,-v*n)}copy$1(p[0],u[0]),copy$1(p[1],u[1])}})}function isViewCoordSys(a){return a.type==="view"}var GraphView=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.prototype.init=function(r,o){var l=new SymbolDraw$1,u=new LineDraw$1,c=this.group;this._controller=new RoamController$1(o.getZr()),this._controllerHost={target:c},c.add(l.group),c.add(u.group),this._symbolDraw=l,this._lineDraw=u,this._firstRender=!0},n.prototype.render=function(r,o,l){var u=this,c=r.coordinateSystem;this._model=r;var h=this._symbolDraw,d=this._lineDraw,p=this.group;if(isViewCoordSys(c)){var f={x:c.x,y:c.y,scaleX:c.scaleX,scaleY:c.scaleY};this._firstRender?p.attr(f):updateProps$1(p,f,r)}adjustEdge(r.getGraph(),getNodeGlobalScale(r));var g=r.getData();h.updateData(g);var y=r.getEdgeData();d.updateData(y),this._updateNodeAndLinkScale(),this._updateController(r,o,l),clearTimeout(this._layoutTimeout);var v=r.forceLayout,_=r.get(["force","layoutAnimation"]);v&&this._startForceLayoutIteration(v,_);var x=r.get("layout");g.graph.eachNode(function(b){var A=b.dataIndex,I=b.getGraphicEl(),w=b.getModel();if(I){I.off("drag").off("dragend");var C=w.get("draggable");C&&I.on("drag",function(P){switch(x){case"force":v.warmUp(),!u._layouting&&u._startForceLayoutIteration(v,_),v.setFixed(A),g.setItemLayout(A,[I.x,I.y]);break;case"circular":g.setItemLayout(A,[I.x,I.y]),b.setLayout({fixed:!0},!0),circularLayout(r,"symbolSize",b,[P.offsetX,P.offsetY]),u.updateLayout(r);break;case"none":default:g.setItemLayout(A,[I.x,I.y]),simpleLayoutEdge(r.getGraph(),r),u.updateLayout(r);break}}).on("dragend",function(){v&&v.setUnfixed(A)}),I.setDraggable(C,!!w.get("cursor"));var E=w.get(["emphasis","focus"]);E==="adjacency"&&(getECData(I).focus=b.getAdjacentDataIndices())}}),g.graph.eachEdge(function(b){var A=b.getGraphicEl(),I=b.getModel().get(["emphasis","focus"]);!A||I==="adjacency"&&(getECData(A).focus={edge:[b.dataIndex],node:[b.node1.dataIndex,b.node2.dataIndex]})});var S=r.get("layout")==="circular"&&r.get(["circular","rotateLabel"]),T=g.getLayout("cx"),M=g.getLayout("cy");g.graph.eachNode(function(b){rotateNodeLabel(b,S,T,M)}),this._firstRender=!1},n.prototype.dispose=function(){this.remove(),this._controller&&this._controller.dispose(),this._controllerHost=null},n.prototype._startForceLayoutIteration=function(r,o){var l=this;(function u(){r.step(function(c){l.updateLayout(l._model),(l._layouting=!c)&&(o?l._layoutTimeout=setTimeout(u,16):u())})})()},n.prototype._updateController=function(r,o,l){var u=this,c=this._controller,h=this._controllerHost,d=this.group;if(c.setPointerChecker(function(p,f,g){var y=d.getBoundingRect();return y.applyTransform(d.transform),y.contain(f,g)&&!onIrrelevantElement(p,l,r)}),!isViewCoordSys(r.coordinateSystem)){c.disable();return}c.enable(r.get("roam")),h.zoomLimit=r.get("scaleLimit"),h.zoom=r.coordinateSystem.getZoom(),c.off("pan").off("zoom").on("pan",function(p){updateViewOnPan(h,p.dx,p.dy),l.dispatchAction({seriesId:r.id,type:"graphRoam",dx:p.dx,dy:p.dy})}).on("zoom",function(p){updateViewOnZoom(h,p.scale,p.originX,p.originY),l.dispatchAction({seriesId:r.id,type:"graphRoam",zoom:p.scale,originX:p.originX,originY:p.originY}),u._updateNodeAndLinkScale(),adjustEdge(r.getGraph(),getNodeGlobalScale(r)),u._lineDraw.updateLayout(),l.updateLabelLayout()})},n.prototype._updateNodeAndLinkScale=function(){var r=this._model,o=r.getData(),l=getNodeGlobalScale(r);o.eachItemGraphicEl(function(u,c){u&&u.setSymbolScale(l)})},n.prototype.updateLayout=function(r){adjustEdge(r.getGraph(),getNodeGlobalScale(r)),this._symbolDraw.updateLayout(),this._lineDraw.updateLayout()},n.prototype.remove=function(){clearTimeout(this._layoutTimeout),this._layouting=!1,this._layoutTimeout=null,this._symbolDraw&&this._symbolDraw.remove(),this._lineDraw&&this._lineDraw.remove()},n.type="graph",n}(ChartView$1);const GraphView$1=GraphView;function generateNodeKey(a){return"_EC_"+a}var Graph=function(){function a(n){this.type="graph",this.nodes=[],this.edges=[],this._nodesMap={},this._edgesMap={},this._directed=n||!1}return a.prototype.isDirected=function(){return this._directed},a.prototype.addNode=function(n,r){n=n==null?""+r:""+n;var o=this._nodesMap;if(o[generateNodeKey(n)]){console.error("Graph nodes have duplicate name or id");return}var l=new GraphNode(n,r);return l.hostGraph=this,this.nodes.push(l),o[generateNodeKey(n)]=l,l},a.prototype.getNodeByIndex=function(n){var r=this.data.getRawIndex(n);return this.nodes[r]},a.prototype.getNodeById=function(n){return this._nodesMap[generateNodeKey(n)]},a.prototype.addEdge=function(n,r,o){var l=this._nodesMap,u=this._edgesMap;if(isNumber(n)&&(n=this.nodes[n]),isNumber(r)&&(r=this.nodes[r]),n instanceof GraphNode||(n=l[generateNodeKey(n)]),r instanceof GraphNode||(r=l[generateNodeKey(r)]),!(!n||!r)){var c=n.id+"-"+r.id,h=new GraphEdge(n,r,o);return h.hostGraph=this,this._directed&&(n.outEdges.push(h),r.inEdges.push(h)),n.edges.push(h),n!==r&&r.edges.push(h),this.edges.push(h),u[c]=h,h}},a.prototype.getEdgeByIndex=function(n){var r=this.edgeData.getRawIndex(n);return this.edges[r]},a.prototype.getEdge=function(n,r){n instanceof GraphNode&&(n=n.id),r instanceof GraphNode&&(r=r.id);var o=this._edgesMap;return this._directed?o[n+"-"+r]:o[n+"-"+r]||o[r+"-"+n]},a.prototype.eachNode=function(n,r){for(var o=this.nodes,l=o.length,u=0;u<l;u++)o[u].dataIndex>=0&&n.call(r,o[u],u)},a.prototype.eachEdge=function(n,r){for(var o=this.edges,l=o.length,u=0;u<l;u++)o[u].dataIndex>=0&&o[u].node1.dataIndex>=0&&o[u].node2.dataIndex>=0&&n.call(r,o[u],u)},a.prototype.breadthFirstTraverse=function(n,r,o,l){if(r instanceof GraphNode||(r=this._nodesMap[generateNodeKey(r)]),!!r){for(var u=o==="out"?"outEdges":o==="in"?"inEdges":"edges",c=0;c<this.nodes.length;c++)this.nodes[c].__visited=!1;if(!n.call(l,r,null))for(var h=[r];h.length;)for(var d=h.shift(),p=d[u],c=0;c<p.length;c++){var f=p[c],g=f.node1===d?f.node2:f.node1;if(!g.__visited){if(n.call(l,g,d))return;h.push(g),g.__visited=!0}}}},a.prototype.update=function(){for(var n=this.data,r=this.edgeData,o=this.nodes,l=this.edges,u=0,c=o.length;u<c;u++)o[u].dataIndex=-1;for(var u=0,c=n.count();u<c;u++)o[n.getRawIndex(u)].dataIndex=u;r.filterSelf(function(h){var d=l[r.getRawIndex(h)];return d.node1.dataIndex>=0&&d.node2.dataIndex>=0});for(var u=0,c=l.length;u<c;u++)l[u].dataIndex=-1;for(var u=0,c=r.count();u<c;u++)l[r.getRawIndex(u)].dataIndex=u},a.prototype.clone=function(){for(var n=new a(this._directed),r=this.nodes,o=this.edges,l=0;l<r.length;l++)n.addNode(r[l].id,r[l].dataIndex);for(var l=0;l<o.length;l++){var u=o[l];n.addEdge(u.node1.id,u.node2.id,u.dataIndex)}return n},a}(),GraphNode=function(){function a(n,r){this.inEdges=[],this.outEdges=[],this.edges=[],this.dataIndex=-1,this.id=n==null?"":n,this.dataIndex=r==null?-1:r}return a.prototype.degree=function(){return this.edges.length},a.prototype.inDegree=function(){return this.inEdges.length},a.prototype.outDegree=function(){return this.outEdges.length},a.prototype.getModel=function(n){if(!(this.dataIndex<0)){var r=this.hostGraph,o=r.data.getItemModel(this.dataIndex);return o.getModel(n)}},a.prototype.getAdjacentDataIndices=function(){for(var n={edge:[],node:[]},r=0;r<this.edges.length;r++){var o=this.edges[r];o.dataIndex<0||(n.edge.push(o.dataIndex),n.node.push(o.node1.dataIndex,o.node2.dataIndex))}return n},a.prototype.getTrajectoryDataIndices=function(){for(var n=createHashMap(),r=createHashMap(),o=0;o<this.edges.length;o++){var l=this.edges[o];if(!(l.dataIndex<0)){n.set(l.dataIndex,!0);for(var u=[l.node1],c=[l.node2],h=0;h<u.length;){var d=u[h];h++,r.set(d.dataIndex,!0);for(var p=0;p<d.inEdges.length;p++)n.set(d.inEdges[p].dataIndex,!0),u.push(d.inEdges[p].node1)}for(h=0;h<c.length;){var f=c[h];h++,r.set(f.dataIndex,!0);for(var p=0;p<f.outEdges.length;p++)n.set(f.outEdges[p].dataIndex,!0),c.push(f.outEdges[p].node2)}}}return{edge:n.keys(),node:r.keys()}},a}(),GraphEdge=function(){function a(n,r,o){this.dataIndex=-1,this.node1=n,this.node2=r,this.dataIndex=o==null?-1:o}return a.prototype.getModel=function(n){if(!(this.dataIndex<0)){var r=this.hostGraph,o=r.edgeData.getItemModel(this.dataIndex);return o.getModel(n)}},a.prototype.getAdjacentDataIndices=function(){return{edge:[this.dataIndex],node:[this.node1.dataIndex,this.node2.dataIndex]}},a.prototype.getTrajectoryDataIndices=function(){var n=createHashMap(),r=createHashMap();n.set(this.dataIndex,!0);for(var o=[this.node1],l=[this.node2],u=0;u<o.length;){var c=o[u];u++,r.set(c.dataIndex,!0);for(var h=0;h<c.inEdges.length;h++)n.set(c.inEdges[h].dataIndex,!0),o.push(c.inEdges[h].node1)}for(u=0;u<l.length;){var d=l[u];u++,r.set(d.dataIndex,!0);for(var h=0;h<d.outEdges.length;h++)n.set(d.outEdges[h].dataIndex,!0),l.push(d.outEdges[h].node2)}return{edge:n.keys(),node:r.keys()}},a}();function createGraphDataProxyMixin(a,n){return{getValue:function(r){var o=this[a][n];return o.getStore().get(o.getDimensionIndex(r||"value"),this.dataIndex)},setVisual:function(r,o){this.dataIndex>=0&&this[a][n].setItemVisual(this.dataIndex,r,o)},getVisual:function(r){return this[a][n].getItemVisual(this.dataIndex,r)},setLayout:function(r,o){this.dataIndex>=0&&this[a][n].setItemLayout(this.dataIndex,r,o)},getLayout:function(){return this[a][n].getItemLayout(this.dataIndex)},getGraphicEl:function(){return this[a][n].getItemGraphicEl(this.dataIndex)},getRawIndex:function(){return this[a][n].getRawIndex(this.dataIndex)}}}mixin(GraphNode,createGraphDataProxyMixin("hostGraph","data"));mixin(GraphEdge,createGraphDataProxyMixin("hostGraph","edgeData"));const Graph$1=Graph;function createGraphFromNodeEdge(a,n,r,o,l){for(var u=new Graph$1(o),c=0;c<a.length;c++)u.addNode(retrieve(a[c].id,a[c].name,c),c);for(var h=[],d=[],p=0,c=0;c<n.length;c++){var f=n[c],g=f.source,y=f.target;u.addEdge(g,y,p)&&(d.push(f),h.push(retrieve(convertOptionIdName(f.id,null),g+" > "+y)),p++)}var v=r.get("coordinateSystem"),_;if(v==="cartesian2d"||v==="polar")_=createSeriesData(a,r);else{var x=CoordinateSystem.get(v),S=x?x.dimensions||[]:[];indexOf(S,"value")<0&&S.concat(["value"]);var T=prepareSeriesDataSchema(a,{coordDimensions:S,encodeDefine:r.getEncode()}).dimensions;_=new SeriesData$1(T,r),_.initData(a)}var M=new SeriesData$1(["value"],r);return M.initData(d,h),l&&l(_,M),linkSeriesData({mainData:_,struct:u,structAttr:"graph",datas:{node:_,edge:M},datasAttr:{node:"data",edge:"edgeData"}}),u.update(),u}var GraphSeriesModel=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r.hasSymbolVisual=!0,r}return n.prototype.init=function(r){a.prototype.init.apply(this,arguments);var o=this;function l(){return o._categoriesData}this.legendVisualProvider=new LegendVisualProvider$1(l,l),this.fillDataTextStyle(r.edges||r.links),this._updateCategoriesData()},n.prototype.mergeOption=function(r){a.prototype.mergeOption.apply(this,arguments),this.fillDataTextStyle(r.edges||r.links),this._updateCategoriesData()},n.prototype.mergeDefaultAndTheme=function(r){a.prototype.mergeDefaultAndTheme.apply(this,arguments),defaultEmphasis(r,"edgeLabel",["show"])},n.prototype.getInitialData=function(r,o){var l=r.edges||r.links||[],u=r.data||r.nodes||[],c=this;if(u&&l){initCurvenessList(this);var h=createGraphFromNodeEdge(u,l,this,!0,d);return each$f(h.edges,function(p){createEdgeMapForCurveness(p.node1,p.node2,this,p.dataIndex)},this),h.data}function d(p,f){p.wrapMethod("getItemModel",function(_){var x=c._categoriesModels,S=_.getShallow("category"),T=x[S];return T&&(T.parentModel=_.parentModel,_.parentModel=T),_});var g=Model$1.prototype.getModel;function y(_,x){var S=g.call(this,_,x);return S.resolveParentPath=v,S}f.wrapMethod("getItemModel",function(_){return _.resolveParentPath=v,_.getModel=y,_});function v(_){if(_&&(_[0]==="label"||_[1]==="label")){var x=_.slice();return _[0]==="label"?x[0]="edgeLabel":_[1]==="label"&&(x[1]="edgeLabel"),x}return _}}},n.prototype.getGraph=function(){return this.getData().graph},n.prototype.getEdgeData=function(){return this.getGraph().edgeData},n.prototype.getCategoriesData=function(){return this._categoriesData},n.prototype.formatTooltip=function(r,o,l){if(l==="edge"){var u=this.getData(),c=this.getDataParams(r,l),h=u.graph.getEdgeByIndex(r),d=u.getName(h.node1.dataIndex),p=u.getName(h.node2.dataIndex),f=[];return d!=null&&f.push(d),p!=null&&f.push(p),createTooltipMarkup("nameValue",{name:f.join(" > "),value:c.value,noValue:c.value==null})}var g=defaultSeriesFormatTooltip({series:this,dataIndex:r,multipleSeries:o});return g},n.prototype._updateCategoriesData=function(){var r=map$1(this.option.categories||[],function(l){return l.value!=null?l:extend({value:0},l)}),o=new SeriesData$1(["value"],this);o.initData(r),this._categoriesData=o,this._categoriesModels=o.mapArray(function(l){return o.getItemModel(l)})},n.prototype.setZoom=function(r){this.option.zoom=r},n.prototype.setCenter=function(r){this.option.center=r},n.prototype.isAnimationEnabled=function(){return a.prototype.isAnimationEnabled.call(this)&&!(this.get("layout")==="force"&&this.get(["force","layoutAnimation"]))},n.type="series.graph",n.dependencies=["grid","polar","geo","singleAxis","calendar"],n.defaultOption={z:2,coordinateSystem:"view",legendHoverLink:!0,layout:null,circular:{rotateLabel:!1},force:{initLayout:null,repulsion:[0,50],gravity:.1,friction:.6,edgeLength:30,layoutAnimation:!0},left:"center",top:"center",symbol:"circle",symbolSize:10,edgeSymbol:["none","none"],edgeSymbolSize:10,edgeLabel:{position:"middle",distance:5},draggable:!1,roam:!1,center:null,zoom:1,nodeScaleRatio:.6,label:{show:!1,formatter:"{b}"},itemStyle:{},lineStyle:{color:"#aaa",width:1,opacity:.5},emphasis:{scale:!0,label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},n}(SeriesModel$1);const GraphSeriesModel$1=GraphSeriesModel;var actionInfo$1={type:"graphRoam",event:"graphRoam",update:"none"};function install$F(a){a.registerChartView(GraphView$1),a.registerSeriesModel(GraphSeriesModel$1),a.registerProcessor(categoryFilter),a.registerVisual(categoryVisual),a.registerVisual(graphEdgeVisual),a.registerLayout(graphSimpleLayout),a.registerLayout(a.PRIORITY.VISUAL.POST_CHART_LAYOUT,graphCircularLayout),a.registerLayout(graphForceLayout),a.registerCoordinateSystem("graphView",{dimensions:View$1.dimensions,create:createViewCoordSys}),a.registerAction({type:"focusNodeAdjacency",event:"focusNodeAdjacency",update:"series:focusNodeAdjacency"},noop),a.registerAction({type:"unfocusNodeAdjacency",event:"unfocusNodeAdjacency",update:"series:unfocusNodeAdjacency"},noop),a.registerAction(actionInfo$1,function(n,r,o){r.eachComponent({mainType:"series",query:n},function(l){var u=l.coordinateSystem,c=updateCenterAndZoom(u,n,void 0,o);l.setCenter&&l.setCenter(c.center),l.setZoom&&l.setZoom(c.zoom)})})}var PointerShape=function(){function a(){this.angle=0,this.width=10,this.r=10,this.x=0,this.y=0}return a}(),PointerPath=function(a){__extends(n,a);function n(r){var o=a.call(this,r)||this;return o.type="pointer",o}return n.prototype.getDefaultShape=function(){return new PointerShape},n.prototype.buildPath=function(r,o){var l=Math.cos,u=Math.sin,c=o.r,h=o.width,d=o.angle,p=o.x-l(d)*h*(h>=c/3?1:2),f=o.y-u(d)*h*(h>=c/3?1:2);d=o.angle-Math.PI/2,r.moveTo(p,f),r.lineTo(o.x+l(d)*h,o.y+u(d)*h),r.lineTo(o.x+l(o.angle)*c,o.y+u(o.angle)*c),r.lineTo(o.x-l(d)*h,o.y-u(d)*h),r.lineTo(p,f)},n}(Path$1);const PointerPath$1=PointerPath;function parsePosition(a,n){var r=a.get("center"),o=n.getWidth(),l=n.getHeight(),u=Math.min(o,l),c=parsePercent(r[0],n.getWidth()),h=parsePercent(r[1],n.getHeight()),d=parsePercent(a.get("radius"),u/2);return{cx:c,cy:h,r:d}}function formatLabel(a,n){var r=a==null?"":a+"";return n&&(isString(n)?r=n.replace("{value}",r):isFunction(n)&&(r=n(a))),r}var GaugeView=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.prototype.render=function(r,o,l){this.group.removeAll();var u=r.get(["axisLine","lineStyle","color"]),c=parsePosition(r,l);this._renderMain(r,o,l,u,c),this._data=r.getData()},n.prototype.dispose=function(){},n.prototype._renderMain=function(r,o,l,u,c){var h=this.group,d=r.get("clockwise"),p=-r.get("startAngle")/180*Math.PI,f=-r.get("endAngle")/180*Math.PI,g=r.getModel("axisLine"),y=g.get("roundCap"),v=y?Sausage:Sector$1,_=g.get("show"),x=g.getModel("lineStyle"),S=x.get("width"),T=[p,f];normalizeArcAngles(T,!d),p=T[0],f=T[1];for(var M=f-p,b=p,A=[],I=0;_&&I<u.length;I++){var w=Math.min(Math.max(u[I][0],0),1);f=p+M*w;var C=new v({shape:{startAngle:b,endAngle:f,cx:c.cx,cy:c.cy,clockwise:d,r0:c.r-S,r:c.r},silent:!0});C.setStyle({fill:u[I][1]}),C.setStyle(x.getLineStyle(["color","width"])),A.push(C),b=f}A.reverse(),each$f(A,function(P){return h.add(P)});var E=function(P){if(P<=0)return u[0][1];var D;for(D=0;D<u.length;D++)if(u[D][0]>=P&&(D===0?0:u[D-1][0])<P)return u[D][1];return u[D-1][1]};this._renderTicks(r,o,l,E,c,p,f,d,S),this._renderTitleAndDetail(r,o,l,E,c),this._renderAnchor(r,c),this._renderPointer(r,o,l,E,c,p,f,d,S)},n.prototype._renderTicks=function(r,o,l,u,c,h,d,p,f){for(var g=this.group,y=c.cx,v=c.cy,_=c.r,x=+r.get("min"),S=+r.get("max"),T=r.getModel("splitLine"),M=r.getModel("axisTick"),b=r.getModel("axisLabel"),A=r.get("splitNumber"),I=M.get("splitNumber"),w=parsePercent(T.get("length"),_),C=parsePercent(M.get("length"),_),E=h,P=(d-h)/A,D=P/I,L=T.getModel("lineStyle").getLineStyle(),R=M.getModel("lineStyle").getLineStyle(),O=T.get("distance"),N,V,B=0;B<=A;B++){if(N=Math.cos(E),V=Math.sin(E),T.get("show")){var G=O?O+f:f,F=new Line$3({shape:{x1:N*(_-G)+y,y1:V*(_-G)+v,x2:N*(_-w-G)+y,y2:V*(_-w-G)+v},style:L,silent:!0});L.stroke==="auto"&&F.setStyle({stroke:u(B/A)}),g.add(F)}if(b.get("show")){var G=b.get("distance")+O,z=formatLabel(round$3(B/A*(S-x)+x),b.get("formatter")),H=u(B/A),U=N*(_-w-G)+y,Y=V*(_-w-G)+v,Z=b.get("rotate"),X=0;Z==="radial"?(X=-E+2*Math.PI,X>Math.PI/2&&(X+=Math.PI)):Z==="tangential"?X=-E-Math.PI/2:isNumber(Z)&&(X=Z*Math.PI/180),X===0?g.add(new ZRText$1({style:createTextStyle$1(b,{text:z,x:U,y:Y,verticalAlign:V<-.8?"top":V>.8?"bottom":"middle",align:N<-.4?"left":N>.4?"right":"center"},{inheritColor:H}),silent:!0})):g.add(new ZRText$1({style:createTextStyle$1(b,{text:z,x:U,y:Y,verticalAlign:"middle",align:"center"},{inheritColor:H}),silent:!0,originX:U,originY:Y,rotation:X}))}if(M.get("show")&&B!==A){var G=M.get("distance");G=G?G+f:f;for(var K=0;K<=I;K++){N=Math.cos(E),V=Math.sin(E);var te=new Line$3({shape:{x1:N*(_-G)+y,y1:V*(_-G)+v,x2:N*(_-C-G)+y,y2:V*(_-C-G)+v},silent:!0,style:R});R.stroke==="auto"&&te.setStyle({stroke:u((B+K/I)/A)}),g.add(te),E+=D}E-=D}else E+=P}},n.prototype._renderPointer=function(r,o,l,u,c,h,d,p,f){var g=this.group,y=this._data,v=this._progressEls,_=[],x=r.get(["pointer","show"]),S=r.getModel("progress"),T=S.get("show"),M=r.getData(),b=M.mapDimension("value"),A=+r.get("min"),I=+r.get("max"),w=[A,I],C=[h,d];function E(D,L){var R=M.getItemModel(D),O=R.getModel("pointer"),N=parsePercent(O.get("width"),c.r),V=parsePercent(O.get("length"),c.r),B=r.get(["pointer","icon"]),G=O.get("offsetCenter"),F=parsePercent(G[0],c.r),z=parsePercent(G[1],c.r),H=O.get("keepAspect"),U;return B?U=createSymbol$1(B,F-N/2,z-V,N,V,null,H):U=new PointerPath$1({shape:{angle:-Math.PI/2,width:N,r:V,x:F,y:z}}),U.rotation=-(L+Math.PI/2),U.x=c.cx,U.y=c.cy,U}function P(D,L){var R=S.get("roundCap"),O=R?Sausage:Sector$1,N=S.get("overlap"),V=N?S.get("width"):f/M.count(),B=N?c.r-V:c.r-(D+1)*V,G=N?c.r:c.r-D*V,F=new O({shape:{startAngle:h,endAngle:L,cx:c.cx,cy:c.cy,clockwise:p,r0:B,r:G}});return N&&(F.z2=linearMap$2(M.get(b,D),[A,I],[100,0],!0)),F}(T||x)&&(M.diff(y).add(function(D){var L=M.get(b,D);if(x){var R=E(D,h);initProps(R,{rotation:-((isNaN(+L)?C[0]:linearMap$2(L,w,C,!0))+Math.PI/2)},r),g.add(R),M.setItemGraphicEl(D,R)}if(T){var O=P(D,h),N=S.get("clip");initProps(O,{shape:{endAngle:linearMap$2(L,w,C,N)}},r),g.add(O),setCommonECData(r.seriesIndex,M.dataType,D,O),_[D]=O}}).update(function(D,L){var R=M.get(b,D);if(x){var O=y.getItemGraphicEl(L),N=O?O.rotation:h,V=E(D,N);V.rotation=N,updateProps$1(V,{rotation:-((isNaN(+R)?C[0]:linearMap$2(R,w,C,!0))+Math.PI/2)},r),g.add(V),M.setItemGraphicEl(D,V)}if(T){var B=v[L],G=B?B.shape.endAngle:h,F=P(D,G),z=S.get("clip");updateProps$1(F,{shape:{endAngle:linearMap$2(R,w,C,z)}},r),g.add(F),setCommonECData(r.seriesIndex,M.dataType,D,F),_[D]=F}}).execute(),M.each(function(D){var L=M.getItemModel(D),R=L.getModel("emphasis"),O=R.get("focus"),N=R.get("blurScope"),V=R.get("disabled");if(x){var B=M.getItemGraphicEl(D),G=M.getItemVisual(D,"style"),F=G.fill;if(B instanceof ZRImage$1){var z=B.style;B.useStyle(extend({image:z.image,x:z.x,y:z.y,width:z.width,height:z.height},G))}else B.useStyle(G),B.type!=="pointer"&&B.setColor(F);B.setStyle(L.getModel(["pointer","itemStyle"]).getItemStyle()),B.style.fill==="auto"&&B.setStyle("fill",u(linearMap$2(M.get(b,D),w,[0,1],!0))),B.z2EmphasisLift=0,setStatesStylesFromModel(B,L),toggleHoverEmphasis(B,O,N,V)}if(T){var H=_[D];H.useStyle(M.getItemVisual(D,"style")),H.setStyle(L.getModel(["progress","itemStyle"]).getItemStyle()),H.z2EmphasisLift=0,setStatesStylesFromModel(H,L),toggleHoverEmphasis(H,O,N,V)}}),this._progressEls=_)},n.prototype._renderAnchor=function(r,o){var l=r.getModel("anchor"),u=l.get("show");if(u){var c=l.get("size"),h=l.get("icon"),d=l.get("offsetCenter"),p=l.get("keepAspect"),f=createSymbol$1(h,o.cx-c/2+parsePercent(d[0],o.r),o.cy-c/2+parsePercent(d[1],o.r),c,c,null,p);f.z2=l.get("showAbove")?1:0,f.setStyle(l.getModel("itemStyle").getItemStyle()),this.group.add(f)}},n.prototype._renderTitleAndDetail=function(r,o,l,u,c){var h=this,d=r.getData(),p=d.mapDimension("value"),f=+r.get("min"),g=+r.get("max"),y=new Group$4,v=[],_=[],x=r.isAnimationEnabled(),S=r.get(["pointer","showAbove"]);d.diff(this._data).add(function(T){v[T]=new ZRText$1({silent:!0}),_[T]=new ZRText$1({silent:!0})}).update(function(T,M){v[T]=h._titleEls[M],_[T]=h._detailEls[M]}).execute(),d.each(function(T){var M=d.getItemModel(T),b=d.get(p,T),A=new Group$4,I=u(linearMap$2(b,[f,g],[0,1],!0)),w=M.getModel("title");if(w.get("show")){var C=w.get("offsetCenter"),E=c.cx+parsePercent(C[0],c.r),P=c.cy+parsePercent(C[1],c.r),D=v[T];D.attr({z2:S?0:2,style:createTextStyle$1(w,{x:E,y:P,text:d.getName(T),align:"center",verticalAlign:"middle"},{inheritColor:I})}),A.add(D)}var L=M.getModel("detail");if(L.get("show")){var R=L.get("offsetCenter"),O=c.cx+parsePercent(R[0],c.r),N=c.cy+parsePercent(R[1],c.r),V=parsePercent(L.get("width"),c.r),B=parsePercent(L.get("height"),c.r),G=r.get(["progress","show"])?d.getItemVisual(T,"style").fill:I,D=_[T],F=L.get("formatter");D.attr({z2:S?0:2,style:createTextStyle$1(L,{x:O,y:N,text:formatLabel(b,F),width:isNaN(V)?null:V,height:isNaN(B)?null:B,align:"center",verticalAlign:"middle"},{inheritColor:G})}),setLabelValueAnimation(D,{normal:L},b,function(H){return formatLabel(H,F)}),x&&animateLabelValue(D,T,d,r,{getFormattedLabel:function(H,U,Y,Z,X,K){return formatLabel(K?K.interpolatedValue:b,F)}}),A.add(D)}y.add(A)}),this.group.add(y),this._titleEls=v,this._detailEls=_},n.type="gauge",n}(ChartView$1);const GaugeView$1=GaugeView;var GaugeSeriesModel=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r.visualStyleAccessPath="itemStyle",r}return n.prototype.getInitialData=function(r,o){return createSeriesDataSimply(this,["value"])},n.type="series.gauge",n.defaultOption={z:2,colorBy:"data",center:["50%","50%"],legendHoverLink:!0,radius:"75%",startAngle:225,endAngle:-45,clockwise:!0,min:0,max:100,splitNumber:10,axisLine:{show:!0,roundCap:!1,lineStyle:{color:[[1,"#E6EBF8"]],width:10}},progress:{show:!1,overlap:!0,width:10,roundCap:!1,clip:!0},splitLine:{show:!0,length:10,distance:10,lineStyle:{color:"#63677A",width:3,type:"solid"}},axisTick:{show:!0,splitNumber:5,length:6,distance:10,lineStyle:{color:"#63677A",width:1,type:"solid"}},axisLabel:{show:!0,distance:15,color:"#464646",fontSize:12,rotate:0},pointer:{icon:null,offsetCenter:[0,0],show:!0,showAbove:!0,length:"60%",width:6,keepAspect:!1},anchor:{show:!1,showAbove:!1,size:6,icon:"circle",offsetCenter:[0,0],keepAspect:!1,itemStyle:{color:"#fff",borderWidth:0,borderColor:"#5470c6"}},title:{show:!0,offsetCenter:[0,"20%"],color:"#464646",fontSize:16,valueAnimation:!1},detail:{show:!0,backgroundColor:"rgba(0,0,0,0)",borderWidth:0,borderColor:"#ccc",width:100,height:null,padding:[5,10],offsetCenter:[0,"40%"],color:"#464646",fontSize:30,fontWeight:"bold",lineHeight:30,valueAnimation:!1}},n}(SeriesModel$1);const GaugeSeriesModel$1=GaugeSeriesModel;function install$E(a){a.registerChartView(GaugeView$1),a.registerSeriesModel(GaugeSeriesModel$1)}var opacityAccessPath$1=["itemStyle","opacity"],FunnelPiece=function(a){__extends(n,a);function n(r,o){var l=a.call(this)||this,u=l,c=new Polyline$3,h=new ZRText$1;return u.setTextContent(h),l.setTextGuideLine(c),l.updateData(r,o,!0),l}return n.prototype.updateData=function(r,o,l){var u=this,c=r.hostModel,h=r.getItemModel(o),d=r.getItemLayout(o),p=h.getModel("emphasis"),f=h.get(opacityAccessPath$1);f=f==null?1:f,l||saveOldStyle(u),u.useStyle(r.getItemVisual(o,"style")),u.style.lineJoin="round",l?(u.setShape({points:d.points}),u.style.opacity=0,initProps(u,{style:{opacity:f}},c,o)):updateProps$1(u,{style:{opacity:f},shape:{points:d.points}},c,o),setStatesStylesFromModel(u,h),this._updateLabel(r,o),toggleHoverEmphasis(this,p.get("focus"),p.get("blurScope"),p.get("disabled"))},n.prototype._updateLabel=function(r,o){var l=this,u=this.getTextGuideLine(),c=l.getTextContent(),h=r.hostModel,d=r.getItemModel(o),p=r.getItemLayout(o),f=p.label,g=r.getItemVisual(o,"style"),y=g.fill;setLabelStyle(c,getLabelStatesModels(d),{labelFetcher:r.hostModel,labelDataIndex:o,defaultOpacity:g.opacity,defaultText:r.getName(o)},{normal:{align:f.textAlign,verticalAlign:f.verticalAlign}}),l.setTextConfig({local:!0,inside:!!f.inside,insideStroke:y,outsideFill:y});var v=f.linePoints;u.setShape({points:v}),l.textGuideLineConfig={anchor:v?new Point$1(v[0][0],v[0][1]):null},updateProps$1(c,{style:{x:f.x,y:f.y}},h,o),c.attr({rotation:f.rotation,originX:f.x,originY:f.y,z2:10}),setLabelLineStyle(l,getLabelLineStatesModels(d),{stroke:y})},n}(Polygon$1),FunnelView=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r.ignoreLabelLineUpdate=!0,r}return n.prototype.render=function(r,o,l){var u=r.getData(),c=this._data,h=this.group;u.diff(c).add(function(d){var p=new FunnelPiece(u,d);u.setItemGraphicEl(d,p),h.add(p)}).update(function(d,p){var f=c.getItemGraphicEl(p);f.updateData(u,d),h.add(f),u.setItemGraphicEl(d,f)}).remove(function(d){var p=c.getItemGraphicEl(d);removeElementWithFadeOut(p,r,d)}).execute(),this._data=u},n.prototype.remove=function(){this.group.removeAll(),this._data=null},n.prototype.dispose=function(){},n.type="funnel",n}(ChartView$1);const FunnelView$1=FunnelView;var FunnelSeriesModel=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.prototype.init=function(r){a.prototype.init.apply(this,arguments),this.legendVisualProvider=new LegendVisualProvider$1(bind$1(this.getData,this),bind$1(this.getRawData,this)),this._defaultLabelLine(r)},n.prototype.getInitialData=function(r,o){return createSeriesDataSimply(this,{coordDimensions:["value"],encodeDefaulter:curry$1(makeSeriesEncodeForNameBased,this)})},n.prototype._defaultLabelLine=function(r){defaultEmphasis(r,"labelLine",["show"]);var o=r.labelLine,l=r.emphasis.labelLine;o.show=o.show&&r.label.show,l.show=l.show&&r.emphasis.label.show},n.prototype.getDataParams=function(r){var o=this.getData(),l=a.prototype.getDataParams.call(this,r),u=o.mapDimension("value"),c=o.getSum(u);return l.percent=c?+(o.get(u,r)/c*100).toFixed(2):0,l.$vars.push("percent"),l},n.type="series.funnel",n.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",left:80,top:60,right:80,bottom:60,minSize:"0%",maxSize:"100%",sort:"descending",orient:"vertical",gap:0,funnelAlign:"center",label:{show:!0,position:"outer"},labelLine:{show:!0,length:20,lineStyle:{width:1}},itemStyle:{borderColor:"#fff",borderWidth:1},emphasis:{label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},n}(SeriesModel$1);const FunnelSeriesModel$1=FunnelSeriesModel;function getViewRect$2(a,n){return getLayoutRect(a.getBoxLayoutParams(),{width:n.getWidth(),height:n.getHeight()})}function getSortedIndices(a,n){for(var r=a.mapDimension("value"),o=a.mapArray(r,function(d){return d}),l=[],u=n==="ascending",c=0,h=a.count();c<h;c++)l[c]=c;return isFunction(n)?l.sort(n):n!=="none"&&l.sort(function(d,p){return u?o[d]-o[p]:o[p]-o[d]}),l}function labelLayout(a){var n=a.hostModel,r=n.get("orient");a.each(function(o){var l=a.getItemModel(o),u=l.getModel("label"),c=u.get("position"),h=l.getModel("labelLine"),d=a.getItemLayout(o),p=d.points,f=c==="inner"||c==="inside"||c==="center"||c==="insideLeft"||c==="insideRight",g,y,v,_;if(f)c==="insideLeft"?(y=(p[0][0]+p[3][0])/2+5,v=(p[0][1]+p[3][1])/2,g="left"):c==="insideRight"?(y=(p[1][0]+p[2][0])/2-5,v=(p[1][1]+p[2][1])/2,g="right"):(y=(p[0][0]+p[1][0]+p[2][0]+p[3][0])/4,v=(p[0][1]+p[1][1]+p[2][1]+p[3][1])/4,g="center"),_=[[y,v],[y,v]];else{var x=void 0,S=void 0,T=void 0,M=void 0,b=h.get("length");r==="vertical"&&["top","bottom"].indexOf(c)>-1&&(c="left",console.warn("Position error: Funnel chart on vertical orient dose not support top and bottom.")),r==="horizontal"&&["left","right"].indexOf(c)>-1&&(c="bottom",console.warn("Position error: Funnel chart on horizontal orient dose not support left and right.")),c==="left"?(x=(p[3][0]+p[0][0])/2,S=(p[3][1]+p[0][1])/2,T=x-b,y=T-5,g="right"):c==="right"?(x=(p[1][0]+p[2][0])/2,S=(p[1][1]+p[2][1])/2,T=x+b,y=T+5,g="left"):c==="top"?(x=(p[3][0]+p[0][0])/2,S=(p[3][1]+p[0][1])/2,M=S-b,v=M-5,g="center"):c==="bottom"?(x=(p[1][0]+p[2][0])/2,S=(p[1][1]+p[2][1])/2,M=S+b,v=M+5,g="center"):c==="rightTop"?(x=r==="horizontal"?p[3][0]:p[1][0],S=r==="horizontal"?p[3][1]:p[1][1],r==="horizontal"?(M=S-b,v=M-5,g="center"):(T=x+b,y=T+5,g="top")):c==="rightBottom"?(x=p[2][0],S=p[2][1],r==="horizontal"?(M=S+b,v=M+5,g="center"):(T=x+b,y=T+5,g="bottom")):c==="leftTop"?(x=p[0][0],S=r==="horizontal"?p[0][1]:p[1][1],r==="horizontal"?(M=S-b,v=M-5,g="center"):(T=x-b,y=T-5,g="right")):c==="leftBottom"?(x=r==="horizontal"?p[1][0]:p[3][0],S=r==="horizontal"?p[1][1]:p[2][1],r==="horizontal"?(M=S+b,v=M+5,g="center"):(T=x-b,y=T-5,g="right")):(x=(p[1][0]+p[2][0])/2,S=(p[1][1]+p[2][1])/2,r==="horizontal"?(M=S+b,v=M+5,g="center"):(T=x+b,y=T+5,g="left")),r==="horizontal"?(T=x,y=T):(M=S,v=M),_=[[x,S],[T,M]]}d.label={linePoints:_,x:y,y:v,verticalAlign:"middle",textAlign:g,inside:f}})}function funnelLayout(a,n){a.eachSeriesByType("funnel",function(r){var o=r.getData(),l=o.mapDimension("value"),u=r.get("sort"),c=getViewRect$2(r,n),h=r.get("orient"),d=c.width,p=c.height,f=getSortedIndices(o,u),g=c.x,y=c.y,v=h==="horizontal"?[parsePercent(r.get("minSize"),p),parsePercent(r.get("maxSize"),p)]:[parsePercent(r.get("minSize"),d),parsePercent(r.get("maxSize"),d)],_=o.getDataExtent(l),x=r.get("min"),S=r.get("max");x==null&&(x=Math.min(_[0],0)),S==null&&(S=_[1]);var T=r.get("funnelAlign"),M=r.get("gap"),b=h==="horizontal"?d:p,A=(b-M*(o.count()-1))/o.count(),I=function(N,V){if(h==="horizontal"){var B=o.get(l,N)||0,G=linearMap$2(B,[x,S],v,!0),F=void 0;switch(T){case"top":F=y;break;case"center":F=y+(p-G)/2;break;case"bottom":F=y+(p-G);break}return[[V,F],[V,F+G]]}var z=o.get(l,N)||0,H=linearMap$2(z,[x,S],v,!0),U;switch(T){case"left":U=g;break;case"center":U=g+(d-H)/2;break;case"right":U=g+d-H;break}return[[U,V],[U+H,V]]};u==="ascending"&&(A=-A,M=-M,h==="horizontal"?g+=d:y+=p,f=f.reverse());for(var w=0;w<f.length;w++){var C=f[w],E=f[w+1],P=o.getItemModel(C);if(h==="horizontal"){var D=P.get(["itemStyle","width"]);D==null?D=A:(D=parsePercent(D,d),u==="ascending"&&(D=-D));var L=I(C,g),R=I(E,g+D);g+=D+M,o.setItemLayout(C,{points:L.concat(R.slice().reverse())})}else{var O=P.get(["itemStyle","height"]);O==null?O=A:(O=parsePercent(O,p),u==="ascending"&&(O=-O));var L=I(C,y),R=I(E,y+O);y+=O+M,o.setItemLayout(C,{points:L.concat(R.slice().reverse())})}}labelLayout(o)})}function install$D(a){a.registerChartView(FunnelView$1),a.registerSeriesModel(FunnelSeriesModel$1),a.registerLayout(funnelLayout),a.registerProcessor(dataFilter$1("funnel"))}var DEFAULT_SMOOTH=.3,ParallelView$2=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r._dataGroup=new Group$4,r._initialized=!1,r}return n.prototype.init=function(){this.group.add(this._dataGroup)},n.prototype.render=function(r,o,l,u){this._progressiveEls=null;var c=this._dataGroup,h=r.getData(),d=this._data,p=r.coordinateSystem,f=p.dimensions,g=makeSeriesScope(r);h.diff(d).add(y).update(v).remove(_).execute();function y(S){var T=addEl(h,c,S,f,p);updateElCommon(T,h,S,g)}function v(S,T){var M=d.getItemGraphicEl(T),b=createLinePoints(h,S,f,p);h.setItemGraphicEl(S,M),updateProps$1(M,{shape:{points:b}},r,S),saveOldStyle(M),updateElCommon(M,h,S,g)}function _(S){var T=d.getItemGraphicEl(S);c.remove(T)}if(!this._initialized){this._initialized=!0;var x=createGridClipShape$2(p,r,function(){setTimeout(function(){c.removeClipPath()})});c.setClipPath(x)}this._data=h},n.prototype.incrementalPrepareRender=function(r,o,l){this._initialized=!0,this._data=null,this._dataGroup.removeAll()},n.prototype.incrementalRender=function(r,o,l){for(var u=o.getData(),c=o.coordinateSystem,h=c.dimensions,d=makeSeriesScope(o),p=this._progressiveEls=[],f=r.start;f<r.end;f++){var g=addEl(u,this._dataGroup,f,h,c);g.incremental=!0,updateElCommon(g,u,f,d),p.push(g)}},n.prototype.remove=function(){this._dataGroup&&this._dataGroup.removeAll(),this._data=null},n.type="parallel",n}(ChartView$1);function createGridClipShape$2(a,n,r){var o=a.model,l=a.getRect(),u=new Rect$3({shape:{x:l.x,y:l.y,width:l.width,height:l.height}}),c=o.get("layout")==="horizontal"?"width":"height";return u.setShape(c,0),initProps(u,{shape:{width:l.width,height:l.height}},n,r),u}function createLinePoints(a,n,r,o){for(var l=[],u=0;u<r.length;u++){var c=r[u],h=a.get(a.mapDimension(c),n);isEmptyValue(h,o.getAxis(c).type)||l.push(o.dataToPoint(h,c))}return l}function addEl(a,n,r,o,l){var u=createLinePoints(a,r,o,l),c=new Polyline$3({shape:{points:u},z2:10});return n.add(c),a.setItemGraphicEl(r,c),c}function makeSeriesScope(a){var n=a.get("smooth",!0);return n===!0&&(n=DEFAULT_SMOOTH),n=numericToNumber(n),eqNaN(n)&&(n=0),{smooth:n}}function updateElCommon(a,n,r,o){a.useStyle(n.getItemVisual(r,"style")),a.style.fill=null,a.setShape("smooth",o.smooth);var l=n.getItemModel(r),u=l.getModel("emphasis");setStatesStylesFromModel(a,l,"lineStyle"),toggleHoverEmphasis(a,u.get("focus"),u.get("blurScope"),u.get("disabled"))}function isEmptyValue(a,n){return n==="category"?a==null:a==null||isNaN(a)}const ParallelView$3=ParallelView$2;var ParallelSeriesModel=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r.visualStyleAccessPath="lineStyle",r.visualDrawType="stroke",r}return n.prototype.getInitialData=function(r,o){return createSeriesData(null,this,{useEncodeDefaulter:bind$1(makeDefaultEncode,null,this)})},n.prototype.getRawIndicesByActiveState=function(r){var o=this.coordinateSystem,l=this.getData(),u=[];return o.eachActiveState(l,function(c,h){r===c&&u.push(l.getRawIndex(h))}),u},n.type="series.parallel",n.dependencies=["parallel"],n.defaultOption={z:2,coordinateSystem:"parallel",parallelIndex:0,label:{show:!1},inactiveOpacity:.05,activeOpacity:1,lineStyle:{width:1,opacity:.45,type:"solid"},emphasis:{label:{show:!1}},progressive:500,smooth:!1,animationEasing:"linear"},n}(SeriesModel$1);function makeDefaultEncode(a){var n=a.ecModel.getComponent("parallel",a.get("parallelIndex"));if(n){var r={};return each$f(n.dimensions,function(o){var l=convertDimNameToNumber(o);r[o]=l}),r}}function convertDimNameToNumber(a){return+a.replace("dim","")}const ParallelSeriesModel$1=ParallelSeriesModel;var opacityAccessPath=["lineStyle","opacity"],parallelVisual={seriesType:"parallel",reset:function(a,n){var r=a.coordinateSystem,o={normal:a.get(["lineStyle","opacity"]),active:a.get("activeOpacity"),inactive:a.get("inactiveOpacity")};return{progress:function(l,u){r.eachActiveState(u,function(c,h){var d=o[c];if(c==="normal"&&u.hasItemOption){var p=u.getItemModel(h).get(opacityAccessPath,!0);p!=null&&(d=p)}var f=u.ensureUniqueItemVisual(h,"style");f.opacity=d},l.start,l.end)}}}};const parallelVisual$1=parallelVisual;function parallelPreprocessor(a){createParallelIfNeeded(a),mergeAxisOptionFromParallel(a)}function createParallelIfNeeded(a){if(!a.parallel){var n=!1;each$f(a.series,function(r){r&&r.type==="parallel"&&(n=!0)}),n&&(a.parallel=[{}])}}function mergeAxisOptionFromParallel(a){var n=normalizeToArray(a.parallelAxis);each$f(n,function(r){if(isObject$3(r)){var o=r.parallelIndex||0,l=normalizeToArray(a.parallel)[o];l&&l.parallelAxisDefault&&merge(r,l.parallelAxisDefault,!1)}})}var CLICK_THRESHOLD=5,ParallelView=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.prototype.render=function(r,o,l){this._model=r,this._api=l,this._handlers||(this._handlers={},each$f(handlers$1,function(u,c){l.getZr().on(c,this._handlers[c]=bind$1(u,this))},this)),createOrUpdate(this,"_throttledDispatchExpand",r.get("axisExpandRate"),"fixRate")},n.prototype.dispose=function(r,o){clear$1(this,"_throttledDispatchExpand"),each$f(this._handlers,function(l,u){o.getZr().off(u,l)}),this._handlers=null},n.prototype._throttledDispatchExpand=function(r){this._dispatchExpand(r)},n.prototype._dispatchExpand=function(r){r&&this._api.dispatchAction(extend({type:"parallelAxisExpand"},r))},n.type="parallel",n}(ComponentView$1),handlers$1={mousedown:function(a){checkTrigger(this,"click")&&(this._mouseDownPoint=[a.offsetX,a.offsetY])},mouseup:function(a){var n=this._mouseDownPoint;if(checkTrigger(this,"click")&&n){var r=[a.offsetX,a.offsetY],o=Math.pow(n[0]-r[0],2)+Math.pow(n[1]-r[1],2);if(o>CLICK_THRESHOLD)return;var l=this._model.coordinateSystem.getSlidedAxisExpandWindow([a.offsetX,a.offsetY]);l.behavior!=="none"&&this._dispatchExpand({axisExpandWindow:l.axisExpandWindow})}this._mouseDownPoint=null},mousemove:function(a){if(!(this._mouseDownPoint||!checkTrigger(this,"mousemove"))){var n=this._model,r=n.coordinateSystem.getSlidedAxisExpandWindow([a.offsetX,a.offsetY]),o=r.behavior;o==="jump"&&this._throttledDispatchExpand.debounceNextCall(n.get("axisExpandDebounce")),this._throttledDispatchExpand(o==="none"?null:{axisExpandWindow:r.axisExpandWindow,animation:o==="jump"?null:{duration:0}})}}};function checkTrigger(a,n){var r=a._model;return r.get("axisExpandable")&&r.get("axisExpandTriggerOn")===n}const ParallelView$1=ParallelView;var ParallelModel=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.prototype.init=function(){a.prototype.init.apply(this,arguments),this.mergeOption({})},n.prototype.mergeOption=function(r){var o=this.option;r&&merge(o,r,!0),this._initDimensions()},n.prototype.contains=function(r,o){var l=r.get("parallelIndex");return l!=null&&o.getComponent("parallel",l)===this},n.prototype.setAxisExpand=function(r){each$f(["axisExpandable","axisExpandCenter","axisExpandCount","axisExpandWidth","axisExpandWindow"],function(o){r.hasOwnProperty(o)&&(this.option[o]=r[o])},this)},n.prototype._initDimensions=function(){var r=this.dimensions=[],o=this.parallelAxisIndex=[],l=filter(this.ecModel.queryComponents({mainType:"parallelAxis"}),function(u){return(u.get("parallelIndex")||0)===this.componentIndex},this);each$f(l,function(u){r.push("dim"+u.get("dim")),o.push(u.componentIndex)})},n.type="parallel",n.dependencies=["parallelAxis"],n.layoutMode="box",n.defaultOption={z:0,left:80,top:60,right:80,bottom:60,layout:"horizontal",axisExpandable:!1,axisExpandCenter:null,axisExpandCount:0,axisExpandWidth:50,axisExpandRate:17,axisExpandDebounce:50,axisExpandSlideTriggerArea:[-.15,.05,.4],axisExpandTriggerOn:"click",parallelAxisDefault:null},n}(ComponentModel$1);const ParallelModel$1=ParallelModel;var ParallelAxis=function(a){__extends(n,a);function n(r,o,l,u,c){var h=a.call(this,r,o,l)||this;return h.type=u||"value",h.axisIndex=c,h}return n.prototype.isHorizontal=function(){return this.coordinateSystem.getModel().get("layout")!=="horizontal"},n}(Axis$1);const ParallelAxis$1=ParallelAxis;function sliderMove(a,n,r,o,l,u){a=a||0;var c=r[1]-r[0];if(l!=null&&(l=restrict$1(l,[0,c])),u!=null&&(u=Math.max(u,l!=null?l:0)),o==="all"){var h=Math.abs(n[1]-n[0]);h=restrict$1(h,[0,c]),l=u=restrict$1(h,[l,u]),o=0}n[0]=restrict$1(n[0],r),n[1]=restrict$1(n[1],r);var d=getSpanSign(n,o);n[o]+=a;var p=l||0,f=r.slice();d.sign<0?f[0]+=p:f[1]-=p,n[o]=restrict$1(n[o],f);var g;return g=getSpanSign(n,o),l!=null&&(g.sign!==d.sign||g.span<l)&&(n[1-o]=n[o]+d.sign*l),g=getSpanSign(n,o),u!=null&&g.span>u&&(n[1-o]=n[o]+g.sign*u),n}function getSpanSign(a,n){var r=a[n]-a[1-n];return{span:Math.abs(r),sign:r>0?-1:r<0?1:n?-1:1}}function restrict$1(a,n){return Math.min(n[1]!=null?n[1]:1/0,Math.max(n[0]!=null?n[0]:-1/0,a))}var each$a=each$f,mathMin$2=Math.min,mathMax$2=Math.max,mathFloor=Math.floor,mathCeil=Math.ceil,round=round$3,PI$1=Math.PI,Parallel=function(){function a(n,r,o){this.type="parallel",this._axesMap=createHashMap(),this._axesLayout={},this.dimensions=n.dimensions,this._model=n,this._init(n,r,o)}return a.prototype._init=function(n,r,o){var l=n.dimensions,u=n.parallelAxisIndex;each$a(l,function(c,h){var d=u[h],p=r.getComponent("parallelAxis",d),f=this._axesMap.set(c,new ParallelAxis$1(c,createScaleByModel$1(p),[0,0],p.get("type"),d)),g=f.type==="category";f.onBand=g&&p.get("boundaryGap"),f.inverse=p.get("inverse"),p.axis=f,f.model=p,f.coordinateSystem=p.coordinateSystem=this},this)},a.prototype.update=function(n,r){this._updateAxesFromSeries(this._model,n)},a.prototype.containPoint=function(n){var r=this._makeLayoutInfo(),o=r.axisBase,l=r.layoutBase,u=r.pixelDimIndex,c=n[1-u],h=n[u];return c>=o&&c<=o+r.axisLength&&h>=l&&h<=l+r.layoutLength},a.prototype.getModel=function(){return this._model},a.prototype._updateAxesFromSeries=function(n,r){r.eachSeries(function(o){if(n.contains(o,r)){var l=o.getData();each$a(this.dimensions,function(u){var c=this._axesMap.get(u);c.scale.unionExtentFromData(l,l.mapDimension(u)),niceScaleExtent(c.scale,c.model)},this)}},this)},a.prototype.resize=function(n,r){this._rect=getLayoutRect(n.getBoxLayoutParams(),{width:r.getWidth(),height:r.getHeight()}),this._layoutAxes()},a.prototype.getRect=function(){return this._rect},a.prototype._makeLayoutInfo=function(){var n=this._model,r=this._rect,o=["x","y"],l=["width","height"],u=n.get("layout"),c=u==="horizontal"?0:1,h=r[l[c]],d=[0,h],p=this.dimensions.length,f=restrict(n.get("axisExpandWidth"),d),g=restrict(n.get("axisExpandCount")||0,[0,p]),y=n.get("axisExpandable")&&p>3&&p>g&&g>1&&f>0&&h>0,v=n.get("axisExpandWindow"),_;if(v)_=restrict(v[1]-v[0],d),v[1]=v[0]+_;else{_=restrict(f*(g-1),d);var x=n.get("axisExpandCenter")||mathFloor(p/2);v=[f*x-_/2],v[1]=v[0]+_}var S=(h-_)/(p-g);S<3&&(S=0);var T=[mathFloor(round(v[0]/f,1))+1,mathCeil(round(v[1]/f,1))-1],M=S/f*v[0];return{layout:u,pixelDimIndex:c,layoutBase:r[o[c]],layoutLength:h,axisBase:r[o[1-c]],axisLength:r[l[1-c]],axisExpandable:y,axisExpandWidth:f,axisCollapseWidth:S,axisExpandWindow:v,axisCount:p,winInnerIndices:T,axisExpandWindow0Pos:M}},a.prototype._layoutAxes=function(){var n=this._rect,r=this._axesMap,o=this.dimensions,l=this._makeLayoutInfo(),u=l.layout;r.each(function(c){var h=[0,l.axisLength],d=c.inverse?1:0;c.setExtent(h[d],h[1-d])}),each$a(o,function(c,h){var d=(l.axisExpandable?layoutAxisWithExpand:layoutAxisWithoutExpand)(h,l),p={horizontal:{x:d.position,y:l.axisLength},vertical:{x:0,y:d.position}},f={horizontal:PI$1/2,vertical:0},g=[p[u].x+n.x,p[u].y+n.y],y=f[u],v=create$1();rotate(v,v,y),translate(v,v,g),this._axesLayout[c]={position:g,rotation:y,transform:v,axisNameAvailableWidth:d.axisNameAvailableWidth,axisLabelShow:d.axisLabelShow,nameTruncateMaxWidth:d.nameTruncateMaxWidth,tickDirection:1,labelDirection:1}},this)},a.prototype.getAxis=function(n){return this._axesMap.get(n)},a.prototype.dataToPoint=function(n,r){return this.axisCoordToPoint(this._axesMap.get(r).dataToCoord(n),r)},a.prototype.eachActiveState=function(n,r,o,l){o==null&&(o=0),l==null&&(l=n.count());var u=this._axesMap,c=this.dimensions,h=[],d=[];each$f(c,function(S){h.push(n.mapDimension(S)),d.push(u.get(S).model)});for(var p=this.hasAxisBrushed(),f=o;f<l;f++){var g=void 0;if(!p)g="normal";else{g="active";for(var y=n.getValues(h,f),v=0,_=c.length;v<_;v++){var x=d[v].getActiveState(y[v]);if(x==="inactive"){g="inactive";break}}}r(g,f)}},a.prototype.hasAxisBrushed=function(){for(var n=this.dimensions,r=this._axesMap,o=!1,l=0,u=n.length;l<u;l++)r.get(n[l]).model.getActiveState()!=="normal"&&(o=!0);return o},a.prototype.axisCoordToPoint=function(n,r){var o=this._axesLayout[r];return applyTransform([n,0],o.transform)},a.prototype.getAxisLayout=function(n){return clone$4(this._axesLayout[n])},a.prototype.getSlidedAxisExpandWindow=function(n){var r=this._makeLayoutInfo(),o=r.pixelDimIndex,l=r.axisExpandWindow.slice(),u=l[1]-l[0],c=[0,r.axisExpandWidth*(r.axisCount-1)];if(!this.containPoint(n))return{behavior:"none",axisExpandWindow:l};var h=n[o]-r.layoutBase-r.axisExpandWindow0Pos,d,p="slide",f=r.axisCollapseWidth,g=this._model.get("axisExpandSlideTriggerArea"),y=g[0]!=null;if(f)y&&f&&h<u*g[0]?(p="jump",d=h-u*g[2]):y&&f&&h>u*(1-g[0])?(p="jump",d=h-u*(1-g[2])):(d=h-u*g[1])>=0&&(d=h-u*(1-g[1]))<=0&&(d=0),d*=r.axisExpandWidth/f,d?sliderMove(d,l,c,"all"):p="none";else{var v=l[1]-l[0],_=c[1]*h/v;l=[mathMax$2(0,_-v/2)],l[1]=mathMin$2(c[1],l[0]+v),l[0]=l[1]-v}return{axisExpandWindow:l,behavior:p}},a}();function restrict(a,n){return mathMin$2(mathMax$2(a,n[0]),n[1])}function layoutAxisWithoutExpand(a,n){var r=n.layoutLength/(n.axisCount-1);return{position:r*a,axisNameAvailableWidth:r,axisLabelShow:!0}}function layoutAxisWithExpand(a,n){var r=n.layoutLength,o=n.axisExpandWidth,l=n.axisCount,u=n.axisCollapseWidth,c=n.winInnerIndices,h,d=u,p=!1,f;return a<c[0]?(h=a*u,f=u):a<=c[1]?(h=n.axisExpandWindow0Pos+a*o-n.axisExpandWindow[0],d=o,p=!0):(h=r-(l-1-a)*u,f=u),{position:h,axisNameAvailableWidth:d,axisLabelShow:p,nameTruncateMaxWidth:f}}const Parallel$1=Parallel;function createParallelCoordSys(a,n){var r=[];return a.eachComponent("parallel",function(o,l){var u=new Parallel$1(o,a,n);u.name="parallel_"+l,u.resize(o,n),o.coordinateSystem=u,u.model=o,r.push(u)}),a.eachSeries(function(o){if(o.get("coordinateSystem")==="parallel"){var l=o.getReferringComponents("parallel",SINGLE_REFERRING).models[0];o.coordinateSystem=l.coordinateSystem}}),r}var parallelCoordSysCreator={create:createParallelCoordSys};const parallelCoordSysCreator$1=parallelCoordSysCreator;var ParallelAxisModel=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r.activeIntervals=[],r}return n.prototype.getAreaSelectStyle=function(){return makeStyleMapper([["fill","color"],["lineWidth","borderWidth"],["stroke","borderColor"],["width","width"],["opacity","opacity"]])(this.getModel("areaSelectStyle"))},n.prototype.setActiveIntervals=function(r){var o=this.activeIntervals=clone$4(r);if(o)for(var l=o.length-1;l>=0;l--)asc$2(o[l])},n.prototype.getActiveState=function(r){var o=this.activeIntervals;if(!o.length)return"normal";if(r==null||isNaN(+r))return"inactive";if(o.length===1){var l=o[0];if(l[0]<=r&&r<=l[1])return"active"}else for(var u=0,c=o.length;u<c;u++)if(o[u][0]<=r&&r<=o[u][1])return"active";return"inactive"},n}(ComponentModel$1);mixin(ParallelAxisModel,AxisModelCommonMixin);const ParallelAxisModel$1=ParallelAxisModel;var BRUSH_PANEL_GLOBAL=!0,mathMin$1=Math.min,mathMax$1=Math.max,mathPow=Math.pow,COVER_Z=1e4,UNSELECT_THRESHOLD=6,MIN_RESIZE_LINE_WIDTH=6,MUTEX_RESOURCE_KEY="globalPan",DIRECTION_MAP={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},CURSOR_MAP={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},DEFAULT_BRUSH_OPT={brushStyle:{lineWidth:2,stroke:"rgba(210,219,238,0.3)",fill:"#D2DBEE"},transformable:!0,brushMode:"single",removeOnClick:!1},baseUID=0,BrushController=function(a){__extends(n,a);function n(r){var o=a.call(this)||this;return o._track=[],o._covers=[],o._handlers={},assert(r),o._zr=r,o.group=new Group$4,o._uid="brushController_"+baseUID++,each$f(pointerHandlers,function(l,u){this._handlers[u]=bind$1(l,this)},o),o}return n.prototype.enableBrush=function(r){return assert(this._mounted),this._brushType&&this._doDisableBrush(),r.brushType&&this._doEnableBrush(r),this},n.prototype._doEnableBrush=function(r){var o=this._zr;this._enableGlobalPan||take(o,MUTEX_RESOURCE_KEY,this._uid),each$f(this._handlers,function(l,u){o.on(u,l)}),this._brushType=r.brushType,this._brushOption=merge(clone$4(DEFAULT_BRUSH_OPT),r,!0)},n.prototype._doDisableBrush=function(){var r=this._zr;release(r,MUTEX_RESOURCE_KEY,this._uid),each$f(this._handlers,function(o,l){r.off(l,o)}),this._brushType=this._brushOption=null},n.prototype.setPanels=function(r){if(r&&r.length){var o=this._panels={};each$f(r,function(l){o[l.panelId]=clone$4(l)})}else this._panels=null;return this},n.prototype.mount=function(r){r=r||{},this._mounted=!0,this._enableGlobalPan=r.enableGlobalPan;var o=this.group;return this._zr.add(o),o.attr({x:r.x||0,y:r.y||0,rotation:r.rotation||0,scaleX:r.scaleX||1,scaleY:r.scaleY||1}),this._transform=o.getLocalTransform(),this},n.prototype.updateCovers=function(r){assert(this._mounted),r=map$1(r,function(y){return merge(clone$4(DEFAULT_BRUSH_OPT),y,!0)});var o="\0-brush-index-",l=this._covers,u=this._covers=[],c=this,h=this._creatingCover;return new DataDiffer$1(l,r,p,d).add(f).update(f).remove(g).execute(),this;function d(y,v){return(y.id!=null?y.id:o+v)+"-"+y.brushType}function p(y,v){return d(y.__brushOption,v)}function f(y,v){var _=r[y];if(v!=null&&l[v]===h)u[y]=l[v];else{var x=u[y]=v!=null?(l[v].__brushOption=_,l[v]):endCreating(c,createCover(c,_));updateCoverAfterCreation(c,x)}}function g(y){l[y]!==h&&c.group.remove(l[y])}},n.prototype.unmount=function(){if(this._mounted)return this.enableBrush(!1),clearCovers(this),this._zr.remove(this.group),this._mounted=!1,this},n.prototype.dispose=function(){this.unmount(),this.off()},n}(Eventful$1);function createCover(a,n){var r=coverRenderers[n.brushType].createCover(a,n);return r.__brushOption=n,updateZ$1(r,n),a.group.add(r),r}function endCreating(a,n){var r=getCoverRenderer(n);return r.endCreating&&(r.endCreating(a,n),updateZ$1(n,n.__brushOption)),n}function updateCoverShape(a,n){var r=n.__brushOption;getCoverRenderer(n).updateCoverShape(a,n,r.range,r)}function updateZ$1(a,n){var r=n.z;r==null&&(r=COVER_Z),a.traverse(function(o){o.z=r,o.z2=r})}function updateCoverAfterCreation(a,n){getCoverRenderer(n).updateCommon(a,n),updateCoverShape(a,n)}function getCoverRenderer(a){return coverRenderers[a.__brushOption.brushType]}function getPanelByPoint(a,n,r){var o=a._panels;if(!o)return BRUSH_PANEL_GLOBAL;var l,u=a._transform;return each$f(o,function(c){c.isTargetByCursor(n,r,u)&&(l=c)}),l}function getPanelByCover(a,n){var r=a._panels;if(!r)return BRUSH_PANEL_GLOBAL;var o=n.__brushOption.panelId;return o!=null?r[o]:BRUSH_PANEL_GLOBAL}function clearCovers(a){var n=a._covers,r=n.length;return each$f(n,function(o){a.group.remove(o)},a),n.length=0,!!r}function trigger(a,n){var r=map$1(a._covers,function(o){var l=o.__brushOption,u=clone$4(l.range);return{brushType:l.brushType,panelId:l.panelId,range:u}});a.trigger("brush",{areas:r,isEnd:!!n.isEnd,removeOnClick:!!n.removeOnClick})}function shouldShowCover(a){var n=a._track;if(!n.length)return!1;var r=n[n.length-1],o=n[0],l=r[0]-o[0],u=r[1]-o[1],c=mathPow(l*l+u*u,.5);return c>UNSELECT_THRESHOLD}function getTrackEnds(a){var n=a.length-1;return n<0&&(n=0),[a[0],a[n]]}function createBaseRectCover(a,n,r,o){var l=new Group$4;return l.add(new Rect$3({name:"main",style:makeStyle(r),silent:!0,draggable:!0,cursor:"move",drift:curry$1(driftRect,a,n,l,["n","s","w","e"]),ondragend:curry$1(trigger,n,{isEnd:!0})})),each$f(o,function(u){l.add(new Rect$3({name:u.join(""),style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:curry$1(driftRect,a,n,l,u),ondragend:curry$1(trigger,n,{isEnd:!0})}))}),l}function updateBaseRect(a,n,r,o){var l=o.brushStyle.lineWidth||0,u=mathMax$1(l,MIN_RESIZE_LINE_WIDTH),c=r[0][0],h=r[1][0],d=c-l/2,p=h-l/2,f=r[0][1],g=r[1][1],y=f-u+l/2,v=g-u+l/2,_=f-c,x=g-h,S=_+l,T=x+l;updateRectShape(a,n,"main",c,h,_,x),o.transformable&&(updateRectShape(a,n,"w",d,p,u,T),updateRectShape(a,n,"e",y,p,u,T),updateRectShape(a,n,"n",d,p,S,u),updateRectShape(a,n,"s",d,v,S,u),updateRectShape(a,n,"nw",d,p,u,u),updateRectShape(a,n,"ne",y,p,u,u),updateRectShape(a,n,"sw",d,v,u,u),updateRectShape(a,n,"se",y,v,u,u))}function updateCommon$1(a,n){var r=n.__brushOption,o=r.transformable,l=n.childAt(0);l.useStyle(makeStyle(r)),l.attr({silent:!o,cursor:o?"move":"default"}),each$f([["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]],function(u){var c=n.childOfName(u.join("")),h=u.length===1?getGlobalDirection1(a,u[0]):getGlobalDirection2(a,u);c&&c.attr({silent:!o,invisible:!o,cursor:o?CURSOR_MAP[h]+"-resize":null})})}function updateRectShape(a,n,r,o,l,u,c){var h=n.childOfName(r);h&&h.setShape(pointsToRect(clipByPanel(a,n,[[o,l],[o+u,l+c]])))}function makeStyle(a){return defaults({strokeNoScale:!0},a.brushStyle)}function formatRectRange(a,n,r,o){var l=[mathMin$1(a,r),mathMin$1(n,o)],u=[mathMax$1(a,r),mathMax$1(n,o)];return[[l[0],u[0]],[l[1],u[1]]]}function getTransform(a){return getTransform$1(a.group)}function getGlobalDirection1(a,n){var r={w:"left",e:"right",n:"top",s:"bottom"},o={left:"w",right:"e",top:"n",bottom:"s"},l=transformDirection(r[n],getTransform(a));return o[l]}function getGlobalDirection2(a,n){var r=[getGlobalDirection1(a,n[0]),getGlobalDirection1(a,n[1])];return(r[0]==="e"||r[0]==="w")&&r.reverse(),r.join("")}function driftRect(a,n,r,o,l,u){var c=r.__brushOption,h=a.toRectRange(c.range),d=toLocalDelta(n,l,u);each$f(o,function(p){var f=DIRECTION_MAP[p];h[f[0]][f[1]]+=d[f[0]]}),c.range=a.fromRectRange(formatRectRange(h[0][0],h[1][0],h[0][1],h[1][1])),updateCoverAfterCreation(n,r),trigger(n,{isEnd:!1})}function driftPolygon(a,n,r,o){var l=n.__brushOption.range,u=toLocalDelta(a,r,o);each$f(l,function(c){c[0]+=u[0],c[1]+=u[1]}),updateCoverAfterCreation(a,n),trigger(a,{isEnd:!1})}function toLocalDelta(a,n,r){var o=a.group,l=o.transformCoordToLocal(n,r),u=o.transformCoordToLocal(0,0);return[l[0]-u[0],l[1]-u[1]]}function clipByPanel(a,n,r){var o=getPanelByCover(a,n);return o&&o!==BRUSH_PANEL_GLOBAL?o.clipPath(r,a._transform):clone$4(r)}function pointsToRect(a){var n=mathMin$1(a[0][0],a[1][0]),r=mathMin$1(a[0][1],a[1][1]),o=mathMax$1(a[0][0],a[1][0]),l=mathMax$1(a[0][1],a[1][1]);return{x:n,y:r,width:o-n,height:l-r}}function resetCursor(a,n,r){if(!(!a._brushType||isOutsideZrArea(a,n.offsetX,n.offsetY))){var o=a._zr,l=a._covers,u=getPanelByPoint(a,n,r);if(!a._dragging)for(var c=0;c<l.length;c++){var h=l[c].__brushOption;if(u&&(u===BRUSH_PANEL_GLOBAL||h.panelId===u.panelId)&&coverRenderers[h.brushType].contain(l[c],r[0],r[1]))return}u&&o.setCursorStyle("crosshair")}}function preventDefault(a){var n=a.event;n.preventDefault&&n.preventDefault()}function mainShapeContain(a,n,r){return a.childOfName("main").contain(n,r)}function updateCoverByMouse(a,n,r,o){var l=a._creatingCover,u=a._creatingPanel,c=a._brushOption,h;if(a._track.push(r.slice()),shouldShowCover(a)||l){if(u&&!l){c.brushMode==="single"&&clearCovers(a);var d=clone$4(c);d.brushType=determineBrushType(d.brushType,u),d.panelId=u===BRUSH_PANEL_GLOBAL?null:u.panelId,l=a._creatingCover=createCover(a,d),a._covers.push(l)}if(l){var p=coverRenderers[determineBrushType(a._brushType,u)],f=l.__brushOption;f.range=p.getCreatingRange(clipByPanel(a,l,a._track)),o&&(endCreating(a,l),p.updateCommon(a,l)),updateCoverShape(a,l),h={isEnd:o}}}else o&&c.brushMode==="single"&&c.removeOnClick&&getPanelByPoint(a,n,r)&&clearCovers(a)&&(h={isEnd:o,removeOnClick:!0});return h}function determineBrushType(a,n){return a==="auto"?(assert(n&&n.defaultBrushType,'MUST have defaultBrushType when brushType is "atuo"'),n.defaultBrushType):a}var pointerHandlers={mousedown:function(a){if(this._dragging)handleDragEnd(this,a);else if(!a.target||!a.target.draggable){preventDefault(a);var n=this.group.transformCoordToLocal(a.offsetX,a.offsetY);this._creatingCover=null;var r=this._creatingPanel=getPanelByPoint(this,a,n);r&&(this._dragging=!0,this._track=[n.slice()])}},mousemove:function(a){var n=a.offsetX,r=a.offsetY,o=this.group.transformCoordToLocal(n,r);if(resetCursor(this,a,o),this._dragging){preventDefault(a);var l=updateCoverByMouse(this,a,o,!1);l&&trigger(this,l)}},mouseup:function(a){handleDragEnd(this,a)}};function handleDragEnd(a,n){if(a._dragging){preventDefault(n);var r=n.offsetX,o=n.offsetY,l=a.group.transformCoordToLocal(r,o),u=updateCoverByMouse(a,n,l,!0);a._dragging=!1,a._track=[],a._creatingCover=null,u&&trigger(a,u)}}function isOutsideZrArea(a,n,r){var o=a._zr;return n<0||n>o.getWidth()||r<0||r>o.getHeight()}var coverRenderers={lineX:getLineRenderer(0),lineY:getLineRenderer(1),rect:{createCover:function(a,n){function r(o){return o}return createBaseRectCover({toRectRange:r,fromRectRange:r},a,n,[["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]])},getCreatingRange:function(a){var n=getTrackEnds(a);return formatRectRange(n[1][0],n[1][1],n[0][0],n[0][1])},updateCoverShape:function(a,n,r,o){updateBaseRect(a,n,r,o)},updateCommon:updateCommon$1,contain:mainShapeContain},polygon:{createCover:function(a,n){var r=new Group$4;return r.add(new Polyline$3({name:"main",style:makeStyle(n),silent:!0})),r},getCreatingRange:function(a){return a},endCreating:function(a,n){n.remove(n.childAt(0)),n.add(new Polygon$1({name:"main",draggable:!0,drift:curry$1(driftPolygon,a,n),ondragend:curry$1(trigger,a,{isEnd:!0})}))},updateCoverShape:function(a,n,r,o){n.childAt(0).setShape({points:clipByPanel(a,n,r)})},updateCommon:updateCommon$1,contain:mainShapeContain}};function getLineRenderer(a){return{createCover:function(n,r){return createBaseRectCover({toRectRange:function(o){var l=[o,[0,100]];return a&&l.reverse(),l},fromRectRange:function(o){return o[a]}},n,r,[[["w"],["e"]],[["n"],["s"]]][a])},getCreatingRange:function(n){var r=getTrackEnds(n),o=mathMin$1(r[0][a],r[1][a]),l=mathMax$1(r[0][a],r[1][a]);return[o,l]},updateCoverShape:function(n,r,o,l){var u,c=getPanelByCover(n,r);if(c!==BRUSH_PANEL_GLOBAL&&c.getLinearBrushOtherExtent)u=c.getLinearBrushOtherExtent(a);else{var h=n._zr;u=[0,[h.getWidth(),h.getHeight()][1-a]]}var d=[o,u];a&&d.reverse(),updateBaseRect(n,r,d,l)},updateCommon:updateCommon$1,contain:mainShapeContain}}const BrushController$1=BrushController;function makeRectPanelClipPath(a){return a=normalizeRect(a),function(n){return clipPointsByRect(n,a)}}function makeLinearBrushOtherExtent(a,n){return a=normalizeRect(a),function(r){var o=n!=null?n:r,l=o?a.width:a.height,u=o?a.x:a.y;return[u,u+(l||0)]}}function makeRectIsTargetByCursor(a,n,r){var o=normalizeRect(a);return function(l,u){return o.contain(u[0],u[1])&&!onIrrelevantElement(l,n,r)}}function normalizeRect(a){return BoundingRect$1.create(a)}var elementList$1=["axisLine","axisTickLabel","axisName"],ParallelAxisView=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.prototype.init=function(r,o){a.prototype.init.apply(this,arguments),(this._brushController=new BrushController$1(o.getZr())).on("brush",bind$1(this._onBrush,this))},n.prototype.render=function(r,o,l,u){if(!fromAxisAreaSelect(r,o,u)){this.axisModel=r,this.api=l,this.group.removeAll();var c=this._axisGroup;if(this._axisGroup=new Group$4,this.group.add(this._axisGroup),!!r.get("show")){var h=getCoordSysModel(r,o),d=h.coordinateSystem,p=r.getAreaSelectStyle(),f=p.width,g=r.axis.dim,y=d.getAxisLayout(g),v=extend({strokeContainThreshold:f},y),_=new AxisBuilder$1(r,v);each$f(elementList$1,_.add,_),this._axisGroup.add(_.getGroup()),this._refreshBrushController(v,p,r,h,f,l),groupTransition(c,this._axisGroup,r)}}},n.prototype._refreshBrushController=function(r,o,l,u,c,h){var d=l.axis.getExtent(),p=d[1]-d[0],f=Math.min(30,Math.abs(p)*.1),g=BoundingRect$1.create({x:d[0],y:-c/2,width:p,height:c});g.x-=f,g.width+=2*f,this._brushController.mount({enableGlobalPan:!0,rotation:r.rotation,x:r.position[0],y:r.position[1]}).setPanels([{panelId:"pl",clipPath:makeRectPanelClipPath(g),isTargetByCursor:makeRectIsTargetByCursor(g,h,u),getLinearBrushOtherExtent:makeLinearBrushOtherExtent(g,0)}]).enableBrush({brushType:"lineX",brushStyle:o,removeOnClick:!0}).updateCovers(getCoverInfoList(l))},n.prototype._onBrush=function(r){var o=r.areas,l=this.axisModel,u=l.axis,c=map$1(o,function(h){return[u.coordToData(h.range[0],!0),u.coordToData(h.range[1],!0)]});(!l.option.realtime===r.isEnd||r.removeOnClick)&&this.api.dispatchAction({type:"axisAreaSelect",parallelAxisId:l.id,intervals:c})},n.prototype.dispose=function(){this._brushController.dispose()},n.type="parallelAxis",n}(ComponentView$1);function fromAxisAreaSelect(a,n,r){return r&&r.type==="axisAreaSelect"&&n.findComponents({mainType:"parallelAxis",query:r})[0]===a}function getCoverInfoList(a){var n=a.axis;return map$1(a.activeIntervals,function(r){return{brushType:"lineX",panelId:"pl",range:[n.dataToCoord(r[0],!0),n.dataToCoord(r[1],!0)]}})}function getCoordSysModel(a,n){return n.getComponent("parallel",a.get("parallelIndex"))}const ParallelAxisView$1=ParallelAxisView;var actionInfo={type:"axisAreaSelect",event:"axisAreaSelected"};function installParallelActions(a){a.registerAction(actionInfo,function(n,r){r.eachComponent({mainType:"parallelAxis",query:n},function(o){o.axis.model.setActiveIntervals(n.intervals)})}),a.registerAction("parallelAxisExpand",function(n,r){r.eachComponent({mainType:"parallel",query:n},function(o){o.setAxisExpand(n)})})}var defaultAxisOption={type:"value",areaSelectStyle:{width:20,borderWidth:1,borderColor:"rgba(160,197,232)",color:"rgba(160,197,232)",opacity:.3},realtime:!0,z:10};function install$C(a){a.registerComponentView(ParallelView$1),a.registerComponentModel(ParallelModel$1),a.registerCoordinateSystem("parallel",parallelCoordSysCreator$1),a.registerPreprocessor(parallelPreprocessor),a.registerComponentModel(ParallelAxisModel$1),a.registerComponentView(ParallelAxisView$1),axisModelCreator(a,"parallel",ParallelAxisModel$1,defaultAxisOption),installParallelActions(a)}function install$B(a){use(install$C),a.registerChartView(ParallelView$3),a.registerSeriesModel(ParallelSeriesModel$1),a.registerVisual(a.PRIORITY.VISUAL.BRUSH,parallelVisual$1)}var SankeyPathShape=function(){function a(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.cpx2=0,this.cpy2=0,this.extent=0}return a}(),SankeyPath=function(a){__extends(n,a);function n(r){return a.call(this,r)||this}return n.prototype.getDefaultShape=function(){return new SankeyPathShape},n.prototype.buildPath=function(r,o){var l=o.extent;r.moveTo(o.x1,o.y1),r.bezierCurveTo(o.cpx1,o.cpy1,o.cpx2,o.cpy2,o.x2,o.y2),o.orient==="vertical"?(r.lineTo(o.x2+l,o.y2),r.bezierCurveTo(o.cpx2+l,o.cpy2,o.cpx1+l,o.cpy1,o.x1+l,o.y1)):(r.lineTo(o.x2,o.y2+l),r.bezierCurveTo(o.cpx2,o.cpy2+l,o.cpx1,o.cpy1+l,o.x1,o.y1+l)),r.closePath()},n.prototype.highlight=function(){enterEmphasis(this)},n.prototype.downplay=function(){leaveEmphasis(this)},n}(Path$1),SankeyView=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r._focusAdjacencyDisabled=!1,r}return n.prototype.render=function(r,o,l){var u=this,c=r.getGraph(),h=this.group,d=r.layoutInfo,p=d.width,f=d.height,g=r.getData(),y=r.getData("edge"),v=r.get("orient");this._model=r,h.removeAll(),h.x=d.x,h.y=d.y,c.eachEdge(function(_){var x=new SankeyPath,S=getECData(x);S.dataIndex=_.dataIndex,S.seriesIndex=r.seriesIndex,S.dataType="edge";var T=_.getModel(),M=T.getModel("lineStyle"),b=M.get("curveness"),A=_.node1.getLayout(),I=_.node1.getModel(),w=I.get("localX"),C=I.get("localY"),E=_.node2.getLayout(),P=_.node2.getModel(),D=P.get("localX"),L=P.get("localY"),R=_.getLayout(),O,N,V,B,G,F,z,H;x.shape.extent=Math.max(1,R.dy),x.shape.orient=v,v==="vertical"?(O=(w!=null?w*p:A.x)+R.sy,N=(C!=null?C*f:A.y)+A.dy,V=(D!=null?D*p:E.x)+R.ty,B=L!=null?L*f:E.y,G=O,F=N*(1-b)+B*b,z=V,H=N*b+B*(1-b)):(O=(w!=null?w*p:A.x)+A.dx,N=(C!=null?C*f:A.y)+R.sy,V=D!=null?D*p:E.x,B=(L!=null?L*f:E.y)+R.ty,G=O*(1-b)+V*b,F=N,z=O*b+V*(1-b),H=B),x.setShape({x1:O,y1:N,x2:V,y2:B,cpx1:G,cpy1:F,cpx2:z,cpy2:H}),x.useStyle(M.getItemStyle()),applyCurveStyle(x.style,v,_);var U=""+T.get("value"),Y=getLabelStatesModels(T,"edgeLabel");setLabelStyle(x,Y,{labelFetcher:{getFormattedLabel:function(K,te,ae,J,j,Q){return r.getFormattedLabel(K,te,"edge",J,retrieve3(j,Y.normal&&Y.normal.get("formatter"),U),Q)}},labelDataIndex:_.dataIndex,defaultText:U}),x.setTextConfig({position:"inside"});var Z=T.getModel("emphasis");setStatesStylesFromModel(x,T,"lineStyle",function(K){var te=K.getItemStyle();return applyCurveStyle(te,v,_),te}),h.add(x),y.setItemGraphicEl(_.dataIndex,x);var X=Z.get("focus");toggleHoverEmphasis(x,X==="adjacency"?_.getAdjacentDataIndices():X==="trajectory"?_.getTrajectoryDataIndices():X,Z.get("blurScope"),Z.get("disabled"))}),c.eachNode(function(_){var x=_.getLayout(),S=_.getModel(),T=S.get("localX"),M=S.get("localY"),b=S.getModel("emphasis"),A=S.get(["itemStyle","borderRadius"])||0,I=new Rect$3({shape:{x:T!=null?T*p:x.x,y:M!=null?M*f:x.y,width:x.dx,height:x.dy,r:A},style:S.getModel("itemStyle").getItemStyle(),z2:10});setLabelStyle(I,getLabelStatesModels(S),{labelFetcher:{getFormattedLabel:function(C,E){return r.getFormattedLabel(C,E,"node")}},labelDataIndex:_.dataIndex,defaultText:_.id}),I.disableLabelAnimation=!0,I.setStyle("fill",_.getVisual("color")),I.setStyle("decal",_.getVisual("style").decal),setStatesStylesFromModel(I,S),h.add(I),g.setItemGraphicEl(_.dataIndex,I),getECData(I).dataType="node";var w=b.get("focus");toggleHoverEmphasis(I,w==="adjacency"?_.getAdjacentDataIndices():w==="trajectory"?_.getTrajectoryDataIndices():w,b.get("blurScope"),b.get("disabled"))}),g.eachItemGraphicEl(function(_,x){var S=g.getItemModel(x);S.get("draggable")&&(_.drift=function(T,M){u._focusAdjacencyDisabled=!0,this.shape.x+=T,this.shape.y+=M,this.dirty(),l.dispatchAction({type:"dragNode",seriesId:r.id,dataIndex:g.getRawIndex(x),localX:this.shape.x/p,localY:this.shape.y/f})},_.ondragend=function(){u._focusAdjacencyDisabled=!1},_.draggable=!0,_.cursor="move")}),!this._data&&r.isAnimationEnabled()&&h.setClipPath(createGridClipShape$1(h.getBoundingRect(),r,function(){h.removeClipPath()})),this._data=r.getData()},n.prototype.dispose=function(){},n.type="sankey",n}(ChartView$1);function applyCurveStyle(a,n,r){switch(a.fill){case"source":a.fill=r.node1.getVisual("color"),a.decal=r.node1.getVisual("style").decal;break;case"target":a.fill=r.node2.getVisual("color"),a.decal=r.node2.getVisual("style").decal;break;case"gradient":var o=r.node1.getVisual("color"),l=r.node2.getVisual("color");isString(o)&&isString(l)&&(a.fill=new LinearGradient$1(0,0,+(n==="horizontal"),+(n==="vertical"),[{color:o,offset:0},{color:l,offset:1}]))}}function createGridClipShape$1(a,n,r){var o=new Rect$3({shape:{x:a.x-10,y:a.y-10,width:0,height:a.height+20}});return initProps(o,{shape:{width:a.width+20}},n,r),o}const SankeyView$1=SankeyView;var SankeySeriesModel=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.prototype.getInitialData=function(r,o){var l=r.edges||r.links||[],u=r.data||r.nodes||[],c=r.levels||[];this.levelModels=[];for(var h=this.levelModels,d=0;d<c.length;d++)if(c[d].depth!=null&&c[d].depth>=0)h[c[d].depth]=new Model$1(c[d],this,o);else throw new Error("levels[i].depth is mandatory and should be natural number");var p=createGraphFromNodeEdge(u,l,this,!0,f);return p.data;function f(g,y){g.wrapMethod("getItemModel",function(v,_){var x=v.parentModel,S=x.getData().getItemLayout(_);if(S){var T=S.depth,M=x.levelModels[T];M&&(v.parentModel=M)}return v}),y.wrapMethod("getItemModel",function(v,_){var x=v.parentModel,S=x.getGraph().getEdgeByIndex(_),T=S.node1.getLayout();if(T){var M=T.depth,b=x.levelModels[M];b&&(v.parentModel=b)}return v})}},n.prototype.setNodePosition=function(r,o){var l=this.option.data||this.option.nodes,u=l[r];u.localX=o[0],u.localY=o[1]},n.prototype.getGraph=function(){return this.getData().graph},n.prototype.getEdgeData=function(){return this.getGraph().edgeData},n.prototype.formatTooltip=function(r,o,l){function u(v){return isNaN(v)||v==null}if(l==="edge"){var c=this.getDataParams(r,l),h=c.data,d=c.value,p=h.source+" -- "+h.target;return createTooltipMarkup("nameValue",{name:p,value:d,noValue:u(d)})}else{var f=this.getGraph().getNodeByIndex(r),g=f.getLayout().value,y=this.getDataParams(r,l).data.name;return createTooltipMarkup("nameValue",{name:y!=null?y+"":null,value:g,noValue:u(g)})}},n.prototype.optionUpdated=function(){},n.prototype.getDataParams=function(r,o){var l=a.prototype.getDataParams.call(this,r,o);if(l.value==null&&o==="node"){var u=this.getGraph().getNodeByIndex(r),c=u.getLayout().value;l.value=c}return l},n.type="series.sankey",n.defaultOption={z:2,coordinateSystem:"view",left:"5%",top:"5%",right:"20%",bottom:"5%",orient:"horizontal",nodeWidth:20,nodeGap:8,draggable:!0,layoutIterations:32,label:{show:!0,position:"right",fontSize:12},edgeLabel:{show:!1,fontSize:12},levels:[],nodeAlign:"justify",lineStyle:{color:"#314656",opacity:.2,curveness:.5},emphasis:{label:{show:!0},lineStyle:{opacity:.5}},select:{itemStyle:{borderColor:"#212121"}},animationEasing:"linear",animationDuration:1e3},n}(SeriesModel$1);const SankeySeriesModel$1=SankeySeriesModel;function sankeyLayout(a,n){a.eachSeriesByType("sankey",function(r){var o=r.get("nodeWidth"),l=r.get("nodeGap"),u=getViewRect$1(r,n);r.layoutInfo=u;var c=u.width,h=u.height,d=r.getGraph(),p=d.nodes,f=d.edges;computeNodeValues(p);var g=filter(p,function(x){return x.getLayout().value===0}),y=g.length!==0?0:r.get("layoutIterations"),v=r.get("orient"),_=r.get("nodeAlign");layoutSankey(p,f,o,l,c,h,y,v,_)})}function getViewRect$1(a,n){return getLayoutRect(a.getBoxLayoutParams(),{width:n.getWidth(),height:n.getHeight()})}function layoutSankey(a,n,r,o,l,u,c,h,d){computeNodeBreadths(a,n,r,l,u,h,d),computeNodeDepths(a,n,u,l,o,c,h),computeEdgeDepths(a,h)}function computeNodeValues(a){each$f(a,function(n){var r=sum(n.outEdges,getEdgeValue),o=sum(n.inEdges,getEdgeValue),l=n.getValue()||0,u=Math.max(r,o,l);n.setLayout({value:u},!0)})}function computeNodeBreadths(a,n,r,o,l,u,c){for(var h=[],d=[],p=[],f=[],g=0,y=0;y<n.length;y++)h[y]=1;for(var y=0;y<a.length;y++)d[y]=a[y].inEdges.length,d[y]===0&&p.push(a[y]);for(var v=-1;p.length;){for(var _=0;_<p.length;_++){var x=p[_],S=x.hostGraph.data.getRawDataItem(x.dataIndex),T=S.depth!=null&&S.depth>=0;T&&S.depth>v&&(v=S.depth),x.setLayout({depth:T?S.depth:g},!0),u==="vertical"?x.setLayout({dy:r},!0):x.setLayout({dx:r},!0);for(var M=0;M<x.outEdges.length;M++){var b=x.outEdges[M],A=n.indexOf(b);h[A]=0;var I=b.node2,w=a.indexOf(I);--d[w]===0&&f.indexOf(I)<0&&f.push(I)}}++g,p=f,f=[]}for(var y=0;y<h.length;y++)if(h[y]===1)throw new Error("Sankey is a DAG, the original data has cycle!");var C=v>g-1?v:g-1;c&&c!=="left"&&adjustNodeWithNodeAlign(a,c,u,C);var E=u==="vertical"?(l-r)/C:(o-r)/C;scaleNodeBreadths(a,E,u)}function isNodeDepth(a){var n=a.hostGraph.data.getRawDataItem(a.dataIndex);return n.depth!=null&&n.depth>=0}function adjustNodeWithNodeAlign(a,n,r,o){if(n==="right"){for(var l=[],u=a,c=0;u.length;){for(var h=0;h<u.length;h++){var d=u[h];d.setLayout({skNodeHeight:c},!0);for(var p=0;p<d.inEdges.length;p++){var f=d.inEdges[p];l.indexOf(f.node1)<0&&l.push(f.node1)}}u=l,l=[],++c}each$f(a,function(g){isNodeDepth(g)||g.setLayout({depth:Math.max(0,o-g.getLayout().skNodeHeight)},!0)})}else n==="justify"&&moveSinksRight(a,o)}function moveSinksRight(a,n){each$f(a,function(r){!isNodeDepth(r)&&!r.outEdges.length&&r.setLayout({depth:n},!0)})}function scaleNodeBreadths(a,n,r){each$f(a,function(o){var l=o.getLayout().depth*n;r==="vertical"?o.setLayout({y:l},!0):o.setLayout({x:l},!0)})}function computeNodeDepths(a,n,r,o,l,u,c){var h=prepareNodesByBreadth(a,c);initializeNodeDepth(h,n,r,o,l,c),resolveCollisions(h,l,r,o,c);for(var d=1;u>0;u--)d*=.99,relaxRightToLeft(h,d,c),resolveCollisions(h,l,r,o,c),relaxLeftToRight(h,d,c),resolveCollisions(h,l,r,o,c)}function prepareNodesByBreadth(a,n){var r=[],o=n==="vertical"?"y":"x",l=groupData(a,function(u){return u.getLayout()[o]});return l.keys.sort(function(u,c){return u-c}),each$f(l.keys,function(u){r.push(l.buckets.get(u))}),r}function initializeNodeDepth(a,n,r,o,l,u){var c=1/0;each$f(a,function(h){var d=h.length,p=0;each$f(h,function(g){p+=g.getLayout().value});var f=u==="vertical"?(o-(d-1)*l)/p:(r-(d-1)*l)/p;f<c&&(c=f)}),each$f(a,function(h){each$f(h,function(d,p){var f=d.getLayout().value*c;u==="vertical"?(d.setLayout({x:p},!0),d.setLayout({dx:f},!0)):(d.setLayout({y:p},!0),d.setLayout({dy:f},!0))})}),each$f(n,function(h){var d=+h.getValue()*c;h.setLayout({dy:d},!0)})}function resolveCollisions(a,n,r,o,l){var u=l==="vertical"?"x":"y";each$f(a,function(c){c.sort(function(x,S){return x.getLayout()[u]-S.getLayout()[u]});for(var h,d,p,f=0,g=c.length,y=l==="vertical"?"dx":"dy",v=0;v<g;v++)d=c[v],p=f-d.getLayout()[u],p>0&&(h=d.getLayout()[u]+p,l==="vertical"?d.setLayout({x:h},!0):d.setLayout({y:h},!0)),f=d.getLayout()[u]+d.getLayout()[y]+n;var _=l==="vertical"?o:r;if(p=f-n-_,p>0){h=d.getLayout()[u]-p,l==="vertical"?d.setLayout({x:h},!0):d.setLayout({y:h},!0),f=h;for(var v=g-2;v>=0;--v)d=c[v],p=d.getLayout()[u]+d.getLayout()[y]+n-f,p>0&&(h=d.getLayout()[u]-p,l==="vertical"?d.setLayout({x:h},!0):d.setLayout({y:h},!0)),f=d.getLayout()[u]}})}function relaxRightToLeft(a,n,r){each$f(a.slice().reverse(),function(o){each$f(o,function(l){if(l.outEdges.length){var u=sum(l.outEdges,weightedTarget,r)/sum(l.outEdges,getEdgeValue);if(isNaN(u)){var c=l.outEdges.length;u=c?sum(l.outEdges,centerTarget,r)/c:0}if(r==="vertical"){var h=l.getLayout().x+(u-center(l,r))*n;l.setLayout({x:h},!0)}else{var d=l.getLayout().y+(u-center(l,r))*n;l.setLayout({y:d},!0)}}})})}function weightedTarget(a,n){return center(a.node2,n)*a.getValue()}function centerTarget(a,n){return center(a.node2,n)}function weightedSource(a,n){return center(a.node1,n)*a.getValue()}function centerSource(a,n){return center(a.node1,n)}function center(a,n){return n==="vertical"?a.getLayout().x+a.getLayout().dx/2:a.getLayout().y+a.getLayout().dy/2}function getEdgeValue(a){return a.getValue()}function sum(a,n,r){for(var o=0,l=a.length,u=-1;++u<l;){var c=+n(a[u],r);isNaN(c)||(o+=c)}return o}function relaxLeftToRight(a,n,r){each$f(a,function(o){each$f(o,function(l){if(l.inEdges.length){var u=sum(l.inEdges,weightedSource,r)/sum(l.inEdges,getEdgeValue);if(isNaN(u)){var c=l.inEdges.length;u=c?sum(l.inEdges,centerSource,r)/c:0}if(r==="vertical"){var h=l.getLayout().x+(u-center(l,r))*n;l.setLayout({x:h},!0)}else{var d=l.getLayout().y+(u-center(l,r))*n;l.setLayout({y:d},!0)}}})})}function computeEdgeDepths(a,n){var r=n==="vertical"?"x":"y";each$f(a,function(o){o.outEdges.sort(function(l,u){return l.node2.getLayout()[r]-u.node2.getLayout()[r]}),o.inEdges.sort(function(l,u){return l.node1.getLayout()[r]-u.node1.getLayout()[r]})}),each$f(a,function(o){var l=0,u=0;each$f(o.outEdges,function(c){c.setLayout({sy:l},!0),l+=c.getLayout().dy}),each$f(o.inEdges,function(c){c.setLayout({ty:u},!0),u+=c.getLayout().dy})})}function sankeyVisual(a){a.eachSeriesByType("sankey",function(n){var r=n.getGraph(),o=r.nodes,l=r.edges;if(o.length){var u=1/0,c=-1/0;each$f(o,function(h){var d=h.getLayout().value;d<u&&(u=d),d>c&&(c=d)}),each$f(o,function(h){var d=new VisualMapping$1({type:"color",mappingMethod:"linear",dataExtent:[u,c],visual:n.get("color")}),p=d.mapValueToVisual(h.getLayout().value),f=h.getModel().get(["itemStyle","color"]);f!=null?(h.setVisual("color",f),h.setVisual("style",{fill:f})):(h.setVisual("color",p),h.setVisual("style",{fill:p}))})}l.length&&each$f(l,function(h){var d=h.getModel().get("lineStyle");h.setVisual("style",d)})})}function install$A(a){a.registerChartView(SankeyView$1),a.registerSeriesModel(SankeySeriesModel$1),a.registerLayout(sankeyLayout),a.registerVisual(sankeyVisual),a.registerAction({type:"dragNode",event:"dragnode",update:"update"},function(n,r){r.eachComponent({mainType:"series",subType:"sankey",query:n},function(o){o.setNodePosition(n.dataIndex,[n.localX,n.localY])})})}var WhiskerBoxCommonMixin=function(){function a(){}return a.prototype._hasEncodeRule=function(n){var r=this.getEncode();return r&&r.get(n)!=null},a.prototype.getInitialData=function(n,r){var o,l=r.getComponent("xAxis",this.get("xAxisIndex")),u=r.getComponent("yAxis",this.get("yAxisIndex")),c=l.get("type"),h=u.get("type"),d;c==="category"?(n.layout="horizontal",o=l.getOrdinalMeta(),d=!this._hasEncodeRule("x")):h==="category"?(n.layout="vertical",o=u.getOrdinalMeta(),d=!this._hasEncodeRule("y")):n.layout=n.layout||"horizontal";var p=["x","y"],f=n.layout==="horizontal"?0:1,g=this._baseAxisDim=p[f],y=p[1-f],v=[l,u],_=v[f].get("type"),x=v[1-f].get("type"),S=n.data;if(S&&d){var T=[];each$f(S,function(A,I){var w;isArray$1(A)?(w=A.slice(),A.unshift(I)):isArray$1(A.value)?(w=extend({},A),w.value=w.value.slice(),A.value.unshift(I)):w=A,T.push(w)}),n.data=T}var M=this.defaultValueDimensions,b=[{name:g,type:getDimensionTypeByAxis(_),ordinalMeta:o,otherDims:{tooltip:!1,itemName:0},dimsDef:["base"]},{name:y,type:getDimensionTypeByAxis(x),dimsDef:M.slice()}];return createSeriesDataSimply(this,{coordDimensions:b,dimensionsCount:M.length+1,encodeDefaulter:curry$1(makeSeriesEncodeForAxisCoordSys,b,this)})},a.prototype.getBaseAxis=function(){var n=this._baseAxisDim;return this.ecModel.getComponent(n+"Axis",this.get(n+"AxisIndex")).axis},a}(),BoxplotSeriesModel=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r.defaultValueDimensions=[{name:"min",defaultTooltip:!0},{name:"Q1",defaultTooltip:!0},{name:"median",defaultTooltip:!0},{name:"Q3",defaultTooltip:!0},{name:"max",defaultTooltip:!0}],r.visualDrawType="stroke",r}return n.type="series.boxplot",n.dependencies=["xAxis","yAxis","grid"],n.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,boxWidth:[7,50],itemStyle:{color:"#fff",borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2,shadowBlur:5,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}},animationDuration:800},n}(SeriesModel$1);mixin(BoxplotSeriesModel,WhiskerBoxCommonMixin,!0);const BoxplotSeriesModel$1=BoxplotSeriesModel;var BoxplotView=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.prototype.render=function(r,o,l){var u=r.getData(),c=this.group,h=this._data;this._data||c.removeAll();var d=r.get("layout")==="horizontal"?1:0;u.diff(h).add(function(p){if(u.hasValue(p)){var f=u.getItemLayout(p),g=createNormalBox$1(f,u,p,d,!0);u.setItemGraphicEl(p,g),c.add(g)}}).update(function(p,f){var g=h.getItemGraphicEl(f);if(!u.hasValue(p)){c.remove(g);return}var y=u.getItemLayout(p);g?(saveOldStyle(g),updateNormalBoxData(y,g,u,p)):g=createNormalBox$1(y,u,p,d),c.add(g),u.setItemGraphicEl(p,g)}).remove(function(p){var f=h.getItemGraphicEl(p);f&&c.remove(f)}).execute(),this._data=u},n.prototype.remove=function(r){var o=this.group,l=this._data;this._data=null,l&&l.eachItemGraphicEl(function(u){u&&o.remove(u)})},n.type="boxplot",n}(ChartView$1),BoxPathShape=function(){function a(){}return a}(),BoxPath=function(a){__extends(n,a);function n(r){var o=a.call(this,r)||this;return o.type="boxplotBoxPath",o}return n.prototype.getDefaultShape=function(){return new BoxPathShape},n.prototype.buildPath=function(r,o){var l=o.points,u=0;for(r.moveTo(l[u][0],l[u][1]),u++;u<4;u++)r.lineTo(l[u][0],l[u][1]);for(r.closePath();u<l.length;u++)r.moveTo(l[u][0],l[u][1]),u++,r.lineTo(l[u][0],l[u][1])},n}(Path$1);function createNormalBox$1(a,n,r,o,l){var u=a.ends,c=new BoxPath({shape:{points:l?transInit$1(u,o,a):u}});return updateNormalBoxData(a,c,n,r,l),c}function updateNormalBoxData(a,n,r,o,l){var u=r.hostModel,c=graphic$1[l?"initProps":"updateProps"];c(n,{shape:{points:a.ends}},u,o),n.useStyle(r.getItemVisual(o,"style")),n.style.strokeNoScale=!0,n.z2=100;var h=r.getItemModel(o),d=h.getModel("emphasis");setStatesStylesFromModel(n,h),toggleHoverEmphasis(n,d.get("focus"),d.get("blurScope"),d.get("disabled"))}function transInit$1(a,n,r){return map$1(a,function(o){return o=o.slice(),o[n]=r.initBaseline,o})}const BoxplotView$1=BoxplotView;var each$9=each$f;function boxplotLayout(a){var n=groupSeriesByAxis(a);each$9(n,function(r){var o=r.seriesModels;!o.length||(calculateBase(r),each$9(o,function(l,u){layoutSingleSeries(l,r.boxOffsetList[u],r.boxWidthList[u])}))})}function groupSeriesByAxis(a){var n=[],r=[];return a.eachSeriesByType("boxplot",function(o){var l=o.getBaseAxis(),u=indexOf(r,l);u<0&&(u=r.length,r[u]=l,n[u]={axis:l,seriesModels:[]}),n[u].seriesModels.push(o)}),n}function calculateBase(a){var n=a.axis,r=a.seriesModels,o=r.length,l=a.boxWidthList=[],u=a.boxOffsetList=[],c=[],h;if(n.type==="category")h=n.getBandWidth();else{var d=0;each$9(r,function(_){d=Math.max(d,_.getData().count())});var p=n.getExtent();h=Math.abs(p[1]-p[0])/d}each$9(r,function(_){var x=_.get("boxWidth");isArray$1(x)||(x=[x,x]),c.push([parsePercent(x[0],h)||0,parsePercent(x[1],h)||0])});var f=h*.8-2,g=f/o*.3,y=(f-g*(o-1))/o,v=y/2-f/2;each$9(r,function(_,x){u.push(v),v+=g+y,l.push(Math.min(Math.max(y,c[x][0]),c[x][1]))})}function layoutSingleSeries(a,n,r){var o=a.coordinateSystem,l=a.getData(),u=r/2,c=a.get("layout")==="horizontal"?0:1,h=1-c,d=["x","y"],p=l.mapDimension(d[c]),f=l.mapDimensionsAll(d[h]);if(p==null||f.length<5)return;for(var g=0;g<l.count();g++){var y=l.get(p,g),v=b(y,f[2],g),_=b(y,f[0],g),x=b(y,f[1],g),S=b(y,f[3],g),T=b(y,f[4],g),M=[];A(M,x,!1),A(M,S,!0),M.push(_,x,T,S),I(M,_),I(M,T),I(M,v),l.setItemLayout(g,{initBaseline:v[h],ends:M})}function b(w,C,E){var P=l.get(C,E),D=[];D[c]=w,D[h]=P;var L;return isNaN(w)||isNaN(P)?L=[NaN,NaN]:(L=o.dataToPoint(D),L[c]+=n),L}function A(w,C,E){var P=C.slice(),D=C.slice();P[c]+=u,D[c]-=u,E?w.push(P,D):w.push(D,P)}function I(w,C){var E=C.slice(),P=C.slice();E[c]-=u,P[c]+=u,w.push(E,P)}}function prepareBoxplotData(a,n){n=n||{};for(var r=[],o=[],l=n.boundIQR,u=l==="none"||l===0,c=0;c<a.length;c++){var h=asc$2(a[c].slice()),d=quantile(h,.25),p=quantile(h,.5),f=quantile(h,.75),g=h[0],y=h[h.length-1],v=(l==null?1.5:l)*(f-d),_=u?g:Math.max(g,d-v),x=u?y:Math.min(y,f+v),S=n.itemNameFormatter,T=isFunction(S)?S({value:c}):isString(S)?S.replace("{value}",c+""):c+"";r.push([T,_,d,p,f,x]);for(var M=0;M<h.length;M++){var b=h[M];if(b<_||b>x){var A=[T,b];o.push(A)}}}return{boxData:r,outliers:o}}var boxplotTransform={type:"echarts:boxplot",transform:function(a){var n=a.upstream;if(n.sourceFormat!==SOURCE_FORMAT_ARRAY_ROWS){var r="";r=makePrintable("source data is not applicable for this boxplot transform. Expect number[][]."),throwError(r)}var o=prepareBoxplotData(n.getRawData(),a.config);return[{dimensions:["ItemName","Low","Q1","Q2","Q3","High"],data:o.boxData},{data:o.outliers}]}};function install$z(a){a.registerSeriesModel(BoxplotSeriesModel$1),a.registerChartView(BoxplotView$1),a.registerLayout(boxplotLayout),a.registerTransform(boxplotTransform)}var positiveBorderColorQuery=["itemStyle","borderColor"],negativeBorderColorQuery=["itemStyle","borderColor0"],dojiBorderColorQuery=["itemStyle","borderColorDoji"],positiveColorQuery=["itemStyle","color"],negativeColorQuery=["itemStyle","color0"];function getColor(a,n){return n.get(a>0?positiveColorQuery:negativeColorQuery)}function getBorderColor(a,n){return n.get(a===0?dojiBorderColorQuery:a>0?positiveBorderColorQuery:negativeBorderColorQuery)}var candlestickVisual={seriesType:"candlestick",plan:createRenderPlanner(),performRawSeries:!0,reset:function(a,n){if(!n.isSeriesFiltered(a)){var r=a.pipelineContext.large;return!r&&{progress:function(o,l){for(var u;(u=o.next())!=null;){var c=l.getItemModel(u),h=l.getItemLayout(u).sign,d=c.getItemStyle();d.fill=getColor(h,c),d.stroke=getBorderColor(h,c)||d.fill;var p=l.ensureUniqueItemVisual(u,"style");extend(p,d)}}}}}};const candlestickVisual$1=candlestickVisual;var SKIP_PROPS=["color","borderColor"],CandlestickView=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.prototype.render=function(r,o,l){this.group.removeClipPath(),this._progressiveEls=null,this._updateDrawMode(r),this._isLargeDraw?this._renderLarge(r):this._renderNormal(r)},n.prototype.incrementalPrepareRender=function(r,o,l){this._clear(),this._updateDrawMode(r)},n.prototype.incrementalRender=function(r,o,l,u){this._progressiveEls=[],this._isLargeDraw?this._incrementalRenderLarge(r,o):this._incrementalRenderNormal(r,o)},n.prototype.eachRendered=function(r){traverseElements(this._progressiveEls||this.group,r)},n.prototype._updateDrawMode=function(r){var o=r.pipelineContext.large;(this._isLargeDraw==null||o!==this._isLargeDraw)&&(this._isLargeDraw=o,this._clear())},n.prototype._renderNormal=function(r){var o=r.getData(),l=this._data,u=this.group,c=o.getLayout("isSimpleBox"),h=r.get("clip",!0),d=r.coordinateSystem,p=d.getArea&&d.getArea();this._data||u.removeAll(),o.diff(l).add(function(f){if(o.hasValue(f)){var g=o.getItemLayout(f);if(h&&isNormalBoxClipped(p,g))return;var y=createNormalBox(g,f,!0);initProps(y,{shape:{points:g.ends}},r,f),setBoxCommon(y,o,f,c),u.add(y),o.setItemGraphicEl(f,y)}}).update(function(f,g){var y=l.getItemGraphicEl(g);if(!o.hasValue(f)){u.remove(y);return}var v=o.getItemLayout(f);if(h&&isNormalBoxClipped(p,v)){u.remove(y);return}y?(updateProps$1(y,{shape:{points:v.ends}},r,f),saveOldStyle(y)):y=createNormalBox(v),setBoxCommon(y,o,f,c),u.add(y),o.setItemGraphicEl(f,y)}).remove(function(f){var g=l.getItemGraphicEl(f);g&&u.remove(g)}).execute(),this._data=o},n.prototype._renderLarge=function(r){this._clear(),createLarge(r,this.group);var o=r.get("clip",!0)?createClipPath(r.coordinateSystem,!1,r):null;o?this.group.setClipPath(o):this.group.removeClipPath()},n.prototype._incrementalRenderNormal=function(r,o){for(var l=o.getData(),u=l.getLayout("isSimpleBox"),c;(c=r.next())!=null;){var h=l.getItemLayout(c),d=createNormalBox(h);setBoxCommon(d,l,c,u),d.incremental=!0,this.group.add(d),this._progressiveEls.push(d)}},n.prototype._incrementalRenderLarge=function(r,o){createLarge(o,this.group,this._progressiveEls,!0)},n.prototype.remove=function(r){this._clear()},n.prototype._clear=function(){this.group.removeAll(),this._data=null},n.type="candlestick",n}(ChartView$1),NormalBoxPathShape=function(){function a(){}return a}(),NormalBoxPath=function(a){__extends(n,a);function n(r){var o=a.call(this,r)||this;return o.type="normalCandlestickBox",o}return n.prototype.getDefaultShape=function(){return new NormalBoxPathShape},n.prototype.buildPath=function(r,o){var l=o.points;this.__simpleBox?(r.moveTo(l[4][0],l[4][1]),r.lineTo(l[6][0],l[6][1])):(r.moveTo(l[0][0],l[0][1]),r.lineTo(l[1][0],l[1][1]),r.lineTo(l[2][0],l[2][1]),r.lineTo(l[3][0],l[3][1]),r.closePath(),r.moveTo(l[4][0],l[4][1]),r.lineTo(l[5][0],l[5][1]),r.moveTo(l[6][0],l[6][1]),r.lineTo(l[7][0],l[7][1]))},n}(Path$1);function createNormalBox(a,n,r){var o=a.ends;return new NormalBoxPath({shape:{points:r?transInit(o,a):o},z2:100})}function isNormalBoxClipped(a,n){for(var r=!0,o=0;o<n.ends.length;o++)if(a.contain(n.ends[o][0],n.ends[o][1])){r=!1;break}return r}function setBoxCommon(a,n,r,o){var l=n.getItemModel(r);a.useStyle(n.getItemVisual(r,"style")),a.style.strokeNoScale=!0,a.__simpleBox=o,setStatesStylesFromModel(a,l);var u=n.getItemLayout(r).sign;each$f(a.states,function(h,d){var p=l.getModel(d),f=getColor(u,p),g=getBorderColor(u,p)||f,y=h.style||(h.style={});f&&(y.fill=f),g&&(y.stroke=g)});var c=l.getModel("emphasis");toggleHoverEmphasis(a,c.get("focus"),c.get("blurScope"),c.get("disabled"))}function transInit(a,n){return map$1(a,function(r){return r=r.slice(),r[1]=n.initBaseline,r})}var LargeBoxPathShape=function(){function a(){}return a}(),LargeBoxPath=function(a){__extends(n,a);function n(r){var o=a.call(this,r)||this;return o.type="largeCandlestickBox",o}return n.prototype.getDefaultShape=function(){return new LargeBoxPathShape},n.prototype.buildPath=function(r,o){for(var l=o.points,u=0;u<l.length;)if(this.__sign===l[u++]){var c=l[u++];r.moveTo(c,l[u++]),r.lineTo(c,l[u++])}else u+=3},n}(Path$1);function createLarge(a,n,r,o){var l=a.getData(),u=l.getLayout("largePoints"),c=new LargeBoxPath({shape:{points:u},__sign:1,ignoreCoarsePointer:!0});n.add(c);var h=new LargeBoxPath({shape:{points:u},__sign:-1,ignoreCoarsePointer:!0});n.add(h);var d=new LargeBoxPath({shape:{points:u},__sign:0,ignoreCoarsePointer:!0});n.add(d),setLargeStyle(1,c,a),setLargeStyle(-1,h,a),setLargeStyle(0,d,a),o&&(c.incremental=!0,h.incremental=!0),r&&r.push(c,h)}function setLargeStyle(a,n,r,o){var l=getBorderColor(a,r)||getColor(a,r),u=r.getModel("itemStyle").getItemStyle(SKIP_PROPS);n.useStyle(u),n.style.fill=null,n.style.stroke=l}const CandlestickView$1=CandlestickView;var CandlestickSeriesModel=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r.defaultValueDimensions=[{name:"open",defaultTooltip:!0},{name:"close",defaultTooltip:!0},{name:"lowest",defaultTooltip:!0},{name:"highest",defaultTooltip:!0}],r}return n.prototype.getShadowDim=function(){return"open"},n.prototype.brushSelector=function(r,o,l){var u=o.getItemLayout(r);return u&&l.rect(u.brushRect)},n.type="series.candlestick",n.dependencies=["xAxis","yAxis","grid"],n.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,clip:!0,itemStyle:{color:"#eb5454",color0:"#47b262",borderColor:"#eb5454",borderColor0:"#47b262",borderColorDoji:null,borderWidth:1},emphasis:{itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:!0,largeThreshold:600,progressive:3e3,progressiveThreshold:1e4,progressiveChunkMode:"mod",animationEasing:"linear",animationDuration:300},n}(SeriesModel$1);mixin(CandlestickSeriesModel,WhiskerBoxCommonMixin,!0);const CandlestickSeriesModel$1=CandlestickSeriesModel;function candlestickPreprocessor(a){!a||!isArray$1(a.series)||each$f(a.series,function(n){isObject$3(n)&&n.type==="k"&&(n.type="candlestick")})}var candlestickLayout={seriesType:"candlestick",plan:createRenderPlanner(),reset:function(a){var n=a.coordinateSystem,r=a.getData(),o=calculateCandleWidth(a,r),l=0,u=1,c=["x","y"],h=r.getDimensionIndex(r.mapDimension(c[l])),d=map$1(r.mapDimensionsAll(c[u]),r.getDimensionIndex,r),p=d[0],f=d[1],g=d[2],y=d[3];if(r.setLayout({candleWidth:o,isSimpleBox:o<=1.3}),h<0||d.length<4)return;return{progress:a.pipelineContext.large?_:v};function v(x,S){for(var T,M=S.getStore();(T=x.next())!=null;){var b=M.get(h,T),A=M.get(p,T),I=M.get(f,T),w=M.get(g,T),C=M.get(y,T),E=Math.min(A,I),P=Math.max(A,I),D=G(E,b),L=G(P,b),R=G(w,b),O=G(C,b),N=[];F(N,L,0),F(N,D,1),N.push(H(O),H(L),H(R),H(D));var V=S.getItemModel(T),B=!!V.get(["itemStyle","borderColorDoji"]);S.setItemLayout(T,{sign:getSign(M,T,A,I,f,B),initBaseline:A>I?L[u]:D[u],ends:N,brushRect:z(w,C,b)})}function G(U,Y){var Z=[];return Z[l]=Y,Z[u]=U,isNaN(Y)||isNaN(U)?[NaN,NaN]:n.dataToPoint(Z)}function F(U,Y,Z){var X=Y.slice(),K=Y.slice();X[l]=subPixelOptimize(X[l]+o/2,1,!1),K[l]=subPixelOptimize(K[l]-o/2,1,!0),Z?U.push(X,K):U.push(K,X)}function z(U,Y,Z){var X=G(U,Z),K=G(Y,Z);return X[l]-=o/2,K[l]-=o/2,{x:X[0],y:X[1],width:o,height:K[1]-X[1]}}function H(U){return U[l]=subPixelOptimize(U[l],1),U}}function _(x,S){for(var T=createFloat32Array(x.count*4),M=0,b,A=[],I=[],w,C=S.getStore(),E=!!a.get(["itemStyle","borderColorDoji"]);(w=x.next())!=null;){var P=C.get(h,w),D=C.get(p,w),L=C.get(f,w),R=C.get(g,w),O=C.get(y,w);if(isNaN(P)||isNaN(R)||isNaN(O)){T[M++]=NaN,M+=3;continue}T[M++]=getSign(C,w,D,L,f,E),A[l]=P,A[u]=R,b=n.dataToPoint(A,null,I),T[M++]=b?b[0]:NaN,T[M++]=b?b[1]:NaN,A[u]=O,b=n.dataToPoint(A,null,I),T[M++]=b?b[1]:NaN}S.setLayout("largePoints",T)}}};function getSign(a,n,r,o,l,u){var c;return r>o?c=-1:r<o?c=1:c=u?0:n>0?a.get(l,n-1)<=o?1:-1:1,c}function calculateCandleWidth(a,n){var r=a.getBaseAxis(),o,l=r.type==="category"?r.getBandWidth():(o=r.getExtent(),Math.abs(o[1]-o[0])/n.count()),u=parsePercent(retrieve2(a.get("barMaxWidth"),l),l),c=parsePercent(retrieve2(a.get("barMinWidth"),1),l),h=a.get("barWidth");return h!=null?parsePercent(h,l):Math.max(Math.min(l/2,u),c)}const candlestickLayout$1=candlestickLayout;function install$y(a){a.registerChartView(CandlestickView$1),a.registerSeriesModel(CandlestickSeriesModel$1),a.registerPreprocessor(candlestickPreprocessor),a.registerVisual(candlestickVisual$1),a.registerLayout(candlestickLayout$1)}function updateRipplePath(a,n){var r=n.rippleEffectColor||n.color;a.eachChild(function(o){o.attr({z:n.z,zlevel:n.zlevel,style:{stroke:n.brushType==="stroke"?r:null,fill:n.brushType==="fill"?r:null}})})}var EffectSymbol=function(a){__extends(n,a);function n(r,o){var l=a.call(this)||this,u=new SymbolClz(r,o),c=new Group$4;return l.add(u),l.add(c),l.updateData(r,o),l}return n.prototype.stopEffectAnimation=function(){this.childAt(1).removeAll()},n.prototype.startEffectAnimation=function(r){for(var o=r.symbolType,l=r.color,u=r.rippleNumber,c=this.childAt(1),h=0;h<u;h++){var d=createSymbol$1(o,-1,-1,2,2,l);d.attr({style:{strokeNoScale:!0},z2:99,silent:!0,scaleX:.5,scaleY:.5});var p=-h/u*r.period+r.effectOffset;d.animate("",!0).when(r.period,{scaleX:r.rippleScale/2,scaleY:r.rippleScale/2}).delay(p).start(),d.animateStyle(!0).when(r.period,{opacity:0}).delay(p).start(),c.add(d)}updateRipplePath(c,r)},n.prototype.updateEffectAnimation=function(r){for(var o=this._effectCfg,l=this.childAt(1),u=["symbolType","period","rippleScale","rippleNumber"],c=0;c<u.length;c++){var h=u[c];if(o[h]!==r[h]){this.stopEffectAnimation(),this.startEffectAnimation(r);return}}updateRipplePath(l,r)},n.prototype.highlight=function(){enterEmphasis(this)},n.prototype.downplay=function(){leaveEmphasis(this)},n.prototype.getSymbolType=function(){var r=this.childAt(0);return r&&r.getSymbolType()},n.prototype.updateData=function(r,o){var l=this,u=r.hostModel;this.childAt(0).updateData(r,o);var c=this.childAt(1),h=r.getItemModel(o),d=r.getItemVisual(o,"symbol"),p=normalizeSymbolSize(r.getItemVisual(o,"symbolSize")),f=r.getItemVisual(o,"style"),g=f&&f.fill,y=h.getModel("emphasis");c.setScale(p),c.traverse(function(S){S.setStyle("fill",g)});var v=normalizeSymbolOffset(r.getItemVisual(o,"symbolOffset"),p);v&&(c.x=v[0],c.y=v[1]);var _=r.getItemVisual(o,"symbolRotate");c.rotation=(_||0)*Math.PI/180||0;var x={};x.showEffectOn=u.get("showEffectOn"),x.rippleScale=h.get(["rippleEffect","scale"]),x.brushType=h.get(["rippleEffect","brushType"]),x.period=h.get(["rippleEffect","period"])*1e3,x.effectOffset=o/r.count(),x.z=u.getShallow("z")||0,x.zlevel=u.getShallow("zlevel")||0,x.symbolType=d,x.color=g,x.rippleEffectColor=h.get(["rippleEffect","color"]),x.rippleNumber=h.get(["rippleEffect","number"]),x.showEffectOn==="render"?(this._effectCfg?this.updateEffectAnimation(x):this.startEffectAnimation(x),this._effectCfg=x):(this._effectCfg=null,this.stopEffectAnimation(),this.onHoverStateChange=function(S){S==="emphasis"?x.showEffectOn!=="render"&&l.startEffectAnimation(x):S==="normal"&&x.showEffectOn!=="render"&&l.stopEffectAnimation()}),this._effectCfg=x,toggleHoverEmphasis(this,y.get("focus"),y.get("blurScope"),y.get("disabled"))},n.prototype.fadeOut=function(r){r&&r()},n}(Group$4);const EffectSymbol$1=EffectSymbol;var EffectScatterView=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.prototype.init=function(){this._symbolDraw=new SymbolDraw$1(EffectSymbol$1)},n.prototype.render=function(r,o,l){var u=r.getData(),c=this._symbolDraw;c.updateData(u,{clipShape:this._getClipShape(r)}),this.group.add(c.group)},n.prototype._getClipShape=function(r){var o=r.coordinateSystem,l=o&&o.getArea&&o.getArea();return r.get("clip",!0)?l:null},n.prototype.updateTransform=function(r,o,l){var u=r.getData();this.group.dirty();var c=pointsLayout("").reset(r,o,l);c.progress&&c.progress({start:0,end:u.count(),count:u.count()},u),this._symbolDraw.updateLayout()},n.prototype._updateGroupTransform=function(r){var o=r.coordinateSystem;o&&o.getRoamTransform&&(this.group.transform=clone$2(o.getRoamTransform()),this.group.decomposeTransform())},n.prototype.remove=function(r,o){this._symbolDraw&&this._symbolDraw.remove(!0)},n.type="effectScatter",n}(ChartView$1);const EffectScatterView$1=EffectScatterView;var EffectScatterSeriesModel=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r.hasSymbolVisual=!0,r}return n.prototype.getInitialData=function(r,o){return createSeriesData(null,this,{useEncodeDefaulter:!0})},n.prototype.brushSelector=function(r,o,l){return l.point(o.getItemLayout(r))},n.type="series.effectScatter",n.dependencies=["grid","polar"],n.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,effectType:"ripple",progressive:0,showEffectOn:"render",clip:!0,rippleEffect:{period:4,scale:2.5,brushType:"fill",number:3},universalTransition:{divideShape:"clone"},symbolSize:10},n}(SeriesModel$1);const EffectScatterSeriesModel$1=EffectScatterSeriesModel;function install$x(a){a.registerChartView(EffectScatterView$1),a.registerSeriesModel(EffectScatterSeriesModel$1),a.registerLayout(pointsLayout("effectScatter"))}var EffectLine=function(a){__extends(n,a);function n(r,o,l){var u=a.call(this)||this;return u.add(u.createLine(r,o,l)),u._updateEffectSymbol(r,o),u}return n.prototype.createLine=function(r,o,l){return new Line$1(r,o,l)},n.prototype._updateEffectSymbol=function(r,o){var l=r.getItemModel(o),u=l.getModel("effect"),c=u.get("symbolSize"),h=u.get("symbol");isArray$1(c)||(c=[c,c]);var d=r.getItemVisual(o,"style"),p=u.get("color")||d&&d.stroke,f=this.childAt(1);this._symbolType!==h&&(this.remove(f),f=createSymbol$1(h,-.5,-.5,1,1,p),f.z2=100,f.culling=!0,this.add(f)),f&&(f.setStyle("shadowColor",p),f.setStyle(u.getItemStyle(["color"])),f.scaleX=c[0],f.scaleY=c[1],f.setColor(p),this._symbolType=h,this._symbolScale=c,this._updateEffectAnimation(r,u,o))},n.prototype._updateEffectAnimation=function(r,o,l){var u=this.childAt(1);if(u){var c=r.getItemLayout(l),h=o.get("period")*1e3,d=o.get("loop"),p=o.get("roundTrip"),f=o.get("constantSpeed"),g=retrieve(o.get("delay"),function(v){return v/r.count()*h/3});if(u.ignore=!0,this._updateAnimationPoints(u,c),f>0&&(h=this._getLineLength(u)/f*1e3),h!==this._period||d!==this._loop||p!==this._roundTrip){u.stopAnimation();var y=void 0;isFunction(g)?y=g(l):y=g,u.__t>0&&(y=-h*u.__t),this._animateSymbol(u,h,y,d,p)}this._period=h,this._loop=d,this._roundTrip=p}},n.prototype._animateSymbol=function(r,o,l,u,c){if(o>0){r.__t=0;var h=this,d=r.animate("",u).when(c?o*2:o,{__t:c?2:1}).delay(l).during(function(){h._updateSymbolPosition(r)});u||d.done(function(){h.remove(r)}),d.start()}},n.prototype._getLineLength=function(r){return dist$1(r.__p1,r.__cp1)+dist$1(r.__cp1,r.__p2)},n.prototype._updateAnimationPoints=function(r,o){r.__p1=o[0],r.__p2=o[1],r.__cp1=o[2]||[(o[0][0]+o[1][0])/2,(o[0][1]+o[1][1])/2]},n.prototype.updateData=function(r,o,l){this.childAt(0).updateData(r,o,l),this._updateEffectSymbol(r,o)},n.prototype._updateSymbolPosition=function(r){var o=r.__p1,l=r.__p2,u=r.__cp1,c=r.__t<1?r.__t:2-r.__t,h=[r.x,r.y],d=h.slice(),p=quadraticAt$1,f=quadraticDerivativeAt;h[0]=p(o[0],u[0],l[0],c),h[1]=p(o[1],u[1],l[1],c);var g=r.__t<1?f(o[0],u[0],l[0],c):f(l[0],u[0],o[0],1-c),y=r.__t<1?f(o[1],u[1],l[1],c):f(l[1],u[1],o[1],1-c);r.rotation=-Math.atan2(y,g)-Math.PI/2,(this._symbolType==="line"||this._symbolType==="rect"||this._symbolType==="roundRect")&&(r.__lastT!==void 0&&r.__lastT<r.__t?(r.scaleY=dist$1(d,h)*1.05,c===1&&(h[0]=d[0]+(h[0]-d[0])/2,h[1]=d[1]+(h[1]-d[1])/2)):r.__lastT===1?r.scaleY=2*dist$1(o,h):r.scaleY=this._symbolScale[1]),r.__lastT=r.__t,r.ignore=!1,r.x=h[0],r.y=h[1]},n.prototype.updateLayout=function(r,o){this.childAt(0).updateLayout(r,o);var l=r.getItemModel(o).getModel("effect");this._updateEffectAnimation(r,l,o)},n}(Group$4);const EffectLine$1=EffectLine;var Polyline=function(a){__extends(n,a);function n(r,o,l){var u=a.call(this)||this;return u._createPolyline(r,o,l),u}return n.prototype._createPolyline=function(r,o,l){var u=r.getItemLayout(o),c=new Polyline$3({shape:{points:u}});this.add(c),this._updateCommonStl(r,o,l)},n.prototype.updateData=function(r,o,l){var u=r.hostModel,c=this.childAt(0),h={shape:{points:r.getItemLayout(o)}};updateProps$1(c,h,u,o),this._updateCommonStl(r,o,l)},n.prototype._updateCommonStl=function(r,o,l){var u=this.childAt(0),c=r.getItemModel(o),h=l&&l.emphasisLineStyle,d=l&&l.focus,p=l&&l.blurScope,f=l&&l.emphasisDisabled;if(!l||r.hasItemOption){var g=c.getModel("emphasis");h=g.getModel("lineStyle").getLineStyle(),f=g.get("disabled"),d=g.get("focus"),p=g.get("blurScope")}u.useStyle(r.getItemVisual(o,"style")),u.style.fill=null,u.style.strokeNoScale=!0;var y=u.ensureState("emphasis");y.style=h,toggleHoverEmphasis(this,d,p,f)},n.prototype.updateLayout=function(r,o){var l=this.childAt(0);l.setShape("points",r.getItemLayout(o))},n}(Group$4);const Polyline$1=Polyline;var EffectPolyline=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r._lastFrame=0,r._lastFramePercent=0,r}return n.prototype.createLine=function(r,o,l){return new Polyline$1(r,o,l)},n.prototype._updateAnimationPoints=function(r,o){this._points=o;for(var l=[0],u=0,c=1;c<o.length;c++){var h=o[c-1],d=o[c];u+=dist$1(h,d),l.push(u)}if(u===0){this._length=0;return}for(var c=0;c<l.length;c++)l[c]/=u;this._offsets=l,this._length=u},n.prototype._getLineLength=function(){return this._length},n.prototype._updateSymbolPosition=function(r){var o=r.__t<1?r.__t:2-r.__t,l=this._points,u=this._offsets,c=l.length;if(u){var h=this._lastFrame,d;if(o<this._lastFramePercent){var p=Math.min(h+1,c-1);for(d=p;d>=0&&!(u[d]<=o);d--);d=Math.min(d,c-2)}else{for(d=h;d<c&&!(u[d]>o);d++);d=Math.min(d-1,c-2)}var f=(o-u[d])/(u[d+1]-u[d]),g=l[d],y=l[d+1];r.x=g[0]*(1-f)+f*y[0],r.y=g[1]*(1-f)+f*y[1];var v=r.__t<1?y[0]-g[0]:g[0]-y[0],_=r.__t<1?y[1]-g[1]:g[1]-y[1];r.rotation=-Math.atan2(_,v)-Math.PI/2,this._lastFrame=d,this._lastFramePercent=o,r.ignore=!1}},n}(EffectLine$1);const EffectPolyline$1=EffectPolyline;var LargeLinesPathShape=function(){function a(){this.polyline=!1,this.curveness=0,this.segs=[]}return a}(),LargeLinesPath=function(a){__extends(n,a);function n(r){var o=a.call(this,r)||this;return o._off=0,o.hoverDataIdx=-1,o}return n.prototype.reset=function(){this.notClear=!1,this._off=0},n.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},n.prototype.getDefaultShape=function(){return new LargeLinesPathShape},n.prototype.buildPath=function(r,o){var l=o.segs,u=o.curveness,c;if(o.polyline)for(c=this._off;c<l.length;){var h=l[c++];if(h>0){r.moveTo(l[c++],l[c++]);for(var d=1;d<h;d++)r.lineTo(l[c++],l[c++])}}else for(c=this._off;c<l.length;){var p=l[c++],f=l[c++],g=l[c++],y=l[c++];if(r.moveTo(p,f),u>0){var v=(p+g)/2-(f-y)*u,_=(f+y)/2-(g-p)*u;r.quadraticCurveTo(v,_,g,y)}else r.lineTo(g,y)}this.incremental&&(this._off=c,this.notClear=!0)},n.prototype.findDataIndex=function(r,o){var l=this.shape,u=l.segs,c=l.curveness,h=this.style.lineWidth;if(l.polyline)for(var d=0,p=0;p<u.length;){var f=u[p++];if(f>0)for(var g=u[p++],y=u[p++],v=1;v<f;v++){var _=u[p++],x=u[p++];if(containStroke$4(g,y,_,x,h,r,o))return d}d++}else for(var d=0,p=0;p<u.length;){var g=u[p++],y=u[p++],_=u[p++],x=u[p++];if(c>0){var S=(g+_)/2-(y-x)*c,T=(y+x)/2-(_-g)*c;if(containStroke$2(g,y,S,T,_,x,h,r,o))return d}else if(containStroke$4(g,y,_,x,h,r,o))return d;d++}return-1},n.prototype.contain=function(r,o){var l=this.transformCoordToLocal(r,o),u=this.getBoundingRect();if(r=l[0],o=l[1],u.contain(r,o)){var c=this.hoverDataIdx=this.findDataIndex(r,o);return c>=0}return this.hoverDataIdx=-1,!1},n.prototype.getBoundingRect=function(){var r=this._rect;if(!r){for(var o=this.shape,l=o.segs,u=1/0,c=1/0,h=-1/0,d=-1/0,p=0;p<l.length;){var f=l[p++],g=l[p++];u=Math.min(f,u),h=Math.max(f,h),c=Math.min(g,c),d=Math.max(g,d)}r=this._rect=new BoundingRect$1(u,c,h,d)}return r},n}(Path$1),LargeLineDraw=function(){function a(){this.group=new Group$4}return a.prototype.updateData=function(n){this._clear();var r=this._create();r.setShape({segs:n.getLayout("linesPoints")}),this._setCommon(r,n)},a.prototype.incrementalPrepareUpdate=function(n){this.group.removeAll(),this._clear()},a.prototype.incrementalUpdate=function(n,r){var o=this._newAdded[0],l=r.getLayout("linesPoints"),u=o&&o.shape.segs;if(u&&u.length<2e4){var c=u.length,h=new Float32Array(c+l.length);h.set(u),h.set(l,c),o.setShape({segs:h})}else{this._newAdded=[];var d=this._create();d.incremental=!0,d.setShape({segs:l}),this._setCommon(d,r),d.__startIndex=n.start}},a.prototype.remove=function(){this._clear()},a.prototype.eachRendered=function(n){this._newAdded[0]&&n(this._newAdded[0])},a.prototype._create=function(){var n=new LargeLinesPath({cursor:"default",ignoreCoarsePointer:!0});return this._newAdded.push(n),this.group.add(n),n},a.prototype._setCommon=function(n,r,o){var l=r.hostModel;n.setShape({polyline:l.get("polyline"),curveness:l.get(["lineStyle","curveness"])}),n.useStyle(l.getModel("lineStyle").getLineStyle()),n.style.strokeNoScale=!0;var u=r.getVisual("style");u&&u.stroke&&n.setStyle("stroke",u.stroke),n.setStyle("fill",null);var c=getECData(n);c.seriesIndex=l.seriesIndex,n.on("mousemove",function(h){c.dataIndex=null;var d=n.hoverDataIdx;d>0&&(c.dataIndex=d+n.__startIndex)})},a.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},a}();const LargeLineDraw$1=LargeLineDraw;var linesLayout={seriesType:"lines",plan:createRenderPlanner(),reset:function(a){var n=a.coordinateSystem;if(!n){error("The lines series must have a coordinate system.");return}var r=a.get("polyline"),o=a.pipelineContext.large;return{progress:function(l,u){var c=[];if(o){var h=void 0,d=l.end-l.start;if(r){for(var p=0,f=l.start;f<l.end;f++)p+=a.getLineCoordsCount(f);h=new Float32Array(d+p*2)}else h=new Float32Array(d*4);for(var g=0,y=[],f=l.start;f<l.end;f++){var v=a.getLineCoords(f,c);r&&(h[g++]=v);for(var _=0;_<v;_++)y=n.dataToPoint(c[_],!1,y),h[g++]=y[0],h[g++]=y[1]}u.setLayout("linesPoints",h)}else for(var f=l.start;f<l.end;f++){var x=u.getItemModel(f),v=a.getLineCoords(f,c),S=[];if(r)for(var T=0;T<v;T++)S.push(n.dataToPoint(c[T]));else{S[0]=n.dataToPoint(c[0]),S[1]=n.dataToPoint(c[1]);var M=x.get(["lineStyle","curveness"]);+M&&(S[2]=[(S[0][0]+S[1][0])/2-(S[0][1]-S[1][1])*M,(S[0][1]+S[1][1])/2-(S[1][0]-S[0][0])*M])}u.setItemLayout(f,S)}}}}};const linesLayout$1=linesLayout;var LinesView=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.prototype.render=function(r,o,l){var u=r.getData(),c=this._updateLineDraw(u,r),h=r.get("zlevel"),d=r.get(["effect","trailLength"]),p=l.getZr(),f=p.painter.getType()==="svg";f||p.painter.getLayer(h).clear(!0),this._lastZlevel!=null&&!f&&p.configLayer(this._lastZlevel,{motionBlur:!1}),this._showEffect(r)&&d>0&&(f?console.warn("SVG render mode doesn't support lines with trail effect"):p.configLayer(h,{motionBlur:!0,lastFrameAlpha:Math.max(Math.min(d/10+.9,1),0)})),c.updateData(u);var g=r.get("clip",!0)&&createClipPath(r.coordinateSystem,!1,r);g?this.group.setClipPath(g):this.group.removeClipPath(),this._lastZlevel=h,this._finished=!0},n.prototype.incrementalPrepareRender=function(r,o,l){var u=r.getData(),c=this._updateLineDraw(u,r);c.incrementalPrepareUpdate(u),this._clearLayer(l),this._finished=!1},n.prototype.incrementalRender=function(r,o,l){this._lineDraw.incrementalUpdate(r,o.getData()),this._finished=r.end===o.getData().count()},n.prototype.eachRendered=function(r){this._lineDraw&&this._lineDraw.eachRendered(r)},n.prototype.updateTransform=function(r,o,l){var u=r.getData(),c=r.pipelineContext;if(!this._finished||c.large||c.progressiveRender)return{update:!0};var h=linesLayout$1.reset(r,o,l);h.progress&&h.progress({start:0,end:u.count(),count:u.count()},u),this._lineDraw.updateLayout(),this._clearLayer(l)},n.prototype._updateLineDraw=function(r,o){var l=this._lineDraw,u=this._showEffect(o),c=!!o.get("polyline"),h=o.pipelineContext,d=h.large;return u&&d&&console.warn("Large lines not support effect"),(!l||u!==this._hasEffet||c!==this._isPolyline||d!==this._isLargeDraw)&&(l&&l.remove(),l=this._lineDraw=d?new LargeLineDraw$1:new LineDraw$1(c?u?EffectPolyline$1:Polyline$1:u?EffectLine$1:Line$1),this._hasEffet=u,this._isPolyline=c,this._isLargeDraw=d),this.group.add(l.group),l},n.prototype._showEffect=function(r){return!!r.get(["effect","show"])},n.prototype._clearLayer=function(r){var o=r.getZr(),l=o.painter.getType()==="svg";!l&&this._lastZlevel!=null&&o.painter.getLayer(this._lastZlevel).clear(!0)},n.prototype.remove=function(r,o){this._lineDraw&&this._lineDraw.remove(),this._lineDraw=null,this._clearLayer(o)},n.prototype.dispose=function(r,o){this.remove(r,o)},n.type="lines",n}(ChartView$1);const LinesView$1=LinesView;var Uint32Arr=typeof Uint32Array>"u"?Array:Uint32Array,Float64Arr=typeof Float64Array>"u"?Array:Float64Array;function compatEc2(a){var n=a.data;n&&n[0]&&n[0][0]&&n[0][0].coord&&(console.warn("Lines data configuration has been changed to { coords:[[1,2],[2,3]] }"),a.data=map$1(n,function(r){var o=[r[0].coord,r[1].coord],l={coords:o};return r[0].name&&(l.fromName=r[0].name),r[1].name&&(l.toName=r[1].name),mergeAll([l,r[0],r[1]])}))}var LinesSeriesModel=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r.visualStyleAccessPath="lineStyle",r.visualDrawType="stroke",r}return n.prototype.init=function(r){r.data=r.data||[],compatEc2(r);var o=this._processFlatCoordsArray(r.data);this._flatCoords=o.flatCoords,this._flatCoordsOffset=o.flatCoordsOffset,o.flatCoords&&(r.data=new Float32Array(o.count)),a.prototype.init.apply(this,arguments)},n.prototype.mergeOption=function(r){if(compatEc2(r),r.data){var o=this._processFlatCoordsArray(r.data);this._flatCoords=o.flatCoords,this._flatCoordsOffset=o.flatCoordsOffset,o.flatCoords&&(r.data=new Float32Array(o.count))}a.prototype.mergeOption.apply(this,arguments)},n.prototype.appendData=function(r){var o=this._processFlatCoordsArray(r.data);o.flatCoords&&(this._flatCoords?(this._flatCoords=concatArray(this._flatCoords,o.flatCoords),this._flatCoordsOffset=concatArray(this._flatCoordsOffset,o.flatCoordsOffset)):(this._flatCoords=o.flatCoords,this._flatCoordsOffset=o.flatCoordsOffset),r.data=new Float32Array(o.count)),this.getRawData().appendData(r.data)},n.prototype._getCoordsFromItemModel=function(r){var o=this.getData().getItemModel(r),l=o.option instanceof Array?o.option:o.getShallow("coords");if(!(l instanceof Array&&l.length>0&&l[0]instanceof Array))throw new Error("Invalid coords "+JSON.stringify(l)+". Lines must have 2d coords array in data item.");return l},n.prototype.getLineCoordsCount=function(r){return this._flatCoordsOffset?this._flatCoordsOffset[r*2+1]:this._getCoordsFromItemModel(r).length},n.prototype.getLineCoords=function(r,o){if(this._flatCoordsOffset){for(var l=this._flatCoordsOffset[r*2],u=this._flatCoordsOffset[r*2+1],c=0;c<u;c++)o[c]=o[c]||[],o[c][0]=this._flatCoords[l+c*2],o[c][1]=this._flatCoords[l+c*2+1];return u}else{for(var h=this._getCoordsFromItemModel(r),c=0;c<h.length;c++)o[c]=o[c]||[],o[c][0]=h[c][0],o[c][1]=h[c][1];return h.length}},n.prototype._processFlatCoordsArray=function(r){var o=0;if(this._flatCoords&&(o=this._flatCoords.length),isNumber(r[0])){for(var l=r.length,u=new Uint32Arr(l),c=new Float64Arr(l),h=0,d=0,p=0,f=0;f<l;){p++;var g=r[f++];u[d++]=h+o,u[d++]=g;for(var y=0;y<g;y++){var v=r[f++],_=r[f++];if(c[h++]=v,c[h++]=_,f>l)throw new Error("Invalid data format.")}}return{flatCoordsOffset:new Uint32Array(u.buffer,0,d),flatCoords:c,count:p}}return{flatCoordsOffset:null,flatCoords:null,count:r.length}},n.prototype.getInitialData=function(r,o){{var l=CoordinateSystem.get(r.coordinateSystem);if(!l)throw new Error("Unknown coordinate system "+r.coordinateSystem)}var u=new SeriesData$1(["value"],this);return u.hasItemOption=!1,u.initData(r.data,[],function(c,h,d,p){if(c instanceof Array)return NaN;u.hasItemOption=!0;var f=c.value;if(f!=null)return f instanceof Array?f[p]:f}),u},n.prototype.formatTooltip=function(r,o,l){var u=this.getData(),c=u.getItemModel(r),h=c.get("name");if(h)return h;var d=c.get("fromName"),p=c.get("toName"),f=[];return d!=null&&f.push(d),p!=null&&f.push(p),createTooltipMarkup("nameValue",{name:f.join(" > ")})},n.prototype.preventIncremental=function(){return!!this.get(["effect","show"])},n.prototype.getProgressive=function(){var r=this.option.progressive;return r==null?this.option.large?1e4:this.get("progressive"):r},n.prototype.getProgressiveThreshold=function(){var r=this.option.progressiveThreshold;return r==null?this.option.large?2e4:this.get("progressiveThreshold"):r},n.prototype.getZLevelKey=function(){var r=this.getModel("effect"),o=r.get("trailLength");return this.getData().count()>this.getProgressiveThreshold()?this.id:r.get("show")&&o>0?o+"":""},n.type="series.lines",n.dependencies=["grid","polar","geo","calendar"],n.defaultOption={coordinateSystem:"geo",z:2,legendHoverLink:!0,xAxisIndex:0,yAxisIndex:0,symbol:["none","none"],symbolSize:[10,10],geoIndex:0,effect:{show:!1,period:4,constantSpeed:0,symbol:"circle",symbolSize:3,loop:!0,trailLength:.2},large:!1,largeThreshold:2e3,polyline:!1,clip:!0,label:{show:!1,position:"end"},lineStyle:{opacity:.5}},n}(SeriesModel$1);const LinesSeriesModel$1=LinesSeriesModel;function normalize(a){return a instanceof Array||(a=[a,a]),a}var linesVisual={seriesType:"lines",reset:function(a){var n=normalize(a.get("symbol")),r=normalize(a.get("symbolSize")),o=a.getData();o.setVisual("fromSymbol",n&&n[0]),o.setVisual("toSymbol",n&&n[1]),o.setVisual("fromSymbolSize",r&&r[0]),o.setVisual("toSymbolSize",r&&r[1]);function l(u,c){var h=u.getItemModel(c),d=normalize(h.getShallow("symbol",!0)),p=normalize(h.getShallow("symbolSize",!0));d[0]&&u.setItemVisual(c,"fromSymbol",d[0]),d[1]&&u.setItemVisual(c,"toSymbol",d[1]),p[0]&&u.setItemVisual(c,"fromSymbolSize",p[0]),p[1]&&u.setItemVisual(c,"toSymbolSize",p[1])}return{dataEach:o.hasItemOption?l:null}}};const linesVisual$1=linesVisual;function install$w(a){a.registerChartView(LinesView$1),a.registerSeriesModel(LinesSeriesModel$1),a.registerLayout(linesLayout$1),a.registerVisual(linesVisual$1)}var GRADIENT_LEVELS=256,HeatmapLayer=function(){function a(){this.blurSize=30,this.pointSize=20,this.maxOpacity=1,this.minOpacity=0,this._gradientPixels={inRange:null,outOfRange:null};var n=platformApi.createCanvas();this.canvas=n}return a.prototype.update=function(n,r,o,l,u,c){var h=this._getBrush(),d=this._getGradient(u,"inRange"),p=this._getGradient(u,"outOfRange"),f=this.pointSize+this.blurSize,g=this.canvas,y=g.getContext("2d"),v=n.length;g.width=r,g.height=o;for(var _=0;_<v;++_){var x=n[_],S=x[0],T=x[1],M=x[2],b=l(M);y.globalAlpha=b,y.drawImage(h,S-f,T-f)}if(!g.width||!g.height)return g;for(var A=y.getImageData(0,0,g.width,g.height),I=A.data,w=0,C=I.length,E=this.minOpacity,P=this.maxOpacity,D=P-E;w<C;){var b=I[w+3]/256,L=Math.floor(b*(GRADIENT_LEVELS-1))*4;if(b>0){var R=c(b)?d:p;b>0&&(b=b*D+E),I[w++]=R[L],I[w++]=R[L+1],I[w++]=R[L+2],I[w++]=R[L+3]*b*256}else w+=4}return y.putImageData(A,0,0),g},a.prototype._getBrush=function(){var n=this._brushCanvas||(this._brushCanvas=platformApi.createCanvas()),r=this.pointSize+this.blurSize,o=r*2;n.width=o,n.height=o;var l=n.getContext("2d");return l.clearRect(0,0,o,o),l.shadowOffsetX=o,l.shadowBlur=this.blurSize,l.shadowColor="#000",l.beginPath(),l.arc(-r,r,this.pointSize,0,Math.PI*2,!0),l.closePath(),l.fill(),n},a.prototype._getGradient=function(n,r){for(var o=this._gradientPixels,l=o[r]||(o[r]=new Uint8ClampedArray(256*4)),u=[0,0,0,0],c=0,h=0;h<256;h++)n[r](h/255,!0,u),l[c++]=u[0],l[c++]=u[1],l[c++]=u[2],l[c++]=u[3];return l},a}();const HeatmapLayer$1=HeatmapLayer;function getIsInPiecewiseRange(a,n,r){var o=a[1]-a[0];n=map$1(n,function(c){return{interval:[(c.interval[0]-a[0])/o,(c.interval[1]-a[0])/o]}});var l=n.length,u=0;return function(c){var h;for(h=u;h<l;h++){var d=n[h].interval;if(d[0]<=c&&c<=d[1]){u=h;break}}if(h===l)for(h=u-1;h>=0;h--){var d=n[h].interval;if(d[0]<=c&&c<=d[1]){u=h;break}}return h>=0&&h<l&&r[h]}}function getIsInContinuousRange(a,n){var r=a[1]-a[0];return n=[(n[0]-a[0])/r,(n[1]-a[0])/r],function(o){return o>=n[0]&&o<=n[1]}}function isGeoCoordSys(a){var n=a.dimensions;return n[0]==="lng"&&n[1]==="lat"}var HeatmapView=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.prototype.render=function(r,o,l){var u;if(o.eachComponent("visualMap",function(h){h.eachTargetSeries(function(d){d===r&&(u=h)})}),!u)throw new Error("Heatmap must use with visualMap");this._progressiveEls=null,this.group.removeAll();var c=r.coordinateSystem;c.type==="cartesian2d"||c.type==="calendar"?this._renderOnCartesianAndCalendar(r,l,0,r.getData().count()):isGeoCoordSys(c)&&this._renderOnGeo(c,r,u,l)},n.prototype.incrementalPrepareRender=function(r,o,l){this.group.removeAll()},n.prototype.incrementalRender=function(r,o,l,u){var c=o.coordinateSystem;c&&(isGeoCoordSys(c)?this.render(o,l,u):(this._progressiveEls=[],this._renderOnCartesianAndCalendar(o,u,r.start,r.end,!0)))},n.prototype.eachRendered=function(r){traverseElements(this._progressiveEls||this.group,r)},n.prototype._renderOnCartesianAndCalendar=function(r,o,l,u,c){var h=r.coordinateSystem,d=isCoordinateSystemType(h,"cartesian2d"),p,f,g,y;if(d){var v=h.getAxis("x"),_=h.getAxis("y");{if(!(v.type==="category"&&_.type==="category"))throw new Error("Heatmap on cartesian must have two category axes");if(!(v.onBand&&_.onBand))throw new Error("Heatmap on cartesian must have two axes with boundaryGap true")}p=v.getBandWidth()+.5,f=_.getBandWidth()+.5,g=v.scale.getExtent(),y=_.scale.getExtent()}for(var x=this.group,S=r.getData(),T=r.getModel(["emphasis","itemStyle"]).getItemStyle(),M=r.getModel(["blur","itemStyle"]).getItemStyle(),b=r.getModel(["select","itemStyle"]).getItemStyle(),A=r.get(["itemStyle","borderRadius"]),I=getLabelStatesModels(r),w=r.getModel("emphasis"),C=w.get("focus"),E=w.get("blurScope"),P=w.get("disabled"),D=d?[S.mapDimension("x"),S.mapDimension("y"),S.mapDimension("value")]:[S.mapDimension("time"),S.mapDimension("value")],L=l;L<u;L++){var R=void 0,O=S.getItemVisual(L,"style");if(d){var N=S.get(D[0],L),V=S.get(D[1],L);if(isNaN(S.get(D[2],L))||isNaN(N)||isNaN(V)||N<g[0]||N>g[1]||V<y[0]||V>y[1])continue;var B=h.dataToPoint([N,V]);R=new Rect$3({shape:{x:B[0]-p/2,y:B[1]-f/2,width:p,height:f},style:O})}else{if(isNaN(S.get(D[1],L)))continue;R=new Rect$3({z2:1,shape:h.dataToRect([S.get(D[0],L)]).contentShape,style:O})}if(S.hasItemOption){var G=S.getItemModel(L),F=G.getModel("emphasis");T=F.getModel("itemStyle").getItemStyle(),M=G.getModel(["blur","itemStyle"]).getItemStyle(),b=G.getModel(["select","itemStyle"]).getItemStyle(),A=G.get(["itemStyle","borderRadius"]),C=F.get("focus"),E=F.get("blurScope"),P=F.get("disabled"),I=getLabelStatesModels(G)}R.shape.r=A;var z=r.getRawValue(L),H="-";z&&z[2]!=null&&(H=z[2]+""),setLabelStyle(R,I,{labelFetcher:r,labelDataIndex:L,defaultOpacity:O.opacity,defaultText:H}),R.ensureState("emphasis").style=T,R.ensureState("blur").style=M,R.ensureState("select").style=b,toggleHoverEmphasis(R,C,E,P),R.incremental=c,c&&(R.states.emphasis.hoverLayer=!0),x.add(R),S.setItemGraphicEl(L,R),this._progressiveEls&&this._progressiveEls.push(R)}},n.prototype._renderOnGeo=function(r,o,l,u){var c=l.targetVisuals.inRange,h=l.targetVisuals.outOfRange,d=o.getData(),p=this._hmLayer||this._hmLayer||new HeatmapLayer$1;p.blurSize=o.get("blurSize"),p.pointSize=o.get("pointSize"),p.minOpacity=o.get("minOpacity"),p.maxOpacity=o.get("maxOpacity");var f=r.getViewRect().clone(),g=r.getRoamTransform();f.applyTransform(g);var y=Math.max(f.x,0),v=Math.max(f.y,0),_=Math.min(f.width+f.x,u.getWidth()),x=Math.min(f.height+f.y,u.getHeight()),S=_-y,T=x-v,M=[d.mapDimension("lng"),d.mapDimension("lat"),d.mapDimension("value")],b=d.mapArray(M,function(C,E,P){var D=r.dataToPoint([C,E]);return D[0]-=y,D[1]-=v,D.push(P),D}),A=l.getExtent(),I=l.type==="visualMap.continuous"?getIsInContinuousRange(A,l.option.range):getIsInPiecewiseRange(A,l.getPieceList(),l.option.selected);p.update(b,S,T,c.color.getNormalizer(),{inRange:c.color.getColorMapper(),outOfRange:h.color.getColorMapper()},I);var w=new ZRImage$1({style:{width:S,height:T,x:y,y:v,image:p.canvas},silent:!0});this.group.add(w)},n.type="heatmap",n}(ChartView$1);const HeatmapView$1=HeatmapView;var HeatmapSeriesModel=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.prototype.getInitialData=function(r,o){return createSeriesData(null,this,{generateCoord:"value"})},n.prototype.preventIncremental=function(){var r=CoordinateSystem.get(this.get("coordinateSystem"));if(r&&r.dimensions)return r.dimensions[0]==="lng"&&r.dimensions[1]==="lat"},n.type="series.heatmap",n.dependencies=["grid","geo","calendar"],n.defaultOption={coordinateSystem:"cartesian2d",z:2,geoIndex:0,blurSize:30,pointSize:20,maxOpacity:1,minOpacity:0,select:{itemStyle:{borderColor:"#212121"}}},n}(SeriesModel$1);const HeatmapSeriesModel$1=HeatmapSeriesModel;function install$v(a){a.registerChartView(HeatmapView$1),a.registerSeriesModel(HeatmapSeriesModel$1)}var BAR_BORDER_WIDTH_QUERY=["itemStyle","borderWidth"],LAYOUT_ATTRS=[{xy:"x",wh:"width",index:0,posDesc:["left","right"]},{xy:"y",wh:"height",index:1,posDesc:["top","bottom"]}],pathForLineWidth=new Circle$1,PictorialBarView=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.prototype.render=function(r,o,l){var u=this.group,c=r.getData(),h=this._data,d=r.coordinateSystem,p=d.getBaseAxis(),f=p.isHorizontal(),g=d.master.getRect(),y={ecSize:{width:l.getWidth(),height:l.getHeight()},seriesModel:r,coordSys:d,coordSysExtent:[[g.x,g.x+g.width],[g.y,g.y+g.height]],isHorizontal:f,valueDim:LAYOUT_ATTRS[+f],categoryDim:LAYOUT_ATTRS[1-+f]};c.diff(h).add(function(_){if(c.hasValue(_)){var x=getItemModel(c,_),S=getSymbolMeta(c,_,x,y),T=createBar(c,y,S);c.setItemGraphicEl(_,T),u.add(T),updateCommon(T,y,S)}}).update(function(_,x){var S=h.getItemGraphicEl(x);if(!c.hasValue(_)){u.remove(S);return}var T=getItemModel(c,_),M=getSymbolMeta(c,_,T,y),b=getShapeStr(c,M);S&&b!==S.__pictorialShapeStr&&(u.remove(S),c.setItemGraphicEl(_,null),S=null),S?updateBar(S,y,M):S=createBar(c,y,M,!0),c.setItemGraphicEl(_,S),S.__pictorialSymbolMeta=M,u.add(S),updateCommon(S,y,M)}).remove(function(_){var x=h.getItemGraphicEl(_);x&&removeBar(h,_,x.__pictorialSymbolMeta.animationModel,x)}).execute();var v=r.get("clip",!0)?createClipPath(r.coordinateSystem,!1,r):null;return v?u.setClipPath(v):u.removeClipPath(),this._data=c,this.group},n.prototype.remove=function(r,o){var l=this.group,u=this._data;r.get("animation")?u&&u.eachItemGraphicEl(function(c){removeBar(u,getECData(c).dataIndex,r,c)}):l.removeAll()},n.type="pictorialBar",n}(ChartView$1);function getSymbolMeta(a,n,r,o){var l=a.getItemLayout(n),u=r.get("symbolRepeat"),c=r.get("symbolClip"),h=r.get("symbolPosition")||"start",d=r.get("symbolRotate"),p=(d||0)*Math.PI/180||0,f=r.get("symbolPatternSize")||2,g=r.isAnimationEnabled(),y={dataIndex:n,layout:l,itemModel:r,symbolType:a.getItemVisual(n,"symbol")||"circle",style:a.getItemVisual(n,"style"),symbolClip:c,symbolRepeat:u,symbolRepeatDirection:r.get("symbolRepeatDirection"),symbolPatternSize:f,rotation:p,animationModel:g?r:null,hoverScale:g&&r.get(["emphasis","scale"]),z2:r.getShallow("z",!0)||0};prepareBarLength(r,u,l,o,y),prepareSymbolSize(a,n,l,u,c,y.boundingLength,y.pxSign,f,o,y),prepareLineWidth(r,y.symbolScale,p,o,y);var v=y.symbolSize,_=normalizeSymbolOffset(r.get("symbolOffset"),v);return prepareLayoutInfo(r,v,l,u,c,_,h,y.valueLineWidth,y.boundingLength,y.repeatCutLength,o,y),y}function prepareBarLength(a,n,r,o,l){var u=o.valueDim,c=a.get("symbolBoundingData"),h=o.coordSys.getOtherAxis(o.coordSys.getBaseAxis()),d=h.toGlobalCoord(h.dataToCoord(0)),p=1-+(r[u.wh]<=0),f;if(isArray$1(c)){var g=[convertToCoordOnAxis(h,c[0])-d,convertToCoordOnAxis(h,c[1])-d];g[1]<g[0]&&g.reverse(),f=g[p]}else c!=null?f=convertToCoordOnAxis(h,c)-d:n?f=o.coordSysExtent[u.index][p]-d:f=r[u.wh];l.boundingLength=f,n&&(l.repeatCutLength=r[u.wh]);var y=u.xy==="x",v=h.inverse;l.pxSign=y&&!v||!y&&v?f>=0?1:-1:f>0?1:-1}function convertToCoordOnAxis(a,n){return a.toGlobalCoord(a.dataToCoord(a.scale.parse(n)))}function prepareSymbolSize(a,n,r,o,l,u,c,h,d,p){var f=d.valueDim,g=d.categoryDim,y=Math.abs(r[g.wh]),v=a.getItemVisual(n,"symbolSize"),_;isArray$1(v)?_=v.slice():v==null?_=["100%","100%"]:_=[v,v],_[g.index]=parsePercent(_[g.index],y),_[f.index]=parsePercent(_[f.index],o?y:Math.abs(u)),p.symbolSize=_;var x=p.symbolScale=[_[0]/h,_[1]/h];x[f.index]*=(d.isHorizontal?-1:1)*c}function prepareLineWidth(a,n,r,o,l){var u=a.get(BAR_BORDER_WIDTH_QUERY)||0;u&&(pathForLineWidth.attr({scaleX:n[0],scaleY:n[1],rotation:r}),pathForLineWidth.updateTransform(),u/=pathForLineWidth.getLineScale(),u*=n[o.valueDim.index]),l.valueLineWidth=u||0}function prepareLayoutInfo(a,n,r,o,l,u,c,h,d,p,f,g){var y=f.categoryDim,v=f.valueDim,_=g.pxSign,x=Math.max(n[v.index]+h,0),S=x;if(o){var T=Math.abs(d),M=retrieve(a.get("symbolMargin"),"15%")+"",b=!1;M.lastIndexOf("!")===M.length-1&&(b=!0,M=M.slice(0,M.length-1));var A=parsePercent(M,n[v.index]),I=Math.max(x+A*2,0),w=b?0:A*2,C=isNumeric(o),E=C?o:toIntTimes((T+w)/I),P=T-E*x;A=P/2/(b?E:Math.max(E-1,1)),I=x+A*2,w=b?0:A*2,!C&&o!=="fixed"&&(E=p?toIntTimes((Math.abs(p)+w)/I):0),S=E*I-w,g.repeatTimes=E,g.symbolMargin=A}var D=_*(S/2),L=g.pathPosition=[];L[y.index]=r[y.wh]/2,L[v.index]=c==="start"?D:c==="end"?d-D:d/2,u&&(L[0]+=u[0],L[1]+=u[1]);var R=g.bundlePosition=[];R[y.index]=r[y.xy],R[v.index]=r[v.xy];var O=g.barRectShape=extend({},r);O[v.wh]=_*Math.max(Math.abs(r[v.wh]),Math.abs(L[v.index]+D)),O[y.wh]=r[y.wh];var N=g.clipShape={};N[y.xy]=-r[y.xy],N[y.wh]=f.ecSize[y.wh],N[v.xy]=0,N[v.wh]=r[v.wh]}function createPath(a){var n=a.symbolPatternSize,r=createSymbol$1(a.symbolType,-n/2,-n/2,n,n);return r.attr({culling:!0}),r.type!=="image"&&r.setStyle({strokeNoScale:!0}),r}function createOrUpdateRepeatSymbols(a,n,r,o){var l=a.__pictorialBundle,u=r.symbolSize,c=r.valueLineWidth,h=r.pathPosition,d=n.valueDim,p=r.repeatTimes||0,f=0,g=u[n.valueDim.index]+c+r.symbolMargin*2;for(eachPath(a,function(x){x.__pictorialAnimationIndex=f,x.__pictorialRepeatTimes=p,f<p?updateAttr(x,null,_(f),r,o):updateAttr(x,null,{scaleX:0,scaleY:0},r,o,function(){l.remove(x)}),f++});f<p;f++){var y=createPath(r);y.__pictorialAnimationIndex=f,y.__pictorialRepeatTimes=p,l.add(y);var v=_(f);updateAttr(y,{x:v.x,y:v.y,scaleX:0,scaleY:0},{scaleX:v.scaleX,scaleY:v.scaleY,rotation:v.rotation},r,o)}function _(x){var S=h.slice(),T=r.pxSign,M=x;return(r.symbolRepeatDirection==="start"?T>0:T<0)&&(M=p-1-x),S[d.index]=g*(M-p/2+.5)+h[d.index],{x:S[0],y:S[1],scaleX:r.symbolScale[0],scaleY:r.symbolScale[1],rotation:r.rotation}}}function createOrUpdateSingleSymbol(a,n,r,o){var l=a.__pictorialBundle,u=a.__pictorialMainPath;u?updateAttr(u,null,{x:r.pathPosition[0],y:r.pathPosition[1],scaleX:r.symbolScale[0],scaleY:r.symbolScale[1],rotation:r.rotation},r,o):(u=a.__pictorialMainPath=createPath(r),l.add(u),updateAttr(u,{x:r.pathPosition[0],y:r.pathPosition[1],scaleX:0,scaleY:0,rotation:r.rotation},{scaleX:r.symbolScale[0],scaleY:r.symbolScale[1]},r,o))}function createOrUpdateBarRect(a,n,r){var o=extend({},n.barRectShape),l=a.__pictorialBarRect;l?updateAttr(l,null,{shape:o},n,r):(l=a.__pictorialBarRect=new Rect$3({z2:2,shape:o,silent:!0,style:{stroke:"transparent",fill:"transparent",lineWidth:0}}),l.disableMorphing=!0,a.add(l))}function createOrUpdateClip(a,n,r,o){if(r.symbolClip){var l=a.__pictorialClipPath,u=extend({},r.clipShape),c=n.valueDim,h=r.animationModel,d=r.dataIndex;if(l)updateProps$1(l,{shape:u},h,d);else{u[c.wh]=0,l=new Rect$3({shape:u}),a.__pictorialBundle.setClipPath(l),a.__pictorialClipPath=l;var p={};p[c.wh]=r.clipShape[c.wh],graphic$1[o?"updateProps":"initProps"](l,{shape:p},h,d)}}}function getItemModel(a,n){var r=a.getItemModel(n);return r.getAnimationDelayParams=getAnimationDelayParams,r.isAnimationEnabled=isAnimationEnabled,r}function getAnimationDelayParams(a){return{index:a.__pictorialAnimationIndex,count:a.__pictorialRepeatTimes}}function isAnimationEnabled(){return this.parentModel.isAnimationEnabled()&&!!this.getShallow("animation")}function createBar(a,n,r,o){var l=new Group$4,u=new Group$4;return l.add(u),l.__pictorialBundle=u,u.x=r.bundlePosition[0],u.y=r.bundlePosition[1],r.symbolRepeat?createOrUpdateRepeatSymbols(l,n,r):createOrUpdateSingleSymbol(l,n,r),createOrUpdateBarRect(l,r,o),createOrUpdateClip(l,n,r,o),l.__pictorialShapeStr=getShapeStr(a,r),l.__pictorialSymbolMeta=r,l}function updateBar(a,n,r){var o=r.animationModel,l=r.dataIndex,u=a.__pictorialBundle;updateProps$1(u,{x:r.bundlePosition[0],y:r.bundlePosition[1]},o,l),r.symbolRepeat?createOrUpdateRepeatSymbols(a,n,r,!0):createOrUpdateSingleSymbol(a,n,r,!0),createOrUpdateBarRect(a,r,!0),createOrUpdateClip(a,n,r,!0)}function removeBar(a,n,r,o){var l=o.__pictorialBarRect;l&&l.removeTextContent();var u=[];eachPath(o,function(c){u.push(c)}),o.__pictorialMainPath&&u.push(o.__pictorialMainPath),o.__pictorialClipPath&&(r=null),each$f(u,function(c){removeElement(c,{scaleX:0,scaleY:0},r,n,function(){o.parent&&o.parent.remove(o)})}),a.setItemGraphicEl(n,null)}function getShapeStr(a,n){return[a.getItemVisual(n.dataIndex,"symbol")||"none",!!n.symbolRepeat,!!n.symbolClip].join(":")}function eachPath(a,n,r){each$f(a.__pictorialBundle.children(),function(o){o!==a.__pictorialBarRect&&n.call(r,o)})}function updateAttr(a,n,r,o,l,u){n&&a.attr(n),o.symbolClip&&!l?r&&a.attr(r):r&&graphic$1[l?"updateProps":"initProps"](a,r,o.animationModel,o.dataIndex,u)}function updateCommon(a,n,r){var o=r.dataIndex,l=r.itemModel,u=l.getModel("emphasis"),c=u.getModel("itemStyle").getItemStyle(),h=l.getModel(["blur","itemStyle"]).getItemStyle(),d=l.getModel(["select","itemStyle"]).getItemStyle(),p=l.getShallow("cursor"),f=u.get("focus"),g=u.get("blurScope"),y=u.get("scale");eachPath(a,function(x){if(x instanceof ZRImage$1){var S=x.style;x.useStyle(extend({image:S.image,x:S.x,y:S.y,width:S.width,height:S.height},r.style))}else x.useStyle(r.style);var T=x.ensureState("emphasis");T.style=c,y&&(T.scaleX=x.scaleX*1.1,T.scaleY=x.scaleY*1.1),x.ensureState("blur").style=h,x.ensureState("select").style=d,p&&(x.cursor=p),x.z2=r.z2});var v=n.valueDim.posDesc[+(r.boundingLength>0)],_=a.__pictorialBarRect;_.ignoreClip=!0,setLabelStyle(_,getLabelStatesModels(l),{labelFetcher:n.seriesModel,labelDataIndex:o,defaultText:getDefaultLabel(n.seriesModel.getData(),o),inheritColor:r.style.fill,defaultOpacity:r.style.opacity,defaultOutsidePosition:v}),toggleHoverEmphasis(a,f,g,u.get("disabled"))}function toIntTimes(a){var n=Math.round(a);return Math.abs(a-n)<1e-4?n:Math.ceil(a)}const PictorialBarView$1=PictorialBarView;var PictorialBarSeriesModel=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r.hasSymbolVisual=!0,r.defaultSymbol="roundRect",r}return n.prototype.getInitialData=function(r){return r.stack=null,a.prototype.getInitialData.apply(this,arguments)},n.type="series.pictorialBar",n.dependencies=["grid"],n.defaultOption=inheritDefaultOption(BaseBarSeriesModel$1.defaultOption,{symbol:"circle",symbolSize:null,symbolRotate:null,symbolPosition:null,symbolOffset:null,symbolMargin:null,symbolRepeat:!1,symbolRepeatDirection:"end",symbolClip:!1,symbolBoundingData:null,symbolPatternSize:400,barGap:"-100%",clip:!1,progressive:0,emphasis:{scale:!1},select:{itemStyle:{borderColor:"#212121"}}}),n}(BaseBarSeriesModel$1);const PictorialBarSeriesModel$1=PictorialBarSeriesModel;function install$u(a){a.registerChartView(PictorialBarView$1),a.registerSeriesModel(PictorialBarSeriesModel$1),a.registerLayout(a.PRIORITY.VISUAL.LAYOUT,curry$1(layout$3,"pictorialBar")),a.registerLayout(a.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,createProgressiveLayout("pictorialBar"))}var ThemeRiverView=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r._layers=[],r}return n.prototype.render=function(r,o,l){var u=r.getData(),c=this,h=this.group,d=r.getLayerSeries(),p=u.getLayout("layoutInfo"),f=p.rect,g=p.boundaryGap;h.x=0,h.y=f.y+g[0];function y(S){return S.name}var v=new DataDiffer$1(this._layersSeries||[],d,y,y),_=[];v.add(bind$1(x,this,"add")).update(bind$1(x,this,"update")).remove(bind$1(x,this,"remove")).execute();function x(S,T,M){var b=c._layers;if(S==="remove"){h.remove(b[T]);return}for(var A=[],I=[],w,C=d[T].indices,E=0;E<C.length;E++){var P=u.getItemLayout(C[E]),D=P.x,L=P.y0,R=P.y;A.push(D,L),I.push(D,L+R),w=u.getItemVisual(C[E],"style")}var O,N=u.getItemLayout(C[0]),V=r.getModel("label"),B=V.get("margin"),G=r.getModel("emphasis");if(S==="add"){var F=_[T]=new Group$4;O=new ECPolygon({shape:{points:A,stackedOnPoints:I,smooth:.4,stackedOnSmooth:.4,smoothConstraint:!1},z2:0}),F.add(O),h.add(F),r.isAnimationEnabled()&&O.setClipPath(createGridClipShape(O.getBoundingRect(),r,function(){O.removeClipPath()}))}else{var F=b[M];O=F.childAt(0),h.add(F),_[T]=F,updateProps$1(O,{shape:{points:A,stackedOnPoints:I}},r),saveOldStyle(O)}setLabelStyle(O,getLabelStatesModels(r),{labelDataIndex:C[E-1],defaultText:u.getName(C[E-1]),inheritColor:w.fill},{normal:{verticalAlign:"middle"}}),O.setTextConfig({position:null,local:!0});var z=O.getTextContent();z&&(z.x=N.x-B,z.y=N.y0+N.y/2),O.useStyle(w),u.setItemGraphicEl(T,O),setStatesStylesFromModel(O,r),toggleHoverEmphasis(O,G.get("focus"),G.get("blurScope"),G.get("disabled"))}this._layersSeries=d,this._layers=_},n.type="themeRiver",n}(ChartView$1);function createGridClipShape(a,n,r){var o=new Rect$3({shape:{x:a.x-10,y:a.y-10,width:0,height:a.height+20}});return initProps(o,{shape:{x:a.x-50,width:a.width+100,height:a.height+20}},n,r),o}const ThemeRiverView$1=ThemeRiverView;var DATA_NAME_INDEX=2,ThemeRiverSeriesModel=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.prototype.init=function(r){a.prototype.init.apply(this,arguments),this.legendVisualProvider=new LegendVisualProvider$1(bind$1(this.getData,this),bind$1(this.getRawData,this))},n.prototype.fixData=function(r){var o=r.length,l={},u=groupData(r,function(y){return l.hasOwnProperty(y[0]+"")||(l[y[0]+""]=-1),y[2]}),c=[];u.buckets.each(function(y,v){c.push({name:v,dataList:y})});for(var h=c.length,d=0;d<h;++d){for(var p=c[d].name,f=0;f<c[d].dataList.length;++f){var g=c[d].dataList[f][0]+"";l[g]=d}for(var g in l)l.hasOwnProperty(g)&&l[g]!==d&&(l[g]=d,r[o]=[g,0,p],o++)}return r},n.prototype.getInitialData=function(r,o){for(var l=this.getReferringComponents("singleAxis",SINGLE_REFERRING).models[0],u=l.get("type"),c=filter(r.data,function(_){return _[2]!==void 0}),h=this.fixData(c||[]),d=[],p=this.nameMap=createHashMap(),f=0,g=0;g<h.length;++g)d.push(h[g][DATA_NAME_INDEX]),p.get(h[g][DATA_NAME_INDEX])||(p.set(h[g][DATA_NAME_INDEX],f),f++);var y=prepareSeriesDataSchema(h,{coordDimensions:["single"],dimensionsDefine:[{name:"time",type:getDimensionTypeByAxis(u)},{name:"value",type:"float"},{name:"name",type:"ordinal"}],encodeDefine:{single:0,value:1,itemName:2}}).dimensions,v=new SeriesData$1(y,this);return v.initData(h),v},n.prototype.getLayerSeries=function(){for(var r=this.getData(),o=r.count(),l=[],u=0;u<o;++u)l[u]=u;var c=r.mapDimension("single"),h=groupData(l,function(p){return r.get("name",p)}),d=[];return h.buckets.each(function(p,f){p.sort(function(g,y){return r.get(c,g)-r.get(c,y)}),d.push({name:f,indices:p})}),d},n.prototype.getAxisTooltipData=function(r,o,l){isArray$1(r)||(r=r?[r]:[]);for(var u=this.getData(),c=this.getLayerSeries(),h=[],d=c.length,p,f=0;f<d;++f){for(var g=Number.MAX_VALUE,y=-1,v=c[f].indices.length,_=0;_<v;++_){var x=u.get(r[0],c[f].indices[_]),S=Math.abs(x-o);S<=g&&(p=x,g=S,y=c[f].indices[_])}h.push(y)}return{dataIndices:h,nestestValue:p}},n.prototype.formatTooltip=function(r,o,l){var u=this.getData(),c=u.getName(r),h=u.get(u.mapDimension("value"),r);return createTooltipMarkup("nameValue",{name:c,value:h})},n.type="series.themeRiver",n.dependencies=["singleAxis"],n.defaultOption={z:2,colorBy:"data",coordinateSystem:"singleAxis",boundaryGap:["10%","10%"],singleAxisIndex:0,animationEasing:"linear",label:{margin:4,show:!0,position:"left",fontSize:11},emphasis:{label:{show:!0}}},n}(SeriesModel$1);const ThemeRiverSeriesModel$1=ThemeRiverSeriesModel;function themeRiverLayout(a,n){a.eachSeriesByType("themeRiver",function(r){var o=r.getData(),l=r.coordinateSystem,u={},c=l.getRect();u.rect=c;var h=r.get("boundaryGap"),d=l.getAxis();if(u.boundaryGap=h,d.orient==="horizontal"){h[0]=parsePercent(h[0],c.height),h[1]=parsePercent(h[1],c.height);var p=c.height-h[0]-h[1];doThemeRiverLayout(o,r,p)}else{h[0]=parsePercent(h[0],c.width),h[1]=parsePercent(h[1],c.width);var f=c.width-h[0]-h[1];doThemeRiverLayout(o,r,f)}o.setLayout("layoutInfo",u)})}function doThemeRiverLayout(a,n,r){if(a.count())for(var o=n.coordinateSystem,l=n.getLayerSeries(),u=a.mapDimension("single"),c=a.mapDimension("value"),h=map$1(l,function(S){return map$1(S.indices,function(T){var M=o.dataToPoint(a.get(u,T));return M[1]=a.get(c,T),M})}),d=computeBaseline(h),p=d.y0,f=r/d.max,g=l.length,y=l[0].indices.length,v,_=0;_<y;++_){v=p[_]*f,a.setItemLayout(l[0].indices[_],{layerIndex:0,x:h[0][_][0],y0:v,y:h[0][_][1]*f});for(var x=1;x<g;++x)v+=h[x-1][_][1]*f,a.setItemLayout(l[x].indices[_],{layerIndex:x,x:h[x][_][0],y0:v,y:h[x][_][1]*f})}}function computeBaseline(a){for(var n=a.length,r=a[0].length,o=[],l=[],u=0,c=0;c<r;++c){for(var h=0,d=0;d<n;++d)h+=a[d][c][1];h>u&&(u=h),o.push(h)}for(var p=0;p<r;++p)l[p]=(u-o[p])/2;u=0;for(var f=0;f<r;++f){var g=o[f]+l[f];g>u&&(u=g)}return{y0:l,max:u}}function install$t(a){a.registerChartView(ThemeRiverView$1),a.registerSeriesModel(ThemeRiverSeriesModel$1),a.registerLayout(themeRiverLayout),a.registerProcessor(dataFilter$1("themeRiver"))}var DEFAULT_SECTOR_Z=2,DEFAULT_TEXT_Z=4,SunburstPiece=function(a){__extends(n,a);function n(r,o,l,u){var c=a.call(this)||this;c.z2=DEFAULT_SECTOR_Z,c.textConfig={inside:!0},getECData(c).seriesIndex=o.seriesIndex;var h=new ZRText$1({z2:DEFAULT_TEXT_Z,silent:r.getModel().get(["label","silent"])});return c.setTextContent(h),c.updateData(!0,r,o,l,u),c}return n.prototype.updateData=function(r,o,l,u,c){this.node=o,o.piece=this,l=l||this._seriesModel,u=u||this._ecModel;var h=this;getECData(h).dataIndex=o.dataIndex;var d=o.getModel(),p=d.getModel("emphasis"),f=o.getLayout(),g=extend({},f);g.label=null;var y=o.getVisual("style");y.lineJoin="bevel";var v=o.getVisual("decal");v&&(y.decal=createOrUpdatePatternFromDecal(v,c));var _=getSectorCornerRadius(d.getModel("itemStyle"),g,!0);extend(g,_),each$f(SPECIAL_STATES,function(M){var b=h.ensureState(M),A=d.getModel([M,"itemStyle"]);b.style=A.getItemStyle();var I=getSectorCornerRadius(A,g);I&&(b.shape=I)}),r?(h.setShape(g),h.shape.r=f.r0,initProps(h,{shape:{r:f.r}},l,o.dataIndex)):(updateProps$1(h,{shape:g},l),saveOldStyle(h)),h.useStyle(y),this._updateLabel(l);var x=d.getShallow("cursor");x&&h.attr("cursor",x),this._seriesModel=l||this._seriesModel,this._ecModel=u||this._ecModel;var S=p.get("focus"),T=S==="relative"?concatArray(o.getAncestorsIndices(),o.getDescendantIndices()):S==="ancestor"?o.getAncestorsIndices():S==="descendant"?o.getDescendantIndices():S;toggleHoverEmphasis(this,T,p.get("blurScope"),p.get("disabled"))},n.prototype._updateLabel=function(r){var o=this,l=this.node.getModel(),u=l.getModel("label"),c=this.node.getLayout(),h=c.endAngle-c.startAngle,d=(c.startAngle+c.endAngle)/2,p=Math.cos(d),f=Math.sin(d),g=this,y=g.getTextContent(),v=this.node.dataIndex,_=u.get("minAngle")/180*Math.PI,x=u.get("show")&&!(_!=null&&Math.abs(h)<_);y.ignore=!x,each$f(DISPLAY_STATES,function(T){var M=T==="normal"?l.getModel("label"):l.getModel([T,"label"]),b=T==="normal",A=b?y:y.ensureState(T),I=r.getFormattedLabel(v,T);b&&(I=I||o.node.name),A.style=createTextStyle$1(M,{},null,T!=="normal",!0),I&&(A.style.text=I);var w=M.get("show");w!=null&&!b&&(A.ignore=!w);var C=S(M,"position"),E=b?g:g.states[T],P=E.style.fill;E.textConfig={outsideFill:M.get("color")==="inherit"?P:null,inside:C!=="outside"};var D,L=S(M,"distance")||0,R=S(M,"align"),O=S(M,"rotate"),N=Math.PI*.5,V=Math.PI*1.5,B=normalizeRadian(O==="tangential"?Math.PI/2-d:d),G=B>N&&!isRadianAroundZero(B-N)&&B<V;C==="outside"?(D=c.r+L,R=G?"right":"left"):!R||R==="center"?(h===2*Math.PI&&c.r0===0?D=0:D=(c.r+c.r0)/2,R="center"):R==="left"?(D=c.r0+L,R=G?"right":"left"):R==="right"&&(D=c.r-L,R=G?"left":"right"),A.style.align=R,A.style.verticalAlign=S(M,"verticalAlign")||"middle",A.x=D*p+c.cx,A.y=D*f+c.cy;var F=0;O==="radial"?F=normalizeRadian(-d)+(G?Math.PI:0):O==="tangential"?F=normalizeRadian(Math.PI/2-d)+(G?Math.PI:0):isNumber(O)&&(F=O*Math.PI/180),A.rotation=normalizeRadian(F)});function S(T,M){var b=T.get(M);return b==null?u.get(M):b}y.dirtyStyle()},n}(Sector$1);const SunburstPiece$1=SunburstPiece;var ROOT_TO_NODE_ACTION="sunburstRootToNode",HIGHLIGHT_ACTION="sunburstHighlight",UNHIGHLIGHT_ACTION="sunburstUnhighlight";function installSunburstAction(a){a.registerAction({type:ROOT_TO_NODE_ACTION,update:"updateView"},function(n,r){r.eachComponent({mainType:"series",subType:"sunburst",query:n},o);function o(l,u){var c=retrieveTargetInfo(n,[ROOT_TO_NODE_ACTION],l);if(c){var h=l.getViewRoot();h&&(n.direction=aboveViewRoot(h,c.node)?"rollUp":"drillDown"),l.resetViewRoot(c.node)}}}),a.registerAction({type:HIGHLIGHT_ACTION,update:"none"},function(n,r,o){n=extend({},n),r.eachComponent({mainType:"series",subType:"sunburst",query:n},l);function l(u){var c=retrieveTargetInfo(n,[HIGHLIGHT_ACTION],u);c&&(n.dataIndex=c.node.dataIndex)}deprecateReplaceLog("sunburstHighlight","highlight"),o.dispatchAction(extend(n,{type:"highlight"}))}),a.registerAction({type:UNHIGHLIGHT_ACTION,update:"updateView"},function(n,r,o){n=extend({},n),deprecateReplaceLog("sunburstUnhighlight","downplay"),o.dispatchAction(extend(n,{type:"downplay"}))})}var SunburstView=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.prototype.render=function(r,o,l,u){var c=this;this.seriesModel=r,this.api=l,this.ecModel=o;var h=r.getData(),d=h.tree.root,p=r.getViewRoot(),f=this.group,g=r.get("renderLabelForZeroData"),y=[];p.eachNode(function(M){y.push(M)});var v=this._oldChildren||[];_(y,v),T(d,p),this._initEvents(),this._oldChildren=y;function _(M,b){if(M.length===0&&b.length===0)return;new DataDiffer$1(b,M,A,A).add(I).update(I).remove(curry$1(I,null)).execute();function A(w){return w.getId()}function I(w,C){var E=w==null?null:M[w],P=C==null?null:b[C];x(E,P)}}function x(M,b){if(!g&&M&&!M.getValue()&&(M=null),M!==d&&b!==d){if(b&&b.piece)M?(b.piece.updateData(!1,M,r,o,l),h.setItemGraphicEl(M.dataIndex,b.piece)):S(b);else if(M){var A=new SunburstPiece$1(M,r,o,l);f.add(A),h.setItemGraphicEl(M.dataIndex,A)}}}function S(M){!M||M.piece&&(f.remove(M.piece),M.piece=null)}function T(M,b){b.depth>0?(c.virtualPiece?c.virtualPiece.updateData(!1,M,r,o,l):(c.virtualPiece=new SunburstPiece$1(M,r,o,l),f.add(c.virtualPiece)),b.piece.off("click"),c.virtualPiece.on("click",function(A){c._rootToNode(b.parentNode)})):c.virtualPiece&&(f.remove(c.virtualPiece),c.virtualPiece=null)}},n.prototype._initEvents=function(){var r=this;this.group.off("click"),this.group.on("click",function(o){var l=!1,u=r.seriesModel.getViewRoot();u.eachNode(function(c){if(!l&&c.piece&&c.piece===o.target){var h=c.getModel().get("nodeClick");if(h==="rootToNode")r._rootToNode(c);else if(h==="link"){var d=c.getModel(),p=d.get("link");if(p){var f=d.get("target",!0)||"_blank";windowOpen(p,f)}}l=!0}})})},n.prototype._rootToNode=function(r){r!==this.seriesModel.getViewRoot()&&this.api.dispatchAction({type:ROOT_TO_NODE_ACTION,from:this.uid,seriesId:this.seriesModel.id,targetNode:r})},n.prototype.containPoint=function(r,o){var l=o.getData(),u=l.getItemLayout(0);if(u){var c=r[0]-u.cx,h=r[1]-u.cy,d=Math.sqrt(c*c+h*h);return d<=u.r&&d>=u.r0}},n.type="sunburst",n}(ChartView$1);const SunburstView$1=SunburstView;var SunburstSeriesModel=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r.ignoreStyleOnData=!0,r}return n.prototype.getInitialData=function(r,o){var l={name:r.name,children:r.data};completeTreeValue(l);var u=this._levelModels=map$1(r.levels||[],function(d){return new Model$1(d,this,o)},this),c=Tree$1.createTree(l,this,h);function h(d){d.wrapMethod("getItemModel",function(p,f){var g=c.getNodeByDataIndex(f),y=u[g.depth];return y&&(p.parentModel=y),p})}return c.data},n.prototype.optionUpdated=function(){this.resetViewRoot()},n.prototype.getDataParams=function(r){var o=a.prototype.getDataParams.apply(this,arguments),l=this.getData().tree.getNodeByDataIndex(r);return o.treePathInfo=wrapTreePathInfo(l,this),o},n.prototype.getLevelModel=function(r){return this._levelModels&&this._levelModels[r.depth]},n.prototype.getViewRoot=function(){return this._viewRoot},n.prototype.resetViewRoot=function(r){r?this._viewRoot=r:r=this._viewRoot;var o=this.getRawData().tree.root;(!r||r!==o&&!o.contains(r))&&(this._viewRoot=o)},n.prototype.enableAriaDecal=function(){enableAriaDecalForTree(this)},n.type="series.sunburst",n.defaultOption={z:2,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,stillShowZeroSum:!0,nodeClick:"rootToNode",renderLabelForZeroData:!1,label:{rotate:"radial",show:!0,opacity:1,align:"center",position:"inside",distance:5,silent:!0},itemStyle:{borderWidth:1,borderColor:"white",borderType:"solid",shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.2)",shadowOffsetX:0,shadowOffsetY:0,opacity:1},emphasis:{focus:"descendant"},blur:{itemStyle:{opacity:.2},label:{opacity:.1}},animationType:"expansion",animationDuration:1e3,animationDurationUpdate:500,data:[],sort:"desc"},n}(SeriesModel$1);function completeTreeValue(a){var n=0;each$f(a.children,function(o){completeTreeValue(o);var l=o.value;isArray$1(l)&&(l=l[0]),n+=l});var r=a.value;isArray$1(r)&&(r=r[0]),(r==null||isNaN(r))&&(r=n),r<0&&(r=0),isArray$1(a.value)?a.value[0]=r:a.value=r}const SunburstSeriesModel$1=SunburstSeriesModel;var RADIAN=Math.PI/180;function sunburstLayout(a,n,r){n.eachSeriesByType(a,function(o){var l=o.get("center"),u=o.get("radius");isArray$1(u)||(u=[0,u]),isArray$1(l)||(l=[l,l]);var c=r.getWidth(),h=r.getHeight(),d=Math.min(c,h),p=parsePercent(l[0],c),f=parsePercent(l[1],h),g=parsePercent(u[0],d/2),y=parsePercent(u[1],d/2),v=-o.get("startAngle")*RADIAN,_=o.get("minAngle")*RADIAN,x=o.getData().tree.root,S=o.getViewRoot(),T=S.depth,M=o.get("sort");M!=null&&initChildren(S,M);var b=0;each$f(S.children,function(B){!isNaN(B.getValue())&&b++});var A=S.getValue(),I=Math.PI/(A||b)*2,w=S.depth>0,C=S.height-(w?-1:1),E=(y-g)/(C||1),P=o.get("clockwise"),D=o.get("stillShowZeroSum"),L=P?1:-1,R=function(B,G){if(B){var F=G;if(B!==x){var z=B.getValue(),H=A===0&&D?I:z*I;H<_&&(H=_),F=G+L*H;var U=B.depth-T-(w?-1:1),Y=g+E*U,Z=g+E*(U+1),X=o.getLevelModel(B);if(X){var K=X.get("r0",!0),te=X.get("r",!0),ae=X.get("radius",!0);ae!=null&&(K=ae[0],te=ae[1]),K!=null&&(Y=parsePercent(K,d/2)),te!=null&&(Z=parsePercent(te,d/2))}B.setLayout({angle:H,startAngle:G,endAngle:F,clockwise:P,cx:p,cy:f,r0:Y,r:Z})}if(B.children&&B.children.length){var J=0;each$f(B.children,function(j){J+=R(j,G+J)})}return F-G}};if(w){var O=g,N=g+E,V=Math.PI*2;x.setLayout({angle:V,startAngle:v,endAngle:v+V,clockwise:P,cx:p,cy:f,r0:O,r:N})}R(S,v)})}function initChildren(a,n){var r=a.children||[];a.children=sort(r,n),r.length&&each$f(a.children,function(o){initChildren(o,n)})}function sort(a,n){if(isFunction(n)){var r=map$1(a,function(l,u){var c=l.getValue();return{params:{depth:l.depth,height:l.height,dataIndex:l.dataIndex,getValue:function(){return c}},index:u}});return r.sort(function(l,u){return n(l.params,u.params)}),map$1(r,function(l){return a[l.index]})}else{var o=n==="asc";return a.sort(function(l,u){var c=(l.getValue()-u.getValue())*(o?1:-1);return c===0?(l.dataIndex-u.dataIndex)*(o?-1:1):c})}}function sunburstVisual(a){var n={};function r(o,l,u){for(var c=o;c&&c.depth>1;)c=c.parentNode;var h=l.getColorFromPalette(c.name||c.dataIndex+"",n);return o.depth>1&&isString(h)&&(h=lift(h,(o.depth-1)/(u-1)*.5)),h}a.eachSeriesByType("sunburst",function(o){var l=o.getData(),u=l.tree;u.eachNode(function(c){var h=c.getModel(),d=h.getModel("itemStyle").getItemStyle();d.fill||(d.fill=r(c,o,u.root.height));var p=l.ensureUniqueItemVisual(c.dataIndex,"style");extend(p,d)})})}function install$s(a){a.registerChartView(SunburstView$1),a.registerSeriesModel(SunburstSeriesModel$1),a.registerLayout(curry$1(sunburstLayout,"sunburst")),a.registerProcessor(curry$1(dataFilter$1,"sunburst")),a.registerVisual(sunburstVisual),installSunburstAction(a)}var STYLE_VISUAL_TYPE={color:"fill",borderColor:"stroke"},NON_STYLE_VISUAL_PROPS={symbol:1,symbolSize:1,symbolKeepAspect:1,legendIcon:1,visualMeta:1,liftZ:1,decal:1},customInnerStore=makeInner(),CustomSeriesModel=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.prototype.optionUpdated=function(){this.currentZLevel=this.get("zlevel",!0),this.currentZ=this.get("z",!0)},n.prototype.getInitialData=function(r,o){return createSeriesData(null,this)},n.prototype.getDataParams=function(r,o,l){var u=a.prototype.getDataParams.call(this,r,o);return l&&(u.info=customInnerStore(l).info),u},n.type="series.custom",n.dependencies=["grid","polar","geo","singleAxis","calendar"],n.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,clip:!1},n}(SeriesModel$1);const CustomSeriesModel$1=CustomSeriesModel;function dataToCoordSize$3(a,n){return n=n||[0,0],map$1(["x","y"],function(r,o){var l=this.getAxis(r),u=n[o],c=a[o]/2;return l.type==="category"?l.getBandWidth():Math.abs(l.dataToCoord(u-c)-l.dataToCoord(u+c))},this)}function cartesianPrepareCustom(a){var n=a.master.getRect();return{coordSys:{type:"cartesian2d",x:n.x,y:n.y,width:n.width,height:n.height},api:{coord:function(r){return a.dataToPoint(r)},size:bind$1(dataToCoordSize$3,a)}}}function dataToCoordSize$2(a,n){return n=n||[0,0],map$1([0,1],function(r){var o=n[r],l=a[r]/2,u=[],c=[];return u[r]=o-l,c[r]=o+l,u[1-r]=c[1-r]=n[1-r],Math.abs(this.dataToPoint(u)[r]-this.dataToPoint(c)[r])},this)}function geoPrepareCustom(a){var n=a.getBoundingRect();return{coordSys:{type:"geo",x:n.x,y:n.y,width:n.width,height:n.height,zoom:a.getZoom()},api:{coord:function(r){return a.dataToPoint(r)},size:bind$1(dataToCoordSize$2,a)}}}function dataToCoordSize$1(a,n){var r=this.getAxis(),o=n instanceof Array?n[0]:n,l=(a instanceof Array?a[0]:a)/2;return r.type==="category"?r.getBandWidth():Math.abs(r.dataToCoord(o-l)-r.dataToCoord(o+l))}function singlePrepareCustom(a){var n=a.getRect();return{coordSys:{type:"singleAxis",x:n.x,y:n.y,width:n.width,height:n.height},api:{coord:function(r){return a.dataToPoint(r)},size:bind$1(dataToCoordSize$1,a)}}}function dataToCoordSize(a,n){return n=n||[0,0],map$1(["Radius","Angle"],function(r,o){var l="get"+r+"Axis",u=this[l](),c=n[o],h=a[o]/2,d=u.type==="category"?u.getBandWidth():Math.abs(u.dataToCoord(c-h)-u.dataToCoord(c+h));return r==="Angle"&&(d=d*Math.PI/180),d},this)}function polarPrepareCustom(a){var n=a.getRadiusAxis(),r=a.getAngleAxis(),o=n.getExtent();return o[0]>o[1]&&o.reverse(),{coordSys:{type:"polar",cx:a.cx,cy:a.cy,r:o[1],r0:o[0]},api:{coord:function(l){var u=n.dataToRadius(l[0]),c=r.dataToAngle(l[1]),h=a.coordToPoint([u,c]);return h.push(u,c*Math.PI/180),h},size:bind$1(dataToCoordSize,a)}}}function calendarPrepareCustom(a){var n=a.getRect(),r=a.getRangeInfo();return{coordSys:{type:"calendar",x:n.x,y:n.y,width:n.width,height:n.height,cellWidth:a.getCellWidth(),cellHeight:a.getCellHeight(),rangeInfo:{start:r.start,end:r.end,weeks:r.weeks,dayCount:r.allDay}},api:{coord:function(o,l){return a.dataToPoint(o,l)}}}}var deprecatedLogs={};function isEC4CompatibleStyle(a,n,r,o){return a&&(a.legacy||a.legacy!==!1&&!r&&!o&&n!=="tspan"&&(n==="text"||hasOwn(a,"text")))}function convertFromEC4CompatibleStyle(a,n,r){var o=a,l,u,c;if(n==="text")c=o;else{c={},hasOwn(o,"text")&&(c.text=o.text),hasOwn(o,"rich")&&(c.rich=o.rich),hasOwn(o,"textFill")&&(c.fill=o.textFill),hasOwn(o,"textStroke")&&(c.stroke=o.textStroke),hasOwn(o,"fontFamily")&&(c.fontFamily=o.fontFamily),hasOwn(o,"fontSize")&&(c.fontSize=o.fontSize),hasOwn(o,"fontStyle")&&(c.fontStyle=o.fontStyle),hasOwn(o,"fontWeight")&&(c.fontWeight=o.fontWeight),u={type:"text",style:c,silent:!0},l={};var h=hasOwn(o,"textPosition");r?l.position=h?o.textPosition:"inside":h&&(l.position=o.textPosition),hasOwn(o,"textPosition")&&(l.position=o.textPosition),hasOwn(o,"textOffset")&&(l.offset=o.textOffset),hasOwn(o,"textRotation")&&(l.rotation=o.textRotation),hasOwn(o,"textDistance")&&(l.distance=o.textDistance)}return convertEC4CompatibleRichItem(c,a),each$f(c.rich,function(d){convertEC4CompatibleRichItem(d,d)}),{textConfig:l,textContent:u}}function convertEC4CompatibleRichItem(a,n){!n||(n.font=n.textFont||n.font,hasOwn(n,"textStrokeWidth")&&(a.lineWidth=n.textStrokeWidth),hasOwn(n,"textAlign")&&(a.align=n.textAlign),hasOwn(n,"textVerticalAlign")&&(a.verticalAlign=n.textVerticalAlign),hasOwn(n,"textLineHeight")&&(a.lineHeight=n.textLineHeight),hasOwn(n,"textWidth")&&(a.width=n.textWidth),hasOwn(n,"textHeight")&&(a.height=n.textHeight),hasOwn(n,"textBackgroundColor")&&(a.backgroundColor=n.textBackgroundColor),hasOwn(n,"textPadding")&&(a.padding=n.textPadding),hasOwn(n,"textBorderColor")&&(a.borderColor=n.textBorderColor),hasOwn(n,"textBorderWidth")&&(a.borderWidth=n.textBorderWidth),hasOwn(n,"textBorderRadius")&&(a.borderRadius=n.textBorderRadius),hasOwn(n,"textBoxShadowColor")&&(a.shadowColor=n.textBoxShadowColor),hasOwn(n,"textBoxShadowBlur")&&(a.shadowBlur=n.textBoxShadowBlur),hasOwn(n,"textBoxShadowOffsetX")&&(a.shadowOffsetX=n.textBoxShadowOffsetX),hasOwn(n,"textBoxShadowOffsetY")&&(a.shadowOffsetY=n.textBoxShadowOffsetY))}function convertToEC4StyleForCustomSerise(a,n,r){var o=a;o.textPosition=o.textPosition||r.position||"inside",r.offset!=null&&(o.textOffset=r.offset),r.rotation!=null&&(o.textRotation=r.rotation),r.distance!=null&&(o.textDistance=r.distance);var l=o.textPosition.indexOf("inside")>=0,u=a.fill||"#000";convertToEC4RichItem(o,n);var c=o.textFill==null;return l?c&&(o.textFill=r.insideFill||"#fff",!o.textStroke&&r.insideStroke&&(o.textStroke=r.insideStroke),!o.textStroke&&(o.textStroke=u),o.textStrokeWidth==null&&(o.textStrokeWidth=2)):(c&&(o.textFill=a.fill||r.outsideFill||"#000"),!o.textStroke&&r.outsideStroke&&(o.textStroke=r.outsideStroke)),o.text=n.text,o.rich=n.rich,each$f(n.rich,function(h){convertToEC4RichItem(h,h)}),o}function convertToEC4RichItem(a,n){!n||(hasOwn(n,"fill")&&(a.textFill=n.fill),hasOwn(n,"stroke")&&(a.textStroke=n.fill),hasOwn(n,"lineWidth")&&(a.textStrokeWidth=n.lineWidth),hasOwn(n,"font")&&(a.font=n.font),hasOwn(n,"fontStyle")&&(a.fontStyle=n.fontStyle),hasOwn(n,"fontWeight")&&(a.fontWeight=n.fontWeight),hasOwn(n,"fontSize")&&(a.fontSize=n.fontSize),hasOwn(n,"fontFamily")&&(a.fontFamily=n.fontFamily),hasOwn(n,"align")&&(a.textAlign=n.align),hasOwn(n,"verticalAlign")&&(a.textVerticalAlign=n.verticalAlign),hasOwn(n,"lineHeight")&&(a.textLineHeight=n.lineHeight),hasOwn(n,"width")&&(a.textWidth=n.width),hasOwn(n,"height")&&(a.textHeight=n.height),hasOwn(n,"backgroundColor")&&(a.textBackgroundColor=n.backgroundColor),hasOwn(n,"padding")&&(a.textPadding=n.padding),hasOwn(n,"borderColor")&&(a.textBorderColor=n.borderColor),hasOwn(n,"borderWidth")&&(a.textBorderWidth=n.borderWidth),hasOwn(n,"borderRadius")&&(a.textBorderRadius=n.borderRadius),hasOwn(n,"shadowColor")&&(a.textBoxShadowColor=n.shadowColor),hasOwn(n,"shadowBlur")&&(a.textBoxShadowBlur=n.shadowBlur),hasOwn(n,"shadowOffsetX")&&(a.textBoxShadowOffsetX=n.shadowOffsetX),hasOwn(n,"shadowOffsetY")&&(a.textBoxShadowOffsetY=n.shadowOffsetY),hasOwn(n,"textShadowColor")&&(a.textShadowColor=n.textShadowColor),hasOwn(n,"textShadowBlur")&&(a.textShadowBlur=n.textShadowBlur),hasOwn(n,"textShadowOffsetX")&&(a.textShadowOffsetX=n.textShadowOffsetX),hasOwn(n,"textShadowOffsetY")&&(a.textShadowOffsetY=n.textShadowOffsetY))}function warnDeprecated(a,n){{var r=a+"^_^"+n;deprecatedLogs[r]||(console.warn('[ECharts] DEPRECATED: "'+a+'" has been deprecated. '+n),deprecatedLogs[r]=!0)}}var LEGACY_TRANSFORM_PROPS_MAP={position:["x","y"],scale:["scaleX","scaleY"],origin:["originX","originY"]},LEGACY_TRANSFORM_PROPS=keys(LEGACY_TRANSFORM_PROPS_MAP),TRANSFORM_PROPS_MAP=reduce(TRANSFORMABLE_PROPS,function(a,n){return a[n]=1,a},{}),transformPropNamesStr=TRANSFORMABLE_PROPS.join(", "),ELEMENT_ANIMATABLE_PROPS=["","style","shape","extra"],transitionInnerStore=makeInner();function getElementAnimationConfig(a,n,r,o,l){var u=a+"Animation",c=getAnimationConfig(a,o,l)||{},h=transitionInnerStore(n).userDuring;return c.duration>0&&(c.during=h?bind$1(duringCall,{el:n,userDuring:h}):null,c.setToFinal=!0,c.scope=a),extend(c,r[u]),c}function applyUpdateTransition(a,n,r,o){o=o||{};var l=o.dataIndex,u=o.isInit,c=o.clearStyle,h=r.isAnimationEnabled(),d=transitionInnerStore(a),p=n.style;d.userDuring=n.during;var f={},g={};if(prepareTransformAllPropsFinal(a,n,g),prepareShapeOrExtraAllPropsFinal("shape",n,g),prepareShapeOrExtraAllPropsFinal("extra",n,g),!u&&h&&(prepareTransformTransitionFrom(a,n,f),prepareShapeOrExtraTransitionFrom("shape",a,n,f),prepareShapeOrExtraTransitionFrom("extra",a,n,f),prepareStyleTransitionFrom(a,n,p,f)),g.style=p,applyPropsDirectly(a,g,c),applyMiscProps(a,n),h)if(u){var y={};each$f(ELEMENT_ANIMATABLE_PROPS,function(_){var x=_?n[_]:n;x&&x.enterFrom&&(_&&(y[_]=y[_]||{}),extend(_?y[_]:y,x.enterFrom))});var v=getElementAnimationConfig("enter",a,n,r,l);v.duration>0&&a.animateFrom(y,v)}else applyPropsTransition(a,n,l||0,r,f);updateLeaveTo(a,n),p?a.dirty():a.markRedraw()}function updateLeaveTo(a,n){for(var r=transitionInnerStore(a).leaveToProps,o=0;o<ELEMENT_ANIMATABLE_PROPS.length;o++){var l=ELEMENT_ANIMATABLE_PROPS[o],u=l?n[l]:n;u&&u.leaveTo&&(r||(r=transitionInnerStore(a).leaveToProps={}),l&&(r[l]=r[l]||{}),extend(l?r[l]:r,u.leaveTo))}}function applyLeaveTransition(a,n,r,o){if(a){var l=a.parent,u=transitionInnerStore(a).leaveToProps;if(u){var c=getElementAnimationConfig("update",a,n,r,0);c.done=function(){l.remove(a),o&&o()},a.animateTo(u,c)}else l.remove(a),o&&o()}}function isTransitionAll(a){return a==="all"}function applyPropsDirectly(a,n,r){var o=n.style;if(!a.isGroup&&o){if(r){a.useStyle({});for(var l=a.animators,u=0;u<l.length;u++){var c=l[u];c.targetName==="style"&&c.changeTarget(a.style)}}a.setStyle(o)}n&&(n.style=null,n&&a.attr(n),n.style=o)}function applyPropsTransition(a,n,r,o,l){if(l){var u=getElementAnimationConfig("update",a,n,o,r);u.duration>0&&a.animateFrom(l,u)}}function applyMiscProps(a,n){hasOwn(n,"silent")&&(a.silent=n.silent),hasOwn(n,"ignore")&&(a.ignore=n.ignore),a instanceof Displayable$1&&hasOwn(n,"invisible")&&(a.invisible=n.invisible),a instanceof Path$1&&hasOwn(n,"autoBatch")&&(a.autoBatch=n.autoBatch)}var tmpDuringScope={},transitionDuringAPI={setTransform:function(a,n){return assert(hasOwn(TRANSFORM_PROPS_MAP,a),"Only "+transformPropNamesStr+" available in `setTransform`."),tmpDuringScope.el[a]=n,this},getTransform:function(a){return assert(hasOwn(TRANSFORM_PROPS_MAP,a),"Only "+transformPropNamesStr+" available in `getTransform`."),tmpDuringScope.el[a]},setShape:function(a,n){assertNotReserved(a);var r=tmpDuringScope.el,o=r.shape||(r.shape={});return o[a]=n,r.dirtyShape&&r.dirtyShape(),this},getShape:function(a){assertNotReserved(a);var n=tmpDuringScope.el.shape;if(n)return n[a]},setStyle:function(a,n){assertNotReserved(a);var r=tmpDuringScope.el,o=r.style;return o&&(eqNaN(n)&&warn("style."+a+" must not be assigned with NaN."),o[a]=n,r.dirtyStyle&&r.dirtyStyle()),this},getStyle:function(a){assertNotReserved(a);var n=tmpDuringScope.el.style;if(n)return n[a]},setExtra:function(a,n){assertNotReserved(a);var r=tmpDuringScope.el.extra||(tmpDuringScope.el.extra={});return r[a]=n,this},getExtra:function(a){assertNotReserved(a);var n=tmpDuringScope.el.extra;if(n)return n[a]}};function assertNotReserved(a){if(a==="transition"||a==="enterFrom"||a==="leaveTo")throw new Error('key must not be "'+a+'"')}function duringCall(){var a=this,n=a.el;if(n){var r=transitionInnerStore(n).userDuring,o=a.userDuring;if(r!==o){a.el=a.userDuring=null;return}tmpDuringScope.el=n,o(transitionDuringAPI)}}function prepareShapeOrExtraTransitionFrom(a,n,r,o){var l=r[a];if(l){var u=n[a],c;if(u){var h=r.transition,d=l.transition;if(d)if(!c&&(c=o[a]={}),isTransitionAll(d))extend(c,u);else for(var p=normalizeToArray(d),f=0;f<p.length;f++){var g=p[f],y=u[g];c[g]=y}else if(isTransitionAll(h)||indexOf(h,a)>=0){!c&&(c=o[a]={});for(var v=keys(u),f=0;f<v.length;f++){var g=v[f],y=u[g];isNonStyleTransitionEnabled(l[g],y)&&(c[g]=y)}}}}}function prepareShapeOrExtraAllPropsFinal(a,n,r){var o=n[a];if(o)for(var l=r[a]={},u=keys(o),c=0;c<u.length;c++){var h=u[c];l[h]=cloneValue(o[h])}}function prepareTransformTransitionFrom(a,n,r){for(var o=n.transition,l=isTransitionAll(o)?TRANSFORMABLE_PROPS:normalizeToArray(o||[]),u=0;u<l.length;u++){var c=l[u];if(!(c==="style"||c==="shape"||c==="extra")){var h=a[c];checkTransformPropRefer(c,"el.transition"),r[c]=h}}}function prepareTransformAllPropsFinal(a,n,r){for(var o=0;o<LEGACY_TRANSFORM_PROPS.length;o++){var l=LEGACY_TRANSFORM_PROPS[o],u=LEGACY_TRANSFORM_PROPS_MAP[l],c=n[l];c&&(r[u[0]]=c[0],r[u[1]]=c[1])}for(var o=0;o<TRANSFORMABLE_PROPS.length;o++){var h=TRANSFORMABLE_PROPS[o];n[h]!=null&&(r[h]=n[h])}}function prepareStyleTransitionFrom(a,n,r,o){if(r){var l=a.style,u;if(l){var c=r.transition,h=n.transition;if(c&&!isTransitionAll(c)){var d=normalizeToArray(c);!u&&(u=o.style={});for(var p=0;p<d.length;p++){var f=d[p],g=l[f];u[f]=g}}else if(a.getAnimationStyleProps&&(isTransitionAll(h)||isTransitionAll(c)||indexOf(h,"style")>=0)){var y=a.getAnimationStyleProps(),v=y?y.style:null;if(v){!u&&(u=o.style={});for(var _=keys(r),p=0;p<_.length;p++){var f=_[p];if(v[f]){var g=l[f];u[f]=g}}}}}}}function isNonStyleTransitionEnabled(a,n){return isArrayLike(a)?a!==n:a!=null&&isFinite(a)}var checkTransformPropRefer;checkTransformPropRefer=function(a,n){hasOwn(TRANSFORM_PROPS_MAP,a)||warn("Prop `"+a+"` is not a permitted in `"+n+"`. Only `"+keys(TRANSFORM_PROPS_MAP).join("`, `")+"` are permitted.")};var getStateToRestore=makeInner(),KEYFRAME_EXCLUDE_KEYS=["percent","easing","shape","style","extra"];function stopPreviousKeyframeAnimationAndRestore(a){a.stopAnimation("keyframe"),a.attr(getStateToRestore(a))}function applyKeyframeAnimation(a,n,r){if(!(!r.isAnimationEnabled()||!n)){if(isArray$1(n)){each$f(n,function(h){applyKeyframeAnimation(a,h,r)});return}var o=n.keyframes,l=n.duration;if(r&&l==null){var u=getAnimationConfig("enter",r,0);l=u&&u.duration}if(!(!o||!l)){var c=getStateToRestore(a);each$f(ELEMENT_ANIMATABLE_PROPS,function(h){if(!(h&&!a[h])){var d,p=!1;o.sort(function(f,g){return f.percent-g.percent}),each$f(o,function(f){var g=a.animators,y=h?f[h]:f;if(f.percent>=1&&(p=!0),!!y){var v=keys(y);if(h||(v=filter(v,function(S){return indexOf(KEYFRAME_EXCLUDE_KEYS,S)<0})),!!v.length){d||(d=a.animate(h,n.loop,!0),d.scope="keyframe");for(var _=0;_<g.length;_++)g[_]!==d&&g[_].targetName===d.targetName&&g[_].stopTracks(v);h&&(c[h]=c[h]||{});var x=h?c[h]:c;each$f(v,function(S){x[S]=((h?a[h]:a)||{})[S]}),d.whenWithKeys(l*f.percent,y,v,f.easing)}}}),d&&(p||warn("End frame with percent: 1 is missing in the keyframeAnimation.",!0),d.delay(n.delay||0).duration(l).start(n.easing))}})}}}var EMPHASIS="emphasis",NORMAL="normal",BLUR="blur",SELECT="select",STATES=[NORMAL,EMPHASIS,BLUR,SELECT],PATH_ITEM_STYLE={normal:["itemStyle"],emphasis:[EMPHASIS,"itemStyle"],blur:[BLUR,"itemStyle"],select:[SELECT,"itemStyle"]},PATH_LABEL={normal:["label"],emphasis:[EMPHASIS,"label"],blur:[BLUR,"label"],select:[SELECT,"label"]},DEFAULT_TRANSITION=["x","y"],GROUP_DIFF_PREFIX="e\0\0",attachedTxInfoTmp={normal:{},emphasis:{},blur:{},select:{}},prepareCustoms={cartesian2d:cartesianPrepareCustom,geo:geoPrepareCustom,single:singlePrepareCustom,polar:polarPrepareCustom,calendar:calendarPrepareCustom};function isPath(a){return a instanceof Path$1}function isDisplayable(a){return a instanceof Displayable$1}function copyElement(a,n){n.copyTransform(a),isDisplayable(n)&&isDisplayable(a)&&(n.setStyle(a.style),n.z=a.z,n.z2=a.z2,n.zlevel=a.zlevel,n.invisible=a.invisible,n.ignore=a.ignore,isPath(n)&&isPath(a)&&n.setShape(a.shape))}var CustomChartView=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.prototype.render=function(r,o,l,u){this._progressiveEls=null;var c=this._data,h=r.getData(),d=this.group,p=makeRenderItem(r,h,o,l);c||d.removeAll(),h.diff(c).add(function(g){createOrUpdateItem(l,null,g,p(g,u),r,d,h)}).remove(function(g){var y=c.getItemGraphicEl(g);y&&applyLeaveTransition(y,customInnerStore(y).option,r)}).update(function(g,y){var v=c.getItemGraphicEl(y);createOrUpdateItem(l,v,g,p(g,u),r,d,h)}).execute();var f=r.get("clip",!0)?createClipPath(r.coordinateSystem,!1,r):null;f?d.setClipPath(f):d.removeClipPath(),this._data=h},n.prototype.incrementalPrepareRender=function(r,o,l){this.group.removeAll(),this._data=null},n.prototype.incrementalRender=function(r,o,l,u,c){var h=o.getData(),d=makeRenderItem(o,h,l,u),p=this._progressiveEls=[];function f(v){v.isGroup||(v.incremental=!0,v.ensureState("emphasis").hoverLayer=!0)}for(var g=r.start;g<r.end;g++){var y=createOrUpdateItem(null,null,g,d(g,c),o,this.group,h);y&&(y.traverse(f),p.push(y))}},n.prototype.eachRendered=function(r){traverseElements(this._progressiveEls||this.group,r)},n.prototype.filterForExposedEvent=function(r,o,l,u){var c=o.element;if(c==null||l.name===c)return!0;for(;(l=l.__hostTarget||l.parent)&&l!==this.group;)if(l.name===c)return!0;return!1},n.type="custom",n}(ChartView$1);const CustomChartView$1=CustomChartView;function createEl$1(a){var n=a.type,r;if(n==="path"){var o=a.shape,l=o.width!=null&&o.height!=null?{x:o.x||0,y:o.y||0,width:o.width,height:o.height}:null,u=getPathData(o);r=makePath(u,null,l,o.layout||"center"),customInnerStore(r).customPathData=u}else if(n==="image")r=new ZRImage$1({}),customInnerStore(r).customImagePath=a.style.image;else if(n==="text")r=new ZRText$1({});else if(n==="group")r=new Group$4;else{if(n==="compoundPath")throw new Error('"compoundPath" is not supported yet.');var c=getShapeClass(n);if(!c){var h="";h='graphic type "'+n+'" can not be found.',throwError(h)}r=new c}return customInnerStore(r).customGraphicType=n,r.name=a.name,r.z2EmphasisLift=1,r.z2SelectLift=1,r}function updateElNormal(a,n,r,o,l,u,c){stopPreviousKeyframeAnimationAndRestore(n);var h=l&&l.normal.cfg;h&&n.setTextConfig(h),o&&o.transition==null&&(o.transition=DEFAULT_TRANSITION);var d=o&&o.style;if(d){if(n.type==="text"){var p=d;hasOwn(p,"textFill")&&(p.fill=p.textFill),hasOwn(p,"textStroke")&&(p.stroke=p.textStroke)}var f=void 0,g=isPath(n)?d.decal:null;a&&g&&(g.dirty=!0,f=createOrUpdatePatternFromDecal(g,a)),d.__decalPattern=f}if(isDisplayable(n)&&d){var f=d.__decalPattern;f&&(d.decal=f)}applyUpdateTransition(n,o,u,{dataIndex:r,isInit:c,clearStyle:!0}),applyKeyframeAnimation(n,o.keyframeAnimation,u)}function updateElOnState(a,n,r,o,l){var u=n.isGroup?null:n,c=l&&l[a].cfg;if(u){var h=u.ensureState(a);if(o===!1){var d=u.getState(a);d&&(d.style=null)}else h.style=o||null;c&&(h.textConfig=c),setDefaultStateProxy(u)}}function updateZ(a,n,r){if(!a.isGroup){var o=a,l=r.currentZ,u=r.currentZLevel;o.z=l,o.zlevel=u;var c=n.z2;c!=null&&(o.z2=c||0);for(var h=0;h<STATES.length;h++)updateZForEachState(o,n,STATES[h])}}function updateZForEachState(a,n,r){var o=r===NORMAL,l=o?n:retrieveStateOption(n,r),u=l?l.z2:null,c;u!=null&&(c=o?a:a.ensureState(r),c.z2=u||0)}function makeRenderItem(a,n,r,o){var l=a.get("renderItem"),u=a.coordinateSystem,c={};u&&(assert(l,"series.render is required."),assert(u.prepareCustoms||prepareCustoms[u.type],"This coordSys does not support custom series."),c=u.prepareCustoms?u.prepareCustoms(u):prepareCustoms[u.type](u));for(var h=defaults({getWidth:o.getWidth,getHeight:o.getHeight,getZr:o.getZr,getDevicePixelRatio:o.getDevicePixelRatio,value:A,style:w,ordinalRawValue:I,styleEmphasis:C,visual:D,barLayout:L,currentSeriesIndices:R,font:O},c.api||{}),d={context:{},seriesId:a.id,seriesName:a.name,seriesIndex:a.seriesIndex,coordSys:c.coordSys,dataInsideLength:n.count(),encode:wrapEncodeDef(a.getData())},p,f,g={},y={},v={},_={},x=0;x<STATES.length;x++){var S=STATES[x];v[S]=a.getModel(PATH_ITEM_STYLE[S]),_[S]=a.getModel(PATH_LABEL[S])}function T(N){return N===p?f||(f=n.getItemModel(N)):n.getItemModel(N)}function M(N,V){return n.hasItemOption?N===p?g[V]||(g[V]=T(N).getModel(PATH_ITEM_STYLE[V])):T(N).getModel(PATH_ITEM_STYLE[V]):v[V]}function b(N,V){return n.hasItemOption?N===p?y[V]||(y[V]=T(N).getModel(PATH_LABEL[V])):T(N).getModel(PATH_LABEL[V]):_[V]}return function(N,V){return p=N,f=null,g={},y={},l&&l(defaults({dataIndexInside:N,dataIndex:n.getRawIndex(N),actionType:V?V.type:null},d),h)};function A(N,V){return V==null&&(V=p),n.getStore().get(n.getDimensionIndex(N||0),V)}function I(N,V){V==null&&(V=p),N=N||0;var B=n.getDimensionInfo(N);if(!B){var G=n.getDimensionIndex(N);return G>=0?n.getStore().get(G,V):void 0}var F=n.get(B.name,V),z=B&&B.ordinalMeta;return z?z.categories[F]:F}function w(N,V){warnDeprecated("api.style","Please write literal style directly instead."),V==null&&(V=p);var B=n.getItemVisual(V,"style"),G=B&&B.fill,F=B&&B.opacity,z=M(V,NORMAL).getItemStyle();G!=null&&(z.fill=G),F!=null&&(z.opacity=F);var H={inheritColor:isString(G)?G:"#000"},U=b(V,NORMAL),Y=createTextStyle$1(U,null,H,!1,!0);Y.text=U.getShallow("show")?retrieve2(a.getFormattedLabel(V,NORMAL),getDefaultLabel(n,V)):null;var Z=createTextConfig(U,H,!1);return P(N,z),z=convertToEC4StyleForCustomSerise(z,Y,Z),N&&E(z,N),z.legacy=!0,z}function C(N,V){warnDeprecated("api.styleEmphasis","Please write literal style directly instead."),V==null&&(V=p);var B=M(V,EMPHASIS).getItemStyle(),G=b(V,EMPHASIS),F=createTextStyle$1(G,null,null,!0,!0);F.text=G.getShallow("show")?retrieve3(a.getFormattedLabel(V,EMPHASIS),a.getFormattedLabel(V,NORMAL),getDefaultLabel(n,V)):null;var z=createTextConfig(G,null,!0);return P(N,B),B=convertToEC4StyleForCustomSerise(B,F,z),N&&E(B,N),B.legacy=!0,B}function E(N,V){for(var B in V)hasOwn(V,B)&&(N[B]=V[B])}function P(N,V){N&&(N.textFill&&(V.textFill=N.textFill),N.textPosition&&(V.textPosition=N.textPosition))}function D(N,V){if(V==null&&(V=p),hasOwn(STYLE_VISUAL_TYPE,N)){var B=n.getItemVisual(V,"style");return B?B[STYLE_VISUAL_TYPE[N]]:null}if(hasOwn(NON_STYLE_VISUAL_PROPS,N))return n.getItemVisual(V,N)}function L(N){if(u.type==="cartesian2d"){var V=u.getBaseAxis();return getLayoutOnAxis(defaults({axis:V},N))}}function R(){return r.getCurrentSeriesIndices()}function O(N){return getFont(N,r)}}function wrapEncodeDef(a){var n={};return each$f(a.dimensions,function(r){var o=a.getDimensionInfo(r);if(!o.isExtraCoord){var l=o.coordDim,u=n[l]=n[l]||[];u[o.coordDimIndex]=a.getDimensionIndex(r)}}),n}function createOrUpdateItem(a,n,r,o,l,u,c){if(!o){u.remove(n);return}var h=doCreateOrUpdateEl(a,n,r,o,l,u);return h&&c.setItemGraphicEl(r,h),h&&toggleHoverEmphasis(h,o.focus,o.blurScope,o.emphasisDisabled),h}function doCreateOrUpdateEl(a,n,r,o,l,u){assert(o,"should not have an null/undefined element setting");var c=-1,h=n;n&&doesElNeedRecreate(n,o,l)&&(c=indexOf(u.childrenRef(),n),n=null);var d=!n,p=n;p?p.clearStates():(p=createEl$1(o),h&&copyElement(h,p)),o.morph===!1?p.disableMorphing=!0:p.disableMorphing&&(p.disableMorphing=!1),attachedTxInfoTmp.normal.cfg=attachedTxInfoTmp.normal.conOpt=attachedTxInfoTmp.emphasis.cfg=attachedTxInfoTmp.emphasis.conOpt=attachedTxInfoTmp.blur.cfg=attachedTxInfoTmp.blur.conOpt=attachedTxInfoTmp.select.cfg=attachedTxInfoTmp.select.conOpt=null,attachedTxInfoTmp.isLegacy=!1,doCreateOrUpdateAttachedTx(p,r,o,l,d,attachedTxInfoTmp),doCreateOrUpdateClipPath(p,r,o,l,d),updateElNormal(a,p,r,o,attachedTxInfoTmp,l,d),hasOwn(o,"info")&&(customInnerStore(p).info=o.info);for(var f=0;f<STATES.length;f++){var g=STATES[f];if(g!==NORMAL){var y=retrieveStateOption(o,g),v=retrieveStyleOptionOnState(o,y,g);updateElOnState(g,p,y,v,attachedTxInfoTmp)}}return updateZ(p,o,l),o.type==="group"&&mergeChildren(a,p,r,o,l),c>=0?u.replaceAt(p,c):u.add(p),p}function doesElNeedRecreate(a,n,r){var o=customInnerStore(a),l=n.type,u=n.shape,c=n.style;return r.isUniversalTransitionEnabled()||l!=null&&l!==o.customGraphicType||l==="path"&&hasOwnPathData(u)&&getPathData(u)!==o.customPathData||l==="image"&&hasOwn(c,"image")&&c.image!==o.customImagePath}function doCreateOrUpdateClipPath(a,n,r,o,l){var u=r.clipPath;if(u===!1)a&&a.getClipPath()&&a.removeClipPath();else if(u){var c=a.getClipPath();c&&doesElNeedRecreate(c,u,o)&&(c=null),c||(c=createEl$1(u),assert(isPath(c),"Only any type of `path` can be used in `clipPath`, rather than "+c.type+"."),a.setClipPath(c)),updateElNormal(null,c,n,u,null,o,l)}}function doCreateOrUpdateAttachedTx(a,n,r,o,l,u){if(!a.isGroup){processTxInfo(r,null,u),processTxInfo(r,EMPHASIS,u);var c=u.normal.conOpt,h=u.emphasis.conOpt,d=u.blur.conOpt,p=u.select.conOpt;if(c!=null||h!=null||p!=null||d!=null){var f=a.getTextContent();if(c===!1)f&&a.removeTextContent();else{c=u.normal.conOpt=c||{type:"text"},f?f.clearStates():(f=createEl$1(c),a.setTextContent(f)),updateElNormal(null,f,n,c,null,o,l);for(var g=c&&c.style,y=0;y<STATES.length;y++){var v=STATES[y];if(v!==NORMAL){var _=u[v].conOpt;updateElOnState(v,f,_,retrieveStyleOptionOnState(c,_,v),null)}}g?f.dirty():f.markRedraw()}}}}function processTxInfo(a,n,r){var o=n?retrieveStateOption(a,n):a,l=n?retrieveStyleOptionOnState(a,o,EMPHASIS):a.style,u=a.type,c=o?o.textConfig:null,h=a.textContent,d=h?n?retrieveStateOption(h,n):h:null;if(l&&(r.isLegacy||isEC4CompatibleStyle(l,u,!!c,!!d))){r.isLegacy=!0;var p=convertFromEC4CompatibleStyle(l,u,!n);!c&&p.textConfig&&(c=p.textConfig),!d&&p.textContent&&(d=p.textContent)}if(!n&&d){var f=d;!f.type&&(f.type="text"),assert(f.type==="text",'textContent.type must be "text"')}var g=n?r[n]:r.normal;g.cfg=c,g.conOpt=d}function retrieveStateOption(a,n){return n?a?a[n]:null:a}function retrieveStyleOptionOnState(a,n,r){var o=n&&n.style;return o==null&&r===EMPHASIS&&a&&(o=a.styleEmphasis),o}function mergeChildren(a,n,r,o,l){var u=o.children,c=u?u.length:0,h=o.$mergeChildren,d=h==="byName"||o.diffChildrenByName,p=h===!1;if(!(!c&&!d&&!p)){if(d){diffGroupChildren({api:a,oldChildren:n.children()||[],newChildren:u||[],dataIndex:r,seriesModel:l,group:n});return}p&&n.removeAll();for(var f=0;f<c;f++){var g=u[f],y=n.childAt(f);g?(g.ignore==null&&(g.ignore=!1),doCreateOrUpdateEl(a,y,r,g,l,n)):(assert(y,"renderItem should not return a group containing elements as null/undefined/{} if they do not exist before."),y.ignore=!0)}for(var v=n.childCount()-1;v>=f;v--){var _=n.childAt(v);removeChildFromGroup(n,_,l)}}}function removeChildFromGroup(a,n,r){n&&applyLeaveTransition(n,customInnerStore(a).option,r)}function diffGroupChildren(a){new DataDiffer$1(a.oldChildren,a.newChildren,getKey,getKey,a).add(processAddUpdate).update(processAddUpdate).remove(processRemove).execute()}function getKey(a,n){var r=a&&a.name;return r!=null?r:GROUP_DIFF_PREFIX+n}function processAddUpdate(a,n){var r=this.context,o=a!=null?r.newChildren[a]:null,l=n!=null?r.oldChildren[n]:null;doCreateOrUpdateEl(r.api,l,r.dataIndex,o,r.seriesModel,r.group)}function processRemove(a){var n=this.context,r=n.oldChildren[a];r&&applyLeaveTransition(r,customInnerStore(r).option,n.seriesModel)}function getPathData(a){return a&&(a.pathData||a.d)}function hasOwnPathData(a){return a&&(hasOwn(a,"pathData")||hasOwn(a,"d"))}function install$r(a){a.registerChartView(CustomChartView$1),a.registerSeriesModel(CustomSeriesModel$1)}var inner$b=makeInner(),clone$1=clone$4,bind=bind$1,BaseAxisPointer=function(){function a(){this._dragging=!1,this.animationThreshold=15}return a.prototype.render=function(n,r,o,l){var u=r.get("value"),c=r.get("status");if(this._axisModel=n,this._axisPointerModel=r,this._api=o,!(!l&&this._lastValue===u&&this._lastStatus===c)){this._lastValue=u,this._lastStatus=c;var h=this._group,d=this._handle;if(!c||c==="hide"){h&&h.hide(),d&&d.hide();return}h&&h.show(),d&&d.show();var p={};this.makeElOption(p,u,n,r,o);var f=p.graphicKey;f!==this._lastGraphicKey&&this.clear(o),this._lastGraphicKey=f;var g=this._moveAnimation=this.determineAnimation(n,r);if(!h)h=this._group=new Group$4,this.createPointerEl(h,p,n,r),this.createLabelEl(h,p,n,r),o.getZr().add(h);else{var y=curry$1(updateProps,r,g);this.updatePointerEl(h,p,y),this.updateLabelEl(h,p,y,r)}updateMandatoryProps(h,r,!0),this._renderHandle(u)}},a.prototype.remove=function(n){this.clear(n)},a.prototype.dispose=function(n){this.clear(n)},a.prototype.determineAnimation=function(n,r){var o=r.get("animation"),l=n.axis,u=l.type==="category",c=r.get("snap");if(!c&&!u)return!1;if(o==="auto"||o==null){var h=this.animationThreshold;if(u&&l.getBandWidth()>h)return!0;if(c){var d=getAxisInfo$1(n).seriesDataCount,p=l.getExtent();return Math.abs(p[0]-p[1])/d>h}return!1}return o===!0},a.prototype.makeElOption=function(n,r,o,l,u){},a.prototype.createPointerEl=function(n,r,o,l){var u=r.pointer;if(u){var c=inner$b(n).pointerEl=new graphic$1[u.type](clone$1(r.pointer));n.add(c)}},a.prototype.createLabelEl=function(n,r,o,l){if(r.label){var u=inner$b(n).labelEl=new ZRText$1(clone$1(r.label));n.add(u),updateLabelShowHide(u,l)}},a.prototype.updatePointerEl=function(n,r,o){var l=inner$b(n).pointerEl;l&&r.pointer&&(l.setStyle(r.pointer.style),o(l,{shape:r.pointer.shape}))},a.prototype.updateLabelEl=function(n,r,o,l){var u=inner$b(n).labelEl;u&&(u.setStyle(r.label.style),o(u,{x:r.label.x,y:r.label.y}),updateLabelShowHide(u,l))},a.prototype._renderHandle=function(n){if(!(this._dragging||!this.updateHandleTransform)){var r=this._axisPointerModel,o=this._api.getZr(),l=this._handle,u=r.getModel("handle"),c=r.get("status");if(!u.get("show")||!c||c==="hide"){l&&o.remove(l),this._handle=null;return}var h;this._handle||(h=!0,l=this._handle=createIcon(u.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(p){stop(p.event)},onmousedown:bind(this._onHandleDragMove,this,0,0),drift:bind(this._onHandleDragMove,this),ondragend:bind(this._onHandleDragEnd,this)}),o.add(l)),updateMandatoryProps(l,r,!1),l.setStyle(u.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var d=u.get("size");isArray$1(d)||(d=[d,d]),l.scaleX=d[0]/2,l.scaleY=d[1]/2,createOrUpdate(this,"_doDispatchAxisPointer",u.get("throttle")||0,"fixRate"),this._moveHandleToValue(n,h)}},a.prototype._moveHandleToValue=function(n,r){updateProps(this._axisPointerModel,!r&&this._moveAnimation,this._handle,getHandleTransProps(this.getHandleTransform(n,this._axisModel,this._axisPointerModel)))},a.prototype._onHandleDragMove=function(n,r){var o=this._handle;if(o){this._dragging=!0;var l=this.updateHandleTransform(getHandleTransProps(o),[n,r],this._axisModel,this._axisPointerModel);this._payloadInfo=l,o.stopAnimation(),o.attr(getHandleTransProps(l)),inner$b(o).lastProp=null,this._doDispatchAxisPointer()}},a.prototype._doDispatchAxisPointer=function(){var n=this._handle;if(n){var r=this._payloadInfo,o=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:r.cursorPoint[0],y:r.cursorPoint[1],tooltipOption:r.tooltipOption,axesInfo:[{axisDim:o.axis.dim,axisIndex:o.componentIndex}]})}},a.prototype._onHandleDragEnd=function(){this._dragging=!1;var n=this._handle;if(n){var r=this._axisPointerModel.get("value");this._moveHandleToValue(r),this._api.dispatchAction({type:"hideTip"})}},a.prototype.clear=function(n){this._lastValue=null,this._lastStatus=null;var r=n.getZr(),o=this._group,l=this._handle;r&&o&&(this._lastGraphicKey=null,o&&r.remove(o),l&&r.remove(l),this._group=null,this._handle=null,this._payloadInfo=null),clear$1(this,"_doDispatchAxisPointer")},a.prototype.doClear=function(){},a.prototype.buildLabel=function(n,r,o){return o=o||0,{x:n[o],y:n[1-o],width:r[o],height:r[1-o]}},a}();function updateProps(a,n,r,o){propsEqual(inner$b(r).lastProp,o)||(inner$b(r).lastProp=o,n?updateProps$1(r,o,a):(r.stopAnimation(),r.attr(o)))}function propsEqual(a,n){if(isObject$3(a)&&isObject$3(n)){var r=!0;return each$f(n,function(o,l){r=r&&propsEqual(a[l],o)}),!!r}else return a===n}function updateLabelShowHide(a,n){a[n.get(["label","show"])?"show":"hide"]()}function getHandleTransProps(a){return{x:a.x||0,y:a.y||0,rotation:a.rotation||0}}function updateMandatoryProps(a,n,r){var o=n.get("z"),l=n.get("zlevel");a&&a.traverse(function(u){u.type!=="group"&&(o!=null&&(u.z=o),l!=null&&(u.zlevel=l),u.silent=r)})}const BaseAxisPointer$1=BaseAxisPointer;function buildElStyle(a){var n=a.get("type"),r=a.getModel(n+"Style"),o;return n==="line"?(o=r.getLineStyle(),o.fill=null):n==="shadow"&&(o=r.getAreaStyle(),o.stroke=null),o}function buildLabelElOption(a,n,r,o,l){var u=r.get("value"),c=getValueLabel(u,n.axis,n.ecModel,r.get("seriesDataIndices"),{precision:r.get(["label","precision"]),formatter:r.get(["label","formatter"])}),h=r.getModel("label"),d=normalizeCssArray(h.get("padding")||0),p=h.getFont(),f=getBoundingRect(c,p),g=l.position,y=f.width+d[1]+d[3],v=f.height+d[0]+d[2],_=l.align;_==="right"&&(g[0]-=y),_==="center"&&(g[0]-=y/2);var x=l.verticalAlign;x==="bottom"&&(g[1]-=v),x==="middle"&&(g[1]-=v/2),confineInContainer(g,y,v,o);var S=h.get("backgroundColor");(!S||S==="auto")&&(S=n.get(["axisLine","lineStyle","color"])),a.label={x:g[0],y:g[1],style:createTextStyle$1(h,{text:c,font:p,fill:h.getTextColor(),padding:d,backgroundColor:S}),z2:10}}function confineInContainer(a,n,r,o){var l=o.getWidth(),u=o.getHeight();a[0]=Math.min(a[0]+n,l)-n,a[1]=Math.min(a[1]+r,u)-r,a[0]=Math.max(a[0],0),a[1]=Math.max(a[1],0)}function getValueLabel(a,n,r,o,l){a=n.scale.parse(a);var u=n.scale.getLabel({value:a},{precision:l.precision}),c=l.formatter;if(c){var h={value:getAxisRawValue(n,{value:a}),axisDimension:n.dim,axisIndex:n.index,seriesData:[]};each$f(o,function(d){var p=r.getSeriesByIndex(d.seriesIndex),f=d.dataIndexInside,g=p&&p.getDataParams(f);g&&h.seriesData.push(g)}),isString(c)?u=c.replace("{value}",u):isFunction(c)&&(u=c(h))}return u}function getTransformedPosition(a,n,r){var o=create$1();return rotate(o,o,r.rotation),translate(o,o,r.position),applyTransform([a.dataToCoord(n),(r.labelOffset||0)+(r.labelDirection||1)*(r.labelMargin||0)],o)}function buildCartesianSingleLabelElOption(a,n,r,o,l,u){var c=AxisBuilder$1.innerTextLayout(r.rotation,0,r.labelDirection);r.labelMargin=l.get(["label","margin"]),buildLabelElOption(n,o,l,u,{position:getTransformedPosition(o.axis,a,r),align:c.textAlign,verticalAlign:c.textVerticalAlign})}function makeLineShape(a,n,r){return r=r||0,{x1:a[r],y1:a[1-r],x2:n[r],y2:n[1-r]}}function makeRectShape(a,n,r){return r=r||0,{x:a[r],y:a[1-r],width:n[r],height:n[1-r]}}function makeSectorShape(a,n,r,o,l,u){return{cx:a,cy:n,r0:r,r:o,startAngle:l,endAngle:u,clockwise:!0}}var CartesianAxisPointer=function(a){__extends(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.makeElOption=function(r,o,l,u,c){var h=l.axis,d=h.grid,p=u.get("type"),f=getCartesian(d,h).getOtherAxis(h).getGlobalExtent(),g=h.toGlobalCoord(h.dataToCoord(o,!0));if(p&&p!=="none"){var y=buildElStyle(u),v=pointerShapeBuilder$2[p](h,g,f);v.style=y,r.graphicKey=v.type,r.pointer=v}var _=layout$2(d.model,l);buildCartesianSingleLabelElOption(o,r,_,l,u,c)},n.prototype.getHandleTransform=function(r,o,l){var u=layout$2(o.axis.grid.model,o,{labelInside:!1});u.labelMargin=l.get(["handle","margin"]);var c=getTransformedPosition(o.axis,r,u);return{x:c[0],y:c[1],rotation:u.rotation+(u.labelDirection<0?Math.PI:0)}},n.prototype.updateHandleTransform=function(r,o,l,u){var c=l.axis,h=c.grid,d=c.getGlobalExtent(!0),p=getCartesian(h,c).getOtherAxis(c).getGlobalExtent(),f=c.dim==="x"?0:1,g=[r.x,r.y];g[f]+=o[f],g[f]=Math.min(d[1],g[f]),g[f]=Math.max(d[0],g[f]);var y=(p[1]+p[0])/2,v=[y,y];v[f]=g[f];var _=[{verticalAlign:"middle"},{align:"center"}];return{x:g[0],y:g[1],rotation:r.rotation,cursorPoint:v,tooltipOption:_[f]}},n}(BaseAxisPointer$1);function getCartesian(a,n){var r={};return r[n.dim+"AxisIndex"]=n.index,a.getCartesian(r)}var pointerShapeBuilder$2={line:function(a,n,r){var o=makeLineShape([n,r[0]],[n,r[1]],getAxisDimIndex(a));return{type:"Line",subPixelOptimize:!0,shape:o}},shadow:function(a,n,r){var o=Math.max(1,a.getBandWidth()),l=r[1]-r[0];return{type:"Rect",shape:makeRectShape([n-o/2,r[0]],[o,l],getAxisDimIndex(a))}}};function getAxisDimIndex(a){return a.dim==="x"?0:1}const CartesianAxisPointer$1=CartesianAxisPointer;var AxisPointerModel=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.type="axisPointer",n.defaultOption={show:"auto",z:50,type:"line",snap:!1,triggerTooltip:!0,triggerEmphasis:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#B9BEC9",width:1,type:"dashed"},shadowStyle:{color:"rgba(210,219,238,0.2)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,borderRadius:3},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}},n}(ComponentModel$1);const AxisPointerModel$1=AxisPointerModel;var inner$a=makeInner(),each$8=each$f;function register(a,n,r){if(!env$1.node){var o=n.getZr();inner$a(o).records||(inner$a(o).records={}),initGlobalListeners(o,n);var l=inner$a(o).records[a]||(inner$a(o).records[a]={});l.handler=r}}function initGlobalListeners(a,n){if(inner$a(a).initialized)return;inner$a(a).initialized=!0,r("click",curry$1(doEnter,"click")),r("mousemove",curry$1(doEnter,"mousemove")),r("globalout",onLeave);function r(o,l){a.on(o,function(u){var c=makeDispatchAction$1(n);each$8(inner$a(a).records,function(h){h&&l(h,u,c.dispatchAction)}),dispatchTooltipFinally(c.pendings,n)})}}function dispatchTooltipFinally(a,n){var r=a.showTip.length,o=a.hideTip.length,l;r?l=a.showTip[r-1]:o&&(l=a.hideTip[o-1]),l&&(l.dispatchAction=null,n.dispatchAction(l))}function onLeave(a,n,r){a.handler("leave",null,r)}function doEnter(a,n,r,o){n.handler(a,r,o)}function makeDispatchAction$1(a){var n={showTip:[],hideTip:[]},r=function(o){var l=n[o.type];l?l.push(o):(o.dispatchAction=r,a.dispatchAction(o))};return{dispatchAction:r,pendings:n}}function unregister(a,n){if(!env$1.node){var r=n.getZr(),o=(inner$a(r).records||{})[a];o&&(inner$a(r).records[a]=null)}}var AxisPointerView=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.prototype.render=function(r,o,l){var u=o.getComponent("tooltip"),c=r.get("triggerOn")||u&&u.get("triggerOn")||"mousemove|click";register("axisPointer",l,function(h,d,p){c!=="none"&&(h==="leave"||c.indexOf(h)>=0)&&p({type:"updateAxisPointer",currTrigger:h,x:d&&d.offsetX,y:d&&d.offsetY})})},n.prototype.remove=function(r,o){unregister("axisPointer",o)},n.prototype.dispose=function(r,o){unregister("axisPointer",o)},n.type="axisPointer",n}(ComponentView$1);const AxisPointerView$1=AxisPointerView;function findPointFromSeries(a,n){var r=[],o=a.seriesIndex,l;if(o==null||!(l=n.getSeriesByIndex(o)))return{point:[]};var u=l.getData(),c=queryDataIndex(u,a);if(c==null||c<0||isArray$1(c))return{point:[]};var h=u.getItemGraphicEl(c),d=l.coordinateSystem;if(l.getTooltipPosition)r=l.getTooltipPosition(c)||[];else if(d&&d.dataToPoint)if(a.isStacked){var p=d.getBaseAxis(),f=d.getOtherAxis(p),g=f.dim,y=p.dim,v=g==="x"||g==="radius"?1:0,_=u.mapDimension(y),x=[];x[v]=u.get(_,c),x[1-v]=u.get(u.getCalculationInfo("stackResultDimension"),c),r=d.dataToPoint(x)||[]}else r=d.dataToPoint(u.getValues(map$1(d.dimensions,function(T){return u.mapDimension(T)}),c))||[];else if(h){var S=h.getBoundingRect().clone();S.applyTransform(h.transform),r=[S.x+S.width/2,S.y+S.height/2]}return{point:r,el:h}}var inner$9=makeInner();function axisTrigger(a,n,r){var o=a.currTrigger,l=[a.x,a.y],u=a,c=a.dispatchAction||bind$1(r.dispatchAction,r),h=n.getComponent("axisPointer").coordSysAxesInfo;if(h){illegalPoint(l)&&(l=findPointFromSeries({seriesIndex:u.seriesIndex,dataIndex:u.dataIndex},n).point);var d=illegalPoint(l),p=u.axesInfo,f=h.axesInfo,g=o==="leave"||illegalPoint(l),y={},v={},_={list:[],map:{}},x={showPointer:curry$1(showPointer,v),showTooltip:curry$1(showTooltip,_)};each$f(h.coordSysMap,function(T,M){var b=d||T.containPoint(l);each$f(h.coordSysAxesInfo[M],function(A,I){var w=A.axis,C=findInputAxisInfo(p,A);if(!g&&b&&(!p||C)){var E=C&&C.value;E==null&&!d&&(E=w.pointToData(l)),E!=null&&processOnAxis(A,E,x,!1,y)}})});var S={};return each$f(f,function(T,M){var b=T.linkGroup;b&&!v[M]&&each$f(b.axesInfo,function(A,I){var w=v[I];if(A!==T&&w){var C=w.value;b.mapper&&(C=T.axis.scale.parse(b.mapper(C,makeMapperParam(A),makeMapperParam(T)))),S[T.key]=C}})}),each$f(S,function(T,M){processOnAxis(f[M],T,x,!0,y)}),updateModelActually(v,f,y),dispatchTooltipActually(_,l,a,c),dispatchHighDownActually(f,c,r),y}}function processOnAxis(a,n,r,o,l){var u=a.axis;if(!(u.scale.isBlank()||!u.containData(n))){if(!a.involveSeries){r.showPointer(a,n);return}var c=buildPayloadsBySeries(n,a),h=c.payloadBatch,d=c.snapToValue;h[0]&&l.seriesIndex==null&&extend(l,h[0]),!o&&a.snap&&u.containData(d)&&d!=null&&(n=d),r.showPointer(a,n,h),r.showTooltip(a,c,d)}}function buildPayloadsBySeries(a,n){var r=n.axis,o=r.dim,l=a,u=[],c=Number.MAX_VALUE,h=-1;return each$f(n.seriesModels,function(d,p){var f=d.getData().mapDimensionsAll(o),g,y;if(d.getAxisTooltipData){var v=d.getAxisTooltipData(f,a,r);y=v.dataIndices,g=v.nestestValue}else{if(y=d.getData().indicesOfNearest(f[0],a,r.type==="category"?.5:null),!y.length)return;g=d.getData().get(f[0],y[0])}if(!(g==null||!isFinite(g))){var _=a-g,x=Math.abs(_);x<=c&&((x<c||_>=0&&h<0)&&(c=x,h=_,l=g,u.length=0),each$f(y,function(S){u.push({seriesIndex:d.seriesIndex,dataIndexInside:S,dataIndex:d.getData().getRawIndex(S)})}))}}),{payloadBatch:u,snapToValue:l}}function showPointer(a,n,r,o){a[n.key]={value:r,payloadBatch:o}}function showTooltip(a,n,r,o){var l=r.payloadBatch,u=n.axis,c=u.model,h=n.axisPointerModel;if(!(!n.triggerTooltip||!l.length)){var d=n.coordSys.model,p=makeKey(d),f=a.map[p];f||(f=a.map[p]={coordSysId:d.id,coordSysIndex:d.componentIndex,coordSysType:d.type,coordSysMainType:d.mainType,dataByAxis:[]},a.list.push(f)),f.dataByAxis.push({axisDim:u.dim,axisIndex:c.componentIndex,axisType:c.type,axisId:c.id,value:o,valueLabelOpt:{precision:h.get(["label","precision"]),formatter:h.get(["label","formatter"])},seriesDataIndices:l.slice()})}}function updateModelActually(a,n,r){var o=r.axesInfo=[];each$f(n,function(l,u){var c=l.axisPointerModel.option,h=a[u];h?(!l.useHandle&&(c.status="show"),c.value=h.value,c.seriesDataIndices=(h.payloadBatch||[]).slice()):!l.useHandle&&(c.status="hide"),c.status==="show"&&o.push({axisDim:l.axis.dim,axisIndex:l.axis.model.componentIndex,value:c.value})})}function dispatchTooltipActually(a,n,r,o){if(illegalPoint(n)||!a.list.length){o({type:"hideTip"});return}var l=((a.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};o({type:"showTip",escapeConnect:!0,x:n[0],y:n[1],tooltipOption:r.tooltipOption,position:r.position,dataIndexInside:l.dataIndexInside,dataIndex:l.dataIndex,seriesIndex:l.seriesIndex,dataByCoordSys:a.list})}function dispatchHighDownActually(a,n,r){var o=r.getZr(),l="axisPointerLastHighlights",u=inner$9(o)[l]||{},c=inner$9(o)[l]={};each$f(a,function(p,f){var g=p.axisPointerModel.option;g.status==="show"&&p.triggerEmphasis&&each$f(g.seriesDataIndices,function(y){var v=y.seriesIndex+" | "+y.dataIndex;c[v]=y})});var h=[],d=[];each$f(u,function(p,f){!c[f]&&d.push(p)}),each$f(c,function(p,f){!u[f]&&h.push(p)}),d.length&&r.dispatchAction({type:"downplay",escapeConnect:!0,notBlur:!0,batch:d}),h.length&&r.dispatchAction({type:"highlight",escapeConnect:!0,notBlur:!0,batch:h})}function findInputAxisInfo(a,n){for(var r=0;r<(a||[]).length;r++){var o=a[r];if(n.axis.dim===o.axisDim&&n.axis.model.componentIndex===o.axisIndex)return o}}function makeMapperParam(a){var n=a.axis.model,r={},o=r.axisDim=a.axis.dim;return r.axisIndex=r[o+"AxisIndex"]=n.componentIndex,r.axisName=r[o+"AxisName"]=n.name,r.axisId=r[o+"AxisId"]=n.id,r}function illegalPoint(a){return!a||a[0]==null||isNaN(a[0])||a[1]==null||isNaN(a[1])}function install$q(a){AxisView$1.registerAxisPointerClass("CartesianAxisPointer",CartesianAxisPointer$1),a.registerComponentModel(AxisPointerModel$1),a.registerComponentView(AxisPointerView$1),a.registerPreprocessor(function(n){if(n){(!n.axisPointer||n.axisPointer.length===0)&&(n.axisPointer={});var r=n.axisPointer.link;r&&!isArray$1(r)&&(n.axisPointer.link=[r])}}),a.registerProcessor(a.PRIORITY.PROCESSOR.STATISTIC,function(n,r){n.getComponent("axisPointer").coordSysAxesInfo=collect(n,r)}),a.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},axisTrigger)}function install$p(a){use(install$N),use(install$q)}var PolarAxisPointer=function(a){__extends(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.makeElOption=function(r,o,l,u,c){var h=l.axis;h.dim==="angle"&&(this.animationThreshold=Math.PI/18);var d=h.polar,p=d.getOtherAxis(h),f=p.getExtent(),g=h.dataToCoord(o),y=u.get("type");if(y&&y!=="none"){var v=buildElStyle(u),_=pointerShapeBuilder$1[y](h,d,g,f);_.style=v,r.graphicKey=_.type,r.pointer=_}var x=u.get(["label","margin"]),S=getLabelPosition(o,l,u,d,x);buildLabelElOption(r,l,u,c,S)},n}(BaseAxisPointer$1);function getLabelPosition(a,n,r,o,l){var u=n.axis,c=u.dataToCoord(a),h=o.getAngleAxis().getExtent()[0];h=h/180*Math.PI;var d=o.getRadiusAxis().getExtent(),p,f,g;if(u.dim==="radius"){var y=create$1();rotate(y,y,h),translate(y,y,[o.cx,o.cy]),p=applyTransform([c,-l],y);var v=n.getModel("axisLabel").get("rotate")||0,_=AxisBuilder$1.innerTextLayout(h,v*Math.PI/180,-1);f=_.textAlign,g=_.textVerticalAlign}else{var x=d[1];p=o.coordToPoint([x+l,c]);var S=o.cx,T=o.cy;f=Math.abs(p[0]-S)/x<.3?"center":p[0]>S?"left":"right",g=Math.abs(p[1]-T)/x<.3?"middle":p[1]>T?"top":"bottom"}return{position:p,align:f,verticalAlign:g}}var pointerShapeBuilder$1={line:function(a,n,r,o){return a.dim==="angle"?{type:"Line",shape:makeLineShape(n.coordToPoint([o[0],r]),n.coordToPoint([o[1],r]))}:{type:"Circle",shape:{cx:n.cx,cy:n.cy,r}}},shadow:function(a,n,r,o){var l=Math.max(1,a.getBandWidth()),u=Math.PI/180;return a.dim==="angle"?{type:"Sector",shape:makeSectorShape(n.cx,n.cy,o[0],o[1],(-r-l/2)*u,(-r+l/2)*u)}:{type:"Sector",shape:makeSectorShape(n.cx,n.cy,r-l/2,r+l/2,0,Math.PI*2)}}};const PolarAxisPointer$1=PolarAxisPointer;var PolarModel=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.prototype.findAxisModel=function(r){var o,l=this.ecModel;return l.eachComponent(r,function(u){u.getCoordSysModel()===this&&(o=u)},this),o},n.type="polar",n.dependencies=["radiusAxis","angleAxis"],n.defaultOption={z:0,center:["50%","50%"],radius:"80%"},n}(ComponentModel$1);const PolarModel$1=PolarModel;var PolarAxisModel=function(a){__extends(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.getCoordSysModel=function(){return this.getReferringComponents("polar",SINGLE_REFERRING).models[0]},n.type="polarAxis",n}(ComponentModel$1);mixin(PolarAxisModel,AxisModelCommonMixin);var AngleAxisModel=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.type="angleAxis",n}(PolarAxisModel),RadiusAxisModel=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.type="radiusAxis",n}(PolarAxisModel),RadiusAxis=function(a){__extends(n,a);function n(r,o){return a.call(this,"radius",r,o)||this}return n.prototype.pointToData=function(r,o){return this.polar.pointToData(r,o)[this.dim==="radius"?0:1]},n}(Axis$1);RadiusAxis.prototype.dataToRadius=Axis$1.prototype.dataToCoord;RadiusAxis.prototype.radiusToData=Axis$1.prototype.coordToData;const RadiusAxis$1=RadiusAxis;var inner$8=makeInner(),AngleAxis=function(a){__extends(n,a);function n(r,o){return a.call(this,"angle",r,o||[0,360])||this}return n.prototype.pointToData=function(r,o){return this.polar.pointToData(r,o)[this.dim==="radius"?0:1]},n.prototype.calculateCategoryInterval=function(){var r=this,o=r.getLabelModel(),l=r.scale,u=l.getExtent(),c=l.count();if(u[1]-u[0]<1)return 0;var h=u[0],d=r.dataToCoord(h+1)-r.dataToCoord(h),p=Math.abs(d),f=getBoundingRect(h==null?"":h+"",o.getFont(),"center","top"),g=Math.max(f.height,7),y=g/p;isNaN(y)&&(y=1/0);var v=Math.max(0,Math.floor(y)),_=inner$8(r.model),x=_.lastAutoInterval,S=_.lastTickCount;return x!=null&&S!=null&&Math.abs(x-v)<=1&&Math.abs(S-c)<=1&&x>v?v=x:(_.lastTickCount=c,_.lastAutoInterval=v),v},n}(Axis$1);AngleAxis.prototype.dataToAngle=Axis$1.prototype.dataToCoord;AngleAxis.prototype.angleToData=Axis$1.prototype.coordToData;const AngleAxis$1=AngleAxis;var polarDimensions=["radius","angle"],Polar=function(){function a(n){this.dimensions=polarDimensions,this.type="polar",this.cx=0,this.cy=0,this._radiusAxis=new RadiusAxis$1,this._angleAxis=new AngleAxis$1,this.axisPointerEnabled=!0,this.name=n||"",this._radiusAxis.polar=this._angleAxis.polar=this}return a.prototype.containPoint=function(n){var r=this.pointToCoord(n);return this._radiusAxis.contain(r[0])&&this._angleAxis.contain(r[1])},a.prototype.containData=function(n){return this._radiusAxis.containData(n[0])&&this._angleAxis.containData(n[1])},a.prototype.getAxis=function(n){var r="_"+n+"Axis";return this[r]},a.prototype.getAxes=function(){return[this._radiusAxis,this._angleAxis]},a.prototype.getAxesByScale=function(n){var r=[],o=this._angleAxis,l=this._radiusAxis;return o.scale.type===n&&r.push(o),l.scale.type===n&&r.push(l),r},a.prototype.getAngleAxis=function(){return this._angleAxis},a.prototype.getRadiusAxis=function(){return this._radiusAxis},a.prototype.getOtherAxis=function(n){var r=this._angleAxis;return n===r?this._radiusAxis:r},a.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAngleAxis()},a.prototype.getTooltipAxes=function(n){var r=n!=null&&n!=="auto"?this.getAxis(n):this.getBaseAxis();return{baseAxes:[r],otherAxes:[this.getOtherAxis(r)]}},a.prototype.dataToPoint=function(n,r){return this.coordToPoint([this._radiusAxis.dataToRadius(n[0],r),this._angleAxis.dataToAngle(n[1],r)])},a.prototype.pointToData=function(n,r){var o=this.pointToCoord(n);return[this._radiusAxis.radiusToData(o[0],r),this._angleAxis.angleToData(o[1],r)]},a.prototype.pointToCoord=function(n){var r=n[0]-this.cx,o=n[1]-this.cy,l=this.getAngleAxis(),u=l.getExtent(),c=Math.min(u[0],u[1]),h=Math.max(u[0],u[1]);l.inverse?c=h-360:h=c+360;var d=Math.sqrt(r*r+o*o);r/=d,o/=d;for(var p=Math.atan2(-o,r)/Math.PI*180,f=p<c?1:-1;p<c||p>h;)p+=f*360;return[d,p]},a.prototype.coordToPoint=function(n){var r=n[0],o=n[1]/180*Math.PI,l=Math.cos(o)*r+this.cx,u=-Math.sin(o)*r+this.cy;return[l,u]},a.prototype.getArea=function(){var n=this.getAngleAxis(),r=this.getRadiusAxis(),o=r.getExtent().slice();o[0]>o[1]&&o.reverse();var l=n.getExtent(),u=Math.PI/180,c=1e-4;return{cx:this.cx,cy:this.cy,r0:o[0],r:o[1],startAngle:-l[0]*u,endAngle:-l[1]*u,clockwise:n.inverse,contain:function(h,d){var p=h-this.cx,f=d-this.cy,g=p*p+f*f,y=this.r,v=this.r0;return y!==v&&g-c<=y*y&&g+c>=v*v}}},a.prototype.convertToPixel=function(n,r,o){var l=getCoordSys$2(r);return l===this?this.dataToPoint(o):null},a.prototype.convertFromPixel=function(n,r,o){var l=getCoordSys$2(r);return l===this?this.pointToData(o):null},a}();function getCoordSys$2(a){var n=a.seriesModel,r=a.polarModel;return r&&r.coordinateSystem||n&&n.coordinateSystem}const Polar$1=Polar;function resizePolar(a,n,r){var o=n.get("center"),l=r.getWidth(),u=r.getHeight();a.cx=parsePercent(o[0],l),a.cy=parsePercent(o[1],u);var c=a.getRadiusAxis(),h=Math.min(l,u)/2,d=n.get("radius");d==null?d=[0,"100%"]:isArray$1(d)||(d=[0,d]);var p=[parsePercent(d[0],h),parsePercent(d[1],h)];c.inverse?c.setExtent(p[1],p[0]):c.setExtent(p[0],p[1])}function updatePolarScale(a,n){var r=this,o=r.getAngleAxis(),l=r.getRadiusAxis();if(o.scale.setExtent(1/0,-1/0),l.scale.setExtent(1/0,-1/0),a.eachSeries(function(h){if(h.coordinateSystem===r){var d=h.getData();each$f(getDataDimensionsOnAxis(d,"radius"),function(p){l.scale.unionExtentFromData(d,p)}),each$f(getDataDimensionsOnAxis(d,"angle"),function(p){o.scale.unionExtentFromData(d,p)})}}),niceScaleExtent(o.scale,o.model),niceScaleExtent(l.scale,l.model),o.type==="category"&&!o.onBand){var u=o.getExtent(),c=360/o.scale.count();o.inverse?u[1]+=c:u[1]-=c,o.setExtent(u[0],u[1])}}function isAngleAxisModel(a){return a.mainType==="angleAxis"}function setAxis(a,n){var r;if(a.type=n.get("type"),a.scale=createScaleByModel$1(n),a.onBand=n.get("boundaryGap")&&a.type==="category",a.inverse=n.get("inverse"),isAngleAxisModel(n)){a.inverse=a.inverse!==n.get("clockwise");var o=n.get("startAngle"),l=(r=n.get("endAngle"))!==null&&r!==void 0?r:o+(a.inverse?-360:360);a.setExtent(o,l)}n.axis=a,a.model=n}var polarCreator={dimensions:polarDimensions,create:function(a,n){var r=[];return a.eachComponent("polar",function(o,l){var u=new Polar$1(l+"");u.update=updatePolarScale;var c=u.getRadiusAxis(),h=u.getAngleAxis(),d=o.findAxisModel("radiusAxis"),p=o.findAxisModel("angleAxis");setAxis(c,d),setAxis(h,p),resizePolar(u,o,n),r.push(u),o.coordinateSystem=u,u.model=o}),a.eachSeries(function(o){if(o.get("coordinateSystem")==="polar"){var l=o.getReferringComponents("polar",SINGLE_REFERRING).models[0];if(!l)throw new Error('Polar "'+retrieve(o.get("polarIndex"),o.get("polarId"),0)+'" not found');o.coordinateSystem=l.coordinateSystem}}),r}};const polarCreator$1=polarCreator;var elementList=["axisLine","axisLabel","axisTick","minorTick","splitLine","minorSplitLine","splitArea"];function getAxisLineShape(a,n,r){n[1]>n[0]&&(n=n.slice().reverse());var o=a.coordToPoint([n[0],r]),l=a.coordToPoint([n[1],r]);return{x1:o[0],y1:o[1],x2:l[0],y2:l[1]}}function getRadiusIdx(a){var n=a.getRadiusAxis();return n.inverse?0:1}function fixAngleOverlap(a){var n=a[0],r=a[a.length-1];n&&r&&Math.abs(Math.abs(n.coord-r.coord)-360)<1e-4&&a.pop()}var AngleAxisView=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r.axisPointerClass="PolarAxisPointer",r}return n.prototype.render=function(r,o){if(this.group.removeAll(),!!r.get("show")){var l=r.axis,u=l.polar,c=u.getRadiusAxis().getExtent(),h=l.getTicksCoords(),d=l.getMinorTicksCoords(),p=map$1(l.getViewLabels(),function(f){f=clone$4(f);var g=l.scale,y=g.type==="ordinal"?g.getRawOrdinalNumber(f.tickValue):f.tickValue;return f.coord=l.dataToCoord(y),f});fixAngleOverlap(p),fixAngleOverlap(h),each$f(elementList,function(f){r.get([f,"show"])&&(!l.scale.isBlank()||f==="axisLine")&&angelAxisElementsBuilders[f](this.group,r,u,h,d,c,p)},this)}},n.type="angleAxis",n}(AxisView$1),angelAxisElementsBuilders={axisLine:function(a,n,r,o,l,u){var c=n.getModel(["axisLine","lineStyle"]),h=r.getAngleAxis(),d=Math.PI/180,p=h.getExtent(),f=getRadiusIdx(r),g=f?0:1,y,v=Math.abs(p[1]-p[0])===360?"Circle":"Arc";u[g]===0?y=new graphic$1[v]({shape:{cx:r.cx,cy:r.cy,r:u[f],startAngle:-p[0]*d,endAngle:-p[1]*d,clockwise:h.inverse},style:c.getLineStyle(),z2:1,silent:!0}):y=new Ring$1({shape:{cx:r.cx,cy:r.cy,r:u[f],r0:u[g]},style:c.getLineStyle(),z2:1,silent:!0}),y.style.fill=null,a.add(y)},axisTick:function(a,n,r,o,l,u){var c=n.getModel("axisTick"),h=(c.get("inside")?-1:1)*c.get("length"),d=u[getRadiusIdx(r)],p=map$1(o,function(f){return new Line$3({shape:getAxisLineShape(r,[d,d+h],f.coord)})});a.add(mergePath(p,{style:defaults(c.getModel("lineStyle").getLineStyle(),{stroke:n.get(["axisLine","lineStyle","color"])})}))},minorTick:function(a,n,r,o,l,u){if(l.length){for(var c=n.getModel("axisTick"),h=n.getModel("minorTick"),d=(c.get("inside")?-1:1)*h.get("length"),p=u[getRadiusIdx(r)],f=[],g=0;g<l.length;g++)for(var y=0;y<l[g].length;y++)f.push(new Line$3({shape:getAxisLineShape(r,[p,p+d],l[g][y].coord)}));a.add(mergePath(f,{style:defaults(h.getModel("lineStyle").getLineStyle(),defaults(c.getLineStyle(),{stroke:n.get(["axisLine","lineStyle","color"])}))}))}},axisLabel:function(a,n,r,o,l,u,c){var h=n.getCategories(!0),d=n.getModel("axisLabel"),p=d.get("margin"),f=n.get("triggerEvent");each$f(c,function(g,y){var v=d,_=g.tickValue,x=u[getRadiusIdx(r)],S=r.coordToPoint([x+p,g.coord]),T=r.cx,M=r.cy,b=Math.abs(S[0]-T)/x<.3?"center":S[0]>T?"left":"right",A=Math.abs(S[1]-M)/x<.3?"middle":S[1]>M?"top":"bottom";if(h&&h[_]){var I=h[_];isObject$3(I)&&I.textStyle&&(v=new Model$1(I.textStyle,d,d.ecModel))}var w=new ZRText$1({silent:AxisBuilder$1.isLabelSilent(n),style:createTextStyle$1(v,{x:S[0],y:S[1],fill:v.getTextColor()||n.get(["axisLine","lineStyle","color"]),text:g.formattedLabel,align:b,verticalAlign:A})});if(a.add(w),f){var C=AxisBuilder$1.makeAxisEventDataBase(n);C.targetType="axisLabel",C.value=g.rawLabel,getECData(w).eventData=C}},this)},splitLine:function(a,n,r,o,l,u){var c=n.getModel("splitLine"),h=c.getModel("lineStyle"),d=h.get("color"),p=0;d=d instanceof Array?d:[d];for(var f=[],g=0;g<o.length;g++){var y=p++%d.length;f[y]=f[y]||[],f[y].push(new Line$3({shape:getAxisLineShape(r,u,o[g].coord)}))}for(var g=0;g<f.length;g++)a.add(mergePath(f[g],{style:defaults({stroke:d[g%d.length]},h.getLineStyle()),silent:!0,z:n.get("z")}))},minorSplitLine:function(a,n,r,o,l,u){if(l.length){for(var c=n.getModel("minorSplitLine"),h=c.getModel("lineStyle"),d=[],p=0;p<l.length;p++)for(var f=0;f<l[p].length;f++)d.push(new Line$3({shape:getAxisLineShape(r,u,l[p][f].coord)}));a.add(mergePath(d,{style:h.getLineStyle(),silent:!0,z:n.get("z")}))}},splitArea:function(a,n,r,o,l,u){if(o.length){var c=n.getModel("splitArea"),h=c.getModel("areaStyle"),d=h.get("color"),p=0;d=d instanceof Array?d:[d];for(var f=[],g=Math.PI/180,y=-o[0].coord*g,v=Math.min(u[0],u[1]),_=Math.max(u[0],u[1]),x=n.get("clockwise"),S=1,T=o.length;S<=T;S++){var M=S===T?o[0].coord:o[S].coord,b=p++%d.length;f[b]=f[b]||[],f[b].push(new Sector$1({shape:{cx:r.cx,cy:r.cy,r0:v,r:_,startAngle:y,endAngle:-M*g,clockwise:x},silent:!0})),y=-M*g}for(var S=0;S<f.length;S++)a.add(mergePath(f[S],{style:defaults({fill:d[S%d.length]},h.getAreaStyle()),silent:!0}))}}};const AngleAxisView$1=AngleAxisView;var axisBuilderAttrs$1=["axisLine","axisTickLabel","axisName"],selfBuilderAttrs$1=["splitLine","splitArea","minorSplitLine"],RadiusAxisView=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r.axisPointerClass="PolarAxisPointer",r}return n.prototype.render=function(r,o){if(this.group.removeAll(),!!r.get("show")){var l=this._axisGroup,u=this._axisGroup=new Group$4;this.group.add(u);var c=r.axis,h=c.polar,d=h.getAngleAxis(),p=c.getTicksCoords(),f=c.getMinorTicksCoords(),g=d.getExtent()[0],y=c.getExtent(),v=layoutAxis(h,r,g),_=new AxisBuilder$1(r,v);each$f(axisBuilderAttrs$1,_.add,_),u.add(_.getGroup()),groupTransition(l,u,r),each$f(selfBuilderAttrs$1,function(x){r.get([x,"show"])&&!c.scale.isBlank()&&axisElementBuilders$1[x](this.group,r,h,g,y,p,f)},this)}},n.type="radiusAxis",n}(AxisView$1),axisElementBuilders$1={splitLine:function(a,n,r,o,l,u){var c=n.getModel("splitLine"),h=c.getModel("lineStyle"),d=h.get("color"),p=0,f=r.getAngleAxis(),g=Math.PI/180,y=f.getExtent(),v=Math.abs(y[1]-y[0])===360?"Circle":"Arc";d=d instanceof Array?d:[d];for(var _=[],x=0;x<u.length;x++){var S=p++%d.length;_[S]=_[S]||[],_[S].push(new graphic$1[v]({shape:{cx:r.cx,cy:r.cy,r:Math.max(u[x].coord,0),startAngle:-y[0]*g,endAngle:-y[1]*g,clockwise:f.inverse}}))}for(var x=0;x<_.length;x++)a.add(mergePath(_[x],{style:defaults({stroke:d[x%d.length],fill:null},h.getLineStyle()),silent:!0}))},minorSplitLine:function(a,n,r,o,l,u,c){if(c.length){for(var h=n.getModel("minorSplitLine"),d=h.getModel("lineStyle"),p=[],f=0;f<c.length;f++)for(var g=0;g<c[f].length;g++)p.push(new Circle$1({shape:{cx:r.cx,cy:r.cy,r:c[f][g].coord}}));a.add(mergePath(p,{style:defaults({fill:null},d.getLineStyle()),silent:!0}))}},splitArea:function(a,n,r,o,l,u){if(u.length){var c=n.getModel("splitArea"),h=c.getModel("areaStyle"),d=h.get("color"),p=0;d=d instanceof Array?d:[d];for(var f=[],g=u[0].coord,y=1;y<u.length;y++){var v=p++%d.length;f[v]=f[v]||[],f[v].push(new Sector$1({shape:{cx:r.cx,cy:r.cy,r0:g,r:u[y].coord,startAngle:0,endAngle:Math.PI*2},silent:!0})),g=u[y].coord}for(var y=0;y<f.length;y++)a.add(mergePath(f[y],{style:defaults({fill:d[y%d.length]},h.getAreaStyle()),silent:!0}))}}};function layoutAxis(a,n,r){return{position:[a.cx,a.cy],rotation:r/180*Math.PI,labelDirection:-1,tickDirection:-1,nameDirection:1,labelRotate:n.getModel("axisLabel").get("rotate"),z2:1}}const RadiusAxisView$1=RadiusAxisView;function getSeriesStackId(a){return a.get("stack")||"__ec_stack_"+a.seriesIndex}function getAxisKey(a,n){return n.dim+a.model.componentIndex}function barLayoutPolar(a,n,r){var o={},l=calRadialBar(filter(n.getSeriesByType(a),function(u){return!n.isSeriesFiltered(u)&&u.coordinateSystem&&u.coordinateSystem.type==="polar"}));n.eachSeriesByType(a,function(u){if(u.coordinateSystem.type==="polar"){var c=u.getData(),h=u.coordinateSystem,d=h.getBaseAxis(),p=getAxisKey(h,d),f=getSeriesStackId(u),g=l[p][f],y=g.offset,v=g.width,_=h.getOtherAxis(d),x=u.coordinateSystem.cx,S=u.coordinateSystem.cy,T=u.get("barMinHeight")||0,M=u.get("barMinAngle")||0;o[f]=o[f]||[];for(var b=c.mapDimension(_.dim),A=c.mapDimension(d.dim),I=isDimensionStacked(c,b),w=d.dim!=="radius"||!u.get("roundCap",!0),C=_.model,E=C.get("startValue"),P=_.dataToCoord(E||0),D=0,L=c.count();D<L;D++){var R=c.get(b,D),O=c.get(A,D),N=R>=0?"p":"n",V=P;I&&(o[f][O]||(o[f][O]={p:P,n:P}),V=o[f][O][N]);var B=void 0,G=void 0,F=void 0,z=void 0;if(_.dim==="radius"){var H=_.dataToCoord(R)-P,U=d.dataToCoord(O);Math.abs(H)<T&&(H=(H<0?-1:1)*T),B=V,G=V+H,F=U-y,z=F-v,I&&(o[f][O][N]=G)}else{var Y=_.dataToCoord(R,w)-P,Z=d.dataToCoord(O);Math.abs(Y)<M&&(Y=(Y<0?-1:1)*M),B=Z+y,G=B+v,F=V,z=V+Y,I&&(o[f][O][N]=z)}c.setItemLayout(D,{cx:x,cy:S,r0:B,r:G,startAngle:-F*Math.PI/180,endAngle:-z*Math.PI/180,clockwise:F>=z})}}})}function calRadialBar(a){var n={};each$f(a,function(o,l){var u=o.getData(),c=o.coordinateSystem,h=c.getBaseAxis(),d=getAxisKey(c,h),p=h.getExtent(),f=h.type==="category"?h.getBandWidth():Math.abs(p[1]-p[0])/u.count(),g=n[d]||{bandWidth:f,remainedWidth:f,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},y=g.stacks;n[d]=g;var v=getSeriesStackId(o);y[v]||g.autoWidthCount++,y[v]=y[v]||{width:0,maxWidth:0};var _=parsePercent(o.get("barWidth"),f),x=parsePercent(o.get("barMaxWidth"),f),S=o.get("barGap"),T=o.get("barCategoryGap");_&&!y[v].width&&(_=Math.min(g.remainedWidth,_),y[v].width=_,g.remainedWidth-=_),x&&(y[v].maxWidth=x),S!=null&&(g.gap=S),T!=null&&(g.categoryGap=T)});var r={};return each$f(n,function(o,l){r[l]={};var u=o.stacks,c=o.bandWidth,h=parsePercent(o.categoryGap,c),d=parsePercent(o.gap,1),p=o.remainedWidth,f=o.autoWidthCount,g=(p-h)/(f+(f-1)*d);g=Math.max(g,0),each$f(u,function(x,S){var T=x.maxWidth;T&&T<g&&(T=Math.min(T,p),x.width&&(T=Math.min(T,x.width)),p-=T,x.width=T,f--)}),g=(p-h)/(f+(f-1)*d),g=Math.max(g,0);var y=0,v;each$f(u,function(x,S){x.width||(x.width=g),v=x,y+=x.width*(1+d)}),v&&(y-=v.width*d);var _=-y/2;each$f(u,function(x,S){r[l][S]=r[l][S]||{offset:_,width:x.width},_+=x.width*(1+d)})}),r}var angleAxisExtraOption={startAngle:90,clockwise:!0,splitNumber:12,axisLabel:{rotate:0}},radiusAxisExtraOption={splitNumber:5},PolarView=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.type="polar",n}(ComponentView$1);function install$o(a){use(install$q),AxisView$1.registerAxisPointerClass("PolarAxisPointer",PolarAxisPointer$1),a.registerCoordinateSystem("polar",polarCreator$1),a.registerComponentModel(PolarModel$1),a.registerComponentView(PolarView),axisModelCreator(a,"angle",AngleAxisModel,angleAxisExtraOption),axisModelCreator(a,"radius",RadiusAxisModel,radiusAxisExtraOption),a.registerComponentView(AngleAxisView$1),a.registerComponentView(RadiusAxisView$1),a.registerLayout(curry$1(barLayoutPolar,"bar"))}function layout$1(a,n){n=n||{};var r=a.coordinateSystem,o=a.axis,l={},u=o.position,c=o.orient,h=r.getRect(),d=[h.x,h.x+h.width,h.y,h.y+h.height],p={horizontal:{top:d[2],bottom:d[3]},vertical:{left:d[0],right:d[1]}};l.position=[c==="vertical"?p.vertical[u]:d[0],c==="horizontal"?p.horizontal[u]:d[3]];var f={horizontal:0,vertical:1};l.rotation=Math.PI/2*f[c];var g={top:-1,bottom:1,right:1,left:-1};l.labelDirection=l.tickDirection=l.nameDirection=g[u],a.get(["axisTick","inside"])&&(l.tickDirection=-l.tickDirection),retrieve(n.labelInside,a.get(["axisLabel","inside"]))&&(l.labelDirection=-l.labelDirection);var y=n.rotate;return y==null&&(y=a.get(["axisLabel","rotate"])),l.labelRotation=u==="top"?-y:y,l.z2=1,l}var axisBuilderAttrs=["axisLine","axisTickLabel","axisName"],selfBuilderAttrs=["splitArea","splitLine"],SingleAxisView=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r.axisPointerClass="SingleAxisPointer",r}return n.prototype.render=function(r,o,l,u){var c=this.group;c.removeAll();var h=this._axisGroup;this._axisGroup=new Group$4;var d=layout$1(r),p=new AxisBuilder$1(r,d);each$f(axisBuilderAttrs,p.add,p),c.add(this._axisGroup),c.add(p.getGroup()),each$f(selfBuilderAttrs,function(f){r.get([f,"show"])&&axisElementBuilders[f](this,this.group,this._axisGroup,r)},this),groupTransition(h,this._axisGroup,r),a.prototype.render.call(this,r,o,l,u)},n.prototype.remove=function(){rectCoordAxisHandleRemove(this)},n.type="singleAxis",n}(AxisView$1),axisElementBuilders={splitLine:function(a,n,r,o){var l=o.axis;if(!l.scale.isBlank()){var u=o.getModel("splitLine"),c=u.getModel("lineStyle"),h=c.get("color");h=h instanceof Array?h:[h];for(var d=c.get("width"),p=o.coordinateSystem.getRect(),f=l.isHorizontal(),g=[],y=0,v=l.getTicksCoords({tickModel:u}),_=[],x=[],S=0;S<v.length;++S){var T=l.toGlobalCoord(v[S].coord);f?(_[0]=T,_[1]=p.y,x[0]=T,x[1]=p.y+p.height):(_[0]=p.x,_[1]=T,x[0]=p.x+p.width,x[1]=T);var M=new Line$3({shape:{x1:_[0],y1:_[1],x2:x[0],y2:x[1]},silent:!0});subPixelOptimizeLine(M.shape,d);var b=y++%h.length;g[b]=g[b]||[],g[b].push(M)}for(var A=c.getLineStyle(["color"]),S=0;S<g.length;++S)n.add(mergePath(g[S],{style:defaults({stroke:h[S%h.length]},A),silent:!0}))}},splitArea:function(a,n,r,o){rectCoordAxisBuildSplitArea(a,r,o,o)}};const SingleAxisView$1=SingleAxisView;var SingleAxisModel=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.prototype.getCoordSysModel=function(){return this},n.type="singleAxis",n.layoutMode="box",n.defaultOption={left:"5%",top:"5%",right:"5%",bottom:"5%",type:"value",position:"bottom",orient:"horizontal",axisLine:{show:!0,lineStyle:{width:1,type:"solid"}},tooltip:{show:!0},axisTick:{show:!0,length:6,lineStyle:{width:1}},axisLabel:{show:!0,interval:"auto"},splitLine:{show:!0,lineStyle:{type:"dashed",opacity:.2}}},n}(ComponentModel$1);mixin(SingleAxisModel,AxisModelCommonMixin.prototype);const SingleAxisModel$1=SingleAxisModel;var SingleAxis=function(a){__extends(n,a);function n(r,o,l,u,c){var h=a.call(this,r,o,l)||this;return h.type=u||"value",h.position=c||"bottom",h}return n.prototype.isHorizontal=function(){var r=this.position;return r==="top"||r==="bottom"},n.prototype.pointToData=function(r,o){return this.coordinateSystem.pointToData(r)[0]},n}(Axis$1);const SingleAxis$1=SingleAxis;var singleDimensions=["single"],Single=function(){function a(n,r,o){this.type="single",this.dimension="single",this.dimensions=singleDimensions,this.axisPointerEnabled=!0,this.model=n,this._init(n,r,o)}return a.prototype._init=function(n,r,o){var l=this.dimension,u=new SingleAxis$1(l,createScaleByModel$1(n),[0,0],n.get("type"),n.get("position")),c=u.type==="category";u.onBand=c&&n.get("boundaryGap"),u.inverse=n.get("inverse"),u.orient=n.get("orient"),n.axis=u,u.model=n,u.coordinateSystem=this,this._axis=u},a.prototype.update=function(n,r){n.eachSeries(function(o){if(o.coordinateSystem===this){var l=o.getData();each$f(l.mapDimensionsAll(this.dimension),function(u){this._axis.scale.unionExtentFromData(l,u)},this),niceScaleExtent(this._axis.scale,this._axis.model)}},this)},a.prototype.resize=function(n,r){this._rect=getLayoutRect({left:n.get("left"),top:n.get("top"),right:n.get("right"),bottom:n.get("bottom"),width:n.get("width"),height:n.get("height")},{width:r.getWidth(),height:r.getHeight()}),this._adjustAxis()},a.prototype.getRect=function(){return this._rect},a.prototype._adjustAxis=function(){var n=this._rect,r=this._axis,o=r.isHorizontal(),l=o?[0,n.width]:[0,n.height],u=r.inverse?1:0;r.setExtent(l[u],l[1-u]),this._updateAxisTransform(r,o?n.x:n.y)},a.prototype._updateAxisTransform=function(n,r){var o=n.getExtent(),l=o[0]+o[1],u=n.isHorizontal();n.toGlobalCoord=u?function(c){return c+r}:function(c){return l-c+r},n.toLocalCoord=u?function(c){return c-r}:function(c){return l-c+r}},a.prototype.getAxis=function(){return this._axis},a.prototype.getBaseAxis=function(){return this._axis},a.prototype.getAxes=function(){return[this._axis]},a.prototype.getTooltipAxes=function(){return{baseAxes:[this.getAxis()],otherAxes:[]}},a.prototype.containPoint=function(n){var r=this.getRect(),o=this.getAxis(),l=o.orient;return l==="horizontal"?o.contain(o.toLocalCoord(n[0]))&&n[1]>=r.y&&n[1]<=r.y+r.height:o.contain(o.toLocalCoord(n[1]))&&n[0]>=r.y&&n[0]<=r.y+r.height},a.prototype.pointToData=function(n){var r=this.getAxis();return[r.coordToData(r.toLocalCoord(n[r.orient==="horizontal"?0:1]))]},a.prototype.dataToPoint=function(n){var r=this.getAxis(),o=this.getRect(),l=[],u=r.orient==="horizontal"?0:1;return n instanceof Array&&(n=n[0]),l[u]=r.toGlobalCoord(r.dataToCoord(+n)),l[1-u]=u===0?o.y+o.height/2:o.x+o.width/2,l},a.prototype.convertToPixel=function(n,r,o){var l=getCoordSys$1(r);return l===this?this.dataToPoint(o):null},a.prototype.convertFromPixel=function(n,r,o){var l=getCoordSys$1(r);return l===this?this.pointToData(o):null},a}();function getCoordSys$1(a){var n=a.seriesModel,r=a.singleAxisModel;return r&&r.coordinateSystem||n&&n.coordinateSystem}function create(a,n){var r=[];return a.eachComponent("singleAxis",function(o,l){var u=new Single(o,a,n);u.name="single_"+l,u.resize(o,n),o.coordinateSystem=u,r.push(u)}),a.eachSeries(function(o){if(o.get("coordinateSystem")==="singleAxis"){var l=o.getReferringComponents("singleAxis",SINGLE_REFERRING).models[0];o.coordinateSystem=l&&l.coordinateSystem}}),r}var singleCreator={create,dimensions:singleDimensions};const singleCreator$1=singleCreator;var XY$1=["x","y"],WH$1=["width","height"],SingleAxisPointer=function(a){__extends(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.makeElOption=function(r,o,l,u,c){var h=l.axis,d=h.coordinateSystem,p=getGlobalExtent(d,1-getPointDimIndex(h)),f=d.dataToPoint(o)[0],g=u.get("type");if(g&&g!=="none"){var y=buildElStyle(u),v=pointerShapeBuilder[g](h,f,p);v.style=y,r.graphicKey=v.type,r.pointer=v}var _=layout$1(l);buildCartesianSingleLabelElOption(o,r,_,l,u,c)},n.prototype.getHandleTransform=function(r,o,l){var u=layout$1(o,{labelInside:!1});u.labelMargin=l.get(["handle","margin"]);var c=getTransformedPosition(o.axis,r,u);return{x:c[0],y:c[1],rotation:u.rotation+(u.labelDirection<0?Math.PI:0)}},n.prototype.updateHandleTransform=function(r,o,l,u){var c=l.axis,h=c.coordinateSystem,d=getPointDimIndex(c),p=getGlobalExtent(h,d),f=[r.x,r.y];f[d]+=o[d],f[d]=Math.min(p[1],f[d]),f[d]=Math.max(p[0],f[d]);var g=getGlobalExtent(h,1-d),y=(g[1]+g[0])/2,v=[y,y];return v[d]=f[d],{x:f[0],y:f[1],rotation:r.rotation,cursorPoint:v,tooltipOption:{verticalAlign:"middle"}}},n}(BaseAxisPointer$1),pointerShapeBuilder={line:function(a,n,r){var o=makeLineShape([n,r[0]],[n,r[1]],getPointDimIndex(a));return{type:"Line",subPixelOptimize:!0,shape:o}},shadow:function(a,n,r){var o=a.getBandWidth(),l=r[1]-r[0];return{type:"Rect",shape:makeRectShape([n-o/2,r[0]],[o,l],getPointDimIndex(a))}}};function getPointDimIndex(a){return a.isHorizontal()?0:1}function getGlobalExtent(a,n){var r=a.getRect();return[r[XY$1[n]],r[XY$1[n]]+r[WH$1[n]]]}const SingleAxisPointer$1=SingleAxisPointer;var SingleView=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.type="single",n}(ComponentView$1);function install$n(a){use(install$q),AxisView$1.registerAxisPointerClass("SingleAxisPointer",SingleAxisPointer$1),a.registerComponentView(SingleView),a.registerComponentView(SingleAxisView$1),a.registerComponentModel(SingleAxisModel$1),axisModelCreator(a,"single",SingleAxisModel$1,SingleAxisModel$1.defaultOption),a.registerCoordinateSystem("single",singleCreator$1)}var CalendarModel=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.prototype.init=function(r,o,l){var u=getLayoutParams(r);a.prototype.init.apply(this,arguments),mergeAndNormalizeLayoutParams$1(r,u)},n.prototype.mergeOption=function(r){a.prototype.mergeOption.apply(this,arguments),mergeAndNormalizeLayoutParams$1(this.option,r)},n.prototype.getCellSize=function(){return this.option.cellSize},n.type="calendar",n.defaultOption={z:2,left:80,top:60,cellSize:20,orient:"horizontal",splitLine:{show:!0,lineStyle:{color:"#000",width:1,type:"solid"}},itemStyle:{color:"#fff",borderWidth:1,borderColor:"#ccc"},dayLabel:{show:!0,firstDay:0,position:"start",margin:"50%",color:"#000"},monthLabel:{show:!0,position:"start",margin:5,align:"center",formatter:null,color:"#000"},yearLabel:{show:!0,position:null,margin:30,formatter:null,color:"#ccc",fontFamily:"sans-serif",fontWeight:"bolder",fontSize:20}},n}(ComponentModel$1);function mergeAndNormalizeLayoutParams$1(a,n){var r=a.cellSize,o;isArray$1(r)?o=r:o=a.cellSize=[r,r],o.length===1&&(o[1]=o[0]);var l=map$1([0,1],function(u){return sizeCalculable(n,u)&&(o[u]="auto"),o[u]!=null&&o[u]!=="auto"});mergeLayoutParam(a,n,{type:"box",ignoreSize:l})}const CalendarModel$1=CalendarModel;var CalendarView=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.prototype.render=function(r,o,l){var u=this.group;u.removeAll();var c=r.coordinateSystem,h=c.getRangeInfo(),d=c.getOrient(),p=o.getLocaleModel();this._renderDayRect(r,h,u),this._renderLines(r,h,d,u),this._renderYearText(r,h,d,u),this._renderMonthText(r,p,d,u),this._renderWeekText(r,p,h,d,u)},n.prototype._renderDayRect=function(r,o,l){for(var u=r.coordinateSystem,c=r.getModel("itemStyle").getItemStyle(),h=u.getCellWidth(),d=u.getCellHeight(),p=o.start.time;p<=o.end.time;p=u.getNextNDay(p,1).time){var f=u.dataToRect([p],!1).tl,g=new Rect$3({shape:{x:f[0],y:f[1],width:h,height:d},cursor:"default",style:c});l.add(g)}},n.prototype._renderLines=function(r,o,l,u){var c=this,h=r.coordinateSystem,d=r.getModel(["splitLine","lineStyle"]).getLineStyle(),p=r.get(["splitLine","show"]),f=d.lineWidth;this._tlpoints=[],this._blpoints=[],this._firstDayOfMonth=[],this._firstDayPoints=[];for(var g=o.start,y=0;g.time<=o.end.time;y++){_(g.formatedDate),y===0&&(g=h.getDateInfo(o.start.y+"-"+o.start.m));var v=g.date;v.setMonth(v.getMonth()+1),g=h.getDateInfo(v)}_(h.getNextNDay(o.end.time,1).formatedDate);function _(x){c._firstDayOfMonth.push(h.getDateInfo(x)),c._firstDayPoints.push(h.dataToRect([x],!1).tl);var S=c._getLinePointsOfOneWeek(r,x,l);c._tlpoints.push(S[0]),c._blpoints.push(S[S.length-1]),p&&c._drawSplitline(S,d,u)}p&&this._drawSplitline(c._getEdgesPoints(c._tlpoints,f,l),d,u),p&&this._drawSplitline(c._getEdgesPoints(c._blpoints,f,l),d,u)},n.prototype._getEdgesPoints=function(r,o,l){var u=[r[0].slice(),r[r.length-1].slice()],c=l==="horizontal"?0:1;return u[0][c]=u[0][c]-o/2,u[1][c]=u[1][c]+o/2,u},n.prototype._drawSplitline=function(r,o,l){var u=new Polyline$3({z2:20,shape:{points:r},style:o});l.add(u)},n.prototype._getLinePointsOfOneWeek=function(r,o,l){for(var u=r.coordinateSystem,c=u.getDateInfo(o),h=[],d=0;d<7;d++){var p=u.getNextNDay(c.time,d),f=u.dataToRect([p.time],!1);h[2*p.day]=f.tl,h[2*p.day+1]=f[l==="horizontal"?"bl":"tr"]}return h},n.prototype._formatterLabel=function(r,o){return isString(r)&&r?formatTplSimple(r,o):isFunction(r)?r(o):o.nameMap},n.prototype._yearTextPositionControl=function(r,o,l,u,c){var h=o[0],d=o[1],p=["center","bottom"];u==="bottom"?(d+=c,p=["center","top"]):u==="left"?h-=c:u==="right"?(h+=c,p=["center","top"]):d-=c;var f=0;return(u==="left"||u==="right")&&(f=Math.PI/2),{rotation:f,x:h,y:d,style:{align:p[0],verticalAlign:p[1]}}},n.prototype._renderYearText=function(r,o,l,u){var c=r.getModel("yearLabel");if(c.get("show")){var h=c.get("margin"),d=c.get("position");d||(d=l!=="horizontal"?"top":"left");var p=[this._tlpoints[this._tlpoints.length-1],this._blpoints[0]],f=(p[0][0]+p[1][0])/2,g=(p[0][1]+p[1][1])/2,y=l==="horizontal"?0:1,v={top:[f,p[y][1]],bottom:[f,p[1-y][1]],left:[p[1-y][0],g],right:[p[y][0],g]},_=o.start.y;+o.end.y>+o.start.y&&(_=_+"-"+o.end.y);var x=c.get("formatter"),S={start:o.start.y,end:o.end.y,nameMap:_},T=this._formatterLabel(x,S),M=new ZRText$1({z2:30,style:createTextStyle$1(c,{text:T}),silent:c.get("silent")});M.attr(this._yearTextPositionControl(M,v[d],l,d,h)),u.add(M)}},n.prototype._monthTextPositionControl=function(r,o,l,u,c){var h="left",d="top",p=r[0],f=r[1];return l==="horizontal"?(f=f+c,o&&(h="center"),u==="start"&&(d="bottom")):(p=p+c,o&&(d="middle"),u==="start"&&(h="right")),{x:p,y:f,align:h,verticalAlign:d}},n.prototype._renderMonthText=function(r,o,l,u){var c=r.getModel("monthLabel");if(c.get("show")){var h=c.get("nameMap"),d=c.get("margin"),p=c.get("position"),f=c.get("align"),g=[this._tlpoints,this._blpoints];(!h||isString(h))&&(h&&(o=getLocaleModel(h)||o),h=o.get(["time","monthAbbr"])||[]);var y=p==="start"?0:1,v=l==="horizontal"?0:1;d=p==="start"?-d:d;for(var _=f==="center",x=c.get("silent"),S=0;S<g[y].length-1;S++){var T=g[y][S].slice(),M=this._firstDayOfMonth[S];if(_){var b=this._firstDayPoints[S];T[v]=(b[v]+g[0][S+1][v])/2}var A=c.get("formatter"),I=h[+M.m-1],w={yyyy:M.y,yy:(M.y+"").slice(2),MM:M.m,M:+M.m,nameMap:I},C=this._formatterLabel(A,w),E=new ZRText$1({z2:30,style:extend(createTextStyle$1(c,{text:C}),this._monthTextPositionControl(T,_,l,p,d)),silent:x});u.add(E)}}},n.prototype._weekTextPositionControl=function(r,o,l,u,c){var h="center",d="middle",p=r[0],f=r[1],g=l==="start";return o==="horizontal"?(p=p+u+(g?1:-1)*c[0]/2,h=g?"right":"left"):(f=f+u+(g?1:-1)*c[1]/2,d=g?"bottom":"top"),{x:p,y:f,align:h,verticalAlign:d}},n.prototype._renderWeekText=function(r,o,l,u,c){var h=r.getModel("dayLabel");if(h.get("show")){var d=r.coordinateSystem,p=h.get("position"),f=h.get("nameMap"),g=h.get("margin"),y=d.getFirstDayOfWeek();if(!f||isString(f)){f&&(o=getLocaleModel(f)||o);var v=o.get(["time","dayOfWeekShort"]);f=v||map$1(o.get(["time","dayOfWeekAbbr"]),function(w){return w[0]})}var _=d.getNextNDay(l.end.time,7-l.lweek).time,x=[d.getCellWidth(),d.getCellHeight()];g=parsePercent(g,Math.min(x[1],x[0])),p==="start"&&(_=d.getNextNDay(l.start.time,-(7+l.fweek)).time,g=-g);for(var S=h.get("silent"),T=0;T<7;T++){var M=d.getNextNDay(_,T),b=d.dataToRect([M.time],!1).center,A=T;A=Math.abs((T+y)%7);var I=new ZRText$1({z2:30,style:extend(createTextStyle$1(h,{text:f[A]}),this._weekTextPositionControl(b,u,p,g,x)),silent:S});c.add(I)}}},n.type="calendar",n}(ComponentView$1);const CalendarView$1=CalendarView;var PROXIMATE_ONE_DAY=864e5,Calendar=function(){function a(n,r,o){this.type="calendar",this.dimensions=a.dimensions,this.getDimensionsInfo=a.getDimensionsInfo,this._model=n}return a.getDimensionsInfo=function(){return[{name:"time",type:"time"},"value"]},a.prototype.getRangeInfo=function(){return this._rangeInfo},a.prototype.getModel=function(){return this._model},a.prototype.getRect=function(){return this._rect},a.prototype.getCellWidth=function(){return this._sw},a.prototype.getCellHeight=function(){return this._sh},a.prototype.getOrient=function(){return this._orient},a.prototype.getFirstDayOfWeek=function(){return this._firstDayOfWeek},a.prototype.getDateInfo=function(n){n=parseDate(n);var r=n.getFullYear(),o=n.getMonth()+1,l=o<10?"0"+o:""+o,u=n.getDate(),c=u<10?"0"+u:""+u,h=n.getDay();return h=Math.abs((h+7-this.getFirstDayOfWeek())%7),{y:r+"",m:l,d:c,day:h,time:n.getTime(),formatedDate:r+"-"+l+"-"+c,date:n}},a.prototype.getNextNDay=function(n,r){return r=r||0,r===0?this.getDateInfo(n):(n=new Date(this.getDateInfo(n).time),n.setDate(n.getDate()+r),this.getDateInfo(n))},a.prototype.update=function(n,r){this._firstDayOfWeek=+this._model.getModel("dayLabel").get("firstDay"),this._orient=this._model.get("orient"),this._lineWidth=this._model.getModel("itemStyle").getItemStyle().lineWidth||0,this._rangeInfo=this._getRangeInfo(this._initRangeOption());var o=this._rangeInfo.weeks||1,l=["width","height"],u=this._model.getCellSize().slice(),c=this._model.getBoxLayoutParams(),h=this._orient==="horizontal"?[o,7]:[7,o];each$f([0,1],function(g){f(u,g)&&(c[l[g]]=u[g]*h[g])});var d={width:r.getWidth(),height:r.getHeight()},p=this._rect=getLayoutRect(c,d);each$f([0,1],function(g){f(u,g)||(u[g]=p[l[g]]/h[g])});function f(g,y){return g[y]!=null&&g[y]!=="auto"}this._sw=u[0],this._sh=u[1]},a.prototype.dataToPoint=function(n,r){isArray$1(n)&&(n=n[0]),r==null&&(r=!0);var o=this.getDateInfo(n),l=this._rangeInfo,u=o.formatedDate;if(r&&!(o.time>=l.start.time&&o.time<l.end.time+PROXIMATE_ONE_DAY))return[NaN,NaN];var c=o.day,h=this._getRangeInfo([l.start.time,u]).nthWeek;return this._orient==="vertical"?[this._rect.x+c*this._sw+this._sw/2,this._rect.y+h*this._sh+this._sh/2]:[this._rect.x+h*this._sw+this._sw/2,this._rect.y+c*this._sh+this._sh/2]},a.prototype.pointToData=function(n){var r=this.pointToDate(n);return r&&r.time},a.prototype.dataToRect=function(n,r){var o=this.dataToPoint(n,r);return{contentShape:{x:o[0]-(this._sw-this._lineWidth)/2,y:o[1]-(this._sh-this._lineWidth)/2,width:this._sw-this._lineWidth,height:this._sh-this._lineWidth},center:o,tl:[o[0]-this._sw/2,o[1]-this._sh/2],tr:[o[0]+this._sw/2,o[1]-this._sh/2],br:[o[0]+this._sw/2,o[1]+this._sh/2],bl:[o[0]-this._sw/2,o[1]+this._sh/2]}},a.prototype.pointToDate=function(n){var r=Math.floor((n[0]-this._rect.x)/this._sw)+1,o=Math.floor((n[1]-this._rect.y)/this._sh)+1,l=this._rangeInfo.range;return this._orient==="vertical"?this._getDateByWeeksAndDay(o,r-1,l):this._getDateByWeeksAndDay(r,o-1,l)},a.prototype.convertToPixel=function(n,r,o){var l=getCoordSys(r);return l===this?l.dataToPoint(o):null},a.prototype.convertFromPixel=function(n,r,o){var l=getCoordSys(r);return l===this?l.pointToData(o):null},a.prototype.containPoint=function(n){return console.warn("Not implemented."),!1},a.prototype._initRangeOption=function(){var n=this._model.get("range"),r;if(isArray$1(n)&&n.length===1&&(n=n[0]),isArray$1(n))r=n;else{var o=n.toString();if(/^\d{4}$/.test(o)&&(r=[o+"-01-01",o+"-12-31"]),/^\d{4}[\/|-]\d{1,2}$/.test(o)){var l=this.getDateInfo(o),u=l.date;u.setMonth(u.getMonth()+1);var c=this.getNextNDay(u,-1);r=[l.formatedDate,c.formatedDate]}/^\d{4}[\/|-]\d{1,2}[\/|-]\d{1,2}$/.test(o)&&(r=[o,o])}if(!r)return logError("Invalid date range."),n;var h=this._getRangeInfo(r);return h.start.time>h.end.time&&r.reverse(),r},a.prototype._getRangeInfo=function(n){var r=[this.getDateInfo(n[0]),this.getDateInfo(n[1])],o;r[0].time>r[1].time&&(o=!0,r.reverse());var l=Math.floor(r[1].time/PROXIMATE_ONE_DAY)-Math.floor(r[0].time/PROXIMATE_ONE_DAY)+1,u=new Date(r[0].time),c=u.getDate(),h=r[1].date.getDate();u.setDate(c+l-1);var d=u.getDate();if(d!==h)for(var p=u.getTime()-r[1].time>0?1:-1;(d=u.getDate())!==h&&(u.getTime()-r[1].time)*p>0;)l-=p,u.setDate(d-p);var f=Math.floor((l+r[0].day+6)/7),g=o?-f+1:f-1;return o&&r.reverse(),{range:[r[0].formatedDate,r[1].formatedDate],start:r[0],end:r[1],allDay:l,weeks:f,nthWeek:g,fweek:r[0].day,lweek:r[1].day}},a.prototype._getDateByWeeksAndDay=function(n,r,o){var l=this._getRangeInfo(o);if(n>l.weeks||n===0&&r<l.fweek||n===l.weeks&&r>l.lweek)return null;var u=(n-1)*7-l.fweek+r,c=new Date(l.start.time);return c.setDate(+l.start.d+u),this.getDateInfo(c)},a.create=function(n,r){var o=[];return n.eachComponent("calendar",function(l){var u=new a(l);o.push(u),l.coordinateSystem=u}),n.eachSeries(function(l){l.get("coordinateSystem")==="calendar"&&(l.coordinateSystem=o[l.get("calendarIndex")||0])}),o},a.dimensions=["time","value"],a}();function getCoordSys(a){var n=a.calendarModel,r=a.seriesModel,o=n?n.coordinateSystem:r?r.coordinateSystem:null;return o}const Calendar$1=Calendar;function install$m(a){a.registerComponentModel(CalendarModel$1),a.registerComponentView(CalendarView$1),a.registerCoordinateSystem("calendar",Calendar$1)}function setKeyInfoToNewElOption(a,n){var r=a.existing;if(n.id=a.keyInfo.id,!n.type&&r&&(n.type=r.type),n.parentId==null){var o=n.parentOption;o?n.parentId=o.id:r&&(n.parentId=r.parentId)}n.parentOption=null}function isSetLoc(a,n){var r;return each$f(n,function(o){a[o]!=null&&a[o]!=="auto"&&(r=!0)}),r}function mergeNewElOptionToExist(a,n,r){var o=extend({},r),l=a[n],u=r.$action||"merge";if(u==="merge")if(l){{var c=r.type;assert(!c||l.type===c,'Please set $action: "replace" to change `type`')}merge(l,o,!0),mergeLayoutParam(l,o,{ignoreSize:!0}),copyLayoutParams(r,l),copyTransitionInfo(r,l),copyTransitionInfo(r,l,"shape"),copyTransitionInfo(r,l,"style"),copyTransitionInfo(r,l,"extra"),r.clipPath=l.clipPath}else a[n]=o;else u==="replace"?a[n]=o:u==="remove"&&l&&(a[n]=null)}var TRANSITION_PROPS_TO_COPY=["transition","enterFrom","leaveTo"],ROOT_TRANSITION_PROPS_TO_COPY=TRANSITION_PROPS_TO_COPY.concat(["enterAnimation","updateAnimation","leaveAnimation"]);function copyTransitionInfo(a,n,r){if(r&&(!a[r]&&n[r]&&(a[r]={}),a=a[r],n=n[r]),!(!a||!n))for(var o=r?TRANSITION_PROPS_TO_COPY:ROOT_TRANSITION_PROPS_TO_COPY,l=0;l<o.length;l++){var u=o[l];a[u]==null&&n[u]!=null&&(a[u]=n[u])}}function setLayoutInfoToExist(a,n){if(!!a&&(a.hv=n.hv=[isSetLoc(n,["left","right"]),isSetLoc(n,["top","bottom"])],a.type==="group")){var r=a,o=n;r.width==null&&(r.width=o.width=0),r.height==null&&(r.height=o.height=0)}}var GraphicComponentModel=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r.preventAutoZ=!0,r}return n.prototype.mergeOption=function(r,o){var l=this.option.elements;this.option.elements=null,a.prototype.mergeOption.call(this,r,o),this.option.elements=l},n.prototype.optionUpdated=function(r,o){var l=this.option,u=(o?l:r).elements,c=l.elements=o?[]:l.elements,h=[];this._flatten(u,h,null);var d=mappingToExists(c,h,"normalMerge"),p=this._elOptionsToUpdate=[];each$f(d,function(f,g){var y=f.newOption;assert(isObject$3(y)||f.existing,"Empty graphic option definition"),y&&(p.push(y),setKeyInfoToNewElOption(f,y),mergeNewElOptionToExist(c,g,y),setLayoutInfoToExist(c[g],y))},this),l.elements=filter(c,function(f){return f&&delete f.$action,f!=null})},n.prototype._flatten=function(r,o,l){each$f(r,function(u){if(u){l&&(u.parentOption=l),o.push(u);var c=u.children;c&&c.length&&this._flatten(c,o,u),delete u.children}},this)},n.prototype.useElOptionsToUpdate=function(){var r=this._elOptionsToUpdate;return this._elOptionsToUpdate=null,r},n.type="graphic",n.defaultOption={elements:[]},n}(ComponentModel$1),nonShapeGraphicElements={path:null,compoundPath:null,group:Group$4,image:ZRImage$1,text:ZRText$1},inner$7=makeInner(),GraphicComponentView=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.prototype.init=function(){this._elMap=createHashMap()},n.prototype.render=function(r,o,l){r!==this._lastGraphicModel&&this._clear(),this._lastGraphicModel=r,this._updateElements(r),this._relocate(r,l)},n.prototype._updateElements=function(r){var o=r.useElOptionsToUpdate();if(o){var l=this._elMap,u=this.group,c=r.get("z"),h=r.get("zlevel");each$f(o,function(d){var p=convertOptionIdName(d.id,null),f=p!=null?l.get(p):null,g=convertOptionIdName(d.parentId,null),y=g!=null?l.get(g):u,v=d.type,_=d.style;v==="text"&&_&&d.hv&&d.hv[1]&&(_.textVerticalAlign=_.textBaseline=_.verticalAlign=_.align=null);var x=d.textContent,S=d.textConfig;if(_&&isEC4CompatibleStyle(_,v,!!S,!!x)){var T=convertFromEC4CompatibleStyle(_,v,!0);!S&&T.textConfig&&(S=d.textConfig=T.textConfig),!x&&T.textContent&&(x=T.textContent)}var M=getCleanedElOption(d);f&&assert(y===f.parent,"Changing parent is not supported.");var b=d.$action||"merge",A=b==="merge",I=b==="replace";if(A){var w=!f,C=f;w?C=createEl(p,y,d.type,l):(C&&(inner$7(C).isNew=!1),stopPreviousKeyframeAnimationAndRestore(C)),C&&(applyUpdateTransition(C,M,r,{isInit:w}),updateCommonAttrs(C,d,c,h))}else if(I){removeEl$1(f,d,l,r);var E=createEl(p,y,d.type,l);E&&(applyUpdateTransition(E,M,r,{isInit:!0}),updateCommonAttrs(E,d,c,h))}else b==="remove"&&(updateLeaveTo(f,d),removeEl$1(f,d,l,r));var P=l.get(p);if(P&&x)if(A){var D=P.getTextContent();D?D.attr(x):P.setTextContent(new ZRText$1(x))}else I&&P.setTextContent(new ZRText$1(x));if(P){var L=d.clipPath;if(L){var R=L.type,O=void 0,w=!1;if(A){var N=P.getClipPath();w=!N||inner$7(N).type!==R,O=w?newEl(R):N}else I&&(w=!0,O=newEl(R));P.setClipPath(O),applyUpdateTransition(O,L,r,{isInit:w}),applyKeyframeAnimation(O,L.keyframeAnimation,r)}var V=inner$7(P);P.setTextConfig(S),V.option=d,setEventData(P,r,d),setTooltipConfig({el:P,componentModel:r,itemName:P.name,itemTooltipOption:d.tooltip}),applyKeyframeAnimation(P,d.keyframeAnimation,r)}})}},n.prototype._relocate=function(r,o){for(var l=r.option.elements,u=this.group,c=this._elMap,h=o.getWidth(),d=o.getHeight(),p=["x","y"],f=0;f<l.length;f++){var g=l[f],y=convertOptionIdName(g.id,null),v=y!=null?c.get(y):null;if(!(!v||!v.isGroup)){var _=v.parent,x=_===u,S=inner$7(v),T=inner$7(_);S.width=parsePercent(S.option.width,x?h:T.width)||0,S.height=parsePercent(S.option.height,x?d:T.height)||0}}for(var f=l.length-1;f>=0;f--){var g=l[f],y=convertOptionIdName(g.id,null),v=y!=null?c.get(y):null;if(v){var _=v.parent,T=inner$7(_),M=_===u?{width:h,height:d}:{width:T.width,height:T.height},b={},A=positionElement(v,g,M,null,{hv:g.hv,boundingMode:g.bounding},b);if(!inner$7(v).isNew&&A){for(var I=g.transition,w={},C=0;C<p.length;C++){var E=p[C],P=b[E];I&&(isTransitionAll(I)||indexOf(I,E)>=0)?w[E]=P:v[E]=P}updateProps$1(v,w,r,0)}else v.attr(b)}}},n.prototype._clear=function(){var r=this,o=this._elMap;o.each(function(l){removeEl$1(l,inner$7(l).option,o,r._lastGraphicModel)}),this._elMap=createHashMap()},n.prototype.dispose=function(){this._clear()},n.type="graphic",n}(ComponentView$1);function newEl(a){assert(a,"graphic type MUST be set");var n=hasOwn(nonShapeGraphicElements,a)?nonShapeGraphicElements[a]:getShapeClass(a);assert(n,"graphic type "+a+" can not be found");var r=new n({});return inner$7(r).type=a,r}function createEl(a,n,r,o){var l=newEl(r);return n.add(l),o.set(a,l),inner$7(l).id=a,inner$7(l).isNew=!0,l}function removeEl$1(a,n,r,o){var l=a&&a.parent;l&&(a.type==="group"&&a.traverse(function(u){removeEl$1(u,n,r,o)}),applyLeaveTransition(a,n,o),r.removeKey(inner$7(a).id))}function updateCommonAttrs(a,n,r,o){a.isGroup||each$f([["cursor",Displayable$1.prototype.cursor],["zlevel",o||0],["z",r||0],["z2",0]],function(l){var u=l[0];hasOwn(n,u)?a[u]=retrieve2(n[u],l[1]):a[u]==null&&(a[u]=l[1])}),each$f(keys(n),function(l){if(l.indexOf("on")===0){var u=n[l];a[l]=isFunction(u)?u:null}}),hasOwn(n,"draggable")&&(a.draggable=n.draggable),n.name!=null&&(a.name=n.name),n.id!=null&&(a.id=n.id)}function getCleanedElOption(a){return a=extend({},a),each$f(["id","parentId","$action","hv","bounding","textContent","clipPath"].concat(LOCATION_PARAMS),function(n){delete a[n]}),a}function setEventData(a,n,r){var o=getECData(a).eventData;!a.silent&&!a.ignore&&!o&&(o=getECData(a).eventData={componentType:"graphic",componentIndex:n.componentIndex,name:a.name}),o&&(o.info=r.info)}function install$l(a){a.registerComponentModel(GraphicComponentModel),a.registerComponentView(GraphicComponentView),a.registerPreprocessor(function(n){var r=n.graphic;isArray$1(r)?!r[0]||!r[0].elements?n.graphic=[{elements:r}]:n.graphic=[n.graphic[0]]:r&&!r.elements&&(n.graphic=[{elements:[r]}])})}var DATA_ZOOM_AXIS_DIMENSIONS=["x","y","radius","angle","single"],SERIES_COORDS=["cartesian2d","polar","singleAxis"];function isCoordSupported(a){var n=a.get("coordinateSystem");return indexOf(SERIES_COORDS,n)>=0}function getAxisMainType(a){return assert(a),a+"Axis"}function findEffectedDataZooms(a,n){var r=createHashMap(),o=[],l=createHashMap();a.eachComponent({mainType:"dataZoom",query:n},function(f){l.get(f.uid)||h(f)});var u;do u=!1,a.eachComponent("dataZoom",c);while(u);function c(f){!l.get(f.uid)&&d(f)&&(h(f),u=!0)}function h(f){l.set(f.uid,!0),o.push(f),p(f)}function d(f){var g=!1;return f.eachTargetAxis(function(y,v){var _=r.get(y);_&&_[v]&&(g=!0)}),g}function p(f){f.eachTargetAxis(function(g,y){(r.get(g)||r.set(g,[]))[y]=!0})}return o}function collectReferCoordSysModelInfo(a){var n=a.ecModel,r={infoList:[],infoMap:createHashMap()};return a.eachTargetAxis(function(o,l){var u=n.getComponent(getAxisMainType(o),l);if(u){var c=u.getCoordSysModel();if(c){var h=c.uid,d=r.infoMap.get(h);d||(d={model:c,axisModels:[]},r.infoList.push(d),r.infoMap.set(h,d)),d.axisModels.push(u)}}}),r}var DataZoomAxisInfo=function(){function a(){this.indexList=[],this.indexMap=[]}return a.prototype.add=function(n){this.indexMap[n]||(this.indexList.push(n),this.indexMap[n]=!0)},a}(),DataZoomModel=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r._autoThrottle=!0,r._noTarget=!0,r._rangePropMode=["percent","percent"],r}return n.prototype.init=function(r,o,l){var u=retrieveRawOption(r);this.settledOption=u,this.mergeDefaultAndTheme(r,l),this._doInit(u)},n.prototype.mergeOption=function(r){var o=retrieveRawOption(r);merge(this.option,r,!0),merge(this.settledOption,o,!0),this._doInit(o)},n.prototype._doInit=function(r){var o=this.option;this._setDefaultThrottle(r),this._updateRangeUse(r);var l=this.settledOption;each$f([["start","startValue"],["end","endValue"]],function(u,c){this._rangePropMode[c]==="value"&&(o[u[0]]=l[u[0]]=null)},this),this._resetTarget()},n.prototype._resetTarget=function(){var r=this.get("orient",!0),o=this._targetAxisInfoMap=createHashMap(),l=this._fillSpecifiedTargetAxis(o);l?this._orient=r||this._makeAutoOrientByTargetAxis():(this._orient=r||"horizontal",this._fillAutoTargetAxisByOrient(o,this._orient)),this._noTarget=!0,o.each(function(u){u.indexList.length&&(this._noTarget=!1)},this)},n.prototype._fillSpecifiedTargetAxis=function(r){var o=!1;return each$f(DATA_ZOOM_AXIS_DIMENSIONS,function(l){var u=this.getReferringComponents(getAxisMainType(l),MULTIPLE_REFERRING);if(u.specified){o=!0;var c=new DataZoomAxisInfo;each$f(u.models,function(h){c.add(h.componentIndex)}),r.set(l,c)}},this),o},n.prototype._fillAutoTargetAxisByOrient=function(r,o){var l=this.ecModel,u=!0;if(u){var c=o==="vertical"?"y":"x",h=l.findComponents({mainType:c+"Axis"});d(h,c)}if(u){var h=l.findComponents({mainType:"singleAxis",filter:function(f){return f.get("orient",!0)===o}});d(h,"single")}function d(p,f){var g=p[0];if(g){var y=new DataZoomAxisInfo;if(y.add(g.componentIndex),r.set(f,y),u=!1,f==="x"||f==="y"){var v=g.getReferringComponents("grid",SINGLE_REFERRING).models[0];v&&each$f(p,function(_){g.componentIndex!==_.componentIndex&&v===_.getReferringComponents("grid",SINGLE_REFERRING).models[0]&&y.add(_.componentIndex)})}}}u&&each$f(DATA_ZOOM_AXIS_DIMENSIONS,function(p){if(u){var f=l.findComponents({mainType:getAxisMainType(p),filter:function(y){return y.get("type",!0)==="category"}});if(f[0]){var g=new DataZoomAxisInfo;g.add(f[0].componentIndex),r.set(p,g),u=!1}}},this)},n.prototype._makeAutoOrientByTargetAxis=function(){var r;return this.eachTargetAxis(function(o){!r&&(r=o)},this),r==="y"?"vertical":"horizontal"},n.prototype._setDefaultThrottle=function(r){if(r.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var o=this.ecModel.option;this.option.throttle=o.animation&&o.animationDurationUpdate>0?100:20}},n.prototype._updateRangeUse=function(r){var o=this._rangePropMode,l=this.get("rangeMode");each$f([["start","startValue"],["end","endValue"]],function(u,c){var h=r[u[0]]!=null,d=r[u[1]]!=null;h&&!d?o[c]="percent":!h&&d?o[c]="value":l?o[c]=l[c]:h&&(o[c]="percent")})},n.prototype.noTarget=function(){return this._noTarget},n.prototype.getFirstTargetAxisModel=function(){var r;return this.eachTargetAxis(function(o,l){r==null&&(r=this.ecModel.getComponent(getAxisMainType(o),l))},this),r},n.prototype.eachTargetAxis=function(r,o){this._targetAxisInfoMap.each(function(l,u){each$f(l.indexList,function(c){r.call(o,u,c)})})},n.prototype.getAxisProxy=function(r,o){var l=this.getAxisModel(r,o);if(l)return l.__dzAxisProxy},n.prototype.getAxisModel=function(r,o){assert(r&&o!=null);var l=this._targetAxisInfoMap.get(r);if(l&&l.indexMap[o])return this.ecModel.getComponent(getAxisMainType(r),o)},n.prototype.setRawRange=function(r){var o=this.option,l=this.settledOption;each$f([["start","startValue"],["end","endValue"]],function(u){(r[u[0]]!=null||r[u[1]]!=null)&&(o[u[0]]=l[u[0]]=r[u[0]],o[u[1]]=l[u[1]]=r[u[1]])},this),this._updateRangeUse(r)},n.prototype.setCalculatedRange=function(r){var o=this.option;each$f(["start","startValue","end","endValue"],function(l){o[l]=r[l]})},n.prototype.getPercentRange=function(){var r=this.findRepresentativeAxisProxy();if(r)return r.getDataPercentWindow()},n.prototype.getValueRange=function(r,o){if(r==null&&o==null){var l=this.findRepresentativeAxisProxy();if(l)return l.getDataValueWindow()}else return this.getAxisProxy(r,o).getDataValueWindow()},n.prototype.findRepresentativeAxisProxy=function(r){if(r)return r.__dzAxisProxy;for(var o,l=this._targetAxisInfoMap.keys(),u=0;u<l.length;u++)for(var c=l[u],h=this._targetAxisInfoMap.get(c),d=0;d<h.indexList.length;d++){var p=this.getAxisProxy(c,h.indexList[d]);if(p.hostedBy(this))return p;o||(o=p)}return o},n.prototype.getRangePropMode=function(){return this._rangePropMode.slice()},n.prototype.getOrient=function(){return assert(this._orient),this._orient},n.type="dataZoom",n.dependencies=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","series","toolbox"],n.defaultOption={z:4,filterMode:"filter",start:0,end:100},n}(ComponentModel$1);function retrieveRawOption(a){var n={};return each$f(["start","end","startValue","endValue","throttle"],function(r){a.hasOwnProperty(r)&&(n[r]=a[r])}),n}const DataZoomModel$1=DataZoomModel;var SelectDataZoomModel=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.type="dataZoom.select",n}(DataZoomModel$1);const SelectZoomModel=SelectDataZoomModel;var DataZoomView=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.prototype.render=function(r,o,l,u){this.dataZoomModel=r,this.ecModel=o,this.api=l},n.type="dataZoom",n}(ComponentView$1);const DataZoomView$1=DataZoomView;var SelectDataZoomView=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.type="dataZoom.select",n}(DataZoomView$1);const SelectZoomView=SelectDataZoomView;var each$7=each$f,asc$1=asc$2,AxisProxy=function(){function a(n,r,o,l){this._dimName=n,this._axisIndex=r,this.ecModel=l,this._dataZoomModel=o}return a.prototype.hostedBy=function(n){return this._dataZoomModel===n},a.prototype.getDataValueWindow=function(){return this._valueWindow.slice()},a.prototype.getDataPercentWindow=function(){return this._percentWindow.slice()},a.prototype.getTargetSeriesModels=function(){var n=[];return this.ecModel.eachSeries(function(r){if(isCoordSupported(r)){var o=getAxisMainType(this._dimName),l=r.getReferringComponents(o,SINGLE_REFERRING).models[0];l&&this._axisIndex===l.componentIndex&&n.push(r)}},this),n},a.prototype.getAxisModel=function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},a.prototype.getMinMaxSpan=function(){return clone$4(this._minMaxSpan)},a.prototype.calculateDataWindow=function(n){var r=this._dataExtent,o=this.getAxisModel(),l=o.axis.scale,u=this._dataZoomModel.getRangePropMode(),c=[0,100],h=[],d=[],p;each$7(["start","end"],function(y,v){var _=n[y],x=n[y+"Value"];u[v]==="percent"?(_==null&&(_=c[v]),x=l.parse(linearMap$2(_,c,r))):(p=!0,x=x==null?r[v]:l.parse(x),_=linearMap$2(x,r,c)),d[v]=x==null||isNaN(x)?r[v]:x,h[v]=_==null||isNaN(_)?c[v]:_}),asc$1(d),asc$1(h);var f=this._minMaxSpan;p?g(d,h,r,c,!1):g(h,d,c,r,!0);function g(y,v,_,x,S){var T=S?"Span":"ValueSpan";sliderMove(0,y,_,"all",f["min"+T],f["max"+T]);for(var M=0;M<2;M++)v[M]=linearMap$2(y[M],_,x,!0),S&&(v[M]=l.parse(v[M]))}return{valueWindow:d,percentWindow:h}},a.prototype.reset=function(n){if(n===this._dataZoomModel){var r=this.getTargetSeriesModels();this._dataExtent=calculateDataExtent(this,this._dimName,r),this._updateMinMaxSpan();var o=this.calculateDataWindow(n.settledOption);this._valueWindow=o.valueWindow,this._percentWindow=o.percentWindow,this._setAxisModel()}},a.prototype.filterData=function(n,r){if(n!==this._dataZoomModel)return;var o=this._dimName,l=this.getTargetSeriesModels(),u=n.get("filterMode"),c=this._valueWindow;if(u==="none")return;each$7(l,function(d){var p=d.getData(),f=p.mapDimensionsAll(o);if(f.length){if(u==="weakFilter"){var g=p.getStore(),y=map$1(f,function(v){return p.getDimensionIndex(v)},p);p.filterSelf(function(v){for(var _,x,S,T=0;T<f.length;T++){var M=g.get(y[T],v),b=!isNaN(M),A=M<c[0],I=M>c[1];if(b&&!A&&!I)return!0;b&&(S=!0),A&&(_=!0),I&&(x=!0)}return S&&_&&x})}else each$7(f,function(v){if(u==="empty")d.setData(p=p.map(v,function(x){return h(x)?x:NaN}));else{var _={};_[v]=c,p.selectRange(_)}});each$7(f,function(v){p.setApproximateExtent(c,v)})}});function h(d){return d>=c[0]&&d<=c[1]}},a.prototype._updateMinMaxSpan=function(){var n=this._minMaxSpan={},r=this._dataZoomModel,o=this._dataExtent;each$7(["min","max"],function(l){var u=r.get(l+"Span"),c=r.get(l+"ValueSpan");c!=null&&(c=this.getAxisModel().axis.scale.parse(c)),c!=null?u=linearMap$2(o[0]+c,o,[0,100],!0):u!=null&&(c=linearMap$2(u,[0,100],o,!0)-o[0]),n[l+"Span"]=u,n[l+"ValueSpan"]=c},this)},a.prototype._setAxisModel=function(){var n=this.getAxisModel(),r=this._percentWindow,o=this._valueWindow;if(r){var l=getPixelPrecision(o,[0,500]);l=Math.min(l,20);var u=n.axis.scale.rawExtentInfo;r[0]!==0&&u.setDeterminedMinMax("min",+o[0].toFixed(l)),r[1]!==100&&u.setDeterminedMinMax("max",+o[1].toFixed(l)),u.freeze()}},a}();function calculateDataExtent(a,n,r){var o=[1/0,-1/0];each$7(r,function(c){unionAxisExtentFromData(o,c.getData(),n)});var l=a.getAxisModel(),u=ensureScaleRawExtentInfo(l.axis.scale,l,o).calculate();return[u.min,u.max]}const AxisProxy$1=AxisProxy;var dataZoomProcessor={getTargetSeries:function(a){function n(l){a.eachComponent("dataZoom",function(u){u.eachTargetAxis(function(c,h){var d=a.getComponent(getAxisMainType(c),h);l(c,h,d,u)})})}n(function(l,u,c,h){c.__dzAxisProxy=null});var r=[];n(function(l,u,c,h){c.__dzAxisProxy||(c.__dzAxisProxy=new AxisProxy$1(l,u,h,a),r.push(c.__dzAxisProxy))});var o=createHashMap();return each$f(r,function(l){each$f(l.getTargetSeriesModels(),function(u){o.set(u.uid,u)})}),o},overallReset:function(a,n){a.eachComponent("dataZoom",function(r){r.eachTargetAxis(function(o,l){r.getAxisProxy(o,l).reset(r)}),r.eachTargetAxis(function(o,l){r.getAxisProxy(o,l).filterData(r,n)})}),a.eachComponent("dataZoom",function(r){var o=r.findRepresentativeAxisProxy();if(o){var l=o.getDataPercentWindow(),u=o.getDataValueWindow();r.setCalculatedRange({start:l[0],end:l[1],startValue:u[0],endValue:u[1]})}})}};const dataZoomProcessor$1=dataZoomProcessor;function installDataZoomAction(a){a.registerAction("dataZoom",function(n,r){var o=findEffectedDataZooms(r,n);each$f(o,function(l){l.setRawRange({start:n.start,end:n.end,startValue:n.startValue,endValue:n.endValue})})})}var installed$1=!1;function installCommon$1(a){installed$1||(installed$1=!0,a.registerProcessor(a.PRIORITY.PROCESSOR.FILTER,dataZoomProcessor$1),installDataZoomAction(a),a.registerSubTypeDefaulter("dataZoom",function(){return"slider"}))}function install$k(a){a.registerComponentModel(SelectZoomModel),a.registerComponentView(SelectZoomView),installCommon$1(a)}var ToolboxFeature=function(){function a(){}return a}(),features={};function registerFeature(a,n){features[a]=n}function getFeature(a){return features[a]}var ToolboxModel=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.prototype.optionUpdated=function(){a.prototype.optionUpdated.apply(this,arguments);var r=this.ecModel;each$f(this.option.feature,function(o,l){var u=getFeature(l);u&&(u.getDefaultOption&&(u.defaultOption=u.getDefaultOption(r)),merge(o,u.defaultOption))})},n.type="toolbox",n.layoutMode={type:"box",ignoreSize:!0},n.defaultOption={show:!0,z:6,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}},tooltip:{show:!1,position:"bottom"}},n}(ComponentModel$1);const ToolboxModel$1=ToolboxModel;function layout(a,n,r){var o=n.getBoxLayoutParams(),l=n.get("padding"),u={width:r.getWidth(),height:r.getHeight()},c=getLayoutRect(o,u,l);box(n.get("orient"),a,n.get("itemGap"),c.width,c.height),positionElement(a,o,u,l)}function makeBackground(a,n){var r=normalizeCssArray(n.get("padding")),o=n.getItemStyle(["color","opacity"]);return o.fill=n.get("backgroundColor"),a=new Rect$3({shape:{x:a.x-r[3],y:a.y-r[0],width:a.width+r[1]+r[3],height:a.height+r[0]+r[2],r:n.get("borderRadius")},style:o,silent:!0,z2:-1}),a}var ToolboxView=function(a){__extends(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.render=function(r,o,l,u){var c=this.group;if(c.removeAll(),!r.get("show"))return;var h=+r.get("itemSize"),d=r.get("orient")==="vertical",p=r.get("feature")||{},f=this._features||(this._features={}),g=[];each$f(p,function(_,x){g.push(x)}),new DataDiffer$1(this._featureNames||[],g).add(y).update(y).remove(curry$1(y,null)).execute(),this._featureNames=g;function y(_,x){var S=g[_],T=g[x],M=p[S],b=new Model$1(M,r,r.ecModel),A;if(u&&u.newTitle!=null&&u.featureName===S&&(M.title=u.newTitle),S&&!T){if(isUserFeatureName(S))A={onclick:b.option.onclick,featureName:S};else{var I=getFeature(S);if(!I)return;A=new I}f[S]=A}else if(A=f[T],!A)return;A.uid=getUID("toolbox-feature"),A.model=b,A.ecModel=o,A.api=l;var w=A instanceof ToolboxFeature;if(!S&&T){w&&A.dispose&&A.dispose(o,l);return}if(!b.get("show")||w&&A.unusable){w&&A.remove&&A.remove(o,l);return}v(b,A,S),b.setIconStatus=function(C,E){var P=this.option,D=this.iconPaths;P.iconStatus=P.iconStatus||{},P.iconStatus[C]=E,D[C]&&(E==="emphasis"?enterEmphasis:leaveEmphasis)(D[C])},A instanceof ToolboxFeature&&A.render&&A.render(b,o,l,u)}function v(_,x,S){var T=_.getModel("iconStyle"),M=_.getModel(["emphasis","iconStyle"]),b=x instanceof ToolboxFeature&&x.getIcons?x.getIcons():_.get("icon"),A=_.get("title")||{},I,w;isString(b)?(I={},I[S]=b):I=b,isString(A)?(w={},w[S]=A):w=A;var C=_.iconPaths={};each$f(I,function(E,P){var D=createIcon(E,{},{x:-h/2,y:-h/2,width:h,height:h});D.setStyle(T.getItemStyle());var L=D.ensureState("emphasis");L.style=M.getItemStyle();var R=new ZRText$1({style:{text:w[P],align:M.get("textAlign"),borderRadius:M.get("textBorderRadius"),padding:M.get("textPadding"),fill:null,font:getFont({fontStyle:M.get("textFontStyle"),fontFamily:M.get("textFontFamily"),fontSize:M.get("textFontSize"),fontWeight:M.get("textFontWeight")},o)},ignore:!0});D.setTextContent(R),setTooltipConfig({el:D,componentModel:r,itemName:P,formatterParamsExtra:{title:w[P]}}),D.__title=w[P],D.on("mouseover",function(){var O=M.getItemStyle(),N=d?r.get("right")==null&&r.get("left")!=="right"?"right":"left":r.get("bottom")==null&&r.get("top")!=="bottom"?"bottom":"top";R.setStyle({fill:M.get("textFill")||O.fill||O.stroke||"#000",backgroundColor:M.get("textBackgroundColor")}),D.setTextConfig({position:M.get("textPosition")||N}),R.ignore=!r.get("showTitle"),l.enterEmphasis(this)}).on("mouseout",function(){_.get(["iconStatus",P])!=="emphasis"&&l.leaveEmphasis(this),R.hide()}),(_.get(["iconStatus",P])==="emphasis"?enterEmphasis:leaveEmphasis)(D),c.add(D),D.on("click",bind$1(x.onclick,x,o,l,P)),C[P]=D})}layout(c,r,l),c.add(makeBackground(c.getBoundingRect(),r)),d||c.eachChild(function(_){var x=_.__title,S=_.ensureState("emphasis"),T=S.textConfig||(S.textConfig={}),M=_.getTextContent(),b=M&&M.ensureState("emphasis");if(b&&!isFunction(b)&&x){var A=b.style||(b.style={}),I=getBoundingRect(x,ZRText$1.makeFont(A)),w=_.x+c.x,C=_.y+c.y+h,E=!1;C+I.height>l.getHeight()&&(T.position="top",E=!0);var P=E?-5-I.height:h+10;w+I.width/2>l.getWidth()?(T.position=["100%",P],A.align="right"):w-I.width/2<0&&(T.position=[0,P],A.align="left")}})},n.prototype.updateView=function(r,o,l,u){each$f(this._features,function(c){c instanceof ToolboxFeature&&c.updateView&&c.updateView(c.model,o,l,u)})},n.prototype.remove=function(r,o){each$f(this._features,function(l){l instanceof ToolboxFeature&&l.remove&&l.remove(r,o)}),this.group.removeAll()},n.prototype.dispose=function(r,o){each$f(this._features,function(l){l instanceof ToolboxFeature&&l.dispose&&l.dispose(r,o)})},n.type="toolbox",n}(ComponentView$1);function isUserFeatureName(a){return a.indexOf("my")===0}const ToolboxView$1=ToolboxView;var SaveAsImage=function(a){__extends(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.onclick=function(r,o){var l=this.model,u=l.get("name")||r.get("title.0.text")||"echarts",c=o.getZr().painter.getType()==="svg",h=c?"svg":l.get("type",!0)||"png",d=o.getConnectedDataURL({type:h,backgroundColor:l.get("backgroundColor",!0)||r.get("backgroundColor")||"#fff",connectedBackgroundColor:l.get("connectedBackgroundColor"),excludeComponents:l.get("excludeComponents"),pixelRatio:l.get("pixelRatio")}),p=env$1.browser;if(typeof MouseEvent=="function"&&(p.newEdge||!p.ie&&!p.edge)){var f=document.createElement("a");f.download=u+"."+h,f.target="_blank",f.href=d;var g=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});f.dispatchEvent(g)}else if(window.navigator.msSaveOrOpenBlob||c){var y=d.split(","),v=y[0].indexOf("base64")>-1,_=c?decodeURIComponent(y[1]):y[1];v&&(_=window.atob(_));var x=u+"."+h;if(window.navigator.msSaveOrOpenBlob){for(var S=_.length,T=new Uint8Array(S);S--;)T[S]=_.charCodeAt(S);var M=new Blob([T]);window.navigator.msSaveOrOpenBlob(M,x)}else{var b=document.createElement("iframe");document.body.appendChild(b);var A=b.contentWindow,I=A.document;I.open("image/svg+xml","replace"),I.write(_),I.close(),A.focus(),I.execCommand("SaveAs",!0,x),document.body.removeChild(b)}}else{var w=l.get("lang"),C='<body style="margin:0;"><img src="'+d+'" style="max-width:100%;" title="'+(w&&w[0]||"")+'" /></body>',E=window.open();E.document.write(C),E.document.title=u}},n.getDefaultOption=function(r){var o={show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:r.getLocaleModel().get(["toolbox","saveAsImage","title"]),type:"png",connectedBackgroundColor:"#fff",name:"",excludeComponents:["toolbox"],lang:r.getLocaleModel().get(["toolbox","saveAsImage","lang"])};return o},n}(ToolboxFeature);const SaveAsImage$1=SaveAsImage;var INNER_STACK_KEYWORD="__ec_magicType_stack__",radioTypes=[["line","bar"],["stack"]],MagicType=function(a){__extends(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.getIcons=function(){var r=this.model,o=r.get("icon"),l={};return each$f(r.get("type"),function(u){o[u]&&(l[u]=o[u])}),l},n.getDefaultOption=function(r){var o={show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:r.getLocaleModel().get(["toolbox","magicType","title"]),option:{},seriesIndex:{}};return o},n.prototype.onclick=function(r,o,l){var u=this.model,c=u.get(["seriesIndex",l]);if(seriesOptGenreator[l]){var h={series:[]},d=function(g){var y=g.subType,v=g.id,_=seriesOptGenreator[l](y,v,g,u);_&&(defaults(_,g.option),h.series.push(_));var x=g.coordinateSystem;if(x&&x.type==="cartesian2d"&&(l==="line"||l==="bar")){var S=x.getAxesByScale("ordinal")[0];if(S){var T=S.dim,M=T+"Axis",b=g.getReferringComponents(M,SINGLE_REFERRING).models[0],A=b.componentIndex;h[M]=h[M]||[];for(var I=0;I<=A;I++)h[M][A]=h[M][A]||{};h[M][A].boundaryGap=l==="bar"}}};each$f(radioTypes,function(g){indexOf(g,l)>=0&&each$f(g,function(y){u.setIconStatus(y,"normal")})}),u.setIconStatus(l,"emphasis"),r.eachComponent({mainType:"series",query:c==null?null:{seriesIndex:c}},d);var p,f=l;l==="stack"&&(p=merge({stack:u.option.title.tiled,tiled:u.option.title.stack},u.option.title),u.get(["iconStatus",l])!=="emphasis"&&(f="tiled")),o.dispatchAction({type:"changeMagicType",currentType:f,newOption:h,newTitle:p,featureName:"magicType"})}},n}(ToolboxFeature),seriesOptGenreator={line:function(a,n,r,o){if(a==="bar")return merge({id:n,type:"line",data:r.get("data"),stack:r.get("stack"),markPoint:r.get("markPoint"),markLine:r.get("markLine")},o.get(["option","line"])||{},!0)},bar:function(a,n,r,o){if(a==="line")return merge({id:n,type:"bar",data:r.get("data"),stack:r.get("stack"),markPoint:r.get("markPoint"),markLine:r.get("markLine")},o.get(["option","bar"])||{},!0)},stack:function(a,n,r,o){var l=r.get("stack")===INNER_STACK_KEYWORD;if(a==="line"||a==="bar")return o.setIconStatus("stack",l?"normal":"emphasis"),merge({id:n,stack:l?"":INNER_STACK_KEYWORD},o.get(["option","stack"])||{},!0)}};registerAction({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(a,n){n.mergeOption(a.newOption)});const MagicType$1=MagicType;var BLOCK_SPLITER=new Array(60).join("-"),ITEM_SPLITER="	";function groupSeries(a){var n={},r=[],o=[];return a.eachRawSeries(function(l){var u=l.coordinateSystem;if(u&&(u.type==="cartesian2d"||u.type==="polar")){var c=u.getBaseAxis();if(c.type==="category"){var h=c.dim+"_"+c.index;n[h]||(n[h]={categoryAxis:c,valueAxis:u.getOtherAxis(c),series:[]},o.push({axisDim:c.dim,axisIndex:c.index})),n[h].series.push(l)}else r.push(l)}else r.push(l)}),{seriesGroupByCategoryAxis:n,other:r,meta:o}}function assembleSeriesWithCategoryAxis(a){var n=[];return each$f(a,function(r,o){var l=r.categoryAxis,u=r.valueAxis,c=u.dim,h=[" "].concat(map$1(r.series,function(v){return v.name})),d=[l.model.getCategories()];each$f(r.series,function(v){var _=v.getRawData();d.push(v.getRawData().mapArray(_.mapDimension(c),function(x){return x}))});for(var p=[h.join(ITEM_SPLITER)],f=0;f<d[0].length;f++){for(var g=[],y=0;y<d.length;y++)g.push(d[y][f]);p.push(g.join(ITEM_SPLITER))}n.push(p.join(`
`))}),n.join(`

`+BLOCK_SPLITER+`

`)}function assembleOtherSeries(a){return map$1(a,function(n){var r=n.getRawData(),o=[n.name],l=[];return r.each(r.dimensions,function(){for(var u=arguments.length,c=arguments[u-1],h=r.getName(c),d=0;d<u-1;d++)l[d]=arguments[d];o.push((h?h+ITEM_SPLITER:"")+l.join(ITEM_SPLITER))}),o.join(`
`)}).join(`

`+BLOCK_SPLITER+`

`)}function getContentFromModel(a){var n=groupSeries(a);return{value:filter([assembleSeriesWithCategoryAxis(n.seriesGroupByCategoryAxis),assembleOtherSeries(n.other)],function(r){return!!r.replace(/[\n\t\s]/g,"")}).join(`

`+BLOCK_SPLITER+`

`),meta:n.meta}}function trim(a){return a.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function isTSVFormat(a){var n=a.slice(0,a.indexOf(`
`));if(n.indexOf(ITEM_SPLITER)>=0)return!0}var itemSplitRegex=new RegExp("["+ITEM_SPLITER+"]+","g");function parseTSVContents(a){for(var n=a.split(/\n+/g),r=trim(n.shift()).split(itemSplitRegex),o=[],l=map$1(r,function(d){return{name:d,data:[]}}),u=0;u<n.length;u++){var c=trim(n[u]).split(itemSplitRegex);o.push(c.shift());for(var h=0;h<c.length;h++)l[h]&&(l[h].data[u]=c[h])}return{series:l,categories:o}}function parseListContents(a){for(var n=a.split(/\n+/g),r=trim(n.shift()),o=[],l=0;l<n.length;l++){var u=trim(n[l]);if(u){var c=u.split(itemSplitRegex),h="",d=void 0,p=!1;isNaN(c[0])?(p=!0,h=c[0],c=c.slice(1),o[l]={name:h,value:[]},d=o[l].value):d=o[l]=[];for(var f=0;f<c.length;f++)d.push(+c[f]);d.length===1&&(p?o[l].value=d[0]:o[l]=d[0])}}return{name:r,data:o}}function parseContents(a,n){var r=a.split(new RegExp(`
*`+BLOCK_SPLITER+`
*`,"g")),o={series:[]};return each$f(r,function(l,u){if(isTSVFormat(l)){var c=parseTSVContents(l),h=n[u],d=h.axisDim+"Axis";h&&(o[d]=o[d]||[],o[d][h.axisIndex]={data:c.categories},o.series=o.series.concat(c.series))}else{var c=parseListContents(l);o.series.push(c)}}),o}var DataView=function(a){__extends(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.onclick=function(r,o){setTimeout(function(){o.dispatchAction({type:"hideTip"})});var l=o.getDom(),u=this.model;this._dom&&l.removeChild(this._dom);var c=document.createElement("div");c.style.cssText="position:absolute;top:0;bottom:0;left:0;right:0;padding:5px",c.style.backgroundColor=u.get("backgroundColor")||"#fff";var h=document.createElement("h4"),d=u.get("lang")||[];h.innerHTML=d[0]||u.get("title"),h.style.cssText="margin:10px 20px",h.style.color=u.get("textColor");var p=document.createElement("div"),f=document.createElement("textarea");p.style.cssText="overflow:auto";var g=u.get("optionToContent"),y=u.get("contentToOption"),v=getContentFromModel(r);if(isFunction(g)){var _=g(o.getOption());isString(_)?p.innerHTML=_:isDom(_)&&p.appendChild(_)}else{f.readOnly=u.get("readOnly");var x=f.style;x.cssText="display:block;width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;resize:none;box-sizing:border-box;outline:none",x.color=u.get("textColor"),x.borderColor=u.get("textareaBorderColor"),x.backgroundColor=u.get("textareaColor"),f.value=v.value,p.appendChild(f)}var S=v.meta,T=document.createElement("div");T.style.cssText="position:absolute;bottom:5px;left:0;right:0";var M="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",b=document.createElement("div"),A=document.createElement("div");M+=";background-color:"+u.get("buttonColor"),M+=";color:"+u.get("buttonTextColor");var I=this;function w(){l.removeChild(c),I._dom=null}addEventListener(b,"click",w),addEventListener(A,"click",function(){if(y==null&&g!=null||y!=null&&g==null){warn("It seems you have just provided one of `contentToOption` and `optionToContent` functions but missed the other one. Data change is ignored."),w();return}var C;try{isFunction(y)?C=y(p,o.getOption()):C=parseContents(f.value,S)}catch(E){throw w(),new Error("Data view format error "+E)}C&&o.dispatchAction({type:"changeDataView",newOption:C}),w()}),b.innerHTML=d[1],A.innerHTML=d[2],A.style.cssText=b.style.cssText=M,!u.get("readOnly")&&T.appendChild(A),T.appendChild(b),c.appendChild(h),c.appendChild(p),c.appendChild(T),p.style.height=l.clientHeight-80+"px",l.appendChild(c),this._dom=c},n.prototype.remove=function(r,o){this._dom&&o.getDom().removeChild(this._dom)},n.prototype.dispose=function(r,o){this.remove(r,o)},n.getDefaultOption=function(r){var o={show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:r.getLocaleModel().get(["toolbox","dataView","title"]),lang:r.getLocaleModel().get(["toolbox","dataView","lang"]),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"};return o},n}(ToolboxFeature);function tryMergeDataOption(a,n){return map$1(a,function(r,o){var l=n&&n[o];if(isObject$3(l)&&!isArray$1(l)){var u=isObject$3(r)&&!isArray$1(r);u||(r={value:r});var c=l.name!=null&&r.name==null;return r=defaults(r,l),c&&delete r.name,r}else return r})}registerAction({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},function(a,n){var r=[];each$f(a.newOption.series,function(o){var l=n.getSeriesByName(o.name)[0];if(!l)r.push(extend({type:"scatter"},o));else{var u=l.get("data");r.push({name:o.name,data:tryMergeDataOption(o.data,u)})}}),n.mergeOption(defaults({series:r},a.newOption))});const DataView$1=DataView;var each$6=each$f,inner$6=makeInner();function push(a,n){var r=getStoreSnapshots(a);each$6(n,function(o,l){for(var u=r.length-1;u>=0;u--){var c=r[u];if(c[l])break}if(u<0){var h=a.queryComponents({mainType:"dataZoom",subType:"select",id:l})[0];if(h){var d=h.getPercentRange();r[0][l]={dataZoomId:l,start:d[0],end:d[1]}}}}),r.push(n)}function pop(a){var n=getStoreSnapshots(a),r=n[n.length-1];n.length>1&&n.pop();var o={};return each$6(r,function(l,u){for(var c=n.length-1;c>=0;c--)if(l=n[c][u],l){o[u]=l;break}}),o}function clear(a){inner$6(a).snapshots=null}function count(a){return getStoreSnapshots(a).length}function getStoreSnapshots(a){var n=inner$6(a);return n.snapshots||(n.snapshots=[{}]),n.snapshots}var RestoreOption=function(a){__extends(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.onclick=function(r,o){clear(r),o.dispatchAction({type:"restore",from:this.uid})},n.getDefaultOption=function(r){var o={show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:r.getLocaleModel().get(["toolbox","restore","title"])};return o},n}(ToolboxFeature);registerAction({type:"restore",event:"restore",update:"prepareAndUpdate"},function(a,n){n.resetOption("recreate")});const Restore=RestoreOption;var INCLUDE_FINDER_MAIN_TYPES=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"],BrushTargetManager=function(){function a(n,r,o){var l=this;this._targetInfoList=[];var u=parseFinder(r,n);each$f(targetInfoBuilders,function(c,h){(!o||!o.include||indexOf(o.include,h)>=0)&&c(u,l._targetInfoList)})}return a.prototype.setOutputRanges=function(n,r){return this.matchOutputRanges(n,r,function(o,l,u){if((o.coordRanges||(o.coordRanges=[])).push(l),!o.coordRange){o.coordRange=l;var c=coordConvert[o.brushType](0,u,l);o.__rangeOffset={offset:diffProcessor[o.brushType](c.values,o.range,[1,1]),xyMinMax:c.xyMinMax}}}),n},a.prototype.matchOutputRanges=function(n,r,o){each$f(n,function(l){var u=this.findTargetInfo(l,r);u&&u!==!0&&each$f(u.coordSyses,function(c){var h=coordConvert[l.brushType](1,c,l.range,!0);o(l,h.values,c,r)})},this)},a.prototype.setInputRanges=function(n,r){each$f(n,function(o){var l=this.findTargetInfo(o,r);if(assert(!l||l===!0||o.coordRange,"coordRange must be specified when coord index specified."),assert(!l||l!==!0||o.range,"range must be specified in global brush."),o.range=o.range||[],l&&l!==!0){o.panelId=l.panelId;var u=coordConvert[o.brushType](0,l.coordSys,o.coordRange),c=o.__rangeOffset;o.range=c?diffProcessor[o.brushType](u.values,c.offset,getScales(u.xyMinMax,c.xyMinMax)):u.values}},this)},a.prototype.makePanelOpts=function(n,r){return map$1(this._targetInfoList,function(o){var l=o.getPanelRect();return{panelId:o.panelId,defaultBrushType:r?r(o):null,clipPath:makeRectPanelClipPath(l),isTargetByCursor:makeRectIsTargetByCursor(l,n,o.coordSysModel),getLinearBrushOtherExtent:makeLinearBrushOtherExtent(l)}})},a.prototype.controlSeries=function(n,r,o){var l=this.findTargetInfo(n,o);return l===!0||l&&indexOf(l.coordSyses,r.coordinateSystem)>=0},a.prototype.findTargetInfo=function(n,r){for(var o=this._targetInfoList,l=parseFinder(r,n),u=0;u<o.length;u++){var c=o[u],h=n.panelId;if(h){if(c.panelId===h)return c}else for(var d=0;d<targetInfoMatchers.length;d++)if(targetInfoMatchers[d](l,c))return c}return!0},a}();function formatMinMax(a){return a[0]>a[1]&&a.reverse(),a}function parseFinder(a,n){return parseFinder$1(a,n,{includeMainTypes:INCLUDE_FINDER_MAIN_TYPES})}var targetInfoBuilders={grid:function(a,n){var r=a.xAxisModels,o=a.yAxisModels,l=a.gridModels,u=createHashMap(),c={},h={};!r&&!o&&!l||(each$f(r,function(d){var p=d.axis.grid.model;u.set(p.id,p),c[p.id]=!0}),each$f(o,function(d){var p=d.axis.grid.model;u.set(p.id,p),h[p.id]=!0}),each$f(l,function(d){u.set(d.id,d),c[d.id]=!0,h[d.id]=!0}),u.each(function(d){var p=d.coordinateSystem,f=[];each$f(p.getCartesians(),function(g,y){(indexOf(r,g.getAxis("x").model)>=0||indexOf(o,g.getAxis("y").model)>=0)&&f.push(g)}),n.push({panelId:"grid--"+d.id,gridModel:d,coordSysModel:d,coordSys:f[0],coordSyses:f,getPanelRect:panelRectBuilders.grid,xAxisDeclared:c[d.id],yAxisDeclared:h[d.id]})}))},geo:function(a,n){each$f(a.geoModels,function(r){var o=r.coordinateSystem;n.push({panelId:"geo--"+r.id,geoModel:r,coordSysModel:r,coordSys:o,coordSyses:[o],getPanelRect:panelRectBuilders.geo})})}},targetInfoMatchers=[function(a,n){var r=a.xAxisModel,o=a.yAxisModel,l=a.gridModel;return!l&&r&&(l=r.axis.grid.model),!l&&o&&(l=o.axis.grid.model),l&&l===n.gridModel},function(a,n){var r=a.geoModel;return r&&r===n.geoModel}],panelRectBuilders={grid:function(){return this.coordSys.master.getRect().clone()},geo:function(){var a=this.coordSys,n=a.getBoundingRect().clone();return n.applyTransform(getTransform$1(a)),n}},coordConvert={lineX:curry$1(axisConvert,0),lineY:curry$1(axisConvert,1),rect:function(a,n,r,o){var l=a?n.pointToData([r[0][0],r[1][0]],o):n.dataToPoint([r[0][0],r[1][0]],o),u=a?n.pointToData([r[0][1],r[1][1]],o):n.dataToPoint([r[0][1],r[1][1]],o),c=[formatMinMax([l[0],u[0]]),formatMinMax([l[1],u[1]])];return{values:c,xyMinMax:c}},polygon:function(a,n,r,o){var l=[[1/0,-1/0],[1/0,-1/0]],u=map$1(r,function(c){var h=a?n.pointToData(c,o):n.dataToPoint(c,o);return l[0][0]=Math.min(l[0][0],h[0]),l[1][0]=Math.min(l[1][0],h[1]),l[0][1]=Math.max(l[0][1],h[0]),l[1][1]=Math.max(l[1][1],h[1]),h});return{values:u,xyMinMax:l}}};function axisConvert(a,n,r,o){assert(r.type==="cartesian2d","lineX/lineY brush is available only in cartesian2d.");var l=r.getAxis(["x","y"][a]),u=formatMinMax(map$1([0,1],function(h){return n?l.coordToData(l.toLocalCoord(o[h]),!0):l.toGlobalCoord(l.dataToCoord(o[h]))})),c=[];return c[a]=u,c[1-a]=[NaN,NaN],{values:u,xyMinMax:c}}var diffProcessor={lineX:curry$1(axisDiffProcessor,0),lineY:curry$1(axisDiffProcessor,1),rect:function(a,n,r){return[[a[0][0]-r[0]*n[0][0],a[0][1]-r[0]*n[0][1]],[a[1][0]-r[1]*n[1][0],a[1][1]-r[1]*n[1][1]]]},polygon:function(a,n,r){return map$1(a,function(o,l){return[o[0]-r[0]*n[l][0],o[1]-r[1]*n[l][1]]})}};function axisDiffProcessor(a,n,r,o){return[n[0]-o[a]*r[0],n[1]-o[a]*r[1]]}function getScales(a,n){var r=getSize(a),o=getSize(n),l=[r[0]/o[0],r[1]/o[1]];return isNaN(l[0])&&(l[0]=1),isNaN(l[1])&&(l[1]=1),l}function getSize(a){return a?[a[0][1]-a[0][0],a[1][1]-a[1][0]]:[NaN,NaN]}const BrushTargetManager$1=BrushTargetManager;var each$5=each$f,DATA_ZOOM_ID_BASE=makeInternalComponentId("toolbox-dataZoom_"),DataZoomFeature=function(a){__extends(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.render=function(r,o,l,u){this._brushController||(this._brushController=new BrushController$1(l.getZr()),this._brushController.on("brush",bind$1(this._onBrush,this)).mount()),updateZoomBtnStatus(r,o,this,u,l),updateBackBtnStatus(r,o)},n.prototype.onclick=function(r,o,l){handlers[l].call(this)},n.prototype.remove=function(r,o){this._brushController&&this._brushController.unmount()},n.prototype.dispose=function(r,o){this._brushController&&this._brushController.dispose()},n.prototype._onBrush=function(r){var o=r.areas;if(!r.isEnd||!o.length)return;var l={},u=this.ecModel;this._brushController.updateCovers([]);var c=new BrushTargetManager$1(makeAxisFinder(this.model),u,{include:["grid"]});c.matchOutputRanges(o,u,function(p,f,g){if(g.type==="cartesian2d"){var y=p.brushType;y==="rect"?(h("x",g,f[0]),h("y",g,f[1])):h({lineX:"x",lineY:"y"}[y],g,f)}}),push(u,l),this._dispatchZoomAction(l);function h(p,f,g){var y=f.getAxis(p),v=y.model,_=d(p,v,u),x=_.findRepresentativeAxisProxy(v).getMinMaxSpan();(x.minValueSpan!=null||x.maxValueSpan!=null)&&(g=sliderMove(0,g.slice(),y.scale.getExtent(),0,x.minValueSpan,x.maxValueSpan)),_&&(l[_.id]={dataZoomId:_.id,startValue:g[0],endValue:g[1]})}function d(p,f,g){var y;return g.eachComponent({mainType:"dataZoom",subType:"select"},function(v){var _=v.getAxisModel(p,f.componentIndex);_&&(y=v)}),y}},n.prototype._dispatchZoomAction=function(r){var o=[];each$5(r,function(l,u){o.push(clone$4(l))}),o.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:o})},n.getDefaultOption=function(r){var o={show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:r.getLocaleModel().get(["toolbox","dataZoom","title"]),brushStyle:{borderWidth:0,color:"rgba(210,219,238,0.2)"}};return o},n}(ToolboxFeature),handlers={zoom:function(){var a=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:a})},back:function(){this._dispatchZoomAction(pop(this.ecModel))}};function makeAxisFinder(a){var n={xAxisIndex:a.get("xAxisIndex",!0),yAxisIndex:a.get("yAxisIndex",!0),xAxisId:a.get("xAxisId",!0),yAxisId:a.get("yAxisId",!0)};return n.xAxisIndex==null&&n.xAxisId==null&&(n.xAxisIndex="all"),n.yAxisIndex==null&&n.yAxisId==null&&(n.yAxisIndex="all"),n}function updateBackBtnStatus(a,n){a.setIconStatus("back",count(n)>1?"emphasis":"normal")}function updateZoomBtnStatus(a,n,r,o,l){var u=r._isZoomActive;o&&o.type==="takeGlobalCursor"&&(u=o.key==="dataZoomSelect"?o.dataZoomSelectActive:!1),r._isZoomActive=u,a.setIconStatus("zoom",u?"emphasis":"normal");var c=new BrushTargetManager$1(makeAxisFinder(a),n,{include:["grid"]}),h=c.makePanelOpts(l,function(d){return d.xAxisDeclared&&!d.yAxisDeclared?"lineX":!d.xAxisDeclared&&d.yAxisDeclared?"lineY":"rect"});r._brushController.setPanels(h).enableBrush(u&&h.length?{brushType:"auto",brushStyle:a.getModel("brushStyle").getItemStyle()}:!1)}registerInternalOptionCreator("dataZoom",function(a){var n=a.getComponent("toolbox",0),r=["feature","dataZoom"];if(!n||n.get(r)==null)return;var o=n.getModel(r),l=[],u=makeAxisFinder(o),c=parseFinder$1(a,u);each$5(c.xAxisModels,function(d){return h(d,"xAxis","xAxisIndex")}),each$5(c.yAxisModels,function(d){return h(d,"yAxis","yAxisIndex")});function h(d,p,f){var g=d.componentIndex,y={type:"select",$fromToolbox:!0,filterMode:o.get("filterMode",!0)||"filter",id:DATA_ZOOM_ID_BASE+p+g};y[f]=g,l.push(y)}return l});const DataZoom=DataZoomFeature;function install$j(a){a.registerComponentModel(ToolboxModel$1),a.registerComponentView(ToolboxView$1),registerFeature("saveAsImage",SaveAsImage$1),registerFeature("magicType",MagicType$1),registerFeature("dataView",DataView$1),registerFeature("dataZoom",DataZoom),registerFeature("restore",Restore),use(install$k)}var TooltipModel=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.type="tooltip",n.dependencies=["axisPointer"],n.defaultOption={z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:null,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"#fff",shadowBlur:10,shadowColor:"rgba(0, 0, 0, .2)",shadowOffsetX:1,shadowOffsetY:2,borderRadius:4,borderWidth:1,padding:null,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#666",fontSize:14}},n}(ComponentModel$1);const TooltipModel$1=TooltipModel;function shouldTooltipConfine(a){var n=a.get("confine");return n!=null?!!n:a.get("renderMode")==="richText"}function testStyle(a){if(env$1.domSupported){for(var n=document.documentElement.style,r=0,o=a.length;r<o;r++)if(a[r]in n)return a[r]}}var TRANSFORM_VENDOR=testStyle(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),TRANSITION_VENDOR=testStyle(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);function toCSSVendorPrefix(a,n){if(!a)return n;n=toCamelCase(n,!0);var r=a.indexOf(n);return a=r===-1?n:"-"+a.slice(0,r)+"-"+n,a.toLowerCase()}function getComputedStyle(a,n){var r=a.currentStyle||document.defaultView&&document.defaultView.getComputedStyle(a);return r?n?r[n]:r:null}var CSS_TRANSITION_VENDOR=toCSSVendorPrefix(TRANSITION_VENDOR,"transition"),CSS_TRANSFORM_VENDOR=toCSSVendorPrefix(TRANSFORM_VENDOR,"transform"),gCssText="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+(env$1.transform3dSupported?"will-change:transform;":"");function mirrorPos(a){return a=a==="left"?"right":a==="right"?"left":a==="top"?"bottom":"top",a}function assembleArrow(a,n,r){if(!isString(r)||r==="inside")return"";var o=a.get("backgroundColor"),l=a.get("borderWidth");n=convertToColorString(n);var u=mirrorPos(r),c=Math.max(Math.round(l)*1.5,6),h="",d=CSS_TRANSFORM_VENDOR+":",p;indexOf(["left","right"],u)>-1?(h+="top:50%",d+="translateY(-50%) rotate("+(p=u==="left"?-225:-45)+"deg)"):(h+="left:50%",d+="translateX(-50%) rotate("+(p=u==="top"?225:45)+"deg)");var f=p*Math.PI/180,g=c+l,y=g*Math.abs(Math.cos(f))+g*Math.abs(Math.sin(f)),v=Math.round(((y-Math.SQRT2*l)/2+Math.SQRT2*l-(y-g)/2)*100)/100;h+=";"+u+":-"+v+"px";var _=n+" solid "+l+"px;",x=["position:absolute;width:"+c+"px;height:"+c+"px;z-index:-1;",h+";"+d+";","border-bottom:"+_,"border-right:"+_,"background-color:"+o+";"];return'<div style="'+x.join("")+'"></div>'}function assembleTransition(a,n){var r="cubic-bezier(0.23,1,0.32,1)",o=" "+a/2+"s "+r,l="opacity"+o+",visibility"+o;return n||(o=" "+a+"s "+r,l+=env$1.transformSupported?","+CSS_TRANSFORM_VENDOR+o:",left"+o+",top"+o),CSS_TRANSITION_VENDOR+":"+l}function assembleTransform(a,n,r){var o=a.toFixed(0)+"px",l=n.toFixed(0)+"px";if(!env$1.transformSupported)return r?"top:"+l+";left:"+o+";":[["top",l],["left",o]];var u=env$1.transform3dSupported,c="translate"+(u?"3d":"")+"("+o+","+l+(u?",0":"")+")";return r?"top:0;left:0;"+CSS_TRANSFORM_VENDOR+":"+c+";":[["top",0],["left",0],[TRANSFORM_VENDOR,c]]}function assembleFont(a){var n=[],r=a.get("fontSize"),o=a.getTextColor();o&&n.push("color:"+o),n.push("font:"+a.getFont());var l=retrieve2(a.get("lineHeight"),Math.round(r*3/2));r&&n.push("line-height:"+l+"px");var u=a.get("textShadowColor"),c=a.get("textShadowBlur")||0,h=a.get("textShadowOffsetX")||0,d=a.get("textShadowOffsetY")||0;return u&&c&&n.push("text-shadow:"+h+"px "+d+"px "+c+"px "+u),each$f(["decoration","align"],function(p){var f=a.get(p);f&&n.push("text-"+p+":"+f)}),n.join(";")}function assembleCssText(a,n,r){var o=[],l=a.get("transitionDuration"),u=a.get("backgroundColor"),c=a.get("shadowBlur"),h=a.get("shadowColor"),d=a.get("shadowOffsetX"),p=a.get("shadowOffsetY"),f=a.getModel("textStyle"),g=getPaddingFromTooltipModel(a,"html"),y=d+"px "+p+"px "+c+"px "+h;return o.push("box-shadow:"+y),n&&l&&o.push(assembleTransition(l,r)),u&&o.push("background-color:"+u),each$f(["width","color","radius"],function(v){var _="border-"+v,x=toCamelCase(_),S=a.get(x);S!=null&&o.push(_+":"+S+(v==="color"?"":"px"))}),o.push(assembleFont(f)),g!=null&&o.push("padding:"+normalizeCssArray(g).join("px ")+"px"),o.join(";")+";"}function makeStyleCoord$1(a,n,r,o,l){var u=n&&n.painter;if(r){var c=u&&u.getViewportRoot();c&&transformLocalCoord(a,c,r,o,l)}else{a[0]=o,a[1]=l;var h=u&&u.getViewportRootOffset();h&&(a[0]+=h.offsetLeft,a[1]+=h.offsetTop)}a[2]=a[0]/n.getWidth(),a[3]=a[1]/n.getHeight()}var TooltipHTMLContent=function(){function a(n,r){if(this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._alwaysShowContent=!1,this._firstShow=!0,this._longHide=!0,env$1.wxa)return null;var o=document.createElement("div");o.domBelongToZr=!0,this.el=o;var l=this._zr=n.getZr(),u=r.appendTo,c=u&&(isString(u)?document.querySelector(u):isDom(u)?u:isFunction(u)&&u(n.getDom()));makeStyleCoord$1(this._styleCoord,l,c,n.getWidth()/2,n.getHeight()/2),(c||n.getDom()).appendChild(o),this._api=n,this._container=c;var h=this;o.onmouseenter=function(){h._enterable&&(clearTimeout(h._hideTimeout),h._show=!0),h._inContent=!0},o.onmousemove=function(d){if(d=d||window.event,!h._enterable){var p=l.handler,f=l.painter.getViewportRoot();normalizeEvent(f,d,!0),p.dispatch("mousemove",d)}},o.onmouseleave=function(){h._inContent=!1,h._enterable&&h._show&&h.hideLater(h._hideDelay)}}return a.prototype.update=function(n){if(!this._container){var r=this._api.getDom(),o=getComputedStyle(r,"position"),l=r.style;l.position!=="absolute"&&o!=="absolute"&&(l.position="relative")}var u=n.get("alwaysShowContent");u&&this._moveIfResized(),this._alwaysShowContent=u,this.el.className=n.get("className")||""},a.prototype.show=function(n,r){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var o=this.el,l=o.style,u=this._styleCoord;o.innerHTML?l.cssText=gCssText+assembleCssText(n,!this._firstShow,this._longHide)+assembleTransform(u[0],u[1],!0)+("border-color:"+convertToColorString(r)+";")+(n.get("extraCssText")||"")+(";pointer-events:"+(this._enterable?"auto":"none")):l.display="none",this._show=!0,this._firstShow=!1,this._longHide=!1},a.prototype.setContent=function(n,r,o,l,u){var c=this.el;if(n==null){c.innerHTML="";return}var h="";if(isString(u)&&o.get("trigger")==="item"&&!shouldTooltipConfine(o)&&(h=assembleArrow(o,l,u)),isString(n))c.innerHTML=n+h;else if(n){c.innerHTML="",isArray$1(n)||(n=[n]);for(var d=0;d<n.length;d++)isDom(n[d])&&n[d].parentNode!==c&&c.appendChild(n[d]);if(h&&c.childNodes.length){var p=document.createElement("div");p.innerHTML=h,c.appendChild(p)}}},a.prototype.setEnterable=function(n){this._enterable=n},a.prototype.getSize=function(){var n=this.el;return n?[n.offsetWidth,n.offsetHeight]:[0,0]},a.prototype.moveTo=function(n,r){if(this.el){var o=this._styleCoord;if(makeStyleCoord$1(o,this._zr,this._container,n,r),o[0]!=null&&o[1]!=null){var l=this.el.style,u=assembleTransform(o[0],o[1]);each$f(u,function(c){l[c[0]]=c[1]})}}},a.prototype._moveIfResized=function(){var n=this._styleCoord[2],r=this._styleCoord[3];this.moveTo(n*this._zr.getWidth(),r*this._zr.getHeight())},a.prototype.hide=function(){var n=this,r=this.el.style;r.visibility="hidden",r.opacity="0",env$1.transform3dSupported&&(r.willChange=""),this._show=!1,this._longHideTimeout=setTimeout(function(){return n._longHide=!0},500)},a.prototype.hideLater=function(n){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(n?(this._hideDelay=n,this._show=!1,this._hideTimeout=setTimeout(bind$1(this.hide,this),n)):this.hide())},a.prototype.isShow=function(){return this._show},a.prototype.dispose=function(){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var n=this.el.parentNode;n&&n.removeChild(this.el),this.el=this._container=null},a}();const TooltipHTMLContent$1=TooltipHTMLContent;var TooltipRichContent=function(){function a(n){this._show=!1,this._styleCoord=[0,0,0,0],this._alwaysShowContent=!1,this._enterable=!0,this._zr=n.getZr(),makeStyleCoord(this._styleCoord,this._zr,n.getWidth()/2,n.getHeight()/2)}return a.prototype.update=function(n){var r=n.get("alwaysShowContent");r&&this._moveIfResized(),this._alwaysShowContent=r},a.prototype.show=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.show(),this._show=!0},a.prototype.setContent=function(n,r,o,l,u){var c=this;isObject$3(n)&&throwError("Passing DOM nodes as content is not supported in richText tooltip!"),this.el&&this._zr.remove(this.el);var h=o.getModel("textStyle");this.el=new ZRText$1({style:{rich:r.richTextStyles,text:n,lineHeight:22,borderWidth:1,borderColor:l,textShadowColor:h.get("textShadowColor"),fill:o.get(["textStyle","color"]),padding:getPaddingFromTooltipModel(o,"richText"),verticalAlign:"top",align:"left"},z:o.get("z")}),each$f(["backgroundColor","borderRadius","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"],function(p){c.el.style[p]=o.get(p)}),each$f(["textShadowBlur","textShadowOffsetX","textShadowOffsetY"],function(p){c.el.style[p]=h.get(p)||0}),this._zr.add(this.el);var d=this;this.el.on("mouseover",function(){d._enterable&&(clearTimeout(d._hideTimeout),d._show=!0),d._inContent=!0}),this.el.on("mouseout",function(){d._enterable&&d._show&&d.hideLater(d._hideDelay),d._inContent=!1})},a.prototype.setEnterable=function(n){this._enterable=n},a.prototype.getSize=function(){var n=this.el,r=this.el.getBoundingRect(),o=calcShadowOuterSize(n.style);return[r.width+o.left+o.right,r.height+o.top+o.bottom]},a.prototype.moveTo=function(n,r){var o=this.el;if(o){var l=this._styleCoord;makeStyleCoord(l,this._zr,n,r),n=l[0],r=l[1];var u=o.style,c=mathMaxWith0(u.borderWidth||0),h=calcShadowOuterSize(u);o.x=n+c+h.left,o.y=r+c+h.top,o.markRedraw()}},a.prototype._moveIfResized=function(){var n=this._styleCoord[2],r=this._styleCoord[3];this.moveTo(n*this._zr.getWidth(),r*this._zr.getHeight())},a.prototype.hide=function(){this.el&&this.el.hide(),this._show=!1},a.prototype.hideLater=function(n){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(n?(this._hideDelay=n,this._show=!1,this._hideTimeout=setTimeout(bind$1(this.hide,this),n)):this.hide())},a.prototype.isShow=function(){return this._show},a.prototype.dispose=function(){this._zr.remove(this.el)},a}();function mathMaxWith0(a){return Math.max(0,a)}function calcShadowOuterSize(a){var n=mathMaxWith0(a.shadowBlur||0),r=mathMaxWith0(a.shadowOffsetX||0),o=mathMaxWith0(a.shadowOffsetY||0);return{left:mathMaxWith0(n-r),right:mathMaxWith0(n+r),top:mathMaxWith0(n-o),bottom:mathMaxWith0(n+o)}}function makeStyleCoord(a,n,r,o){a[0]=r,a[1]=o,a[2]=a[0]/n.getWidth(),a[3]=a[1]/n.getHeight()}const TooltipRichContent$1=TooltipRichContent;var proxyRect=new Rect$3({shape:{x:-1,y:-1,width:2,height:2}}),TooltipView=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.prototype.init=function(r,o){if(!(env$1.node||!o.getDom())){var l=r.getComponent("tooltip"),u=this._renderMode=getTooltipRenderMode(l.get("renderMode"));this._tooltipContent=u==="richText"?new TooltipRichContent$1(o):new TooltipHTMLContent$1(o,{appendTo:l.get("appendToBody",!0)?"body":l.get("appendTo",!0)})}},n.prototype.render=function(r,o,l){if(!(env$1.node||!l.getDom())){this.group.removeAll(),this._tooltipModel=r,this._ecModel=o,this._api=l;var u=this._tooltipContent;u.update(r),u.setEnterable(r.get("enterable")),this._initGlobalListener(),this._keepShow(),this._renderMode!=="richText"&&r.get("transitionDuration")?createOrUpdate(this,"_updatePosition",50,"fixRate"):clear$1(this,"_updatePosition")}},n.prototype._initGlobalListener=function(){var r=this._tooltipModel,o=r.get("triggerOn");register("itemTooltip",this._api,bind$1(function(l,u,c){o!=="none"&&(o.indexOf(l)>=0?this._tryShow(u,c):l==="leave"&&this._hide(c))},this))},n.prototype._keepShow=function(){var r=this._tooltipModel,o=this._ecModel,l=this._api,u=r.get("triggerOn");if(this._lastX!=null&&this._lastY!=null&&u!=="none"&&u!=="click"){var c=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){!l.isDisposed()&&c.manuallyShowTip(r,o,l,{x:c._lastX,y:c._lastY,dataByCoordSys:c._lastDataByCoordSys})})}},n.prototype.manuallyShowTip=function(r,o,l,u){if(!(u.from===this.uid||env$1.node||!l.getDom())){var c=makeDispatchAction(u,l);this._ticket="";var h=u.dataByCoordSys,d=findComponentReference(u,o,l);if(d){var p=d.el.getBoundingRect().clone();p.applyTransform(d.el.transform),this._tryShow({offsetX:p.x+p.width/2,offsetY:p.y+p.height/2,target:d.el,position:u.position,positionDefault:"bottom"},c)}else if(u.tooltip&&u.x!=null&&u.y!=null){var f=proxyRect;f.x=u.x,f.y=u.y,f.update(),getECData(f).tooltipConfig={name:null,option:u.tooltip},this._tryShow({offsetX:u.x,offsetY:u.y,target:f},c)}else if(h)this._tryShow({offsetX:u.x,offsetY:u.y,position:u.position,dataByCoordSys:h,tooltipOption:u.tooltipOption},c);else if(u.seriesIndex!=null){if(this._manuallyAxisShowTip(r,o,l,u))return;var g=findPointFromSeries(u,o),y=g.point[0],v=g.point[1];y!=null&&v!=null&&this._tryShow({offsetX:y,offsetY:v,target:g.el,position:u.position,positionDefault:"bottom"},c)}else u.x!=null&&u.y!=null&&(l.dispatchAction({type:"updateAxisPointer",x:u.x,y:u.y}),this._tryShow({offsetX:u.x,offsetY:u.y,position:u.position,target:l.getZr().findHover(u.x,u.y).target},c))}},n.prototype.manuallyHideTip=function(r,o,l,u){var c=this._tooltipContent;this._tooltipModel&&c.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=this._lastDataByCoordSys=null,u.from!==this.uid&&this._hide(makeDispatchAction(u,l))},n.prototype._manuallyAxisShowTip=function(r,o,l,u){var c=u.seriesIndex,h=u.dataIndex,d=o.getComponent("axisPointer").coordSysAxesInfo;if(!(c==null||h==null||d==null)){var p=o.getSeriesByIndex(c);if(p){var f=p.getData(),g=buildTooltipModel([f.getItemModel(h),p,(p.coordinateSystem||{}).model],this._tooltipModel);if(g.get("trigger")==="axis")return l.dispatchAction({type:"updateAxisPointer",seriesIndex:c,dataIndex:h,position:u.position}),!0}}},n.prototype._tryShow=function(r,o){var l=r.target,u=this._tooltipModel;if(u){this._lastX=r.offsetX,this._lastY=r.offsetY;var c=r.dataByCoordSys;if(c&&c.length)this._showAxisTooltip(c,r);else if(l){var h=getECData(l);if(h.ssrType==="legend")return;this._lastDataByCoordSys=null;var d,p;findEventDispatcher(l,function(f){if(getECData(f).dataIndex!=null)return d=f,!0;if(getECData(f).tooltipConfig!=null)return p=f,!0},!0),d?this._showSeriesItemTooltip(r,d,o):p?this._showComponentItemTooltip(r,p,o):this._hide(o)}else this._lastDataByCoordSys=null,this._hide(o)}},n.prototype._showOrMove=function(r,o){var l=r.get("showDelay");o=bind$1(o,this),clearTimeout(this._showTimout),l>0?this._showTimout=setTimeout(o,l):o()},n.prototype._showAxisTooltip=function(r,o){var l=this._ecModel,u=this._tooltipModel,c=[o.offsetX,o.offsetY],h=buildTooltipModel([o.tooltipOption],u),d=this._renderMode,p=[],f=createTooltipMarkup("section",{blocks:[],noHeader:!0}),g=[],y=new TooltipMarkupStyleCreator;each$f(r,function(M){each$f(M.dataByAxis,function(b){var A=l.getComponent(b.axisDim+"Axis",b.axisIndex),I=b.value;if(!(!A||I==null)){var w=getValueLabel(I,A.axis,l,b.seriesDataIndices,b.valueLabelOpt),C=createTooltipMarkup("section",{header:w,noHeader:!trim$1(w),sortBlocks:!0,blocks:[]});f.blocks.push(C),each$f(b.seriesDataIndices,function(E){var P=l.getSeriesByIndex(E.seriesIndex),D=E.dataIndexInside,L=P.getDataParams(D);if(!(L.dataIndex<0)){L.axisDim=b.axisDim,L.axisIndex=b.axisIndex,L.axisType=b.axisType,L.axisId=b.axisId,L.axisValue=getAxisRawValue(A.axis,{value:I}),L.axisValueLabel=w,L.marker=y.makeTooltipMarker("item",convertToColorString(L.color),d);var R=normalizeTooltipFormatResult(P.formatTooltip(D,!0,null)),O=R.frag;if(O){var N=buildTooltipModel([P],u).get("valueFormatter");C.blocks.push(N?extend({valueFormatter:N},O):O)}R.text&&g.push(R.text),p.push(L)}})}})}),f.blocks.reverse(),g.reverse();var v=o.position,_=h.get("order"),x=buildTooltipMarkup(f,y,d,_,l.get("useUTC"),h.get("textStyle"));x&&g.unshift(x);var S=d==="richText"?`

`:"<br/>",T=g.join(S);this._showOrMove(h,function(){this._updateContentNotChangedOnAxis(r,p)?this._updatePosition(h,v,c[0],c[1],this._tooltipContent,p):this._showTooltipContent(h,T,p,Math.random()+"",c[0],c[1],v,null,y)})},n.prototype._showSeriesItemTooltip=function(r,o,l){var u=this._ecModel,c=getECData(o),h=c.seriesIndex,d=u.getSeriesByIndex(h),p=c.dataModel||d,f=c.dataIndex,g=c.dataType,y=p.getData(g),v=this._renderMode,_=r.positionDefault,x=buildTooltipModel([y.getItemModel(f),p,d&&(d.coordinateSystem||{}).model],this._tooltipModel,_?{position:_}:null),S=x.get("trigger");if(!(S!=null&&S!=="item")){var T=p.getDataParams(f,g),M=new TooltipMarkupStyleCreator;T.marker=M.makeTooltipMarker("item",convertToColorString(T.color),v);var b=normalizeTooltipFormatResult(p.formatTooltip(f,!1,g)),A=x.get("order"),I=x.get("valueFormatter"),w=b.frag,C=w?buildTooltipMarkup(I?extend({valueFormatter:I},w):w,M,v,A,u.get("useUTC"),x.get("textStyle")):b.text,E="item_"+p.name+"_"+f;this._showOrMove(x,function(){this._showTooltipContent(x,C,T,E,r.offsetX,r.offsetY,r.position,r.target,M)}),l({type:"showTip",dataIndexInside:f,dataIndex:y.getRawIndex(f),seriesIndex:h,from:this.uid})}},n.prototype._showComponentItemTooltip=function(r,o,l){var u=this._renderMode==="html",c=getECData(o),h=c.tooltipConfig,d=h.option||{},p=d.encodeHTMLContent;if(isString(d)){var f=d;d={content:f,formatter:f},p=!0}p&&u&&d.content&&(d=clone$4(d),d.content=encodeHTML(d.content));var g=[d],y=this._ecModel.getComponent(c.componentMainType,c.componentIndex);y&&g.push(y),g.push({formatter:d.content});var v=r.positionDefault,_=buildTooltipModel(g,this._tooltipModel,v?{position:v}:null),x=_.get("content"),S=Math.random()+"",T=new TooltipMarkupStyleCreator;this._showOrMove(_,function(){var M=clone$4(_.get("formatterParams")||{});this._showTooltipContent(_,x,M,S,r.offsetX,r.offsetY,r.position,o,T)}),l({type:"showTip",from:this.uid})},n.prototype._showTooltipContent=function(r,o,l,u,c,h,d,p,f){if(this._ticket="",!(!r.get("showContent")||!r.get("show"))){var g=this._tooltipContent;g.setEnterable(r.get("enterable"));var y=r.get("formatter");d=d||r.get("position");var v=o,_=this._getNearestPoint([c,h],l,r.get("trigger"),r.get("borderColor")),x=_.color;if(y)if(isString(y)){var S=r.ecModel.get("useUTC"),T=isArray$1(l)?l[0]:l,M=T&&T.axisType&&T.axisType.indexOf("time")>=0;v=y,M&&(v=format$1(T.axisValue,v,S)),v=formatTpl(v,l,!0)}else if(isFunction(y)){var b=bind$1(function(A,I){A===this._ticket&&(g.setContent(I,f,r,x,d),this._updatePosition(r,d,c,h,g,l,p))},this);this._ticket=u,v=y(l,u,b)}else v=y;g.setContent(v,f,r,x,d),g.show(r,x),this._updatePosition(r,d,c,h,g,l,p)}},n.prototype._getNearestPoint=function(r,o,l,u){if(l==="axis"||isArray$1(o))return{color:u||(this._renderMode==="html"?"#fff":"none")};if(!isArray$1(o))return{color:u||o.color||o.borderColor}},n.prototype._updatePosition=function(r,o,l,u,c,h,d){var p=this._api.getWidth(),f=this._api.getHeight();o=o||r.get("position");var g=c.getSize(),y=r.get("align"),v=r.get("verticalAlign"),_=d&&d.getBoundingRect().clone();if(d&&_.applyTransform(d.transform),isFunction(o)&&(o=o([l,u],h,c.el,_,{viewSize:[p,f],contentSize:g.slice()})),isArray$1(o))l=parsePercent(o[0],p),u=parsePercent(o[1],f);else if(isObject$3(o)){var x=o;x.width=g[0],x.height=g[1];var S=getLayoutRect(x,{width:p,height:f});l=S.x,u=S.y,y=null,v=null}else if(isString(o)&&d){var T=calcTooltipPosition(o,_,g,r.get("borderWidth"));l=T[0],u=T[1]}else{var T=refixTooltipPosition(l,u,c,p,f,y?null:20,v?null:20);l=T[0],u=T[1]}if(y&&(l-=isCenterAlign(y)?g[0]/2:y==="right"?g[0]:0),v&&(u-=isCenterAlign(v)?g[1]/2:v==="bottom"?g[1]:0),shouldTooltipConfine(r)){var T=confineTooltipPosition(l,u,c,p,f);l=T[0],u=T[1]}c.moveTo(l,u)},n.prototype._updateContentNotChangedOnAxis=function(r,o){var l=this._lastDataByCoordSys,u=this._cbParamsList,c=!!l&&l.length===r.length;return c&&each$f(l,function(h,d){var p=h.dataByAxis||[],f=r[d]||{},g=f.dataByAxis||[];c=c&&p.length===g.length,c&&each$f(p,function(y,v){var _=g[v]||{},x=y.seriesDataIndices||[],S=_.seriesDataIndices||[];c=c&&y.value===_.value&&y.axisType===_.axisType&&y.axisId===_.axisId&&x.length===S.length,c&&each$f(x,function(T,M){var b=S[M];c=c&&T.seriesIndex===b.seriesIndex&&T.dataIndex===b.dataIndex}),u&&each$f(y.seriesDataIndices,function(T){var M=T.seriesIndex,b=o[M],A=u[M];b&&A&&A.data!==b.data&&(c=!1)})})}),this._lastDataByCoordSys=r,this._cbParamsList=o,!!c},n.prototype._hide=function(r){this._lastDataByCoordSys=null,r({type:"hideTip",from:this.uid})},n.prototype.dispose=function(r,o){env$1.node||!o.getDom()||(clear$1(this,"_updatePosition"),this._tooltipContent.dispose(),unregister("itemTooltip",o))},n.type="tooltip",n}(ComponentView$1);function buildTooltipModel(a,n,r){var o=n.ecModel,l;r?(l=new Model$1(r,o,o),l=new Model$1(n.option,l,o)):l=n;for(var u=a.length-1;u>=0;u--){var c=a[u];c&&(c instanceof Model$1&&(c=c.get("tooltip",!0)),isString(c)&&(c={formatter:c}),c&&(l=new Model$1(c,l,o)))}return l}function makeDispatchAction(a,n){return a.dispatchAction||bind$1(n.dispatchAction,n)}function refixTooltipPosition(a,n,r,o,l,u,c){var h=r.getSize(),d=h[0],p=h[1];return u!=null&&(a+d+u+2>o?a-=d+u:a+=u),c!=null&&(n+p+c>l?n-=p+c:n+=c),[a,n]}function confineTooltipPosition(a,n,r,o,l){var u=r.getSize(),c=u[0],h=u[1];return a=Math.min(a+c,o)-c,n=Math.min(n+h,l)-h,a=Math.max(a,0),n=Math.max(n,0),[a,n]}function calcTooltipPosition(a,n,r,o){var l=r[0],u=r[1],c=Math.ceil(Math.SQRT2*o)+8,h=0,d=0,p=n.width,f=n.height;switch(a){case"inside":h=n.x+p/2-l/2,d=n.y+f/2-u/2;break;case"top":h=n.x+p/2-l/2,d=n.y-u-c;break;case"bottom":h=n.x+p/2-l/2,d=n.y+f+c;break;case"left":h=n.x-l-c,d=n.y+f/2-u/2;break;case"right":h=n.x+p+c,d=n.y+f/2-u/2}return[h,d]}function isCenterAlign(a){return a==="center"||a==="middle"}function findComponentReference(a,n,r){var o=preParseFinder(a).queryOptionMap,l=o.keys()[0];if(!(!l||l==="series")){var u=queryReferringComponents(n,l,o.get(l),{useDefault:!1,enableAll:!1,enableNone:!1}),c=u.models[0];if(c){var h=r.getViewOfComponentModel(c),d;if(h.group.traverse(function(p){var f=getECData(p).tooltipConfig;if(f&&f.name===a.name)return d=p,!0}),d)return{componentMainType:l,componentIndex:c.componentIndex,el:d}}}}const TooltipView$1=TooltipView;function install$i(a){use(install$q),a.registerComponentModel(TooltipModel$1),a.registerComponentView(TooltipView$1),a.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},noop),a.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},noop)}var DEFAULT_TOOLBOX_BTNS=["rect","polygon","keep","clear"];function brushPreprocessor(a,n){var r=normalizeToArray(a?a.brush:[]);if(r.length){var o=[];each$f(r,function(d){var p=d.hasOwnProperty("toolbox")?d.toolbox:[];p instanceof Array&&(o=o.concat(p))});var l=a&&a.toolbox;isArray$1(l)&&(l=l[0]),l||(l={feature:{}},a.toolbox=[l]);var u=l.feature||(l.feature={}),c=u.brush||(u.brush={}),h=c.type||(c.type=[]);h.push.apply(h,o),removeDuplicate(h),n&&!h.length&&h.push.apply(h,DEFAULT_TOOLBOX_BTNS)}}function removeDuplicate(a){var n={};each$f(a,function(r){n[r]=1}),a.length=0,each$f(n,function(r,o){a.push(o)})}var each$4=each$f;function hasKeys(a){if(a){for(var n in a)if(a.hasOwnProperty(n))return!0}}function createVisualMappings(a,n,r){var o={};return each$4(n,function(u){var c=o[u]=l();each$4(a[u],function(h,d){if(VisualMapping$1.isValidType(d)){var p={type:d,visual:h};r&&r(p,u),c[d]=new VisualMapping$1(p),d==="opacity"&&(p=clone$4(p),p.type="colorAlpha",c.__hidden.__alphaForOpacity=new VisualMapping$1(p))}})}),o;function l(){var u=function(){};u.prototype.__hidden=u.prototype;var c=new u;return c}}function replaceVisualOption(a,n,r){var o;each$f(r,function(l){n.hasOwnProperty(l)&&hasKeys(n[l])&&(o=!0)}),o&&each$f(r,function(l){n.hasOwnProperty(l)&&hasKeys(n[l])?a[l]=clone$4(n[l]):delete a[l]})}function applyVisual(a,n,r,o,l,u){var c={};each$f(a,function(g){var y=VisualMapping$1.prepareVisualTypes(n[g]);c[g]=y});var h;function d(g){return getItemVisualFromData(r,h,g)}function p(g,y){setItemVisualFromData(r,h,g,y)}u==null?r.each(f):r.each([u],f);function f(g,y){h=u==null?g:y;var v=r.getRawDataItem(h);if(!(v&&v.visualMap===!1))for(var _=o.call(l,g),x=n[_],S=c[_],T=0,M=S.length;T<M;T++){var b=S[T];x[b]&&x[b].applyVisual(g,d,p)}}}function incrementalApplyVisual(a,n,r,o){var l={};return each$f(a,function(u){var c=VisualMapping$1.prepareVisualTypes(n[u]);l[u]=c}),{progress:function(u,c){var h;o!=null&&(h=c.getDimensionIndex(o));function d(A){return getItemVisualFromData(c,f,A)}function p(A,I){setItemVisualFromData(c,f,A,I)}for(var f,g=c.getStore();(f=u.next())!=null;){var y=c.getRawDataItem(f);if(!(y&&y.visualMap===!1))for(var v=o!=null?g.get(h,f):f,_=r(v),x=n[_],S=l[_],T=0,M=S.length;T<M;T++){var b=S[T];x[b]&&x[b].applyVisual(v,d,p)}}}}}function makeBrushCommonSelectorForSeries(a){var n=a.brushType,r={point:function(o){return selector[n].point(o,r,a)},rect:function(o){return selector[n].rect(o,r,a)}};return r}var selector={lineX:getLineSelectors(0),lineY:getLineSelectors(1),rect:{point:function(a,n,r){return a&&r.boundingRect.contain(a[0],a[1])},rect:function(a,n,r){return a&&r.boundingRect.intersect(a)}},polygon:{point:function(a,n,r){return a&&r.boundingRect.contain(a[0],a[1])&&contain(r.range,a[0],a[1])},rect:function(a,n,r){var o=r.range;if(!a||o.length<=1)return!1;var l=a.x,u=a.y,c=a.width,h=a.height,d=o[0];if(contain(o,l,u)||contain(o,l+c,u)||contain(o,l,u+h)||contain(o,l+c,u+h)||BoundingRect$1.create(a).contain(d[0],d[1])||linePolygonIntersect(l,u,l+c,u,o)||linePolygonIntersect(l,u,l,u+h,o)||linePolygonIntersect(l+c,u,l+c,u+h,o)||linePolygonIntersect(l,u+h,l+c,u+h,o))return!0}}};function getLineSelectors(a){var n=["x","y"],r=["width","height"];return{point:function(o,l,u){if(o){var c=u.range,h=o[a];return inLineRange(h,c)}},rect:function(o,l,u){if(o){var c=u.range,h=[o[n[a]],o[n[a]]+o[r[a]]];return h[1]<h[0]&&h.reverse(),inLineRange(h[0],c)||inLineRange(h[1],c)||inLineRange(c[0],h)||inLineRange(c[1],h)}}}}function inLineRange(a,n){return n[0]<=a&&a<=n[1]}var STATE_LIST=["inBrush","outOfBrush"],DISPATCH_METHOD="__ecBrushSelect",DISPATCH_FLAG="__ecInBrushSelectEvent";function layoutCovers(a){a.eachComponent({mainType:"brush"},function(n){var r=n.brushTargetManager=new BrushTargetManager$1(n.option,a);r.setInputRanges(n.areas,a)})}function brushVisual(a,n,r){var o=[],l,u;a.eachComponent({mainType:"brush"},function(c){r&&r.type==="takeGlobalCursor"&&c.setBrushOption(r.key==="brush"?r.brushOption:{brushType:!1})}),layoutCovers(a),a.eachComponent({mainType:"brush"},function(c,h){var d={brushId:c.id,brushIndex:h,brushName:c.name,areas:clone$4(c.areas),selected:[]};o.push(d);var p=c.option,f=p.brushLink,g=[],y=[],v=[],_=!1;h||(l=p.throttleType,u=p.throttleDelay);var x=map$1(c.areas,function(I){var w=boundingRectBuilders[I.brushType],C=defaults({boundingRect:w?w(I):void 0},I);return C.selectors=makeBrushCommonSelectorForSeries(C),C}),S=createVisualMappings(c.option,STATE_LIST,function(I){I.mappingMethod="fixed"});isArray$1(f)&&each$f(f,function(I){g[I]=1});function T(I){return f==="all"||!!g[I]}function M(I){return!!I.length}a.eachSeries(function(I,w){var C=v[w]=[];I.subType==="parallel"?b(I,w):A(I,w,C)});function b(I,w){var C=I.coordinateSystem;_=_||C.hasAxisBrushed(),T(w)&&C.eachActiveState(I.getData(),function(E,P){E==="active"&&(y[P]=1)})}function A(I,w,C){if(!(!I.brushSelector||brushModelNotControll(c,w))&&(each$f(x,function(P){c.brushTargetManager.controlSeries(P,I,a)&&C.push(P),_=_||M(C)}),T(w)&&M(C))){var E=I.getData();E.each(function(P){checkInRange(I,C,E,P)&&(y[P]=1)})}}a.eachSeries(function(I,w){var C={seriesId:I.id,seriesIndex:w,seriesName:I.name,dataIndex:[]};d.selected.push(C);var E=v[w],P=I.getData(),D=T(w)?function(L){return y[L]?(C.dataIndex.push(P.getRawIndex(L)),"inBrush"):"outOfBrush"}:function(L){return checkInRange(I,E,P,L)?(C.dataIndex.push(P.getRawIndex(L)),"inBrush"):"outOfBrush"};(T(w)?_:M(E))&&applyVisual(STATE_LIST,S,P,D)})}),dispatchAction$1(n,l,u,o,r)}function dispatchAction$1(a,n,r,o,l){if(l){var u=a.getZr();if(!u[DISPATCH_FLAG]){u[DISPATCH_METHOD]||(u[DISPATCH_METHOD]=doDispatch);var c=createOrUpdate(u,DISPATCH_METHOD,r,n);c(a,o)}}}function doDispatch(a,n){if(!a.isDisposed()){var r=a.getZr();r[DISPATCH_FLAG]=!0,a.dispatchAction({type:"brushSelect",batch:n}),r[DISPATCH_FLAG]=!1}}function checkInRange(a,n,r,o){for(var l=0,u=n.length;l<u;l++){var c=n[l];if(a.brushSelector(o,r,c.selectors,c))return!0}}function brushModelNotControll(a,n){var r=a.option.seriesIndex;return r!=null&&r!=="all"&&(isArray$1(r)?indexOf(r,n)<0:n!==r)}var boundingRectBuilders={rect:function(a){return getBoundingRectFromMinMax(a.range)},polygon:function(a){for(var n,r=a.range,o=0,l=r.length;o<l;o++){n=n||[[1/0,-1/0],[1/0,-1/0]];var u=r[o];u[0]<n[0][0]&&(n[0][0]=u[0]),u[0]>n[0][1]&&(n[0][1]=u[0]),u[1]<n[1][0]&&(n[1][0]=u[1]),u[1]>n[1][1]&&(n[1][1]=u[1])}return n&&getBoundingRectFromMinMax(n)}};function getBoundingRectFromMinMax(a){return new BoundingRect$1(a[0][0],a[1][0],a[0][1]-a[0][0],a[1][1]-a[1][0])}var BrushView=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.prototype.init=function(r,o){this.ecModel=r,this.api=o,this.model,(this._brushController=new BrushController$1(o.getZr())).on("brush",bind$1(this._onBrush,this)).mount()},n.prototype.render=function(r,o,l,u){this.model=r,this._updateController(r,o,l,u)},n.prototype.updateTransform=function(r,o,l,u){layoutCovers(o),this._updateController(r,o,l,u)},n.prototype.updateVisual=function(r,o,l,u){this.updateTransform(r,o,l,u)},n.prototype.updateView=function(r,o,l,u){this._updateController(r,o,l,u)},n.prototype._updateController=function(r,o,l,u){(!u||u.$from!==r.id)&&this._brushController.setPanels(r.brushTargetManager.makePanelOpts(l)).enableBrush(r.brushOption).updateCovers(r.areas.slice())},n.prototype.dispose=function(){this._brushController.dispose()},n.prototype._onBrush=function(r){var o=this.model.id,l=this.model.brushTargetManager.setOutputRanges(r.areas,this.ecModel);(!r.isEnd||r.removeOnClick)&&this.api.dispatchAction({type:"brush",brushId:o,areas:clone$4(l),$from:o}),r.isEnd&&this.api.dispatchAction({type:"brushEnd",brushId:o,areas:clone$4(l),$from:o})},n.type="brush",n}(ComponentView$1);const BrushView$1=BrushView;var DEFAULT_OUT_OF_BRUSH_COLOR="#ddd",BrushModel=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r.areas=[],r.brushOption={},r}return n.prototype.optionUpdated=function(r,o){var l=this.option;!o&&replaceVisualOption(l,r,["inBrush","outOfBrush"]);var u=l.inBrush=l.inBrush||{};l.outOfBrush=l.outOfBrush||{color:DEFAULT_OUT_OF_BRUSH_COLOR},u.hasOwnProperty("liftZ")||(u.liftZ=5)},n.prototype.setAreas=function(r){assert(isArray$1(r)),each$f(r,function(o){assert(o.brushType,"Illegal areas")}),r&&(this.areas=map$1(r,function(o){return generateBrushOption(this.option,o)},this))},n.prototype.setBrushOption=function(r){this.brushOption=generateBrushOption(this.option,r),this.brushType=this.brushOption.brushType},n.type="brush",n.dependencies=["geo","grid","xAxis","yAxis","parallel","series"],n.defaultOption={seriesIndex:"all",brushType:"rect",brushMode:"single",transformable:!0,brushStyle:{borderWidth:1,color:"rgba(210,219,238,0.3)",borderColor:"#D2DBEE"},throttleType:"fixRate",throttleDelay:0,removeOnClick:!0,z:1e4},n}(ComponentModel$1);function generateBrushOption(a,n){return merge({brushType:a.brushType,brushMode:a.brushMode,transformable:a.transformable,brushStyle:new Model$1(a.brushStyle).getItemStyle(),removeOnClick:a.removeOnClick,z:a.z},n,!0)}const BrushModel$1=BrushModel;var ICON_TYPES=["rect","polygon","lineX","lineY","keep","clear"],BrushFeature=function(a){__extends(n,a);function n(){return a!==null&&a.apply(this,arguments)||this}return n.prototype.render=function(r,o,l){var u,c,h;o.eachComponent({mainType:"brush"},function(d){u=d.brushType,c=d.brushOption.brushMode||"single",h=h||!!d.areas.length}),this._brushType=u,this._brushMode=c,each$f(r.get("type",!0),function(d){r.setIconStatus(d,(d==="keep"?c==="multiple":d==="clear"?h:d===u)?"emphasis":"normal")})},n.prototype.updateView=function(r,o,l){this.render(r,o,l)},n.prototype.getIcons=function(){var r=this.model,o=r.get("icon",!0),l={};return each$f(r.get("type",!0),function(u){o[u]&&(l[u]=o[u])}),l},n.prototype.onclick=function(r,o,l){var u=this._brushType,c=this._brushMode;l==="clear"?(o.dispatchAction({type:"axisAreaSelect",intervals:[]}),o.dispatchAction({type:"brush",command:"clear",areas:[]})):o.dispatchAction({type:"takeGlobalCursor",key:"brush",brushOption:{brushType:l==="keep"?u:u===l?!1:l,brushMode:l==="keep"?c==="multiple"?"single":"multiple":c}})},n.getDefaultOption=function(r){var o={show:!0,type:ICON_TYPES.slice(),icon:{rect:"M7.3,34.7 M0.4,10V-0.2h9.8 M89.6,10V-0.2h-9.8 M0.4,60v10.2h9.8 M89.6,60v10.2h-9.8 M12.3,22.4V10.5h13.1 M33.6,10.5h7.8 M49.1,10.5h7.8 M77.5,22.4V10.5h-13 M12.3,31.1v8.2 M77.7,31.1v8.2 M12.3,47.6v11.9h13.1 M33.6,59.5h7.6 M49.1,59.5 h7.7 M77.5,47.6v11.9h-13",polygon:"M55.2,34.9c1.7,0,3.1,1.4,3.1,3.1s-1.4,3.1-3.1,3.1 s-3.1-1.4-3.1-3.1S53.5,34.9,55.2,34.9z M50.4,51c1.7,0,3.1,1.4,3.1,3.1c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1 C47.3,52.4,48.7,51,50.4,51z M55.6,37.1l1.5-7.8 M60.1,13.5l1.6-8.7l-7.8,4 M59,19l-1,5.3 M24,16.1l6.4,4.9l6.4-3.3 M48.5,11.6 l-5.9,3.1 M19.1,12.8L9.7,5.1l1.1,7.7 M13.4,29.8l1,7.3l6.6,1.6 M11.6,18.4l1,6.1 M32.8,41.9 M26.6,40.4 M27.3,40.2l6.1,1.6 M49.9,52.1l-5.6-7.6l-4.9-1.2",lineX:"M15.2,30 M19.7,15.6V1.9H29 M34.8,1.9H40.4 M55.3,15.6V1.9H45.9 M19.7,44.4V58.1H29 M34.8,58.1H40.4 M55.3,44.4 V58.1H45.9 M12.5,20.3l-9.4,9.6l9.6,9.8 M3.1,29.9h16.5 M62.5,20.3l9.4,9.6L62.3,39.7 M71.9,29.9H55.4",lineY:"M38.8,7.7 M52.7,12h13.2v9 M65.9,26.6V32 M52.7,46.3h13.2v-9 M24.9,12H11.8v9 M11.8,26.6V32 M24.9,46.3H11.8v-9 M48.2,5.1l-9.3-9l-9.4,9.2 M38.9-3.9V12 M48.2,53.3l-9.3,9l-9.4-9.2 M38.9,62.3V46.4",keep:"M4,10.5V1h10.3 M20.7,1h6.1 M33,1h6.1 M55.4,10.5V1H45.2 M4,17.3v6.6 M55.6,17.3v6.6 M4,30.5V40h10.3 M20.7,40 h6.1 M33,40h6.1 M55.4,30.5V40H45.2 M21,18.9h62.9v48.6H21V18.9z",clear:"M22,14.7l30.9,31 M52.9,14.7L22,45.7 M4.7,16.8V4.2h13.1 M26,4.2h7.8 M41.6,4.2h7.8 M70.3,16.8V4.2H57.2 M4.7,25.9v8.6 M70.3,25.9v8.6 M4.7,43.2v12.6h13.1 M26,55.8h7.8 M41.6,55.8h7.8 M70.3,43.2v12.6H57.2"},title:r.getLocaleModel().get(["toolbox","brush","title"])};return o},n}(ToolboxFeature);const BrushFeature$1=BrushFeature;function install$h(a){a.registerComponentView(BrushView$1),a.registerComponentModel(BrushModel$1),a.registerPreprocessor(brushPreprocessor),a.registerVisual(a.PRIORITY.VISUAL.BRUSH,brushVisual),a.registerAction({type:"brush",event:"brush",update:"updateVisual"},function(n,r){r.eachComponent({mainType:"brush",query:n},function(o){o.setAreas(n.areas)})}),a.registerAction({type:"brushSelect",event:"brushSelected",update:"none"},noop),a.registerAction({type:"brushEnd",event:"brushEnd",update:"none"},noop),registerFeature("brush",BrushFeature$1)}var TitleModel=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r.layoutMode={type:"box",ignoreSize:!0},r}return n.type="title",n.defaultOption={z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:"#464646"},subtextStyle:{fontSize:12,color:"#6E7079"}},n}(ComponentModel$1),TitleView=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.prototype.render=function(r,o,l){if(this.group.removeAll(),!!r.get("show")){var u=this.group,c=r.getModel("textStyle"),h=r.getModel("subtextStyle"),d=r.get("textAlign"),p=retrieve2(r.get("textBaseline"),r.get("textVerticalAlign")),f=new ZRText$1({style:createTextStyle$1(c,{text:r.get("text"),fill:c.getTextColor()},{disableBox:!0}),z2:10}),g=f.getBoundingRect(),y=r.get("subtext"),v=new ZRText$1({style:createTextStyle$1(h,{text:y,fill:h.getTextColor(),y:g.height+r.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),_=r.get("link"),x=r.get("sublink"),S=r.get("triggerEvent",!0);f.silent=!_&&!S,v.silent=!x&&!S,_&&f.on("click",function(){windowOpen(_,"_"+r.get("target"))}),x&&v.on("click",function(){windowOpen(x,"_"+r.get("subtarget"))}),getECData(f).eventData=getECData(v).eventData=S?{componentType:"title",componentIndex:r.componentIndex}:null,u.add(f),y&&u.add(v);var T=u.getBoundingRect(),M=r.getBoxLayoutParams();M.width=T.width,M.height=T.height;var b=getLayoutRect(M,{width:l.getWidth(),height:l.getHeight()},r.get("padding"));d||(d=r.get("left")||r.get("right"),d==="middle"&&(d="center"),d==="right"?b.x+=b.width:d==="center"&&(b.x+=b.width/2)),p||(p=r.get("top")||r.get("bottom"),p==="center"&&(p="middle"),p==="bottom"?b.y+=b.height:p==="middle"&&(b.y+=b.height/2),p=p||"top"),u.x=b.x,u.y=b.y,u.markRedraw();var A={align:d,verticalAlign:p};f.setStyle(A),v.setStyle(A),T=u.getBoundingRect();var I=b.margin,w=r.getItemStyle(["color","opacity"]);w.fill=r.get("backgroundColor");var C=new Rect$3({shape:{x:T.x-I[3],y:T.y-I[0],width:T.width+I[1]+I[3],height:T.height+I[0]+I[2],r:r.get("borderRadius")},style:w,subPixelOptimize:!0,silent:!0});u.add(C)}},n.type="title",n}(ComponentView$1);function install$g(a){a.registerComponentModel(TitleModel),a.registerComponentView(TitleView)}var TimelineModel=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r.layoutMode="box",r}return n.prototype.init=function(r,o,l){this.mergeDefaultAndTheme(r,l),this._initData()},n.prototype.mergeOption=function(r){a.prototype.mergeOption.apply(this,arguments),this._initData()},n.prototype.setCurrentIndex=function(r){r==null&&(r=this.option.currentIndex);var o=this._data.count();this.option.loop?r=(r%o+o)%o:(r>=o&&(r=o-1),r<0&&(r=0)),this.option.currentIndex=r},n.prototype.getCurrentIndex=function(){return this.option.currentIndex},n.prototype.isIndexMax=function(){return this.getCurrentIndex()>=this._data.count()-1},n.prototype.setPlayState=function(r){this.option.autoPlay=!!r},n.prototype.getPlayState=function(){return!!this.option.autoPlay},n.prototype._initData=function(){var r=this.option,o=r.data||[],l=r.axisType,u=this._names=[],c;l==="category"?(c=[],each$f(o,function(p,f){var g=convertOptionIdName(getDataItemValue(p),""),y;isObject$3(p)?(y=clone$4(p),y.value=f):y=f,c.push(y),u.push(g)})):c=o;var h={category:"ordinal",time:"time",value:"number"}[l]||"number",d=this._data=new SeriesData$1([{name:"value",type:h}],this);d.initData(c,u)},n.prototype.getData=function(){return this._data},n.prototype.getCategories=function(){if(this.get("axisType")==="category")return this._names.slice()},n.type="timeline",n.defaultOption={z:4,show:!0,axisType:"time",realtime:!0,left:"20%",top:null,right:"20%",bottom:0,width:null,height:40,padding:5,controlPosition:"left",autoPlay:!1,rewind:!1,loop:!0,playInterval:2e3,currentIndex:0,itemStyle:{},label:{color:"#000"},data:[]},n}(ComponentModel$1);const TimelineModel$1=TimelineModel;var SliderTimelineModel=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.type="timeline.slider",n.defaultOption=inheritDefaultOption(TimelineModel$1.defaultOption,{backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,orient:"horizontal",inverse:!1,tooltip:{trigger:"item"},symbol:"circle",symbolSize:12,lineStyle:{show:!0,width:2,color:"#DAE1F5"},label:{position:"auto",show:!0,interval:"auto",rotate:0,color:"#A4B1D7"},itemStyle:{color:"#A4B1D7",borderWidth:1},checkpointStyle:{symbol:"circle",symbolSize:15,color:"#316bf3",borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0, 0, 0, 0.3)",animation:!0,animationDuration:300,animationEasing:"quinticInOut"},controlStyle:{show:!0,showPlayBtn:!0,showPrevBtn:!0,showNextBtn:!0,itemSize:24,itemGap:12,position:"left",playIcon:"path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z",stopIcon:"path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z",nextIcon:"M2,18.5A1.52,1.52,0,0,1,.92,18a1.49,1.49,0,0,1,0-2.12L7.81,9.36,1,3.11A1.5,1.5,0,1,1,3,.89l8,7.34a1.48,1.48,0,0,1,.49,1.09,1.51,1.51,0,0,1-.46,1.1L3,18.08A1.5,1.5,0,0,1,2,18.5Z",prevIcon:"M10,.5A1.52,1.52,0,0,1,11.08,1a1.49,1.49,0,0,1,0,2.12L4.19,9.64,11,15.89a1.5,1.5,0,1,1-2,2.22L1,10.77A1.48,1.48,0,0,1,.5,9.68,1.51,1.51,0,0,1,1,8.58L9,.92A1.5,1.5,0,0,1,10,.5Z",prevBtnSize:18,nextBtnSize:18,color:"#A4B1D7",borderColor:"#A4B1D7",borderWidth:1},emphasis:{label:{show:!0,color:"#6f778d"},itemStyle:{color:"#316BF3"},controlStyle:{color:"#316BF3",borderColor:"#316BF3",borderWidth:2}},progress:{lineStyle:{color:"#316BF3"},itemStyle:{color:"#316BF3"},label:{color:"#6f778d"}},data:[]}),n}(TimelineModel$1);mixin(SliderTimelineModel,DataFormatMixin.prototype);const SliderTimelineModel$1=SliderTimelineModel;var TimelineView=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.type="timeline",n}(ComponentView$1);const TimelineView$1=TimelineView;var TimelineAxis=function(a){__extends(n,a);function n(r,o,l,u){var c=a.call(this,r,o,l)||this;return c.type=u||"value",c}return n.prototype.getLabelModel=function(){return this.model.getModel("label")},n.prototype.isHorizontal=function(){return this.model.get("orient")==="horizontal"},n}(Axis$1);const TimelineAxis$1=TimelineAxis;var PI=Math.PI,labelDataIndexStore=makeInner(),SliderTimelineView=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.prototype.init=function(r,o){this.api=o},n.prototype.render=function(r,o,l){if(this.model=r,this.api=l,this.ecModel=o,this.group.removeAll(),r.get("show",!0)){var u=this._layout(r,l),c=this._createGroup("_mainGroup"),h=this._createGroup("_labelGroup"),d=this._axis=this._createAxis(u,r);r.formatTooltip=function(p){var f=d.scale.getLabel({value:p});return createTooltipMarkup("nameValue",{noName:!0,value:f})},each$f(["AxisLine","AxisTick","Control","CurrentPointer"],function(p){this["_render"+p](u,c,d,r)},this),this._renderAxisLabel(u,h,d,r),this._position(u,r)}this._doPlayStop(),this._updateTicksStatus()},n.prototype.remove=function(){this._clearTimer(),this.group.removeAll()},n.prototype.dispose=function(){this._clearTimer()},n.prototype._layout=function(r,o){var l=r.get(["label","position"]),u=r.get("orient"),c=getViewRect(r,o),h;l==null||l==="auto"?h=u==="horizontal"?c.y+c.height/2<o.getHeight()/2?"-":"+":c.x+c.width/2<o.getWidth()/2?"+":"-":isString(l)?h={horizontal:{top:"-",bottom:"+"},vertical:{left:"-",right:"+"}}[u][l]:h=l;var d={horizontal:"center",vertical:h>=0||h==="+"?"left":"right"},p={horizontal:h>=0||h==="+"?"top":"bottom",vertical:"middle"},f={horizontal:0,vertical:PI/2},g=u==="vertical"?c.height:c.width,y=r.getModel("controlStyle"),v=y.get("show",!0),_=v?y.get("itemSize"):0,x=v?y.get("itemGap"):0,S=_+x,T=r.get(["label","rotate"])||0;T=T*PI/180;var M,b,A,I=y.get("position",!0),w=v&&y.get("showPlayBtn",!0),C=v&&y.get("showPrevBtn",!0),E=v&&y.get("showNextBtn",!0),P=0,D=g;I==="left"||I==="bottom"?(w&&(M=[0,0],P+=S),C&&(b=[P,0],P+=S),E&&(A=[D-_,0],D-=S)):(w&&(M=[D-_,0],D-=S),C&&(b=[0,0],P+=S),E&&(A=[D-_,0],D-=S));var L=[P,D];return r.get("inverse")&&L.reverse(),{viewRect:c,mainLength:g,orient:u,rotation:f[u],labelRotation:T,labelPosOpt:h,labelAlign:r.get(["label","align"])||d[u],labelBaseline:r.get(["label","verticalAlign"])||r.get(["label","baseline"])||p[u],playPosition:M,prevBtnPosition:b,nextBtnPosition:A,axisExtent:L,controlSize:_,controlGap:x}},n.prototype._position=function(r,o){var l=this._mainGroup,u=this._labelGroup,c=r.viewRect;if(r.orient==="vertical"){var h=create$1(),d=c.x,p=c.y+c.height;translate(h,h,[-d,-p]),rotate(h,h,-PI/2),translate(h,h,[d,p]),c=c.clone(),c.applyTransform(h)}var f=M(c),g=M(l.getBoundingRect()),y=M(u.getBoundingRect()),v=[l.x,l.y],_=[u.x,u.y];_[0]=v[0]=f[0][0];var x=r.labelPosOpt;if(x==null||isString(x)){var S=x==="+"?0:1;b(v,g,f,1,S),b(_,y,f,1,1-S)}else{var S=x>=0?0:1;b(v,g,f,1,S),_[1]=v[1]+x}l.setPosition(v),u.setPosition(_),l.rotation=u.rotation=r.rotation,T(l),T(u);function T(A){A.originX=f[0][0]-A.x,A.originY=f[1][0]-A.y}function M(A){return[[A.x,A.x+A.width],[A.y,A.y+A.height]]}function b(A,I,w,C,E){A[C]+=w[C][E]-I[C][E]}},n.prototype._createAxis=function(r,o){var l=o.getData(),u=o.get("axisType"),c=createScaleByModel(o,u);c.getTicks=function(){return l.mapArray(["value"],function(p){return{value:p}})};var h=l.getDataExtent("value");c.setExtent(h[0],h[1]),c.calcNiceTicks();var d=new TimelineAxis$1("value",c,r.axisExtent,u);return d.model=o,d},n.prototype._createGroup=function(r){var o=this[r]=new Group$4;return this.group.add(o),o},n.prototype._renderAxisLine=function(r,o,l,u){var c=l.getExtent();if(u.get(["lineStyle","show"])){var h=new Line$3({shape:{x1:c[0],y1:0,x2:c[1],y2:0},style:extend({lineCap:"round"},u.getModel("lineStyle").getLineStyle()),silent:!0,z2:1});o.add(h);var d=this._progressLine=new Line$3({shape:{x1:c[0],x2:this._currentPointer?this._currentPointer.x:c[0],y1:0,y2:0},style:defaults({lineCap:"round",lineWidth:h.style.lineWidth},u.getModel(["progress","lineStyle"]).getLineStyle()),silent:!0,z2:1});o.add(d)}},n.prototype._renderAxisTick=function(r,o,l,u){var c=this,h=u.getData(),d=l.scale.getTicks();this._tickSymbols=[],each$f(d,function(p){var f=l.dataToCoord(p.value),g=h.getItemModel(p.value),y=g.getModel("itemStyle"),v=g.getModel(["emphasis","itemStyle"]),_=g.getModel(["progress","itemStyle"]),x={x:f,y:0,onclick:bind$1(c._changeTimeline,c,p.value)},S=giveSymbol(g,y,o,x);S.ensureState("emphasis").style=v.getItemStyle(),S.ensureState("progress").style=_.getItemStyle(),enableHoverEmphasis(S);var T=getECData(S);g.get("tooltip")?(T.dataIndex=p.value,T.dataModel=u):T.dataIndex=T.dataModel=null,c._tickSymbols.push(S)})},n.prototype._renderAxisLabel=function(r,o,l,u){var c=this,h=l.getLabelModel();if(h.get("show")){var d=u.getData(),p=l.getViewLabels();this._tickLabels=[],each$f(p,function(f){var g=f.tickValue,y=d.getItemModel(g),v=y.getModel("label"),_=y.getModel(["emphasis","label"]),x=y.getModel(["progress","label"]),S=l.dataToCoord(f.tickValue),T=new ZRText$1({x:S,y:0,rotation:r.labelRotation-r.rotation,onclick:bind$1(c._changeTimeline,c,g),silent:!1,style:createTextStyle$1(v,{text:f.formattedLabel,align:r.labelAlign,verticalAlign:r.labelBaseline})});T.ensureState("emphasis").style=createTextStyle$1(_),T.ensureState("progress").style=createTextStyle$1(x),o.add(T),enableHoverEmphasis(T),labelDataIndexStore(T).dataIndex=g,c._tickLabels.push(T)})}},n.prototype._renderControl=function(r,o,l,u){var c=r.controlSize,h=r.rotation,d=u.getModel("controlStyle").getItemStyle(),p=u.getModel(["emphasis","controlStyle"]).getItemStyle(),f=u.getPlayState(),g=u.get("inverse",!0);y(r.nextBtnPosition,"next",bind$1(this._changeTimeline,this,g?"-":"+")),y(r.prevBtnPosition,"prev",bind$1(this._changeTimeline,this,g?"+":"-")),y(r.playPosition,f?"stop":"play",bind$1(this._handlePlayClick,this,!f),!0);function y(v,_,x,S){if(v){var T=parsePercent$1(retrieve2(u.get(["controlStyle",_+"BtnSize"]),c),c),M=[0,-T/2,T,T],b=makeControlIcon(u,_+"Icon",M,{x:v[0],y:v[1],originX:c/2,originY:0,rotation:S?-h:0,rectHover:!0,style:d,onclick:x});b.ensureState("emphasis").style=p,o.add(b),enableHoverEmphasis(b)}}},n.prototype._renderCurrentPointer=function(r,o,l,u){var c=u.getData(),h=u.getCurrentIndex(),d=c.getItemModel(h).getModel("checkpointStyle"),p=this,f={onCreate:function(g){g.draggable=!0,g.drift=bind$1(p._handlePointerDrag,p),g.ondragend=bind$1(p._handlePointerDragend,p),pointerMoveTo(g,p._progressLine,h,l,u,!0)},onUpdate:function(g){pointerMoveTo(g,p._progressLine,h,l,u)}};this._currentPointer=giveSymbol(d,d,this._mainGroup,{},this._currentPointer,f)},n.prototype._handlePlayClick=function(r){this._clearTimer(),this.api.dispatchAction({type:"timelinePlayChange",playState:r,from:this.uid})},n.prototype._handlePointerDrag=function(r,o,l){this._clearTimer(),this._pointerChangeTimeline([l.offsetX,l.offsetY])},n.prototype._handlePointerDragend=function(r){this._pointerChangeTimeline([r.offsetX,r.offsetY],!0)},n.prototype._pointerChangeTimeline=function(r,o){var l=this._toAxisCoord(r)[0],u=this._axis,c=asc$2(u.getExtent().slice());l>c[1]&&(l=c[1]),l<c[0]&&(l=c[0]),this._currentPointer.x=l,this._currentPointer.markRedraw();var h=this._progressLine;h&&(h.shape.x2=l,h.dirty());var d=this._findNearestTick(l),p=this.model;(o||d!==p.getCurrentIndex()&&p.get("realtime"))&&this._changeTimeline(d)},n.prototype._doPlayStop=function(){var r=this;this._clearTimer(),this.model.getPlayState()&&(this._timer=setTimeout(function(){var o=r.model;r._changeTimeline(o.getCurrentIndex()+(o.get("rewind",!0)?-1:1))},this.model.get("playInterval")))},n.prototype._toAxisCoord=function(r){var o=this._mainGroup.getLocalTransform();return applyTransform(r,o,!0)},n.prototype._findNearestTick=function(r){var o=this.model.getData(),l=1/0,u,c=this._axis;return o.each(["value"],function(h,d){var p=c.dataToCoord(h),f=Math.abs(p-r);f<l&&(l=f,u=d)}),u},n.prototype._clearTimer=function(){this._timer&&(clearTimeout(this._timer),this._timer=null)},n.prototype._changeTimeline=function(r){var o=this.model.getCurrentIndex();r==="+"?r=o+1:r==="-"&&(r=o-1),this.api.dispatchAction({type:"timelineChange",currentIndex:r,from:this.uid})},n.prototype._updateTicksStatus=function(){var r=this.model.getCurrentIndex(),o=this._tickSymbols,l=this._tickLabels;if(o)for(var u=0;u<o.length;u++)o&&o[u]&&o[u].toggleState("progress",u<r);if(l)for(var u=0;u<l.length;u++)l&&l[u]&&l[u].toggleState("progress",labelDataIndexStore(l[u]).dataIndex<=r)},n.type="timeline.slider",n}(TimelineView$1);function createScaleByModel(a,n){if(n=n||a.get("type"),n)switch(n){case"category":return new OrdinalScale$1({ordinalMeta:a.getCategories(),extent:[1/0,-1/0]});case"time":return new TimeScale$1({locale:a.ecModel.getLocaleModel(),useUTC:a.ecModel.get("useUTC")});default:return new IntervalScale$1}}function getViewRect(a,n){return getLayoutRect(a.getBoxLayoutParams(),{width:n.getWidth(),height:n.getHeight()},a.get("padding"))}function makeControlIcon(a,n,r,o){var l=o.style,u=createIcon(a.get(["controlStyle",n]),o||{},new BoundingRect$1(r[0],r[1],r[2],r[3]));return l&&u.setStyle(l),u}function giveSymbol(a,n,r,o,l,u){var c=n.get("color");if(l)l.setColor(c),r.add(l),u&&u.onUpdate(l);else{var h=a.get("symbol");l=createSymbol$1(h,-1,-1,2,2,c),l.setStyle("strokeNoScale",!0),r.add(l),u&&u.onCreate(l)}var d=n.getItemStyle(["color"]);l.setStyle(d),o=merge({rectHover:!0,z2:100},o,!0);var p=normalizeSymbolSize(a.get("symbolSize"));o.scaleX=p[0]/2,o.scaleY=p[1]/2;var f=normalizeSymbolOffset(a.get("symbolOffset"),p);f&&(o.x=(o.x||0)+f[0],o.y=(o.y||0)+f[1]);var g=a.get("symbolRotate");return o.rotation=(g||0)*Math.PI/180||0,l.attr(o),l.updateTransform(),l}function pointerMoveTo(a,n,r,o,l,u){if(!a.dragging){var c=l.getModel("checkpointStyle"),h=o.dataToCoord(l.getData().get("value",r));if(u||!c.get("animation",!0))a.attr({x:h,y:0}),n&&n.attr({shape:{x2:h}});else{var d={duration:c.get("animationDuration",!0),easing:c.get("animationEasing",!0)};a.stopAnimation(null,!0),a.animateTo({x:h,y:0},d),n&&n.animateTo({shape:{x2:h}},d)}}}const SliderTimelineView$1=SliderTimelineView;function installTimelineAction(a){a.registerAction({type:"timelineChange",event:"timelineChanged",update:"prepareAndUpdate"},function(n,r,o){var l=r.getComponent("timeline");return l&&n.currentIndex!=null&&(l.setCurrentIndex(n.currentIndex),!l.get("loop",!0)&&l.isIndexMax()&&l.getPlayState()&&(l.setPlayState(!1),o.dispatchAction({type:"timelinePlayChange",playState:!1,from:n.from}))),r.resetOption("timeline",{replaceMerge:l.get("replaceMerge",!0)}),defaults({currentIndex:l.option.currentIndex},n)}),a.registerAction({type:"timelinePlayChange",event:"timelinePlayChanged",update:"update"},function(n,r){var o=r.getComponent("timeline");o&&n.playState!=null&&o.setPlayState(n.playState)})}function timelinePreprocessor(a){var n=a&&a.timeline;isArray$1(n)||(n=n?[n]:[]),each$f(n,function(r){!r||compatibleEC2(r)})}function compatibleEC2(a){var n=a.type,r={number:"value",time:"time"};if(r[n]&&(a.axisType=r[n],delete a.type),transferItem(a),has$1(a,"controlPosition")){var o=a.controlStyle||(a.controlStyle={});has$1(o,"position")||(o.position=a.controlPosition),o.position==="none"&&!has$1(o,"show")&&(o.show=!1,delete o.position),delete a.controlPosition}each$f(a.data||[],function(l){isObject$3(l)&&!isArray$1(l)&&(!has$1(l,"value")&&has$1(l,"name")&&(l.value=l.name),transferItem(l))})}function transferItem(a){var n=a.itemStyle||(a.itemStyle={}),r=n.emphasis||(n.emphasis={}),o=a.label||a.label||{},l=o.normal||(o.normal={}),u={normal:1,emphasis:1};each$f(o,function(c,h){!u[h]&&!has$1(l,h)&&(l[h]=c)}),r.label&&!has$1(o,"emphasis")&&(o.emphasis=r.label,delete r.label)}function has$1(a,n){return a.hasOwnProperty(n)}function install$f(a){a.registerComponentModel(SliderTimelineModel$1),a.registerComponentView(SliderTimelineView$1),a.registerSubTypeDefaulter("timeline",function(){return"slider"}),installTimelineAction(a),a.registerPreprocessor(timelinePreprocessor)}function checkMarkerInSeries(a,n){if(!a)return!1;for(var r=isArray$1(a)?a:[a],o=0;o<r.length;o++)if(r[o]&&r[o][n])return!0;return!1}function fillLabel(a){defaultEmphasis(a,"label",["show"])}var inner$5=makeInner(),MarkerModel=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r.createdBySelf=!1,r}return n.prototype.init=function(r,o,l){if(this.type==="marker")throw new Error("Marker component is abstract component. Use markLine, markPoint, markArea instead.");this.mergeDefaultAndTheme(r,l),this._mergeOption(r,l,!1,!0)},n.prototype.isAnimationEnabled=function(){if(env$1.node)return!1;var r=this.__hostSeries;return this.getShallow("animation")&&r&&r.isAnimationEnabled()},n.prototype.mergeOption=function(r,o){this._mergeOption(r,o,!1,!1)},n.prototype._mergeOption=function(r,o,l,u){var c=this.mainType;l||o.eachSeries(function(h){var d=h.get(this.mainType,!0),p=inner$5(h)[c];if(!d||!d.data){inner$5(h)[c]=null;return}p?p._mergeOption(d,o,!0):(u&&fillLabel(d),each$f(d.data,function(f){f instanceof Array?(fillLabel(f[0]),fillLabel(f[1])):fillLabel(f)}),p=this.createMarkerModelFromSeries(d,this,o),extend(p,{mainType:this.mainType,seriesIndex:h.seriesIndex,name:h.name,createdBySelf:!0}),p.__hostSeries=h),inner$5(h)[c]=p},this)},n.prototype.formatTooltip=function(r,o,l){var u=this.getData(),c=this.getRawValue(r),h=u.getName(r);return createTooltipMarkup("section",{header:this.name,blocks:[createTooltipMarkup("nameValue",{name:h,value:c,noName:!h,noValue:c==null})]})},n.prototype.getData=function(){return this._data},n.prototype.setData=function(r){this._data=r},n.prototype.getDataParams=function(r,o){var l=DataFormatMixin.prototype.getDataParams.call(this,r,o),u=this.__hostSeries;return u&&(l.seriesId=u.id,l.seriesName=u.name,l.seriesType=u.subType),l},n.getMarkerModelFromSeries=function(r,o){return inner$5(r)[o]},n.type="marker",n.dependencies=["series","grid","polar","geo"],n}(ComponentModel$1);mixin(MarkerModel,DataFormatMixin.prototype);const MarkerModel$1=MarkerModel;var MarkPointModel=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.prototype.createMarkerModelFromSeries=function(r,o,l){return new n(r,o,l)},n.type="markPoint",n.defaultOption={z:5,symbol:"pin",symbolSize:50,tooltip:{trigger:"item"},label:{show:!0,position:"inside"},itemStyle:{borderWidth:2},emphasis:{label:{show:!0}}},n}(MarkerModel$1);const MarkPointModel$1=MarkPointModel;function hasXOrY(a){return!(isNaN(parseFloat(a.x))&&isNaN(parseFloat(a.y)))}function hasXAndY(a){return!isNaN(parseFloat(a.x))&&!isNaN(parseFloat(a.y))}function markerTypeCalculatorWithExtent(a,n,r,o,l,u){var c=[],h=isDimensionStacked(n,o),d=h?n.getCalculationInfo("stackResultDimension"):o,p=numCalculate(n,d,a),f=n.indicesOfNearest(d,p)[0];c[l]=n.get(r,f),c[u]=n.get(d,f);var g=n.get(o,f),y=getPrecision(n.get(o,f));return y=Math.min(y,20),y>=0&&(c[u]=+c[u].toFixed(y)),[c,g]}var markerTypeCalculator={min:curry$1(markerTypeCalculatorWithExtent,"min"),max:curry$1(markerTypeCalculatorWithExtent,"max"),average:curry$1(markerTypeCalculatorWithExtent,"average"),median:curry$1(markerTypeCalculatorWithExtent,"median")};function dataTransform(a,n){if(n){var r=a.getData(),o=a.coordinateSystem,l=o&&o.dimensions;if(!hasXAndY(n)&&!isArray$1(n.coord)&&isArray$1(l)){var u=getAxisInfo(n,r,o,a);if(n=clone$4(n),n.type&&markerTypeCalculator[n.type]&&u.baseAxis&&u.valueAxis){var c=indexOf(l,u.baseAxis.dim),h=indexOf(l,u.valueAxis.dim),d=markerTypeCalculator[n.type](r,u.baseDataDim,u.valueDataDim,c,h);n.coord=d[0],n.value=d[1]}else n.coord=[n.xAxis!=null?n.xAxis:n.radiusAxis,n.yAxis!=null?n.yAxis:n.angleAxis]}if(n.coord==null||!isArray$1(l))n.coord=[];else for(var p=n.coord,f=0;f<2;f++)markerTypeCalculator[p[f]]&&(p[f]=numCalculate(r,r.mapDimension(l[f]),p[f]));return n}}function getAxisInfo(a,n,r,o){var l={};return a.valueIndex!=null||a.valueDim!=null?(l.valueDataDim=a.valueIndex!=null?n.getDimension(a.valueIndex):a.valueDim,l.valueAxis=r.getAxis(dataDimToCoordDim(o,l.valueDataDim)),l.baseAxis=r.getOtherAxis(l.valueAxis),l.baseDataDim=n.mapDimension(l.baseAxis.dim)):(l.baseAxis=o.getBaseAxis(),l.valueAxis=r.getOtherAxis(l.baseAxis),l.baseDataDim=n.mapDimension(l.baseAxis.dim),l.valueDataDim=n.mapDimension(l.valueAxis.dim)),l}function dataDimToCoordDim(a,n){var r=a.getData().getDimensionInfo(n);return r&&r.coordDim}function dataFilter(a,n){return a&&a.containData&&n.coord&&!hasXOrY(n)?a.containData(n.coord):!0}function zoneFilter(a,n,r){return a&&a.containZone&&n.coord&&r.coord&&!hasXOrY(n)&&!hasXOrY(r)?a.containZone(n.coord,r.coord):!0}function createMarkerDimValueGetter(a,n){return a?function(r,o,l,u){var c=u<2?r.coord&&r.coord[u]:r.value;return parseDataValue(c,n[u])}:function(r,o,l,u){return parseDataValue(r.value,n[u])}}function numCalculate(a,n,r){if(r==="average"){var o=0,l=0;return a.each(n,function(u,c){isNaN(u)||(o+=u,l++)}),o/l}else return r==="median"?a.getMedian(n):a.getDataExtent(n)[r==="max"?1:0]}var inner$4=makeInner(),MarkerView=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.prototype.init=function(){this.markerGroupMap=createHashMap()},n.prototype.render=function(r,o,l){var u=this,c=this.markerGroupMap;c.each(function(h){inner$4(h).keep=!1}),o.eachSeries(function(h){var d=MarkerModel$1.getMarkerModelFromSeries(h,u.type);d&&u.renderSeries(h,d,o,l)}),c.each(function(h){!inner$4(h).keep&&u.group.remove(h.group)})},n.prototype.markKeep=function(r){inner$4(r).keep=!0},n.prototype.toggleBlurSeries=function(r,o){var l=this;each$f(r,function(u){var c=MarkerModel$1.getMarkerModelFromSeries(u,l.type);if(c){var h=c.getData();h.eachItemGraphicEl(function(d){d&&(o?enterBlur(d):leaveBlur(d))})}})},n.type="marker",n}(ComponentView$1);const MarkerView$1=MarkerView;function updateMarkerLayout(a,n,r){var o=n.coordinateSystem;a.each(function(l){var u=a.getItemModel(l),c,h=parsePercent(u.get("x"),r.getWidth()),d=parsePercent(u.get("y"),r.getHeight());if(!isNaN(h)&&!isNaN(d))c=[h,d];else if(n.getMarkerPosition)c=n.getMarkerPosition(a.getValues(a.dimensions,l));else if(o){var p=a.get(o.dimensions[0],l),f=a.get(o.dimensions[1],l);c=o.dataToPoint([p,f])}isNaN(h)||(c[0]=h),isNaN(d)||(c[1]=d),a.setItemLayout(l,c)})}var MarkPointView=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.prototype.updateTransform=function(r,o,l){o.eachSeries(function(u){var c=MarkerModel$1.getMarkerModelFromSeries(u,"markPoint");c&&(updateMarkerLayout(c.getData(),u,l),this.markerGroupMap.get(u.id).updateLayout())},this)},n.prototype.renderSeries=function(r,o,l,u){var c=r.coordinateSystem,h=r.id,d=r.getData(),p=this.markerGroupMap,f=p.get(h)||p.set(h,new SymbolDraw$1),g=createData(c,r,o);o.setData(g),updateMarkerLayout(o.getData(),r,u),g.each(function(y){var v=g.getItemModel(y),_=v.getShallow("symbol"),x=v.getShallow("symbolSize"),S=v.getShallow("symbolRotate"),T=v.getShallow("symbolOffset"),M=v.getShallow("symbolKeepAspect");if(isFunction(_)||isFunction(x)||isFunction(S)||isFunction(T)){var b=o.getRawValue(y),A=o.getDataParams(y);isFunction(_)&&(_=_(b,A)),isFunction(x)&&(x=x(b,A)),isFunction(S)&&(S=S(b,A)),isFunction(T)&&(T=T(b,A))}var I=v.getModel("itemStyle").getItemStyle(),w=getVisualFromData(d,"color");I.fill||(I.fill=w),g.setItemVisual(y,{symbol:_,symbolSize:x,symbolRotate:S,symbolOffset:T,symbolKeepAspect:M,style:I})}),f.updateData(g),this.group.add(f.group),g.eachItemGraphicEl(function(y){y.traverse(function(v){getECData(v).dataModel=o})}),this.markKeep(f),f.group.silent=o.get("silent")||r.get("silent")},n.type="markPoint",n}(MarkerView$1);function createData(a,n,r){var o;a?o=map$1(a&&a.dimensions,function(h){var d=n.getData().getDimensionInfo(n.getData().mapDimension(h))||{};return extend(extend({},d),{name:h,ordinalMeta:null})}):o=[{name:"value",type:"float"}];var l=new SeriesData$1(o,r),u=map$1(r.get("data"),curry$1(dataTransform,n));a&&(u=filter(u,curry$1(dataFilter,a)));var c=createMarkerDimValueGetter(!!a,o);return l.initData(u,null,c),l}const MarkPointView$1=MarkPointView;function install$e(a){a.registerComponentModel(MarkPointModel$1),a.registerComponentView(MarkPointView$1),a.registerPreprocessor(function(n){checkMarkerInSeries(n.series,"markPoint")&&(n.markPoint=n.markPoint||{})})}var MarkLineModel=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.prototype.createMarkerModelFromSeries=function(r,o,l){return new n(r,o,l)},n.type="markLine",n.defaultOption={z:5,symbol:["circle","arrow"],symbolSize:[8,16],symbolOffset:0,precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end",distance:5},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"},n}(MarkerModel$1);const MarkLineModel$1=MarkLineModel;var inner$3=makeInner(),markLineTransform=function(a,n,r,o){var l=a.getData(),u;if(isArray$1(o))u=o;else{var c=o.type;if(c==="min"||c==="max"||c==="average"||c==="median"||o.xAxis!=null||o.yAxis!=null){var h=void 0,d=void 0;if(o.yAxis!=null||o.xAxis!=null)h=n.getAxis(o.yAxis!=null?"y":"x"),d=retrieve(o.yAxis,o.xAxis);else{var p=getAxisInfo(o,l,n,a);h=p.valueAxis;var f=getStackedDimension(l,p.valueDataDim);d=numCalculate(l,f,c)}var g=h.dim==="x"?0:1,y=1-g,v=clone$4(o),_={coord:[]};v.type=null,v.coord=[],v.coord[y]=-1/0,_.coord[y]=1/0;var x=r.get("precision");x>=0&&isNumber(d)&&(d=+d.toFixed(Math.min(x,20))),v.coord[g]=_.coord[g]=d,u=[v,_,{type:c,valueIndex:o.valueIndex,value:d}]}else logError("Invalid markLine data."),u=[]}var S=[dataTransform(a,u[0]),dataTransform(a,u[1]),extend({},u[2])];return S[2].type=S[2].type||null,merge(S[2],S[0]),merge(S[2],S[1]),S};function isInfinity$1(a){return!isNaN(a)&&!isFinite(a)}function ifMarkLineHasOnlyDim(a,n,r,o){var l=1-a,u=o.dimensions[a];return isInfinity$1(n[l])&&isInfinity$1(r[l])&&n[a]===r[a]&&o.getAxis(u).containData(n[a])}function markLineFilter(a,n){if(a.type==="cartesian2d"){var r=n[0].coord,o=n[1].coord;if(r&&o&&(ifMarkLineHasOnlyDim(1,r,o,a)||ifMarkLineHasOnlyDim(0,r,o,a)))return!0}return dataFilter(a,n[0])&&dataFilter(a,n[1])}function updateSingleMarkerEndLayout(a,n,r,o,l){var u=o.coordinateSystem,c=a.getItemModel(n),h,d=parsePercent(c.get("x"),l.getWidth()),p=parsePercent(c.get("y"),l.getHeight());if(!isNaN(d)&&!isNaN(p))h=[d,p];else{if(o.getMarkerPosition)h=o.getMarkerPosition(a.getValues(a.dimensions,n));else{var f=u.dimensions,g=a.get(f[0],n),y=a.get(f[1],n);h=u.dataToPoint([g,y])}if(isCoordinateSystemType(u,"cartesian2d")){var v=u.getAxis("x"),_=u.getAxis("y"),f=u.dimensions;isInfinity$1(a.get(f[0],n))?h[0]=v.toGlobalCoord(v.getExtent()[r?0:1]):isInfinity$1(a.get(f[1],n))&&(h[1]=_.toGlobalCoord(_.getExtent()[r?0:1]))}isNaN(d)||(h[0]=d),isNaN(p)||(h[1]=p)}a.setItemLayout(n,h)}var MarkLineView=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.prototype.updateTransform=function(r,o,l){o.eachSeries(function(u){var c=MarkerModel$1.getMarkerModelFromSeries(u,"markLine");if(c){var h=c.getData(),d=inner$3(c).from,p=inner$3(c).to;d.each(function(f){updateSingleMarkerEndLayout(d,f,!0,u,l),updateSingleMarkerEndLayout(p,f,!1,u,l)}),h.each(function(f){h.setItemLayout(f,[d.getItemLayout(f),p.getItemLayout(f)])}),this.markerGroupMap.get(u.id).updateLayout()}},this)},n.prototype.renderSeries=function(r,o,l,u){var c=r.coordinateSystem,h=r.id,d=r.getData(),p=this.markerGroupMap,f=p.get(h)||p.set(h,new LineDraw$1);this.group.add(f.group);var g=createList$1(c,r,o),y=g.from,v=g.to,_=g.line;inner$3(o).from=y,inner$3(o).to=v,o.setData(_);var x=o.get("symbol"),S=o.get("symbolSize"),T=o.get("symbolRotate"),M=o.get("symbolOffset");isArray$1(x)||(x=[x,x]),isArray$1(S)||(S=[S,S]),isArray$1(T)||(T=[T,T]),isArray$1(M)||(M=[M,M]),g.from.each(function(A){b(y,A,!0),b(v,A,!1)}),_.each(function(A){var I=_.getItemModel(A).getModel("lineStyle").getLineStyle();_.setItemLayout(A,[y.getItemLayout(A),v.getItemLayout(A)]),I.stroke==null&&(I.stroke=y.getItemVisual(A,"style").fill),_.setItemVisual(A,{fromSymbolKeepAspect:y.getItemVisual(A,"symbolKeepAspect"),fromSymbolOffset:y.getItemVisual(A,"symbolOffset"),fromSymbolRotate:y.getItemVisual(A,"symbolRotate"),fromSymbolSize:y.getItemVisual(A,"symbolSize"),fromSymbol:y.getItemVisual(A,"symbol"),toSymbolKeepAspect:v.getItemVisual(A,"symbolKeepAspect"),toSymbolOffset:v.getItemVisual(A,"symbolOffset"),toSymbolRotate:v.getItemVisual(A,"symbolRotate"),toSymbolSize:v.getItemVisual(A,"symbolSize"),toSymbol:v.getItemVisual(A,"symbol"),style:I})}),f.updateData(_),g.line.eachItemGraphicEl(function(A){getECData(A).dataModel=o,A.traverse(function(I){getECData(I).dataModel=o})});function b(A,I,w){var C=A.getItemModel(I);updateSingleMarkerEndLayout(A,I,w,r,u);var E=C.getModel("itemStyle").getItemStyle();E.fill==null&&(E.fill=getVisualFromData(d,"color")),A.setItemVisual(I,{symbolKeepAspect:C.get("symbolKeepAspect"),symbolOffset:retrieve2(C.get("symbolOffset",!0),M[w?0:1]),symbolRotate:retrieve2(C.get("symbolRotate",!0),T[w?0:1]),symbolSize:retrieve2(C.get("symbolSize"),S[w?0:1]),symbol:retrieve2(C.get("symbol",!0),x[w?0:1]),style:E})}this.markKeep(f),f.group.silent=o.get("silent")||r.get("silent")},n.type="markLine",n}(MarkerView$1);function createList$1(a,n,r){var o;a?o=map$1(a&&a.dimensions,function(p){var f=n.getData().getDimensionInfo(n.getData().mapDimension(p))||{};return extend(extend({},f),{name:p,ordinalMeta:null})}):o=[{name:"value",type:"float"}];var l=new SeriesData$1(o,r),u=new SeriesData$1(o,r),c=new SeriesData$1([],r),h=map$1(r.get("data"),curry$1(markLineTransform,n,a,r));a&&(h=filter(h,curry$1(markLineFilter,a)));var d=createMarkerDimValueGetter(!!a,o);return l.initData(map$1(h,function(p){return p[0]}),null,d),u.initData(map$1(h,function(p){return p[1]}),null,d),c.initData(map$1(h,function(p){return p[2]})),c.hasItemOption=!0,{from:l,to:u,line:c}}const MarkLineView$1=MarkLineView;function install$d(a){a.registerComponentModel(MarkLineModel$1),a.registerComponentView(MarkLineView$1),a.registerPreprocessor(function(n){checkMarkerInSeries(n.series,"markLine")&&(n.markLine=n.markLine||{})})}var MarkAreaModel=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.prototype.createMarkerModelFromSeries=function(r,o,l){return new n(r,o,l)},n.type="markArea",n.defaultOption={z:1,tooltip:{trigger:"item"},animation:!1,label:{show:!0,position:"top"},itemStyle:{borderWidth:0},emphasis:{label:{show:!0,position:"top"}}},n}(MarkerModel$1);const MarkAreaModel$1=MarkAreaModel;var inner$2=makeInner(),markAreaTransform=function(a,n,r,o){var l=o[0],u=o[1];if(!(!l||!u)){var c=dataTransform(a,l),h=dataTransform(a,u),d=c.coord,p=h.coord;d[0]=retrieve(d[0],-1/0),d[1]=retrieve(d[1],-1/0),p[0]=retrieve(p[0],1/0),p[1]=retrieve(p[1],1/0);var f=mergeAll([{},c,h]);return f.coord=[c.coord,h.coord],f.x0=c.x,f.y0=c.y,f.x1=h.x,f.y1=h.y,f}};function isInfinity(a){return!isNaN(a)&&!isFinite(a)}function ifMarkAreaHasOnlyDim(a,n,r,o){var l=1-a;return isInfinity(n[l])&&isInfinity(r[l])}function markAreaFilter(a,n){var r=n.coord[0],o=n.coord[1],l={coord:r,x:n.x0,y:n.y0},u={coord:o,x:n.x1,y:n.y1};return isCoordinateSystemType(a,"cartesian2d")?r&&o&&(ifMarkAreaHasOnlyDim(1,r,o)||ifMarkAreaHasOnlyDim(0,r,o))?!0:zoneFilter(a,l,u):dataFilter(a,l)||dataFilter(a,u)}function getSingleMarkerEndPoint(a,n,r,o,l){var u=o.coordinateSystem,c=a.getItemModel(n),h,d=parsePercent(c.get(r[0]),l.getWidth()),p=parsePercent(c.get(r[1]),l.getHeight());if(!isNaN(d)&&!isNaN(p))h=[d,p];else{if(o.getMarkerPosition){var f=a.getValues(["x0","y0"],n),g=a.getValues(["x1","y1"],n),y=u.clampData(f),v=u.clampData(g),_=[];r[0]==="x0"?_[0]=y[0]>v[0]?g[0]:f[0]:_[0]=y[0]>v[0]?f[0]:g[0],r[1]==="y0"?_[1]=y[1]>v[1]?g[1]:f[1]:_[1]=y[1]>v[1]?f[1]:g[1],h=o.getMarkerPosition(_,r,!0)}else{var x=a.get(r[0],n),S=a.get(r[1],n),T=[x,S];u.clampData&&u.clampData(T,T),h=u.dataToPoint(T,!0)}if(isCoordinateSystemType(u,"cartesian2d")){var M=u.getAxis("x"),b=u.getAxis("y"),x=a.get(r[0],n),S=a.get(r[1],n);isInfinity(x)?h[0]=M.toGlobalCoord(M.getExtent()[r[0]==="x0"?0:1]):isInfinity(S)&&(h[1]=b.toGlobalCoord(b.getExtent()[r[1]==="y0"?0:1]))}isNaN(d)||(h[0]=d),isNaN(p)||(h[1]=p)}return h}var dimPermutations=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]],MarkAreaView=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.prototype.updateTransform=function(r,o,l){o.eachSeries(function(u){var c=MarkerModel$1.getMarkerModelFromSeries(u,"markArea");if(c){var h=c.getData();h.each(function(d){var p=map$1(dimPermutations,function(g){return getSingleMarkerEndPoint(h,d,g,u,l)});h.setItemLayout(d,p);var f=h.getItemGraphicEl(d);f.setShape("points",p)})}},this)},n.prototype.renderSeries=function(r,o,l,u){var c=r.coordinateSystem,h=r.id,d=r.getData(),p=this.markerGroupMap,f=p.get(h)||p.set(h,{group:new Group$4});this.group.add(f.group),this.markKeep(f);var g=createList(c,r,o);o.setData(g),g.each(function(y){var v=map$1(dimPermutations,function(E){return getSingleMarkerEndPoint(g,y,E,r,u)}),_=c.getAxis("x").scale,x=c.getAxis("y").scale,S=_.getExtent(),T=x.getExtent(),M=[_.parse(g.get("x0",y)),_.parse(g.get("x1",y))],b=[x.parse(g.get("y0",y)),x.parse(g.get("y1",y))];asc$2(M),asc$2(b);var A=!(S[0]>M[1]||S[1]<M[0]||T[0]>b[1]||T[1]<b[0]),I=!A;g.setItemLayout(y,{points:v,allClipped:I});var w=g.getItemModel(y).getModel("itemStyle").getItemStyle(),C=getVisualFromData(d,"color");w.fill||(w.fill=C,isString(w.fill)&&(w.fill=modifyAlpha(w.fill,.4))),w.stroke||(w.stroke=C),g.setItemVisual(y,"style",w)}),g.diff(inner$2(f).data).add(function(y){var v=g.getItemLayout(y);if(!v.allClipped){var _=new Polygon$1({shape:{points:v.points}});g.setItemGraphicEl(y,_),f.group.add(_)}}).update(function(y,v){var _=inner$2(f).data.getItemGraphicEl(v),x=g.getItemLayout(y);x.allClipped?_&&f.group.remove(_):(_?updateProps$1(_,{shape:{points:x.points}},o,y):_=new Polygon$1({shape:{points:x.points}}),g.setItemGraphicEl(y,_),f.group.add(_))}).remove(function(y){var v=inner$2(f).data.getItemGraphicEl(y);f.group.remove(v)}).execute(),g.eachItemGraphicEl(function(y,v){var _=g.getItemModel(v),x=g.getItemVisual(v,"style");y.useStyle(g.getItemVisual(v,"style")),setLabelStyle(y,getLabelStatesModels(_),{labelFetcher:o,labelDataIndex:v,defaultText:g.getName(v)||"",inheritColor:isString(x.fill)?modifyAlpha(x.fill,1):"#000"}),setStatesStylesFromModel(y,_),toggleHoverEmphasis(y,null,null,_.get(["emphasis","disabled"])),getECData(y).dataModel=o}),inner$2(f).data=g,f.group.silent=o.get("silent")||r.get("silent")},n.type="markArea",n}(MarkerView$1);function createList(a,n,r){var o,l,u=["x0","y0","x1","y1"];if(a){var c=map$1(a&&a.dimensions,function(p){var f=n.getData(),g=f.getDimensionInfo(f.mapDimension(p))||{};return extend(extend({},g),{name:p,ordinalMeta:null})});l=map$1(u,function(p,f){return{name:p,type:c[f%2].type}}),o=new SeriesData$1(l,r)}else l=[{name:"value",type:"float"}],o=new SeriesData$1(l,r);var h=map$1(r.get("data"),curry$1(markAreaTransform,n,a,r));a&&(h=filter(h,curry$1(markAreaFilter,a)));var d=a?function(p,f,g,y){var v=p.coord[Math.floor(y/2)][y%2];return parseDataValue(v,l[y])}:function(p,f,g,y){return parseDataValue(p.value,l[y])};return o.initData(h,null,d),o.hasItemOption=!0,o}const MarkAreaView$1=MarkAreaView;function install$c(a){a.registerComponentModel(MarkAreaModel$1),a.registerComponentView(MarkAreaView$1),a.registerPreprocessor(function(n){checkMarkerInSeries(n.series,"markArea")&&(n.markArea=n.markArea||{})})}var getDefaultSelectorOptions=function(a,n){if(n==="all")return{type:"all",title:a.getLocaleModel().get(["legend","selector","all"])};if(n==="inverse")return{type:"inverse",title:a.getLocaleModel().get(["legend","selector","inverse"])}},LegendModel=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r.layoutMode={type:"box",ignoreSize:!0},r}return n.prototype.init=function(r,o,l){this.mergeDefaultAndTheme(r,l),r.selected=r.selected||{},this._updateSelector(r)},n.prototype.mergeOption=function(r,o){a.prototype.mergeOption.call(this,r,o),this._updateSelector(r)},n.prototype._updateSelector=function(r){var o=r.selector,l=this.ecModel;o===!0&&(o=r.selector=["all","inverse"]),isArray$1(o)&&each$f(o,function(u,c){isString(u)&&(u={type:u}),o[c]=merge(u,getDefaultSelectorOptions(l,u.type))})},n.prototype.optionUpdated=function(){this._updateData(this.ecModel);var r=this._data;if(r[0]&&this.get("selectedMode")==="single"){for(var o=!1,l=0;l<r.length;l++){var u=r[l].get("name");if(this.isSelected(u)){this.select(u),o=!0;break}}!o&&this.select(r[0].get("name"))}},n.prototype._updateData=function(r){var o=[],l=[];r.eachRawSeries(function(d){var p=d.name;l.push(p);var f;if(d.legendVisualProvider){var g=d.legendVisualProvider,y=g.getAllNames();r.isSeriesFiltered(d)||(l=l.concat(y)),y.length?o=o.concat(y):f=!0}else f=!0;f&&isNameSpecified(d)&&o.push(d.name)}),this._availableNames=l;var u=this.get("data")||o,c=createHashMap(),h=map$1(u,function(d){return(isString(d)||isNumber(d))&&(d={name:d}),c.get(d.name)?null:(c.set(d.name,!0),new Model$1(d,this,this.ecModel))},this);this._data=filter(h,function(d){return!!d})},n.prototype.getData=function(){return this._data},n.prototype.select=function(r){var o=this.option.selected,l=this.get("selectedMode");if(l==="single"){var u=this._data;each$f(u,function(c){o[c.get("name")]=!1})}o[r]=!0},n.prototype.unSelect=function(r){this.get("selectedMode")!=="single"&&(this.option.selected[r]=!1)},n.prototype.toggleSelected=function(r){var o=this.option.selected;o.hasOwnProperty(r)||(o[r]=!0),this[o[r]?"unSelect":"select"](r)},n.prototype.allSelect=function(){var r=this._data,o=this.option.selected;each$f(r,function(l){o[l.get("name",!0)]=!0})},n.prototype.inverseSelect=function(){var r=this._data,o=this.option.selected;each$f(r,function(l){var u=l.get("name",!0);o.hasOwnProperty(u)||(o[u]=!0),o[u]=!o[u]})},n.prototype.isSelected=function(r){var o=this.option.selected;return!(o.hasOwnProperty(r)&&!o[r])&&indexOf(this._availableNames,r)>=0},n.prototype.getOrient=function(){return this.get("orient")==="vertical"?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},n.type="legend.plain",n.dependencies=["series"],n.defaultOption={z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,symbolRotate:"inherit",symbolKeepAspect:!0,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:"#ccc",inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit"},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:"sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}},n}(ComponentModel$1);const LegendModel$1=LegendModel;var curry=curry$1,each$3=each$f,Group$1=Group$4,LegendView=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r.newlineDisabled=!1,r}return n.prototype.init=function(){this.group.add(this._contentGroup=new Group$1),this.group.add(this._selectorGroup=new Group$1),this._isFirstRender=!0},n.prototype.getContentGroup=function(){return this._contentGroup},n.prototype.getSelectorGroup=function(){return this._selectorGroup},n.prototype.render=function(r,o,l){var u=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),!!r.get("show",!0)){var c=r.get("align"),h=r.get("orient");(!c||c==="auto")&&(c=r.get("left")==="right"&&h==="vertical"?"right":"left");var d=r.get("selector",!0),p=r.get("selectorPosition",!0);d&&(!p||p==="auto")&&(p=h==="horizontal"?"end":"start"),this.renderInner(c,r,o,l,d,h,p);var f=r.getBoxLayoutParams(),g={width:l.getWidth(),height:l.getHeight()},y=r.get("padding"),v=getLayoutRect(f,g,y),_=this.layoutInner(r,c,v,u,d,p),x=getLayoutRect(defaults({width:_.width,height:_.height},f),g,y);this.group.x=x.x-_.x,this.group.y=x.y-_.y,this.group.markRedraw(),this.group.add(this._backgroundEl=makeBackground(_,r))}},n.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},n.prototype.renderInner=function(r,o,l,u,c,h,d){var p=this.getContentGroup(),f=createHashMap(),g=o.get("selectedMode"),y=[];l.eachRawSeries(function(v){!v.get("legendHoverLink")&&y.push(v.id)}),each$3(o.getData(),function(v,_){var x=v.get("name");if(!this.newlineDisabled&&(x===""||x===`
`)){var S=new Group$1;S.newline=!0,p.add(S);return}var T=l.getSeriesByName(x)[0];if(!f.get(x)){if(T){var M=T.getData(),b=M.getVisual("legendLineStyle")||{},A=M.getVisual("legendIcon"),I=M.getVisual("style"),w=this._createItem(T,x,_,v,o,r,b,I,A,g,u);w.on("click",curry(dispatchSelectAction,x,null,u,y)).on("mouseover",curry(dispatchHighlightAction,T.name,null,u,y)).on("mouseout",curry(dispatchDownplayAction,T.name,null,u,y)),l.ssr&&w.eachChild(function(C){var E=getECData(C);E.seriesIndex=T.seriesIndex,E.dataIndex=_,E.ssrType="legend"}),f.set(x,!0)}else l.eachRawSeries(function(C){if(!f.get(x)&&C.legendVisualProvider){var E=C.legendVisualProvider;if(!E.containName(x))return;var P=E.indexOfName(x),D=E.getItemVisual(P,"style"),L=E.getItemVisual(P,"legendIcon"),R=parse(D.fill);R&&R[3]===0&&(R[3]=.2,D=extend(extend({},D),{fill:stringify(R,"rgba")}));var O=this._createItem(C,x,_,v,o,r,{},D,L,g,u);O.on("click",curry(dispatchSelectAction,null,x,u,y)).on("mouseover",curry(dispatchHighlightAction,null,x,u,y)).on("mouseout",curry(dispatchDownplayAction,null,x,u,y)),l.ssr&&O.eachChild(function(N){var V=getECData(N);V.seriesIndex=C.seriesIndex,V.dataIndex=_,V.ssrType="legend"}),f.set(x,!0)}},this);f.get(x)||console.warn(x+" series not exists. Legend data should be same with series name or data name.")}},this),c&&this._createSelector(c,o,u,h,d)},n.prototype._createSelector=function(r,o,l,u,c){var h=this.getSelectorGroup();each$3(r,function(d){var p=d.type,f=new ZRText$1({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){l.dispatchAction({type:p==="all"?"legendAllSelect":"legendInverseSelect",legendId:o.id})}});h.add(f);var g=o.getModel("selectorLabel"),y=o.getModel(["emphasis","selectorLabel"]);setLabelStyle(f,{normal:g,emphasis:y},{defaultText:d.title}),enableHoverEmphasis(f)})},n.prototype._createItem=function(r,o,l,u,c,h,d,p,f,g,y){var v=r.visualDrawType,_=c.get("itemWidth"),x=c.get("itemHeight"),S=c.isSelected(o),T=u.get("symbolRotate"),M=u.get("symbolKeepAspect"),b=u.get("icon");f=b||f||"roundRect";var A=getLegendStyle(f,u,d,p,v,S,y),I=new Group$1,w=u.getModel("textStyle");if(isFunction(r.getLegendIcon)&&(!b||b==="inherit"))I.add(r.getLegendIcon({itemWidth:_,itemHeight:x,icon:f,iconRotate:T,itemStyle:A.itemStyle,lineStyle:A.lineStyle,symbolKeepAspect:M}));else{var C=b==="inherit"&&r.getData().getVisual("symbol")?T==="inherit"?r.getData().getVisual("symbolRotate"):T:0;I.add(getDefaultLegendIcon({itemWidth:_,itemHeight:x,icon:f,iconRotate:C,itemStyle:A.itemStyle,lineStyle:A.lineStyle,symbolKeepAspect:M}))}var E=h==="left"?_+5:-5,P=h,D=c.get("formatter"),L=o;isString(D)&&D?L=D.replace("{name}",o!=null?o:""):isFunction(D)&&(L=D(o));var R=S?w.getTextColor():u.get("inactiveColor");I.add(new ZRText$1({style:createTextStyle$1(w,{text:L,x:E,y:x/2,fill:R,align:P,verticalAlign:"middle"},{inheritColor:R})}));var O=new Rect$3({shape:I.getBoundingRect(),style:{fill:"transparent"}}),N=u.getModel("tooltip");return N.get("show")&&setTooltipConfig({el:O,componentModel:c,itemName:o,itemTooltipOption:N.option}),I.add(O),I.eachChild(function(V){V.silent=!0}),O.silent=!g,this.getContentGroup().add(I),enableHoverEmphasis(I),I.__legendDataIndex=l,I},n.prototype.layoutInner=function(r,o,l,u,c,h){var d=this.getContentGroup(),p=this.getSelectorGroup();box(r.get("orient"),d,r.get("itemGap"),l.width,l.height);var f=d.getBoundingRect(),g=[-f.x,-f.y];if(p.markRedraw(),d.markRedraw(),c){box("horizontal",p,r.get("selectorItemGap",!0));var y=p.getBoundingRect(),v=[-y.x,-y.y],_=r.get("selectorButtonGap",!0),x=r.getOrient().index,S=x===0?"width":"height",T=x===0?"height":"width",M=x===0?"y":"x";h==="end"?v[x]+=f[S]+_:g[x]+=y[S]+_,v[1-x]+=f[T]/2-y[T]/2,p.x=v[0],p.y=v[1],d.x=g[0],d.y=g[1];var b={x:0,y:0};return b[S]=f[S]+_+y[S],b[T]=Math.max(f[T],y[T]),b[M]=Math.min(0,y[M]+v[1-x]),b}else return d.x=g[0],d.y=g[1],this.group.getBoundingRect()},n.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},n.type="legend.plain",n}(ComponentView$1);function getLegendStyle(a,n,r,o,l,u,c){function h(S,T){S.lineWidth==="auto"&&(S.lineWidth=T.lineWidth>0?2:0),each$3(S,function(M,b){S[b]==="inherit"&&(S[b]=T[b])})}var d=n.getModel("itemStyle"),p=d.getItemStyle(),f=a.lastIndexOf("empty",0)===0?"fill":"stroke",g=d.getShallow("decal");p.decal=!g||g==="inherit"?o.decal:createOrUpdatePatternFromDecal(g,c),p.fill==="inherit"&&(p.fill=o[l]),p.stroke==="inherit"&&(p.stroke=o[f]),p.opacity==="inherit"&&(p.opacity=(l==="fill"?o:r).opacity),h(p,o);var y=n.getModel("lineStyle"),v=y.getLineStyle();if(h(v,r),p.fill==="auto"&&(p.fill=o.fill),p.stroke==="auto"&&(p.stroke=o.fill),v.stroke==="auto"&&(v.stroke=o.fill),!u){var _=n.get("inactiveBorderWidth"),x=p[f];p.lineWidth=_==="auto"?o.lineWidth>0&&x?2:0:p.lineWidth,p.fill=n.get("inactiveColor"),p.stroke=n.get("inactiveBorderColor"),v.stroke=y.get("inactiveColor"),v.lineWidth=y.get("inactiveWidth")}return{itemStyle:p,lineStyle:v}}function getDefaultLegendIcon(a){var n=a.icon||"roundRect",r=createSymbol$1(n,0,0,a.itemWidth,a.itemHeight,a.itemStyle.fill,a.symbolKeepAspect);return r.setStyle(a.itemStyle),r.rotation=(a.iconRotate||0)*Math.PI/180,r.setOrigin([a.itemWidth/2,a.itemHeight/2]),n.indexOf("empty")>-1&&(r.style.stroke=r.style.fill,r.style.fill="#fff",r.style.lineWidth=2),r}function dispatchSelectAction(a,n,r,o){dispatchDownplayAction(a,n,r,o),r.dispatchAction({type:"legendToggleSelect",name:a!=null?a:n}),dispatchHighlightAction(a,n,r,o)}function isUseHoverLayer(a){for(var n=a.getZr().storage.getDisplayList(),r,o=0,l=n.length;o<l&&!(r=n[o].states.emphasis);)o++;return r&&r.hoverLayer}function dispatchHighlightAction(a,n,r,o){isUseHoverLayer(r)||r.dispatchAction({type:"highlight",seriesName:a,name:n,excludeSeriesId:o})}function dispatchDownplayAction(a,n,r,o){isUseHoverLayer(r)||r.dispatchAction({type:"downplay",seriesName:a,name:n,excludeSeriesId:o})}const LegendView$1=LegendView;function legendFilter(a){var n=a.findComponents({mainType:"legend"});n&&n.length&&a.filterSeries(function(r){for(var o=0;o<n.length;o++)if(!n[o].isSelected(r.name))return!1;return!0})}function legendSelectActionHandler(a,n,r){var o=a==="allSelect"||a==="inverseSelect",l={},u=[];r.eachComponent({mainType:"legend",query:n},function(h){o?h[a]():h[a](n.name),makeSelectedMap(h,l),u.push(h.componentIndex)});var c={};return r.eachComponent("legend",function(h){each$f(l,function(d,p){h[d?"select":"unSelect"](p)}),makeSelectedMap(h,c)}),o?{selected:c,legendIndex:u}:{name:n.name,selected:c}}function makeSelectedMap(a,n){var r=n||{};return each$f(a.getData(),function(o){var l=o.get("name");if(!(l===`
`||l==="")){var u=a.isSelected(l);hasOwn(r,l)?r[l]=r[l]&&u:r[l]=u}}),r}function installLegendAction(a){a.registerAction("legendToggleSelect","legendselectchanged",curry$1(legendSelectActionHandler,"toggleSelected")),a.registerAction("legendAllSelect","legendselectall",curry$1(legendSelectActionHandler,"allSelect")),a.registerAction("legendInverseSelect","legendinverseselect",curry$1(legendSelectActionHandler,"inverseSelect")),a.registerAction("legendSelect","legendselected",curry$1(legendSelectActionHandler,"select")),a.registerAction("legendUnSelect","legendunselected",curry$1(legendSelectActionHandler,"unSelect"))}function install$b(a){a.registerComponentModel(LegendModel$1),a.registerComponentView(LegendView$1),a.registerProcessor(a.PRIORITY.PROCESSOR.SERIES_FILTER,legendFilter),a.registerSubTypeDefaulter("legend",function(){return"plain"}),installLegendAction(a)}var ScrollableLegendModel=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.prototype.setScrollDataIndex=function(r){this.option.scrollDataIndex=r},n.prototype.init=function(r,o,l){var u=getLayoutParams(r);a.prototype.init.call(this,r,o,l),mergeAndNormalizeLayoutParams(this,r,u)},n.prototype.mergeOption=function(r,o){a.prototype.mergeOption.call(this,r,o),mergeAndNormalizeLayoutParams(this,this.option,r)},n.type="legend.scroll",n.defaultOption=inheritDefaultOption(LegendModel$1.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800}),n}(LegendModel$1);function mergeAndNormalizeLayoutParams(a,n,r){var o=a.getOrient(),l=[1,1];l[o.index]=0,mergeLayoutParam(n,r,{type:"box",ignoreSize:!!l})}const ScrollableLegendModel$1=ScrollableLegendModel;var Group=Group$4,WH=["width","height"],XY=["x","y"],ScrollableLegendView=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r.newlineDisabled=!0,r._currentIndex=0,r}return n.prototype.init=function(){a.prototype.init.call(this),this.group.add(this._containerGroup=new Group),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new Group)},n.prototype.resetInner=function(){a.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},n.prototype.renderInner=function(r,o,l,u,c,h,d){var p=this;a.prototype.renderInner.call(this,r,o,l,u,c,h,d);var f=this._controllerGroup,g=o.get("pageIconSize",!0),y=isArray$1(g)?g:[g,g];_("pagePrev",0);var v=o.getModel("pageTextStyle");f.add(new ZRText$1({name:"pageText",style:{text:"xx/xx",fill:v.getTextColor(),font:v.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),_("pageNext",1);function _(x,S){var T=x+"DataIndex",M=createIcon(o.get("pageIcons",!0)[o.getOrient().name][S],{onclick:bind$1(p._pageGo,p,T,o,u)},{x:-y[0]/2,y:-y[1]/2,width:y[0],height:y[1]});M.name=x,f.add(M)}},n.prototype.layoutInner=function(r,o,l,u,c,h){var d=this.getSelectorGroup(),p=r.getOrient().index,f=WH[p],g=XY[p],y=WH[1-p],v=XY[1-p];c&&box("horizontal",d,r.get("selectorItemGap",!0));var _=r.get("selectorButtonGap",!0),x=d.getBoundingRect(),S=[-x.x,-x.y],T=clone$4(l);c&&(T[f]=l[f]-x[f]-_);var M=this._layoutContentAndController(r,u,T,p,f,y,v,g);if(c){if(h==="end")S[p]+=M[f]+_;else{var b=x[f]+_;S[p]-=b,M[g]-=b}M[f]+=x[f]+_,S[1-p]+=M[v]+M[y]/2-x[y]/2,M[y]=Math.max(M[y],x[y]),M[v]=Math.min(M[v],x[v]+S[1-p]),d.x=S[0],d.y=S[1],d.markRedraw()}return M},n.prototype._layoutContentAndController=function(r,o,l,u,c,h,d,p){var f=this.getContentGroup(),g=this._containerGroup,y=this._controllerGroup;box(r.get("orient"),f,r.get("itemGap"),u?l.width:null,u?null:l.height),box("horizontal",y,r.get("pageButtonItemGap",!0));var v=f.getBoundingRect(),_=y.getBoundingRect(),x=this._showController=v[c]>l[c],S=[-v.x,-v.y];o||(S[u]=f[p]);var T=[0,0],M=[-_.x,-_.y],b=retrieve2(r.get("pageButtonGap",!0),r.get("itemGap",!0));if(x){var A=r.get("pageButtonPosition",!0);A==="end"?M[u]+=l[c]-_[c]:T[u]+=_[c]+b}M[1-u]+=v[h]/2-_[h]/2,f.setPosition(S),g.setPosition(T),y.setPosition(M);var I={x:0,y:0};if(I[c]=x?l[c]:v[c],I[h]=Math.max(v[h],_[h]),I[d]=Math.min(0,_[d]+M[1-u]),g.__rectSize=l[c],x){var w={x:0,y:0};w[c]=Math.max(l[c]-_[c]-b,0),w[h]=I[h],g.setClipPath(new Rect$3({shape:w})),g.__rectSize=w[c]}else y.eachChild(function(E){E.attr({invisible:!0,silent:!0})});var C=this._getPageInfo(r);return C.pageIndex!=null&&updateProps$1(f,{x:C.contentPosition[0],y:C.contentPosition[1]},x?r:null),this._updatePageInfoView(r,C),I},n.prototype._pageGo=function(r,o,l){var u=this._getPageInfo(o)[r];u!=null&&l.dispatchAction({type:"legendScroll",scrollDataIndex:u,legendId:o.id})},n.prototype._updatePageInfoView=function(r,o){var l=this._controllerGroup;each$f(["pagePrev","pageNext"],function(f){var g=f+"DataIndex",y=o[g]!=null,v=l.childOfName(f);v&&(v.setStyle("fill",y?r.get("pageIconColor",!0):r.get("pageIconInactiveColor",!0)),v.cursor=y?"pointer":"default")});var u=l.childOfName("pageText"),c=r.get("pageFormatter"),h=o.pageIndex,d=h!=null?h+1:0,p=o.pageCount;u&&c&&u.setStyle("text",isString(c)?c.replace("{current}",d==null?"":d+"").replace("{total}",p==null?"":p+""):c({current:d,total:p}))},n.prototype._getPageInfo=function(r){var o=r.get("scrollDataIndex",!0),l=this.getContentGroup(),u=this._containerGroup.__rectSize,c=r.getOrient().index,h=WH[c],d=XY[c],p=this._findTargetItemIndex(o),f=l.children(),g=f[p],y=f.length,v=y?1:0,_={contentPosition:[l.x,l.y],pageCount:v,pageIndex:v-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!g)return _;var x=A(g);_.contentPosition[c]=-x.s;for(var S=p+1,T=x,M=x,b=null;S<=y;++S)b=A(f[S]),(!b&&M.e>T.s+u||b&&!I(b,T.s))&&(M.i>T.i?T=M:T=b,T&&(_.pageNextDataIndex==null&&(_.pageNextDataIndex=T.i),++_.pageCount)),M=b;for(var S=p-1,T=x,M=x,b=null;S>=-1;--S)b=A(f[S]),(!b||!I(M,b.s))&&T.i<M.i&&(M=T,_.pagePrevDataIndex==null&&(_.pagePrevDataIndex=T.i),++_.pageCount,++_.pageIndex),T=b;return _;function A(w){if(w){var C=w.getBoundingRect(),E=C[d]+w[d];return{s:E,e:E+C[h],i:w.__legendDataIndex}}}function I(w,C){return w.e>=C&&w.s<=C+u}},n.prototype._findTargetItemIndex=function(r){if(!this._showController)return 0;var o,l=this.getContentGroup(),u;return l.eachChild(function(c,h){var d=c.__legendDataIndex;u==null&&d!=null&&(u=h),d===r&&(o=h)}),o!=null?o:u},n.type="legend.scroll",n}(LegendView$1);const ScrollableLegendView$1=ScrollableLegendView;function installScrollableLegendAction(a){a.registerAction("legendScroll","legendscroll",function(n,r){var o=n.scrollDataIndex;o!=null&&r.eachComponent({mainType:"legend",subType:"scroll",query:n},function(l){l.setScrollDataIndex(o)})})}function install$a(a){use(install$b),a.registerComponentModel(ScrollableLegendModel$1),a.registerComponentView(ScrollableLegendView$1),installScrollableLegendAction(a)}function install$9(a){use(install$b),use(install$a)}var InsideZoomModel=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.type="dataZoom.inside",n.defaultOption=inheritDefaultOption(DataZoomModel$1.defaultOption,{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),n}(DataZoomModel$1);const InsideZoomModel$1=InsideZoomModel;var inner$1=makeInner();function setViewInfoToCoordSysRecord(a,n,r){inner$1(a).coordSysRecordMap.each(function(o){var l=o.dataZoomInfoMap.get(n.uid);l&&(l.getRange=r)})}function disposeCoordSysRecordIfNeeded(a,n){for(var r=inner$1(a).coordSysRecordMap,o=r.keys(),l=0;l<o.length;l++){var u=o[l],c=r.get(u),h=c.dataZoomInfoMap;if(h){var d=n.uid,p=h.get(d);p&&(h.removeKey(d),h.keys().length||disposeCoordSysRecord(r,c))}}}function disposeCoordSysRecord(a,n){if(n){a.removeKey(n.model.uid);var r=n.controller;r&&r.dispose()}}function createCoordSysRecord(a,n){var r={model:n,containsPoint:curry$1(containsPoint,n),dispatchAction:curry$1(dispatchAction,a),dataZoomInfoMap:null,controller:null},o=r.controller=new RoamController$1(a.getZr());return each$f(["pan","zoom","scrollMove"],function(l){o.on(l,function(u){var c=[];r.dataZoomInfoMap.each(function(h){if(u.isAvailableBehavior(h.model.option)){var d=(h.getRange||{})[l],p=d&&d(h.dzReferCoordSysInfo,r.model.mainType,r.controller,u);!h.model.get("disabled",!0)&&p&&c.push({dataZoomId:h.model.id,start:p[0],end:p[1]})}}),c.length&&r.dispatchAction(c)})}),r}function dispatchAction(a,n){a.isDisposed()||a.dispatchAction({type:"dataZoom",animation:{easing:"cubicOut",duration:100},batch:n})}function containsPoint(a,n,r,o){return a.coordinateSystem.containPoint([r,o])}function mergeControllerParams(a){var n,r="type_",o={type_true:2,type_move:1,type_false:0,type_undefined:-1},l=!0;return a.each(function(u){var c=u.model,h=c.get("disabled",!0)?!1:c.get("zoomLock",!0)?"move":!0;o[r+h]>o[r+n]&&(n=h),l=l&&c.get("preventDefaultMouseMove",!0)}),{controlType:n,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!l}}}function installDataZoomRoamProcessor(a){a.registerProcessor(a.PRIORITY.PROCESSOR.FILTER,function(n,r){var o=inner$1(r),l=o.coordSysRecordMap||(o.coordSysRecordMap=createHashMap());l.each(function(u){u.dataZoomInfoMap=null}),n.eachComponent({mainType:"dataZoom",subType:"inside"},function(u){var c=collectReferCoordSysModelInfo(u);each$f(c.infoList,function(h){var d=h.model.uid,p=l.get(d)||l.set(d,createCoordSysRecord(r,h.model)),f=p.dataZoomInfoMap||(p.dataZoomInfoMap=createHashMap());f.set(u.uid,{dzReferCoordSysInfo:h,model:u,getRange:null})})}),l.each(function(u){var c=u.controller,h,d=u.dataZoomInfoMap;if(d){var p=d.keys()[0];p!=null&&(h=d.get(p))}if(!h){disposeCoordSysRecord(l,u);return}var f=mergeControllerParams(d);c.enable(f.controlType,f.opt),c.setPointerChecker(u.containsPoint),createOrUpdate(u,"dispatchAction",h.model.get("throttle",!0),"fixRate")})})}var InsideZoomView=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type="dataZoom.inside",r}return n.prototype.render=function(r,o,l){if(a.prototype.render.apply(this,arguments),r.noTarget()){this._clear();return}this.range=r.getPercentRange(),setViewInfoToCoordSysRecord(l,r,{pan:bind$1(getRangeHandlers.pan,this),zoom:bind$1(getRangeHandlers.zoom,this),scrollMove:bind$1(getRangeHandlers.scrollMove,this)})},n.prototype.dispose=function(){this._clear(),a.prototype.dispose.apply(this,arguments)},n.prototype._clear=function(){disposeCoordSysRecordIfNeeded(this.api,this.dataZoomModel),this.range=null},n.type="dataZoom.inside",n}(DataZoomView$1),getRangeHandlers={zoom:function(a,n,r,o){var l=this.range,u=l.slice(),c=a.axisModels[0];if(c){var h=getDirectionInfo[n](null,[o.originX,o.originY],c,r,a),d=(h.signal>0?h.pixelStart+h.pixelLength-h.pixel:h.pixel-h.pixelStart)/h.pixelLength*(u[1]-u[0])+u[0],p=Math.max(1/o.scale,0);u[0]=(u[0]-d)*p+d,u[1]=(u[1]-d)*p+d;var f=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();if(sliderMove(0,u,[0,100],0,f.minSpan,f.maxSpan),this.range=u,l[0]!==u[0]||l[1]!==u[1])return u}},pan:makeMover(function(a,n,r,o,l,u){var c=getDirectionInfo[o]([u.oldX,u.oldY],[u.newX,u.newY],n,l,r);return c.signal*(a[1]-a[0])*c.pixel/c.pixelLength}),scrollMove:makeMover(function(a,n,r,o,l,u){var c=getDirectionInfo[o]([0,0],[u.scrollDelta,u.scrollDelta],n,l,r);return c.signal*(a[1]-a[0])*u.scrollDelta})};function makeMover(a){return function(n,r,o,l){var u=this.range,c=u.slice(),h=n.axisModels[0];if(h){var d=a(c,h,n,r,o,l);if(sliderMove(d,c,[0,100],"all"),this.range=c,u[0]!==c[0]||u[1]!==c[1])return c}}}var getDirectionInfo={grid:function(a,n,r,o,l){var u=r.axis,c={},h=l.model.coordinateSystem.getRect();return a=a||[0,0],u.dim==="x"?(c.pixel=n[0]-a[0],c.pixelLength=h.width,c.pixelStart=h.x,c.signal=u.inverse?1:-1):(c.pixel=n[1]-a[1],c.pixelLength=h.height,c.pixelStart=h.y,c.signal=u.inverse?-1:1),c},polar:function(a,n,r,o,l){var u=r.axis,c={},h=l.model.coordinateSystem,d=h.getRadiusAxis().getExtent(),p=h.getAngleAxis().getExtent();return a=a?h.pointToCoord(a):[0,0],n=h.pointToCoord(n),r.mainType==="radiusAxis"?(c.pixel=n[0]-a[0],c.pixelLength=d[1]-d[0],c.pixelStart=d[0],c.signal=u.inverse?1:-1):(c.pixel=n[1]-a[1],c.pixelLength=p[1]-p[0],c.pixelStart=p[0],c.signal=u.inverse?-1:1),c},singleAxis:function(a,n,r,o,l){var u=r.axis,c=l.model.coordinateSystem.getRect(),h={};return a=a||[0,0],u.orient==="horizontal"?(h.pixel=n[0]-a[0],h.pixelLength=c.width,h.pixelStart=c.x,h.signal=u.inverse?1:-1):(h.pixel=n[1]-a[1],h.pixelLength=c.height,h.pixelStart=c.y,h.signal=u.inverse?-1:1),h}};const InsideZoomView$1=InsideZoomView;function install$8(a){installCommon$1(a),a.registerComponentModel(InsideZoomModel$1),a.registerComponentView(InsideZoomView$1),installDataZoomRoamProcessor(a)}var SliderZoomModel=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.type="dataZoom.slider",n.layoutMode="box",n.defaultOption=inheritDefaultOption(DataZoomModel$1.defaultOption,{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,borderColor:"#d2dbee",borderRadius:3,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#d2dbee",width:.5},areaStyle:{color:"#d2dbee",opacity:.2}},selectedDataBackground:{lineStyle:{color:"#8fb0f7",width:.5},areaStyle:{color:"#8fb0f7",opacity:.2}},fillerColor:"rgba(135,175,274,0.2)",handleIcon:"path://M-9.35,34.56V42m0-40V9.5m-2,0h4a2,2,0,0,1,2,2v21a2,2,0,0,1-2,2h-4a2,2,0,0,1-2-2v-21A2,2,0,0,1-11.35,9.5Z",handleSize:"100%",handleStyle:{color:"#fff",borderColor:"#ACB8D1"},moveHandleSize:7,moveHandleIcon:"path://M-320.9-50L-320.9-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-348-41-339-50-320.9-50z M-212.3-50L-212.3-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-239.4-41-230.4-50-212.3-50z M-103.7-50L-103.7-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-130.9-41-121.8-50-103.7-50z",moveHandleStyle:{color:"#D2DBEE",opacity:.7},showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:"#6E7079"},brushSelect:!0,brushStyle:{color:"rgba(135,175,274,0.15)"},emphasis:{handleLabel:{show:!0},handleStyle:{borderColor:"#8FB0F7"},moveHandleStyle:{color:"#8FB0F7"}}}),n}(DataZoomModel$1);const SliderZoomModel$1=SliderZoomModel;var Rect=Rect$3,DEFAULT_LOCATION_EDGE_GAP=7,DEFAULT_FRAME_BORDER_WIDTH=1,DEFAULT_FILLER_SIZE=30,DEFAULT_MOVE_HANDLE_SIZE=7,HORIZONTAL="horizontal",VERTICAL="vertical",LABEL_GAP=5,SHOW_DATA_SHADOW_SERIES_TYPE=["line","bar","candlestick","scatter"],REALTIME_ANIMATION_CONFIG={easing:"cubicOut",duration:100,delay:0},SliderZoomView=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r._displayables={},r}return n.prototype.init=function(r,o){this.api=o,this._onBrush=bind$1(this._onBrush,this),this._onBrushEnd=bind$1(this._onBrushEnd,this)},n.prototype.render=function(r,o,l,u){if(a.prototype.render.apply(this,arguments),createOrUpdate(this,"_dispatchZoomAction",r.get("throttle"),"fixRate"),this._orient=r.getOrient(),r.get("show")===!1){this.group.removeAll();return}if(r.noTarget()){this._clear(),this.group.removeAll();return}(!u||u.type!=="dataZoom"||u.from!==this.uid)&&this._buildView(),this._updateView()},n.prototype.dispose=function(){this._clear(),a.prototype.dispose.apply(this,arguments)},n.prototype._clear=function(){clear$1(this,"_dispatchZoomAction");var r=this.api.getZr();r.off("mousemove",this._onBrush),r.off("mouseup",this._onBrushEnd)},n.prototype._buildView=function(){var r=this.group;r.removeAll(),this._brushing=!1,this._displayables.brushRect=null,this._resetLocation(),this._resetInterval();var o=this._displayables.sliderGroup=new Group$4;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),r.add(o),this._positionGroup()},n.prototype._resetLocation=function(){var r=this.dataZoomModel,o=this.api,l=r.get("brushSelect"),u=l?DEFAULT_MOVE_HANDLE_SIZE:0,c=this._findCoordRect(),h={width:o.getWidth(),height:o.getHeight()},d=this._orient===HORIZONTAL?{right:h.width-c.x-c.width,top:h.height-DEFAULT_FILLER_SIZE-DEFAULT_LOCATION_EDGE_GAP-u,width:c.width,height:DEFAULT_FILLER_SIZE}:{right:DEFAULT_LOCATION_EDGE_GAP,top:c.y,width:DEFAULT_FILLER_SIZE,height:c.height},p=getLayoutParams(r.option);each$f(["right","top","width","height"],function(g){p[g]==="ph"&&(p[g]=d[g])});var f=getLayoutRect(p,h);this._location={x:f.x,y:f.y},this._size=[f.width,f.height],this._orient===VERTICAL&&this._size.reverse()},n.prototype._positionGroup=function(){var r=this.group,o=this._location,l=this._orient,u=this.dataZoomModel.getFirstTargetAxisModel(),c=u&&u.get("inverse"),h=this._displayables.sliderGroup,d=(this._dataShadowInfo||{}).otherAxisInverse;h.attr(l===HORIZONTAL&&!c?{scaleY:d?1:-1,scaleX:1}:l===HORIZONTAL&&c?{scaleY:d?1:-1,scaleX:-1}:l===VERTICAL&&!c?{scaleY:d?-1:1,scaleX:1,rotation:Math.PI/2}:{scaleY:d?-1:1,scaleX:-1,rotation:Math.PI/2});var p=r.getBoundingRect([h]);r.x=o.x-p.x,r.y=o.y-p.y,r.markRedraw()},n.prototype._getViewExtent=function(){return[0,this._size[0]]},n.prototype._renderBackground=function(){var r=this.dataZoomModel,o=this._size,l=this._displayables.sliderGroup,u=r.get("brushSelect");l.add(new Rect({silent:!0,shape:{x:0,y:0,width:o[0],height:o[1]},style:{fill:r.get("backgroundColor")},z2:-40}));var c=new Rect({shape:{x:0,y:0,width:o[0],height:o[1]},style:{fill:"transparent"},z2:0,onclick:bind$1(this._onClickPanel,this)}),h=this.api.getZr();u?(c.on("mousedown",this._onBrushStart,this),c.cursor="crosshair",h.on("mousemove",this._onBrush),h.on("mouseup",this._onBrushEnd)):(h.off("mousemove",this._onBrush),h.off("mouseup",this._onBrushEnd)),l.add(c)},n.prototype._renderDataShadow=function(){var r=this._dataShadowInfo=this._prepareDataShadowInfo();if(this._displayables.dataShadowSegs=[],!r)return;var o=this._size,l=this._shadowSize||[],u=r.series,c=u.getRawData(),h=u.getShadowDim&&u.getShadowDim(),d=h&&c.getDimensionInfo(h)?u.getShadowDim():r.otherDim;if(d==null)return;var p=this._shadowPolygonPts,f=this._shadowPolylinePts;if(c!==this._shadowData||d!==this._shadowDim||o[0]!==l[0]||o[1]!==l[1]){var g=c.getDataExtent(d),y=(g[1]-g[0])*.3;g=[g[0]-y,g[1]+y];var v=[0,o[1]],_=[0,o[0]],x=[[o[0],0],[0,0]],S=[],T=_[1]/(c.count()-1),M=0,b=Math.round(c.count()/o[0]),A;c.each([d],function(P,D){if(b>0&&D%b){M+=T;return}var L=P==null||isNaN(P)||P==="",R=L?0:linearMap$2(P,g,v,!0);L&&!A&&D?(x.push([x[x.length-1][0],0]),S.push([S[S.length-1][0],0])):!L&&A&&(x.push([M,0]),S.push([M,0])),x.push([M,R]),S.push([M,R]),M+=T,A=L}),p=this._shadowPolygonPts=x,f=this._shadowPolylinePts=S}this._shadowData=c,this._shadowDim=d,this._shadowSize=[o[0],o[1]];var I=this.dataZoomModel;function w(P){var D=I.getModel(P?"selectedDataBackground":"dataBackground"),L=new Group$4,R=new Polygon$1({shape:{points:p},segmentIgnoreThreshold:1,style:D.getModel("areaStyle").getAreaStyle(),silent:!0,z2:-20}),O=new Polyline$3({shape:{points:f},segmentIgnoreThreshold:1,style:D.getModel("lineStyle").getLineStyle(),silent:!0,z2:-19});return L.add(R),L.add(O),L}for(var C=0;C<3;C++){var E=w(C===1);this._displayables.sliderGroup.add(E),this._displayables.dataShadowSegs.push(E)}},n.prototype._prepareDataShadowInfo=function(){var r=this.dataZoomModel,o=r.get("showDataShadow");if(o!==!1){var l,u=this.ecModel;return r.eachTargetAxis(function(c,h){var d=r.getAxisProxy(c,h).getTargetSeriesModels();each$f(d,function(p){if(!l&&!(o!==!0&&indexOf(SHOW_DATA_SHADOW_SERIES_TYPE,p.get("type"))<0)){var f=u.getComponent(getAxisMainType(c),h).axis,g=getOtherDim(c),y,v=p.coordinateSystem;g!=null&&v.getOtherAxis&&(y=v.getOtherAxis(f).inverse),g=p.getData().mapDimension(g),l={thisAxis:f,series:p,thisDim:c,otherDim:g,otherAxisInverse:y}}},this)},this),l}},n.prototype._renderHandle=function(){var r=this.group,o=this._displayables,l=o.handles=[null,null],u=o.handleLabels=[null,null],c=this._displayables.sliderGroup,h=this._size,d=this.dataZoomModel,p=this.api,f=d.get("borderRadius")||0,g=d.get("brushSelect"),y=o.filler=new Rect({silent:g,style:{fill:d.get("fillerColor")},textConfig:{position:"inside"}});c.add(y),c.add(new Rect({silent:!0,subPixelOptimize:!0,shape:{x:0,y:0,width:h[0],height:h[1],r:f},style:{stroke:d.get("dataBackgroundColor")||d.get("borderColor"),lineWidth:DEFAULT_FRAME_BORDER_WIDTH,fill:"rgba(0,0,0,0)"}})),each$f([0,1],function(b){var A=d.get("handleIcon");!symbolBuildProxies[A]&&A.indexOf("path://")<0&&A.indexOf("image://")<0&&(A="path://"+A,deprecateLog("handleIcon now needs 'path://' prefix when using a path string"));var I=createSymbol$1(A,-1,0,2,2,null,!0);I.attr({cursor:getCursor$1(this._orient),draggable:!0,drift:bind$1(this._onDragMove,this,b),ondragend:bind$1(this._onDragEnd,this),onmouseover:bind$1(this._showDataInfo,this,!0),onmouseout:bind$1(this._showDataInfo,this,!1),z2:5});var w=I.getBoundingRect(),C=d.get("handleSize");this._handleHeight=parsePercent(C,this._size[1]),this._handleWidth=w.width/w.height*this._handleHeight,I.setStyle(d.getModel("handleStyle").getItemStyle()),I.style.strokeNoScale=!0,I.rectHover=!0,I.ensureState("emphasis").style=d.getModel(["emphasis","handleStyle"]).getItemStyle(),enableHoverEmphasis(I);var E=d.get("handleColor");E!=null&&(I.style.fill=E),c.add(l[b]=I);var P=d.getModel("textStyle"),D=d.get("handleLabel")||{},L=D.show||!1;r.add(u[b]=new ZRText$1({silent:!0,invisible:!L,style:createTextStyle$1(P,{x:0,y:0,text:"",verticalAlign:"middle",align:"center",fill:P.getTextColor(),font:P.getFont()}),z2:10}))},this);var v=y;if(g){var _=parsePercent(d.get("moveHandleSize"),h[1]),x=o.moveHandle=new Rect$3({style:d.getModel("moveHandleStyle").getItemStyle(),silent:!0,shape:{r:[0,0,2,2],y:h[1]-.5,height:_}}),S=_*.8,T=o.moveHandleIcon=createSymbol$1(d.get("moveHandleIcon"),-S/2,-S/2,S,S,"#fff",!0);T.silent=!0,T.y=h[1]+_/2-.5,x.ensureState("emphasis").style=d.getModel(["emphasis","moveHandleStyle"]).getItemStyle();var M=Math.min(h[1]/2,Math.max(_,10));v=o.moveZone=new Rect$3({invisible:!0,shape:{y:h[1]-M,height:_+M}}),v.on("mouseover",function(){p.enterEmphasis(x)}).on("mouseout",function(){p.leaveEmphasis(x)}),c.add(x),c.add(T),c.add(v)}v.attr({draggable:!0,cursor:getCursor$1(this._orient),drift:bind$1(this._onDragMove,this,"all"),ondragstart:bind$1(this._showDataInfo,this,!0),ondragend:bind$1(this._onDragEnd,this),onmouseover:bind$1(this._showDataInfo,this,!0),onmouseout:bind$1(this._showDataInfo,this,!1)})},n.prototype._resetInterval=function(){var r=this._range=this.dataZoomModel.getPercentRange(),o=this._getViewExtent();this._handleEnds=[linearMap$2(r[0],[0,100],o,!0),linearMap$2(r[1],[0,100],o,!0)]},n.prototype._updateInterval=function(r,o){var l=this.dataZoomModel,u=this._handleEnds,c=this._getViewExtent(),h=l.findRepresentativeAxisProxy().getMinMaxSpan(),d=[0,100];sliderMove(o,u,c,l.get("zoomLock")?"all":r,h.minSpan!=null?linearMap$2(h.minSpan,d,c,!0):null,h.maxSpan!=null?linearMap$2(h.maxSpan,d,c,!0):null);var p=this._range,f=this._range=asc$2([linearMap$2(u[0],c,d,!0),linearMap$2(u[1],c,d,!0)]);return!p||p[0]!==f[0]||p[1]!==f[1]},n.prototype._updateView=function(r){var o=this._displayables,l=this._handleEnds,u=asc$2(l.slice()),c=this._size;each$f([0,1],function(v){var _=o.handles[v],x=this._handleHeight;_.attr({scaleX:x/2,scaleY:x/2,x:l[v]+(v?-1:1),y:c[1]/2-x/2})},this),o.filler.setShape({x:u[0],y:0,width:u[1]-u[0],height:c[1]});var h={x:u[0],width:u[1]-u[0]};o.moveHandle&&(o.moveHandle.setShape(h),o.moveZone.setShape(h),o.moveZone.getBoundingRect(),o.moveHandleIcon&&o.moveHandleIcon.attr("x",h.x+h.width/2));for(var d=o.dataShadowSegs,p=[0,u[0],u[1],c[0]],f=0;f<d.length;f++){var g=d[f],y=g.getClipPath();y||(y=new Rect$3,g.setClipPath(y)),y.setShape({x:p[f],y:0,width:p[f+1]-p[f],height:c[1]})}this._updateDataInfo(r)},n.prototype._updateDataInfo=function(r){var o=this.dataZoomModel,l=this._displayables,u=l.handleLabels,c=this._orient,h=["",""];if(o.get("showDetail")){var d=o.findRepresentativeAxisProxy();if(d){var p=d.getAxisModel().axis,f=this._range,g=r?d.calculateDataWindow({start:f[0],end:f[1]}).valueWindow:d.getDataValueWindow();h=[this._formatLabel(g[0],p),this._formatLabel(g[1],p)]}}var y=asc$2(this._handleEnds.slice());v.call(this,0),v.call(this,1);function v(_){var x=getTransform$1(l.handles[_].parent,this.group),S=transformDirection(_===0?"right":"left",x),T=this._handleWidth/2+LABEL_GAP,M=applyTransform([y[_]+(_===0?-T:T),this._size[1]/2],x);u[_].setStyle({x:M[0],y:M[1],verticalAlign:c===HORIZONTAL?"middle":S,align:c===HORIZONTAL?S:"center",text:h[_]})}},n.prototype._formatLabel=function(r,o){var l=this.dataZoomModel,u=l.get("labelFormatter"),c=l.get("labelPrecision");(c==null||c==="auto")&&(c=o.getPixelPrecision());var h=r==null||isNaN(r)?"":o.type==="category"||o.type==="time"?o.scale.getLabel({value:Math.round(r)}):r.toFixed(Math.min(c,20));return isFunction(u)?u(r,h):isString(u)?u.replace("{value}",h):h},n.prototype._showDataInfo=function(r){var o=this.dataZoomModel.get("handleLabel")||{},l=o.show||!1,u=this.dataZoomModel.getModel(["emphasis","handleLabel"]),c=u.get("show")||!1,h=r||this._dragging?c:l,d=this._displayables,p=d.handleLabels;p[0].attr("invisible",!h),p[1].attr("invisible",!h),d.moveHandle&&this.api[h?"enterEmphasis":"leaveEmphasis"](d.moveHandle,1)},n.prototype._onDragMove=function(r,o,l,u){this._dragging=!0,stop(u.event);var c=this._displayables.sliderGroup.getLocalTransform(),h=applyTransform([o,l],c,!0),d=this._updateInterval(r,h[0]),p=this.dataZoomModel.get("realtime");this._updateView(!p),d&&p&&this._dispatchZoomAction(!0)},n.prototype._onDragEnd=function(){this._dragging=!1,this._showDataInfo(!1);var r=this.dataZoomModel.get("realtime");!r&&this._dispatchZoomAction(!1)},n.prototype._onClickPanel=function(r){var o=this._size,l=this._displayables.sliderGroup.transformCoordToLocal(r.offsetX,r.offsetY);if(!(l[0]<0||l[0]>o[0]||l[1]<0||l[1]>o[1])){var u=this._handleEnds,c=(u[0]+u[1])/2,h=this._updateInterval("all",l[0]-c);this._updateView(),h&&this._dispatchZoomAction(!1)}},n.prototype._onBrushStart=function(r){var o=r.offsetX,l=r.offsetY;this._brushStart=new Point$1(o,l),this._brushing=!0,this._brushStartTime=+new Date},n.prototype._onBrushEnd=function(r){if(this._brushing){var o=this._displayables.brushRect;if(this._brushing=!1,!!o){o.attr("ignore",!0);var l=o.shape,u=+new Date;if(!(u-this._brushStartTime<200&&Math.abs(l.width)<5)){var c=this._getViewExtent(),h=[0,100];this._range=asc$2([linearMap$2(l.x,c,h,!0),linearMap$2(l.x+l.width,c,h,!0)]),this._handleEnds=[l.x,l.x+l.width],this._updateView(),this._dispatchZoomAction(!1)}}}},n.prototype._onBrush=function(r){this._brushing&&(stop(r.event),this._updateBrushRect(r.offsetX,r.offsetY))},n.prototype._updateBrushRect=function(r,o){var l=this._displayables,u=this.dataZoomModel,c=l.brushRect;c||(c=l.brushRect=new Rect({silent:!0,style:u.getModel("brushStyle").getItemStyle()}),l.sliderGroup.add(c)),c.attr("ignore",!1);var h=this._brushStart,d=this._displayables.sliderGroup,p=d.transformCoordToLocal(r,o),f=d.transformCoordToLocal(h.x,h.y),g=this._size;p[0]=Math.max(Math.min(g[0],p[0]),0),c.setShape({x:f[0],y:0,width:p[0]-f[0],height:g[1]})},n.prototype._dispatchZoomAction=function(r){var o=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,animation:r?REALTIME_ANIMATION_CONFIG:null,start:o[0],end:o[1]})},n.prototype._findCoordRect=function(){var r,o=collectReferCoordSysModelInfo(this.dataZoomModel).infoList;if(!r&&o.length){var l=o[0].model.coordinateSystem;r=l.getRect&&l.getRect()}if(!r){var u=this.api.getWidth(),c=this.api.getHeight();r={x:u*.2,y:c*.2,width:u*.6,height:c*.6}}return r},n.type="dataZoom.slider",n}(DataZoomView$1);function getOtherDim(a){var n={x:"y",y:"x",radius:"angle",angle:"radius"};return n[a]}function getCursor$1(a){return a==="vertical"?"ns-resize":"ew-resize"}const SliderZoomView$1=SliderZoomView;function install$7(a){a.registerComponentModel(SliderZoomModel$1),a.registerComponentView(SliderZoomView$1),installCommon$1(a)}function install$6(a){use(install$8),use(install$7)}var visualDefault={get:function(a,n,r){var o=clone$4((defaultOption[a]||{})[n]);return r&&isArray$1(o)?o[o.length-1]:o}},defaultOption={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}};const visualDefault$1=visualDefault;var mapVisual=VisualMapping$1.mapVisual,eachVisual=VisualMapping$1.eachVisual,isArray=isArray$1,each$2=each$f,asc=asc$2,linearMap$1=linearMap$2,VisualMapModel=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r.stateList=["inRange","outOfRange"],r.replacableOptionKeys=["inRange","outOfRange","target","controller","color"],r.layoutMode={type:"box",ignoreSize:!0},r.dataBound=[-1/0,1/0],r.targetVisuals={},r.controllerVisuals={},r}return n.prototype.init=function(r,o,l){this.mergeDefaultAndTheme(r,l)},n.prototype.optionUpdated=function(r,o){var l=this.option;!o&&replaceVisualOption(l,r,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},n.prototype.resetVisual=function(r){var o=this.stateList;r=bind$1(r,this),this.controllerVisuals=createVisualMappings(this.option.controller,o,r),this.targetVisuals=createVisualMappings(this.option.target,o,r)},n.prototype.getItemSymbol=function(){return null},n.prototype.getTargetSeriesIndices=function(){var r=this.option.seriesIndex,o=[];return r==null||r==="all"?this.ecModel.eachSeries(function(l,u){o.push(u)}):o=normalizeToArray(r),o},n.prototype.eachTargetSeries=function(r,o){each$f(this.getTargetSeriesIndices(),function(l){var u=this.ecModel.getSeriesByIndex(l);u&&r.call(o,u)},this)},n.prototype.isTargetSeries=function(r){var o=!1;return this.eachTargetSeries(function(l){l===r&&(o=!0)}),o},n.prototype.formatValueText=function(r,o,l){var u=this.option,c=u.precision,h=this.dataBound,d=u.formatter,p;l=l||["<",">"],isArray$1(r)&&(r=r.slice(),p=!0);var f=o?r:p?[g(r[0]),g(r[1])]:g(r);if(isString(d))return d.replace("{value}",p?f[0]:f).replace("{value2}",p?f[1]:f);if(isFunction(d))return p?d(r[0],r[1]):d(r);if(p)return r[0]===h[0]?l[0]+" "+f[1]:r[1]===h[1]?l[1]+" "+f[0]:f[0]+" - "+f[1];return f;function g(y){return y===h[0]?"min":y===h[1]?"max":(+y).toFixed(Math.min(c,20))}},n.prototype.resetExtent=function(){var r=this.option,o=asc([r.min,r.max]);this._dataExtent=o},n.prototype.getDataDimensionIndex=function(r){var o=this.option.dimension;if(o!=null)return r.getDimensionIndex(o);for(var l=r.dimensions,u=l.length-1;u>=0;u--){var c=l[u],h=r.getDimensionInfo(c);if(!h.isCalculationCoord)return h.storeDimIndex}},n.prototype.getExtent=function(){return this._dataExtent.slice()},n.prototype.completeVisualOption=function(){var r=this.ecModel,o=this.option,l={inRange:o.inRange,outOfRange:o.outOfRange},u=o.target||(o.target={}),c=o.controller||(o.controller={});merge(u,l),merge(c,l);var h=this.isCategory();d.call(this,u),d.call(this,c),p.call(this,u,"inRange","outOfRange"),f.call(this,c);function d(g){isArray(o.color)&&!g.inRange&&(g.inRange={color:o.color.slice().reverse()}),g.inRange=g.inRange||{color:r.get("gradientColor")}}function p(g,y,v){var _=g[y],x=g[v];_&&!x&&(x=g[v]={},each$2(_,function(S,T){if(VisualMapping$1.isValidType(T)){var M=visualDefault$1.get(T,"inactive",h);M!=null&&(x[T]=M,T==="color"&&!x.hasOwnProperty("opacity")&&!x.hasOwnProperty("colorAlpha")&&(x.opacity=[0,0]))}}))}function f(g){var y=(g.inRange||{}).symbol||(g.outOfRange||{}).symbol,v=(g.inRange||{}).symbolSize||(g.outOfRange||{}).symbolSize,_=this.get("inactiveColor"),x=this.getItemSymbol(),S=x||"roundRect";each$2(this.stateList,function(T){var M=this.itemSize,b=g[T];b||(b=g[T]={color:h?_:[_]}),b.symbol==null&&(b.symbol=y&&clone$4(y)||(h?S:[S])),b.symbolSize==null&&(b.symbolSize=v&&clone$4(v)||(h?M[0]:[M[0],M[0]])),b.symbol=mapVisual(b.symbol,function(w){return w==="none"?S:w});var A=b.symbolSize;if(A!=null){var I=-1/0;eachVisual(A,function(w){w>I&&(I=w)}),b.symbolSize=mapVisual(A,function(w){return linearMap$1(w,[0,I],[0,M[0]],!0)})}},this)}},n.prototype.resetItemSize=function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},n.prototype.isCategory=function(){return!!this.option.categories},n.prototype.setSelected=function(r){},n.prototype.getSelected=function(){return null},n.prototype.getValueState=function(r){return null},n.prototype.getVisualMeta=function(r){return null},n.type="visualMap",n.dependencies=["series"],n.defaultOption={show:!0,z:4,seriesIndex:"all",min:0,max:200,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,textStyle:{color:"#333"}},n}(ComponentModel$1);const VisualMapModel$1=VisualMapModel;var DEFAULT_BAR_BOUND=[20,140],ContinuousModel=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.prototype.optionUpdated=function(r,o){a.prototype.optionUpdated.apply(this,arguments),this.resetExtent(),this.resetVisual(function(l){l.mappingMethod="linear",l.dataExtent=this.getExtent()}),this._resetRange()},n.prototype.resetItemSize=function(){a.prototype.resetItemSize.apply(this,arguments);var r=this.itemSize;(r[0]==null||isNaN(r[0]))&&(r[0]=DEFAULT_BAR_BOUND[0]),(r[1]==null||isNaN(r[1]))&&(r[1]=DEFAULT_BAR_BOUND[1])},n.prototype._resetRange=function(){var r=this.getExtent(),o=this.option.range;!o||o.auto?(r.auto=1,this.option.range=r):isArray$1(o)&&(o[0]>o[1]&&o.reverse(),o[0]=Math.max(o[0],r[0]),o[1]=Math.min(o[1],r[1]))},n.prototype.completeVisualOption=function(){a.prototype.completeVisualOption.apply(this,arguments),each$f(this.stateList,function(r){var o=this.option.controller[r].symbolSize;o&&o[0]!==o[1]&&(o[0]=o[1]/3)},this)},n.prototype.setSelected=function(r){this.option.range=r.slice(),this._resetRange()},n.prototype.getSelected=function(){var r=this.getExtent(),o=asc$2((this.get("range")||[]).slice());return o[0]>r[1]&&(o[0]=r[1]),o[1]>r[1]&&(o[1]=r[1]),o[0]<r[0]&&(o[0]=r[0]),o[1]<r[0]&&(o[1]=r[0]),o},n.prototype.getValueState=function(r){var o=this.option.range,l=this.getExtent();return(o[0]<=l[0]||o[0]<=r)&&(o[1]>=l[1]||r<=o[1])?"inRange":"outOfRange"},n.prototype.findTargetDataIndices=function(r){var o=[];return this.eachTargetSeries(function(l){var u=[],c=l.getData();c.each(this.getDataDimensionIndex(c),function(h,d){r[0]<=h&&h<=r[1]&&u.push(d)},this),o.push({seriesId:l.id,dataIndex:u})},this),o},n.prototype.getVisualMeta=function(r){var o=getColorStopValues(this,"outOfRange",this.getExtent()),l=getColorStopValues(this,"inRange",this.option.range.slice()),u=[];function c(v,_){u.push({value:v,color:r(v,_)})}for(var h=0,d=0,p=l.length,f=o.length;d<f&&(!l.length||o[d]<=l[0]);d++)o[d]<l[h]&&c(o[d],"outOfRange");for(var g=1;h<p;h++,g=0)g&&u.length&&c(l[h],"outOfRange"),c(l[h],"inRange");for(var g=1;d<f;d++)(!l.length||l[l.length-1]<o[d])&&(g&&(u.length&&c(u[u.length-1].value,"outOfRange"),g=0),c(o[d],"outOfRange"));var y=u.length;return{stops:u,outerColors:[y?u[0].color:"transparent",y?u[y-1].color:"transparent"]}},n.type="visualMap.continuous",n.defaultOption=inheritDefaultOption(VisualMapModel$1.defaultOption,{align:"auto",calculable:!1,hoverLink:!0,realtime:!0,handleIcon:"path://M-11.39,9.77h0a3.5,3.5,0,0,1-3.5,3.5h-22a3.5,3.5,0,0,1-3.5-3.5h0a3.5,3.5,0,0,1,3.5-3.5h22A3.5,3.5,0,0,1-11.39,9.77Z",handleSize:"120%",handleStyle:{borderColor:"#fff",borderWidth:1},indicatorIcon:"circle",indicatorSize:"50%",indicatorStyle:{borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}}),n}(VisualMapModel$1);function getColorStopValues(a,n,r){if(r[0]===r[1])return r.slice();for(var o=200,l=(r[1]-r[0])/o,u=r[0],c=[],h=0;h<=o&&u<r[1];h++)c.push(u),u+=l;return c.push(r[1]),c}const ContinuousModel$1=ContinuousModel;var VisualMapView=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r.autoPositionValues={left:1,right:1,top:1,bottom:1},r}return n.prototype.init=function(r,o){this.ecModel=r,this.api=o},n.prototype.render=function(r,o,l,u){if(this.visualMapModel=r,r.get("show")===!1){this.group.removeAll();return}this.doRender(r,o,l,u)},n.prototype.renderBackground=function(r){var o=this.visualMapModel,l=normalizeCssArray(o.get("padding")||0),u=r.getBoundingRect();r.add(new Rect$3({z2:-1,silent:!0,shape:{x:u.x-l[3],y:u.y-l[0],width:u.width+l[3]+l[1],height:u.height+l[0]+l[2]},style:{fill:o.get("backgroundColor"),stroke:o.get("borderColor"),lineWidth:o.get("borderWidth")}}))},n.prototype.getControllerVisual=function(r,o,l){l=l||{};var u=l.forceState,c=this.visualMapModel,h={};if(o==="color"){var d=c.get("contentColor");h.color=d}function p(v){return h[v]}function f(v,_){h[v]=_}var g=c.controllerVisuals[u||c.getValueState(r)],y=VisualMapping$1.prepareVisualTypes(g);return each$f(y,function(v){var _=g[v];l.convertOpacityToAlpha&&v==="opacity"&&(v="colorAlpha",_=g.__alphaForOpacity),VisualMapping$1.dependsOn(v,o)&&_&&_.applyVisual(r,p,f)}),h[o]},n.prototype.positionGroup=function(r){var o=this.visualMapModel,l=this.api;positionElement(r,o.getBoxLayoutParams(),{width:l.getWidth(),height:l.getHeight()})},n.prototype.doRender=function(r,o,l,u){},n.type="visualMap",n}(ComponentView$1);const VisualMapView$1=VisualMapView;var paramsSet=[["left","right","width"],["top","bottom","height"]];function getItemAlign(a,n,r){var o=a.option,l=o.align;if(l!=null&&l!=="auto")return l;for(var u={width:n.getWidth(),height:n.getHeight()},c=o.orient==="horizontal"?1:0,h=paramsSet[c],d=[0,null,10],p={},f=0;f<3;f++)p[paramsSet[1-c][f]]=d[f],p[h[f]]=f===2?r[0]:o[h[f]];var g=[["x","width",3],["y","height",0]][c],y=getLayoutRect(p,u,o.padding);return h[(y.margin[g[2]]||0)+y[g[0]]+y[g[1]]*.5<u[g[1]]*.5?0:1]}function makeHighDownBatch(a,n){return each$f(a||[],function(r){r.dataIndex!=null&&(r.dataIndexInside=r.dataIndex,r.dataIndex=null),r.highlightKey="visualMap"+(n?n.componentIndex:"")}),a}var linearMap=linearMap$2,each$1=each$f,mathMin=Math.min,mathMax=Math.max,HOVER_LINK_SIZE=12,HOVER_LINK_OUT=6,ContinuousView=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r._shapes={},r._dataInterval=[],r._handleEnds=[],r._hoverLinkDataIndices=[],r}return n.prototype.init=function(r,o){a.prototype.init.call(this,r,o),this._hoverLinkFromSeriesMouseOver=bind$1(this._hoverLinkFromSeriesMouseOver,this),this._hideIndicator=bind$1(this._hideIndicator,this)},n.prototype.doRender=function(r,o,l,u){(!u||u.type!=="selectDataRange"||u.from!==this.uid)&&this._buildView()},n.prototype._buildView=function(){this.group.removeAll();var r=this.visualMapModel,o=this.group;this._orient=r.get("orient"),this._useHandle=r.get("calculable"),this._resetInterval(),this._renderBar(o);var l=r.get("text");this._renderEndsText(o,l,0),this._renderEndsText(o,l,1),this._updateView(!0),this.renderBackground(o),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(o)},n.prototype._renderEndsText=function(r,o,l){if(o){var u=o[1-l];u=u!=null?u+"":"";var c=this.visualMapModel,h=c.get("textGap"),d=c.itemSize,p=this._shapes.mainGroup,f=this._applyTransform([d[0]/2,l===0?-h:d[1]+h],p),g=this._applyTransform(l===0?"bottom":"top",p),y=this._orient,v=this.visualMapModel.textStyleModel;this.group.add(new ZRText$1({style:createTextStyle$1(v,{x:f[0],y:f[1],verticalAlign:y==="horizontal"?"middle":g,align:y==="horizontal"?g:"center",text:u})}))}},n.prototype._renderBar=function(r){var o=this.visualMapModel,l=this._shapes,u=o.itemSize,c=this._orient,h=this._useHandle,d=getItemAlign(o,this.api,u),p=l.mainGroup=this._createBarGroup(d),f=new Group$4;p.add(f),f.add(l.outOfRange=createPolygon()),f.add(l.inRange=createPolygon(null,h?getCursor(this._orient):null,bind$1(this._dragHandle,this,"all",!1),bind$1(this._dragHandle,this,"all",!0))),f.setClipPath(new Rect$3({shape:{x:0,y:0,width:u[0],height:u[1],r:3}}));var g=o.textStyleModel.getTextRect("\u56FD"),y=mathMax(g.width,g.height);h&&(l.handleThumbs=[],l.handleLabels=[],l.handleLabelPoints=[],this._createHandle(o,p,0,u,y,c),this._createHandle(o,p,1,u,y,c)),this._createIndicator(o,p,u,y,c),r.add(p)},n.prototype._createHandle=function(r,o,l,u,c,h){var d=bind$1(this._dragHandle,this,l,!1),p=bind$1(this._dragHandle,this,l,!0),f=parsePercent$1(r.get("handleSize"),u[0]),g=createSymbol$1(r.get("handleIcon"),-f/2,-f/2,f,f,null,!0),y=getCursor(this._orient);g.attr({cursor:y,draggable:!0,drift:d,ondragend:p,onmousemove:function(T){stop(T.event)}}),g.x=u[0]/2,g.useStyle(r.getModel("handleStyle").getItemStyle()),g.setStyle({strokeNoScale:!0,strokeFirst:!0}),g.style.lineWidth*=2,g.ensureState("emphasis").style=r.getModel(["emphasis","handleStyle"]).getItemStyle(),setAsHighDownDispatcher(g,!0),o.add(g);var v=this.visualMapModel.textStyleModel,_=new ZRText$1({cursor:y,draggable:!0,drift:d,onmousemove:function(T){stop(T.event)},ondragend:p,style:createTextStyle$1(v,{x:0,y:0,text:""})});_.ensureState("blur").style={opacity:.1},_.stateTransition={duration:200},this.group.add(_);var x=[f,0],S=this._shapes;S.handleThumbs[l]=g,S.handleLabelPoints[l]=x,S.handleLabels[l]=_},n.prototype._createIndicator=function(r,o,l,u,c){var h=parsePercent$1(r.get("indicatorSize"),l[0]),d=createSymbol$1(r.get("indicatorIcon"),-h/2,-h/2,h,h,null,!0);d.attr({cursor:"move",invisible:!0,silent:!0,x:l[0]/2});var p=r.getModel("indicatorStyle").getItemStyle();if(d instanceof ZRImage$1){var f=d.style;d.useStyle(extend({image:f.image,x:f.x,y:f.y,width:f.width,height:f.height},p))}else d.useStyle(p);o.add(d);var g=this.visualMapModel.textStyleModel,y=new ZRText$1({silent:!0,invisible:!0,style:createTextStyle$1(g,{x:0,y:0,text:""})});this.group.add(y);var v=[(c==="horizontal"?u/2:HOVER_LINK_OUT)+l[0]/2,0],_=this._shapes;_.indicator=d,_.indicatorLabel=y,_.indicatorLabelPoint=v,this._firstShowIndicator=!0},n.prototype._dragHandle=function(r,o,l,u){if(this._useHandle){if(this._dragging=!o,!o){var c=this._applyTransform([l,u],this._shapes.mainGroup,!0);this._updateInterval(r,c[1]),this._hideIndicator(),this._updateView()}o===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),o?!this._hovering&&this._clearHoverLinkToSeries():useHoverLinkOnHandle(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[r],!1)}},n.prototype._resetInterval=function(){var r=this.visualMapModel,o=this._dataInterval=r.getSelected(),l=r.getExtent(),u=[0,r.itemSize[1]];this._handleEnds=[linearMap(o[0],l,u,!0),linearMap(o[1],l,u,!0)]},n.prototype._updateInterval=function(r,o){o=o||0;var l=this.visualMapModel,u=this._handleEnds,c=[0,l.itemSize[1]];sliderMove(o,u,c,r,0);var h=l.getExtent();this._dataInterval=[linearMap(u[0],c,h,!0),linearMap(u[1],c,h,!0)]},n.prototype._updateView=function(r){var o=this.visualMapModel,l=o.getExtent(),u=this._shapes,c=[0,o.itemSize[1]],h=r?c:this._handleEnds,d=this._createBarVisual(this._dataInterval,l,h,"inRange"),p=this._createBarVisual(l,l,c,"outOfRange");u.inRange.setStyle({fill:d.barColor}).setShape("points",d.barPoints),u.outOfRange.setStyle({fill:p.barColor}).setShape("points",p.barPoints),this._updateHandle(h,d)},n.prototype._createBarVisual=function(r,o,l,u){var c={forceState:u,convertOpacityToAlpha:!0},h=this._makeColorGradient(r,c),d=[this.getControllerVisual(r[0],"symbolSize",c),this.getControllerVisual(r[1],"symbolSize",c)],p=this._createBarPoints(l,d);return{barColor:new LinearGradient$1(0,0,0,1,h),barPoints:p,handlesColor:[h[0].color,h[h.length-1].color]}},n.prototype._makeColorGradient=function(r,o){var l=100,u=[],c=(r[1]-r[0])/l;u.push({color:this.getControllerVisual(r[0],"color",o),offset:0});for(var h=1;h<l;h++){var d=r[0]+c*h;if(d>r[1])break;u.push({color:this.getControllerVisual(d,"color",o),offset:h/l})}return u.push({color:this.getControllerVisual(r[1],"color",o),offset:1}),u},n.prototype._createBarPoints=function(r,o){var l=this.visualMapModel.itemSize;return[[l[0]-o[0],r[0]],[l[0],r[0]],[l[0],r[1]],[l[0]-o[1],r[1]]]},n.prototype._createBarGroup=function(r){var o=this._orient,l=this.visualMapModel.get("inverse");return new Group$4(o==="horizontal"&&!l?{scaleX:r==="bottom"?1:-1,rotation:Math.PI/2}:o==="horizontal"&&l?{scaleX:r==="bottom"?-1:1,rotation:-Math.PI/2}:o==="vertical"&&!l?{scaleX:r==="left"?1:-1,scaleY:-1}:{scaleX:r==="left"?1:-1})},n.prototype._updateHandle=function(r,o){if(this._useHandle){var l=this._shapes,u=this.visualMapModel,c=l.handleThumbs,h=l.handleLabels,d=u.itemSize,p=u.getExtent(),f=this._applyTransform("left",l.mainGroup);each$1([0,1],function(g){var y=c[g];y.setStyle("fill",o.handlesColor[g]),y.y=r[g];var v=linearMap(r[g],[0,d[1]],p,!0),_=this.getControllerVisual(v,"symbolSize");y.scaleX=y.scaleY=_/d[0],y.x=d[0]-_/2;var x=applyTransform(l.handleLabelPoints[g],getTransform$1(y,this.group));if(this._orient==="horizontal"){var S=f==="left"||f==="top"?(d[0]-_)/2:(d[0]-_)/-2;x[1]+=S}h[g].setStyle({x:x[0],y:x[1],text:u.formatValueText(this._dataInterval[g]),verticalAlign:"middle",align:this._orient==="vertical"?this._applyTransform("left",l.mainGroup):"center"})},this)}},n.prototype._showIndicator=function(r,o,l,u){var c=this.visualMapModel,h=c.getExtent(),d=c.itemSize,p=[0,d[1]],f=this._shapes,g=f.indicator;if(g){g.attr("invisible",!1);var y={convertOpacityToAlpha:!0},v=this.getControllerVisual(r,"color",y),_=this.getControllerVisual(r,"symbolSize"),x=linearMap(r,h,p,!0),S=d[0]-_/2,T={x:g.x,y:g.y};g.y=x,g.x=S;var M=applyTransform(f.indicatorLabelPoint,getTransform$1(g,this.group)),b=f.indicatorLabel;b.attr("invisible",!1);var A=this._applyTransform("left",f.mainGroup),I=this._orient,w=I==="horizontal";b.setStyle({text:(l||"")+c.formatValueText(o),verticalAlign:w?A:"middle",align:w?"center":A});var C={x:S,y:x,style:{fill:v}},E={style:{x:M[0],y:M[1]}};if(c.ecModel.isAnimationEnabled()&&!this._firstShowIndicator){var P={duration:100,easing:"cubicInOut",additive:!0};g.x=T.x,g.y=T.y,g.animateTo(C,P),b.animateTo(E,P)}else g.attr(C),b.attr(E);this._firstShowIndicator=!1;var D=this._shapes.handleLabels;if(D)for(var L=0;L<D.length;L++)this.api.enterBlur(D[L])}},n.prototype._enableHoverLinkToSeries=function(){var r=this;this._shapes.mainGroup.on("mousemove",function(o){if(r._hovering=!0,!r._dragging){var l=r.visualMapModel.itemSize,u=r._applyTransform([o.offsetX,o.offsetY],r._shapes.mainGroup,!0,!0);u[1]=mathMin(mathMax(0,u[1]),l[1]),r._doHoverLinkToSeries(u[1],0<=u[0]&&u[0]<=l[0])}}).on("mouseout",function(){r._hovering=!1,!r._dragging&&r._clearHoverLinkToSeries()})},n.prototype._enableHoverLinkFromSeries=function(){var r=this.api.getZr();this.visualMapModel.option.hoverLink?(r.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),r.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},n.prototype._doHoverLinkToSeries=function(r,o){var l=this.visualMapModel,u=l.itemSize;if(l.option.hoverLink){var c=[0,u[1]],h=l.getExtent();r=mathMin(mathMax(c[0],r),c[1]);var d=getHalfHoverLinkSize(l,h,c),p=[r-d,r+d],f=linearMap(r,c,h,!0),g=[linearMap(p[0],c,h,!0),linearMap(p[1],c,h,!0)];p[0]<c[0]&&(g[0]=-1/0),p[1]>c[1]&&(g[1]=1/0),o&&(g[0]===-1/0?this._showIndicator(f,g[1],"< ",d):g[1]===1/0?this._showIndicator(f,g[0],"> ",d):this._showIndicator(f,f,"\u2248 ",d));var y=this._hoverLinkDataIndices,v=[];(o||useHoverLinkOnHandle(l))&&(v=this._hoverLinkDataIndices=l.findTargetDataIndices(g));var _=compressBatches(y,v);this._dispatchHighDown("downplay",makeHighDownBatch(_[0],l)),this._dispatchHighDown("highlight",makeHighDownBatch(_[1],l))}},n.prototype._hoverLinkFromSeriesMouseOver=function(r){var o;if(findEventDispatcher(r.target,function(d){var p=getECData(d);if(p.dataIndex!=null)return o=p,!0},!0),!!o){var l=this.ecModel.getSeriesByIndex(o.seriesIndex),u=this.visualMapModel;if(u.isTargetSeries(l)){var c=l.getData(o.dataType),h=c.getStore().get(u.getDataDimensionIndex(c),o.dataIndex);isNaN(h)||this._showIndicator(h,h)}}},n.prototype._hideIndicator=function(){var r=this._shapes;r.indicator&&r.indicator.attr("invisible",!0),r.indicatorLabel&&r.indicatorLabel.attr("invisible",!0);var o=this._shapes.handleLabels;if(o)for(var l=0;l<o.length;l++)this.api.leaveBlur(o[l])},n.prototype._clearHoverLinkToSeries=function(){this._hideIndicator();var r=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",makeHighDownBatch(r,this.visualMapModel)),r.length=0},n.prototype._clearHoverLinkFromSeries=function(){this._hideIndicator();var r=this.api.getZr();r.off("mouseover",this._hoverLinkFromSeriesMouseOver),r.off("mouseout",this._hideIndicator)},n.prototype._applyTransform=function(r,o,l,u){var c=getTransform$1(o,u?null:this.group);return isArray$1(r)?applyTransform(r,c,l):transformDirection(r,c,l)},n.prototype._dispatchHighDown=function(r,o){o&&o.length&&this.api.dispatchAction({type:r,batch:o})},n.prototype.dispose=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},n.type="visualMap.continuous",n}(VisualMapView$1);function createPolygon(a,n,r,o){return new Polygon$1({shape:{points:a},draggable:!!r,cursor:n,drift:r,onmousemove:function(l){stop(l.event)},ondragend:o})}function getHalfHoverLinkSize(a,n,r){var o=HOVER_LINK_SIZE/2,l=a.get("hoverLinkDataSize");return l&&(o=linearMap(l,n,r,!0)/2),o}function useHoverLinkOnHandle(a){var n=a.get("hoverLinkOnHandle");return!!(n==null?a.get("realtime"):n)}function getCursor(a){return a==="vertical"?"ns-resize":"ew-resize"}const ContinuousView$1=ContinuousView;var visualMapActionInfo={type:"selectDataRange",event:"dataRangeSelected",update:"update"},visualMapActionHander=function(a,n){n.eachComponent({mainType:"visualMap",query:a},function(r){r.setSelected(a.selected)})},visualMapEncodingHandlers=[{createOnAllSeries:!0,reset:function(a,n){var r=[];return n.eachComponent("visualMap",function(o){var l=a.pipelineContext;!o.isTargetSeries(a)||l&&l.large||r.push(incrementalApplyVisual(o.stateList,o.targetVisuals,bind$1(o.getValueState,o),o.getDataDimensionIndex(a.getData())))}),r}},{createOnAllSeries:!0,reset:function(a,n){var r=a.getData(),o=[];n.eachComponent("visualMap",function(l){if(l.isTargetSeries(a)){var u=l.getVisualMeta(bind$1(getColorVisual,null,a,l))||{stops:[],outerColors:[]},c=l.getDataDimensionIndex(r);c>=0&&(u.dimension=c,o.push(u))}}),a.getData().setVisual("visualMeta",o)}}];function getColorVisual(a,n,r,o){for(var l=n.targetVisuals[o],u=VisualMapping$1.prepareVisualTypes(l),c={color:getVisualFromData(a.getData(),"color")},h=0,d=u.length;h<d;h++){var p=u[h],f=l[p==="opacity"?"__alphaForOpacity":p];f&&f.applyVisual(r,g,y)}return c.color;function g(v){return c[v]}function y(v,_){c[v]=_}}var each=each$f;function visualMapPreprocessor(a){var n=a&&a.visualMap;isArray$1(n)||(n=n?[n]:[]),each(n,function(r){if(r){has(r,"splitList")&&!has(r,"pieces")&&(r.pieces=r.splitList,delete r.splitList);var o=r.pieces;o&&isArray$1(o)&&each(o,function(l){isObject$3(l)&&(has(l,"start")&&!has(l,"min")&&(l.min=l.start),has(l,"end")&&!has(l,"max")&&(l.max=l.end))})}})}function has(a,n){return a&&a.hasOwnProperty&&a.hasOwnProperty(n)}var installed=!1;function installCommon(a){installed||(installed=!0,a.registerSubTypeDefaulter("visualMap",function(n){return!n.categories&&(!(n.pieces?n.pieces.length>0:n.splitNumber>0)||n.calculable)?"continuous":"piecewise"}),a.registerAction(visualMapActionInfo,visualMapActionHander),each$f(visualMapEncodingHandlers,function(n){a.registerVisual(a.PRIORITY.VISUAL.COMPONENT,n)}),a.registerPreprocessor(visualMapPreprocessor))}function install$5(a){a.registerComponentModel(ContinuousModel$1),a.registerComponentView(ContinuousView$1),installCommon(a)}var PiecewiseModel=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r._pieceList=[],r}return n.prototype.optionUpdated=function(r,o){a.prototype.optionUpdated.apply(this,arguments),this.resetExtent();var l=this._mode=this._determineMode();this._pieceList=[],resetMethods[this._mode].call(this,this._pieceList),this._resetSelected(r,o);var u=this.option.categories;this.resetVisual(function(c,h){l==="categories"?(c.mappingMethod="category",c.categories=clone$4(u)):(c.dataExtent=this.getExtent(),c.mappingMethod="piecewise",c.pieceList=map$1(this._pieceList,function(d){return d=clone$4(d),h!=="inRange"&&(d.visual=null),d}))})},n.prototype.completeVisualOption=function(){var r=this.option,o={},l=VisualMapping$1.listVisualTypes(),u=this.isCategory();each$f(r.pieces,function(h){each$f(l,function(d){h.hasOwnProperty(d)&&(o[d]=1)})}),each$f(o,function(h,d){var p=!1;each$f(this.stateList,function(f){p=p||c(r,f,d)||c(r.target,f,d)},this),!p&&each$f(this.stateList,function(f){(r[f]||(r[f]={}))[d]=visualDefault$1.get(d,f==="inRange"?"active":"inactive",u)})},this);function c(h,d,p){return h&&h[d]&&h[d].hasOwnProperty(p)}a.prototype.completeVisualOption.apply(this,arguments)},n.prototype._resetSelected=function(r,o){var l=this.option,u=this._pieceList,c=(o?l:r).selected||{};if(l.selected=c,each$f(u,function(d,p){var f=this.getSelectedMapKey(d);c.hasOwnProperty(f)||(c[f]=!0)},this),l.selectedMode==="single"){var h=!1;each$f(u,function(d,p){var f=this.getSelectedMapKey(d);c[f]&&(h?c[f]=!1:h=!0)},this)}},n.prototype.getItemSymbol=function(){return this.get("itemSymbol")},n.prototype.getSelectedMapKey=function(r){return this._mode==="categories"?r.value+"":r.index+""},n.prototype.getPieceList=function(){return this._pieceList},n.prototype._determineMode=function(){var r=this.option;return r.pieces&&r.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber"},n.prototype.setSelected=function(r){this.option.selected=clone$4(r)},n.prototype.getValueState=function(r){var o=VisualMapping$1.findPieceIndex(r,this._pieceList);return o!=null&&this.option.selected[this.getSelectedMapKey(this._pieceList[o])]?"inRange":"outOfRange"},n.prototype.findTargetDataIndices=function(r){var o=[],l=this._pieceList;return this.eachTargetSeries(function(u){var c=[],h=u.getData();h.each(this.getDataDimensionIndex(h),function(d,p){var f=VisualMapping$1.findPieceIndex(d,l);f===r&&c.push(p)},this),o.push({seriesId:u.id,dataIndex:c})},this),o},n.prototype.getRepresentValue=function(r){var o;if(this.isCategory())o=r.value;else if(r.value!=null)o=r.value;else{var l=r.interval||[];o=l[0]===-1/0&&l[1]===1/0?0:(l[0]+l[1])/2}return o},n.prototype.getVisualMeta=function(r){if(this.isCategory())return;var o=[],l=["",""],u=this;function c(f,g){var y=u.getRepresentValue({interval:f});g||(g=u.getValueState(y));var v=r(y,g);f[0]===-1/0?l[0]=v:f[1]===1/0?l[1]=v:o.push({value:f[0],color:v},{value:f[1],color:v})}var h=this._pieceList.slice();if(!h.length)h.push({interval:[-1/0,1/0]});else{var d=h[0].interval[0];d!==-1/0&&h.unshift({interval:[-1/0,d]}),d=h[h.length-1].interval[1],d!==1/0&&h.push({interval:[d,1/0]})}var p=-1/0;return each$f(h,function(f){var g=f.interval;g&&(g[0]>p&&c([p,g[0]],"outOfRange"),c(g.slice()),p=g[1])},this),{stops:o,outerColors:l}},n.type="visualMap.piecewise",n.defaultOption=inheritDefaultOption(VisualMapModel$1.defaultOption,{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieces:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0}),n}(VisualMapModel$1),resetMethods={splitNumber:function(a){var n=this.option,r=Math.min(n.precision,20),o=this.getExtent(),l=n.splitNumber;l=Math.max(parseInt(l,10),1),n.splitNumber=l;for(var u=(o[1]-o[0])/l;+u.toFixed(r)!==u&&r<5;)r++;n.precision=r,u=+u.toFixed(r),n.minOpen&&a.push({interval:[-1/0,o[0]],close:[0,0]});for(var c=0,h=o[0];c<l;h+=u,c++){var d=c===l-1?o[1]:h+u;a.push({interval:[h,d],close:[1,1]})}n.maxOpen&&a.push({interval:[o[1],1/0],close:[0,0]}),reformIntervals(a),each$f(a,function(p,f){p.index=f,p.text=this.formatValueText(p.interval)},this)},categories:function(a){var n=this.option;each$f(n.categories,function(r){a.push({text:this.formatValueText(r,!0),value:r})},this),normalizeReverse(n,a)},pieces:function(a){var n=this.option;each$f(n.pieces,function(r,o){isObject$3(r)||(r={value:r});var l={text:"",index:o};if(r.label!=null&&(l.text=r.label),r.hasOwnProperty("value")){var u=l.value=r.value;l.interval=[u,u],l.close=[1,1]}else{for(var c=l.interval=[],h=l.close=[0,0],d=[1,0,1],p=[-1/0,1/0],f=[],g=0;g<2;g++){for(var y=[["gte","gt","min"],["lte","lt","max"]][g],v=0;v<3&&c[g]==null;v++)c[g]=r[y[v]],h[g]=d[v],f[g]=v===2;c[g]==null&&(c[g]=p[g])}f[0]&&c[1]===1/0&&(h[0]=0),f[1]&&c[0]===-1/0&&(h[1]=0),c[0]>c[1]&&console.warn("Piece "+o+"is illegal: "+c+" lower bound should not greater then uppper bound."),c[0]===c[1]&&h[0]&&h[1]&&(l.value=c[0])}l.visual=VisualMapping$1.retrieveVisuals(r),a.push(l)},this),normalizeReverse(n,a),reformIntervals(a),each$f(a,function(r){var o=r.close,l=[["<","\u2264"][o[1]],[">","\u2265"][o[0]]];r.text=r.text||this.formatValueText(r.value!=null?r.value:r.interval,!1,l)},this)}};function normalizeReverse(a,n){var r=a.inverse;(a.orient==="vertical"?!r:r)&&n.reverse()}const PiecewiseModel$1=PiecewiseModel;var PiecewiseVisualMapView=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type=n.type,r}return n.prototype.doRender=function(){var r=this.group;r.removeAll();var o=this.visualMapModel,l=o.get("textGap"),u=o.textStyleModel,c=u.getFont(),h=u.getTextColor(),d=this._getItemAlign(),p=o.itemSize,f=this._getViewData(),g=f.endsText,y=retrieve(o.get("showLabel",!0),!g),v=!o.get("selectedMode");g&&this._renderEndsText(r,g[0],p,y,d),each$f(f.viewPieceList,function(_){var x=_.piece,S=new Group$4;S.onclick=bind$1(this._onItemClick,this,x),this._enableHoverLink(S,_.indexInModelPieceList);var T=o.getRepresentValue(x);if(this._createItemSymbol(S,T,[0,0,p[0],p[1]],v),y){var M=this.visualMapModel.getValueState(T);S.add(new ZRText$1({style:{x:d==="right"?-l:p[0]+l,y:p[1]/2,text:x.text,verticalAlign:"middle",align:d,font:c,fill:h,opacity:M==="outOfRange"?.5:1},silent:v}))}r.add(S)},this),g&&this._renderEndsText(r,g[1],p,y,d),box(o.get("orient"),r,o.get("itemGap")),this.renderBackground(r),this.positionGroup(r)},n.prototype._enableHoverLink=function(r,o){var l=this;r.on("mouseover",function(){return u("highlight")}).on("mouseout",function(){return u("downplay")});var u=function(c){var h=l.visualMapModel;h.option.hoverLink&&l.api.dispatchAction({type:c,batch:makeHighDownBatch(h.findTargetDataIndices(o),h)})}},n.prototype._getItemAlign=function(){var r=this.visualMapModel,o=r.option;if(o.orient==="vertical")return getItemAlign(r,this.api,r.itemSize);var l=o.align;return(!l||l==="auto")&&(l="left"),l},n.prototype._renderEndsText=function(r,o,l,u,c){if(o){var h=new Group$4,d=this.visualMapModel.textStyleModel;h.add(new ZRText$1({style:createTextStyle$1(d,{x:u?c==="right"?l[0]:0:l[0]/2,y:l[1]/2,verticalAlign:"middle",align:u?c:"center",text:o})})),r.add(h)}},n.prototype._getViewData=function(){var r=this.visualMapModel,o=map$1(r.getPieceList(),function(h,d){return{piece:h,indexInModelPieceList:d}}),l=r.get("text"),u=r.get("orient"),c=r.get("inverse");return(u==="horizontal"?c:!c)?o.reverse():l&&(l=l.slice().reverse()),{viewPieceList:o,endsText:l}},n.prototype._createItemSymbol=function(r,o,l,u){var c=createSymbol$1(this.getControllerVisual(o,"symbol"),l[0],l[1],l[2],l[3],this.getControllerVisual(o,"color"));c.silent=u,r.add(c)},n.prototype._onItemClick=function(r){var o=this.visualMapModel,l=o.option,u=l.selectedMode;if(u){var c=clone$4(l.selected),h=o.getSelectedMapKey(r);u==="single"||u===!0?(c[h]=!0,each$f(c,function(d,p){c[p]=p===h})):c[h]=!c[h],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:c})}},n.type="visualMap.piecewise",n}(VisualMapView$1);const PiecewiseView=PiecewiseVisualMapView;function install$4(a){a.registerComponentModel(PiecewiseModel$1),a.registerComponentView(PiecewiseView),installCommon(a)}function install$3(a){use(install$5),use(install$4)}var DEFAULT_OPTION={label:{enabled:!0},decal:{show:!1}},inner=makeInner(),decalPaletteScope={};function ariaVisual(a,n){var r=a.getModel("aria");if(!r.get("enabled"))return;var o=clone$4(DEFAULT_OPTION);merge(o.label,a.getLocaleModel().get("aria"),!1),merge(r.option,o,!1),l(),u();function l(){var p=r.getModel("decal"),f=p.get("show");if(f){var g=createHashMap();a.eachSeries(function(y){if(!y.isColorBySeries()){var v=g.get(y.type);v||(v={},g.set(y.type,v)),inner(y).scope=v}}),a.eachRawSeries(function(y){if(a.isSeriesFiltered(y))return;if(isFunction(y.enableAriaDecal)){y.enableAriaDecal();return}var v=y.getData();if(y.isColorBySeries()){var _=getDecalFromPalette(y.ecModel,y.name,decalPaletteScope,a.getSeriesCount()),x=v.getVisual("decal");v.setVisual("decal",A(x,_))}else{var S=y.getRawData(),T={},M=inner(y).scope;v.each(function(I){var w=v.getRawIndex(I);T[w]=I});var b=S.count();S.each(function(I){var w=T[I],C=S.getName(I)||I+"",E=getDecalFromPalette(y.ecModel,C,M,b),P=v.getItemVisual(w,"decal");v.setItemVisual(w,"decal",A(P,E))})}function A(I,w){var C=I?extend(extend({},w),I):w;return C.dirty=!0,C}})}}function u(){var p=n.getZr().dom;if(p){var f=a.getLocaleModel().get("aria"),g=r.getModel("label");if(g.option=defaults(g.option,f),!!g.get("enabled")){if(p.setAttribute("role","img"),g.get("description")){p.setAttribute("aria-label",g.get("description"));return}var y=a.getSeriesCount(),v=g.get(["data","maxCount"])||10,_=g.get(["series","maxCount"])||10,x=Math.min(y,_),S;if(!(y<1)){var T=h();if(T){var M=g.get(["general","withTitle"]);S=c(M,{title:T})}else S=g.get(["general","withoutTitle"]);var b=[],A=y>1?g.get(["series","multiple","prefix"]):g.get(["series","single","prefix"]);S+=c(A,{seriesCount:y}),a.eachSeries(function(E,P){if(P<x){var D=void 0,L=E.get("name"),R=L?"withName":"withoutName";D=y>1?g.get(["series","multiple",R]):g.get(["series","single",R]),D=c(D,{seriesId:E.seriesIndex,seriesName:E.get("name"),seriesType:d(E.subType)});var O=E.getData();if(O.count()>v){var N=g.get(["data","partialData"]);D+=c(N,{displayCnt:v})}else D+=g.get(["data","allData"]);for(var V=g.get(["data","separator","middle"]),B=g.get(["data","separator","end"]),G=g.get(["data","excludeDimensionId"]),F=[],z=0;z<O.count();z++)if(z<v){var H=O.getName(z),U=G?filter(O.getValues(z),function(Z,X){return indexOf(G,X)===-1}):O.getValues(z),Y=g.get(["data",H?"withName":"withoutName"]);F.push(c(Y,{name:H,value:U.join(V)}))}D+=F.join(V)+B,b.push(D)}});var I=g.getModel(["series","multiple","separator"]),w=I.get("middle"),C=I.get("end");S+=b.join(w)+C,p.setAttribute("aria-label",S)}}}}function c(p,f){if(!isString(p))return p;var g=p;return each$f(f,function(y,v){g=g.replace(new RegExp("\\{\\s*"+v+"\\s*\\}","g"),y)}),g}function h(){var p=a.get("title");return p&&p.length&&(p=p[0]),p&&p.text}function d(p){var f=a.getLocaleModel().get(["series","typeNames"]);return f[p]||f.chart}}function ariaPreprocessor(a){if(!(!a||!a.aria)){var n=a.aria;n.show!=null&&(n.enabled=n.show),n.label=n.label||{},each$f(["description","general","series","data"],function(r){n[r]!=null&&(n.label[r]=n[r])})}}function install$2(a){a.registerPreprocessor(ariaPreprocessor),a.registerVisual(a.PRIORITY.VISUAL.ARIA,ariaVisual)}var RELATIONAL_EXPRESSION_OP_ALIAS_MAP={value:"eq","<":"lt","<=":"lte",">":"gt",">=":"gte","=":"eq","!=":"ne","<>":"ne"},RegExpEvaluator=function(){function a(n){var r=this._condVal=isString(n)?new RegExp(n):isRegExp(n)?n:null;if(r==null){var o="";o=makePrintable("Illegal regexp",n,"in"),throwError(o)}}return a.prototype.evaluate=function(n){var r=typeof n;return isString(r)?this._condVal.test(n):isNumber(r)?this._condVal.test(n+""):!1},a}(),ConstConditionInternal=function(){function a(){}return a.prototype.evaluate=function(){return this.value},a}(),AndConditionInternal=function(){function a(){}return a.prototype.evaluate=function(){for(var n=this.children,r=0;r<n.length;r++)if(!n[r].evaluate())return!1;return!0},a}(),OrConditionInternal=function(){function a(){}return a.prototype.evaluate=function(){for(var n=this.children,r=0;r<n.length;r++)if(n[r].evaluate())return!0;return!1},a}(),NotConditionInternal=function(){function a(){}return a.prototype.evaluate=function(){return!this.child.evaluate()},a}(),RelationalConditionInternal=function(){function a(){}return a.prototype.evaluate=function(){for(var n=!!this.valueParser,r=this.getValue,o=r(this.valueGetterParam),l=n?this.valueParser(o):null,u=0;u<this.subCondList.length;u++)if(!this.subCondList[u].evaluate(n?l:o))return!1;return!0},a}();function parseOption(a,n){if(a===!0||a===!1){var r=new ConstConditionInternal;return r.value=a,r}var o="";return isObjectNotArray(a)||(o=makePrintable("Illegal config. Expect a plain object but actually",a),throwError(o)),a.and?parseAndOrOption("and",a,n):a.or?parseAndOrOption("or",a,n):a.not?parseNotOption(a,n):parseRelationalOption(a,n)}function parseAndOrOption(a,n,r){var o=n[a],l="";l=makePrintable('"and"/"or" condition should only be `'+a+": [...]` and must not be empty array.","Illegal condition:",n),isArray$1(o)||throwError(l),o.length||throwError(l);var u=a==="and"?new AndConditionInternal:new OrConditionInternal;return u.children=map$1(o,function(c){return parseOption(c,r)}),u.children.length||throwError(l),u}function parseNotOption(a,n){var r=a.not,o="";o=makePrintable('"not" condition should only be `not: {}`.',"Illegal condition:",a),isObjectNotArray(r)||throwError(o);var l=new NotConditionInternal;return l.child=parseOption(r,n),l.child||throwError(o),l}function parseRelationalOption(a,n){for(var r="",o=n.prepareGetValue(a),l=[],u=keys(a),c=a.parser,h=c?getRawValueParser(c):null,d=0;d<u.length;d++){var p=u[d];if(!(p==="parser"||n.valueGetterAttrMap.get(p))){var f=hasOwn(RELATIONAL_EXPRESSION_OP_ALIAS_MAP,p)?RELATIONAL_EXPRESSION_OP_ALIAS_MAP[p]:p,g=a[p],y=h?h(g):g,v=createFilterComparator(f,y)||f==="reg"&&new RegExpEvaluator(y);v||(r=makePrintable('Illegal relational operation: "'+p+'" in condition:',a),throwError(r)),l.push(v)}}l.length||(r=makePrintable("Relational condition must have at least one operator.","Illegal condition:",a),throwError(r));var _=new RelationalConditionInternal;return _.valueGetterParam=o,_.valueParser=h,_.getValue=n.getValue,_.subCondList=l,_}function isObjectNotArray(a){return isObject$3(a)&&!isArrayLike(a)}var ConditionalExpressionParsed=function(){function a(n,r){this._cond=parseOption(n,r)}return a.prototype.evaluate=function(){return this._cond.evaluate()},a}();function parseConditionalExpression(a,n){return new ConditionalExpressionParsed(a,n)}var filterTransform={type:"echarts:filter",transform:function(a){for(var n=a.upstream,r,o=parseConditionalExpression(a.config,{valueGetterAttrMap:createHashMap({dimension:!0}),prepareGetValue:function(h){var d="",p=h.dimension;hasOwn(h,"dimension")||(d=makePrintable('Relation condition must has prop "dimension" specified.',"Illegal condition:",h),throwError(d));var f=n.getDimensionInfo(p);return f||(d=makePrintable("Can not find dimension info via: "+p+`.
`,"Existing dimensions: ",n.cloneAllDimensionInfo(),`.
`,"Illegal condition:",h,`.
`),throwError(d)),{dimIdx:f.index}},getValue:function(h){return n.retrieveValueFromItem(r,h.dimIdx)}}),l=[],u=0,c=n.count();u<c;u++)r=n.getRawDataItem(u),o.evaluate()&&l.push(r);return{data:l}}},sampleLog="";sampleLog=["Valid config is like:",'{ dimension: "age", order: "asc" }','or [{ dimension: "age", order: "asc"], { dimension: "date", order: "desc" }]'].join(" ");var sortTransform={type:"echarts:sort",transform:function(a){var n=a.upstream,r=a.config,o="",l=normalizeToArray(r);l.length||(o="Empty `config` in sort transform.",throwError(o));var u=[];each$f(l,function(f){var g=f.dimension,y=f.order,v=f.parser,_=f.incomparable;if(g==null&&(o='Sort transform config must has "dimension" specified.'+sampleLog,throwError(o)),y!=="asc"&&y!=="desc"&&(o='Sort transform config must has "order" specified.'+sampleLog,throwError(o)),_&&_!=="min"&&_!=="max"){var x="";x='incomparable must be "min" or "max" rather than "'+_+'".',throwError(x)}if(y!=="asc"&&y!=="desc"){var S="";S='order must be "asc" or "desc" rather than "'+y+'".',throwError(S)}var T=n.getDimensionInfo(g);T||(o=makePrintable("Can not find dimension info via: "+g+`.
`,"Existing dimensions: ",n.cloneAllDimensionInfo(),`.
`,"Illegal config:",f,`.
`),throwError(o));var M=v?getRawValueParser(v):null;v&&!M&&(o=makePrintable("Invalid parser name "+v+`.
`,"Illegal config:",f,`.
`),throwError(o)),u.push({dimIdx:T.index,parser:M,comparator:new SortOrderComparator(y,_)})});var c=n.sourceFormat;c!==SOURCE_FORMAT_ARRAY_ROWS&&c!==SOURCE_FORMAT_OBJECT_ROWS&&(o='sourceFormat "'+c+'" is not supported yet',throwError(o));for(var h=[],d=0,p=n.count();d<p;d++)h.push(n.getRawDataItem(d));return h.sort(function(f,g){for(var y=0;y<u.length;y++){var v=u[y],_=n.retrieveValueFromItem(f,v.dimIdx),x=n.retrieveValueFromItem(g,v.dimIdx);v.parser&&(_=v.parser(_),x=v.parser(x));var S=v.comparator.evaluate(_,x);if(S!==0)return S}return 0}),{data:h}}};function install$1(a){a.registerTransform(filterTransform),a.registerTransform(sortTransform)}var DatasetModel=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type="dataset",r}return n.prototype.init=function(r,o,l){a.prototype.init.call(this,r,o,l),this._sourceManager=new SourceManager(this),disableTransformOptionMerge(this)},n.prototype.mergeOption=function(r,o){a.prototype.mergeOption.call(this,r,o),disableTransformOptionMerge(this)},n.prototype.optionUpdated=function(){this._sourceManager.dirty()},n.prototype.getSourceManager=function(){return this._sourceManager},n.type="dataset",n.defaultOption={seriesLayoutBy:SERIES_LAYOUT_BY_COLUMN},n}(ComponentModel$1),DatasetView=function(a){__extends(n,a);function n(){var r=a!==null&&a.apply(this,arguments)||this;return r.type="dataset",r}return n.type="dataset",n}(ComponentView$1);function install(a){a.registerComponentModel(DatasetModel),a.registerComponentView(DatasetView)}var CMD=PathProxy$1.CMD;function aroundEqual(a,n){return Math.abs(a-n)<1e-5}function pathToBezierCurves(a){var n=a.data,r=a.len(),o=[],l,u=0,c=0,h=0,d=0;function p(O,N){l&&l.length>2&&o.push(l),l=[O,N]}function f(O,N,V,B){aroundEqual(O,V)&&aroundEqual(N,B)||l.push(O,N,V,B,V,B)}function g(O,N,V,B,G,F){var z=Math.abs(N-O),H=Math.tan(z/4)*4/3,U=N<O?-1:1,Y=Math.cos(O),Z=Math.sin(O),X=Math.cos(N),K=Math.sin(N),te=Y*G+V,ae=Z*F+B,J=X*G+V,j=K*F+B,Q=G*H*U,W=F*H*U;l.push(te-Q*Z,ae+W*Y,J+Q*K,j-W*X,J,j)}for(var y,v,_,x,S=0;S<r;){var T=n[S++],M=S===1;switch(M&&(u=n[S],c=n[S+1],h=u,d=c,(T===CMD.L||T===CMD.C||T===CMD.Q)&&(l=[h,d])),T){case CMD.M:u=h=n[S++],c=d=n[S++],p(h,d);break;case CMD.L:y=n[S++],v=n[S++],f(u,c,y,v),u=y,c=v;break;case CMD.C:l.push(n[S++],n[S++],n[S++],n[S++],u=n[S++],c=n[S++]);break;case CMD.Q:y=n[S++],v=n[S++],_=n[S++],x=n[S++],l.push(u+2/3*(y-u),c+2/3*(v-c),_+2/3*(y-_),x+2/3*(v-x),_,x),u=_,c=x;break;case CMD.A:var b=n[S++],A=n[S++],I=n[S++],w=n[S++],C=n[S++],E=n[S++]+C;S+=1;var P=!n[S++];y=Math.cos(C)*I+b,v=Math.sin(C)*w+A,M?(h=y,d=v,p(h,d)):f(u,c,y,v),u=Math.cos(E)*I+b,c=Math.sin(E)*w+A;for(var D=(P?-1:1)*Math.PI/2,L=C;P?L>E:L<E;L+=D){var R=P?Math.max(L+D,E):Math.min(L+D,E);g(L,R,b,A,I,w)}break;case CMD.R:h=u=n[S++],d=c=n[S++],y=h+n[S++],v=d+n[S++],p(y,d),f(y,d,y,v),f(y,v,h,v),f(h,v,h,d),f(h,d,y,d);break;case CMD.Z:l&&f(u,c,h,d),u=h,c=d;break}}return l&&l.length>2&&o.push(l),o}function adpativeBezier(a,n,r,o,l,u,c,h,d,p){if(aroundEqual(a,r)&&aroundEqual(n,o)&&aroundEqual(l,c)&&aroundEqual(u,h)){d.push(c,h);return}var f=2/p,g=f*f,y=c-a,v=h-n,_=Math.sqrt(y*y+v*v);y/=_,v/=_;var x=r-a,S=o-n,T=l-c,M=u-h,b=x*x+S*S,A=T*T+M*M;if(b<g&&A<g){d.push(c,h);return}var I=y*x+v*S,w=-y*T-v*M,C=b-I*I,E=A-w*w;if(C<g&&I>=0&&E<g&&w>=0){d.push(c,h);return}var P=[],D=[];cubicSubdivide(a,r,l,c,.5,P),cubicSubdivide(n,o,u,h,.5,D),adpativeBezier(P[0],D[0],P[1],D[1],P[2],D[2],P[3],D[3],d,p),adpativeBezier(P[4],D[4],P[5],D[5],P[6],D[6],P[7],D[7],d,p)}function pathToPolygons(a,n){var r=pathToBezierCurves(a),o=[];n=n||1;for(var l=0;l<r.length;l++){var u=r[l],c=[],h=u[0],d=u[1];c.push(h,d);for(var p=2;p<u.length;){var f=u[p++],g=u[p++],y=u[p++],v=u[p++],_=u[p++],x=u[p++];adpativeBezier(h,d,f,g,y,v,_,x,c,n),h=_,d=x}o.push(c)}return o}function getDividingGrids(a,n,r){var o=a[n],l=a[1-n],u=Math.abs(o/l),c=Math.ceil(Math.sqrt(u*r)),h=Math.floor(r/c);h===0&&(h=1,c=r);for(var d=[],p=0;p<c;p++)d.push(h);var f=c*h,g=r-f;if(g>0)for(var p=0;p<g;p++)d[p%c]+=1;return d}function divideSector(a,n,r){for(var o=a.r0,l=a.r,u=a.startAngle,c=a.endAngle,h=Math.abs(c-u),d=h*l,p=l-o,f=d>Math.abs(p),g=getDividingGrids([d,p],f?0:1,n),y=(f?h:p)/g.length,v=0;v<g.length;v++)for(var _=(f?p:h)/g[v],x=0;x<g[v];x++){var S={};f?(S.startAngle=u+y*v,S.endAngle=u+y*(v+1),S.r0=o+_*x,S.r=o+_*(x+1)):(S.startAngle=u+_*x,S.endAngle=u+_*(x+1),S.r0=o+y*v,S.r=o+y*(v+1)),S.clockwise=a.clockwise,S.cx=a.cx,S.cy=a.cy,r.push(S)}}function divideRect(a,n,r){for(var o=a.width,l=a.height,u=o>l,c=getDividingGrids([o,l],u?0:1,n),h=u?"width":"height",d=u?"height":"width",p=u?"x":"y",f=u?"y":"x",g=a[h]/c.length,y=0;y<c.length;y++)for(var v=a[d]/c[y],_=0;_<c[y];_++){var x={};x[p]=y*g,x[f]=_*v,x[h]=g,x[d]=v,x.x+=a.x,x.y+=a.y,r.push(x)}}function crossProduct2d(a,n,r,o){return a*o-r*n}function lineLineIntersect(a,n,r,o,l,u,c,h){var d=r-a,p=o-n,f=c-l,g=h-u,y=crossProduct2d(f,g,d,p);if(Math.abs(y)<1e-6)return null;var v=a-l,_=n-u,x=crossProduct2d(v,_,f,g)/y;return x<0||x>1?null:new Point$1(x*d+a,x*p+n)}function projPtOnLine(a,n,r){var o=new Point$1;Point$1.sub(o,r,n),o.normalize();var l=new Point$1;Point$1.sub(l,a,n);var u=l.dot(o);return u}function addToPoly(a,n){var r=a[a.length-1];r&&r[0]===n[0]&&r[1]===n[1]||a.push(n)}function splitPolygonByLine(a,n,r){for(var o=a.length,l=[],u=0;u<o;u++){var c=a[u],h=a[(u+1)%o],d=lineLineIntersect(c[0],c[1],h[0],h[1],n.x,n.y,r.x,r.y);d&&l.push({projPt:projPtOnLine(d,n,r),pt:d,idx:u})}if(l.length<2)return[{points:a},{points:a}];l.sort(function(S,T){return S.projPt-T.projPt});var p=l[0],f=l[l.length-1];if(f.idx<p.idx){var g=p;p=f,f=g}for(var y=[p.pt.x,p.pt.y],v=[f.pt.x,f.pt.y],_=[y],x=[v],u=p.idx+1;u<=f.idx;u++)addToPoly(_,a[u].slice());addToPoly(_,v),addToPoly(_,y);for(var u=f.idx+1;u<=p.idx+o;u++)addToPoly(x,a[u%o].slice());return addToPoly(x,y),addToPoly(x,v),[{points:_},{points:x}]}function binaryDividePolygon(a){var n=a.points,r=[],o=[];fromPoints(n,r,o);var l=new BoundingRect$1(r[0],r[1],o[0]-r[0],o[1]-r[1]),u=l.width,c=l.height,h=l.x,d=l.y,p=new Point$1,f=new Point$1;return u>c?(p.x=f.x=h+u/2,p.y=d,f.y=d+c):(p.y=f.y=d+c/2,p.x=h,f.x=h+u),splitPolygonByLine(n,p,f)}function binaryDivideRecursive(a,n,r,o){if(r===1)o.push(n);else{var l=Math.floor(r/2),u=a(n);binaryDivideRecursive(a,u[0],l,o),binaryDivideRecursive(a,u[1],r-l,o)}return o}function clone(a,n){for(var r=[],o=0;o<n;o++)r.push(clonePath(a));return r}function copyPathProps(a,n){n.setStyle(a.style),n.z=a.z,n.z2=a.z2,n.zlevel=a.zlevel}function polygonConvert(a){for(var n=[],r=0;r<a.length;)n.push([a[r++],a[r++]]);return n}function split(a,n){var r=[],o=a.shape,l;switch(a.type){case"rect":divideRect(o,n,r),l=Rect$3;break;case"sector":divideSector(o,n,r),l=Sector$1;break;case"circle":divideSector({r0:0,r:o.r,startAngle:0,endAngle:Math.PI*2,cx:o.cx,cy:o.cy},n,r),l=Sector$1;break;default:var u=a.getComputedTransform(),c=u?Math.sqrt(Math.max(u[0]*u[0]+u[1]*u[1],u[2]*u[2]+u[3]*u[3])):1,h=map$1(pathToPolygons(a.getUpdatedPathProxy(),c),function(T){return polygonConvert(T)}),d=h.length;if(d===0)binaryDivideRecursive(binaryDividePolygon,{points:h[0]},n,r);else if(d===n)for(var p=0;p<d;p++)r.push({points:h[p]});else{var f=0,g=map$1(h,function(T){var M=[],b=[];fromPoints(T,M,b);var A=(b[1]-M[1])*(b[0]-M[0]);return f+=A,{poly:T,area:A}});g.sort(function(T,M){return M.area-T.area});for(var y=n,p=0;p<d;p++){var v=g[p];if(y<=0)break;var _=p===d-1?y:Math.ceil(v.area/f*n);_<0||(binaryDivideRecursive(binaryDividePolygon,{points:v.poly},_,r),y-=_)}}l=Polygon$1;break}if(!l)return clone(a,n);for(var x=[],p=0;p<r.length;p++){var S=new l;S.setShape(r[p]),copyPathProps(a,S),x.push(S)}return x}function alignSubpath(a,n){var r=a.length,o=n.length;if(r===o)return[a,n];for(var l=[],u=[],c=r<o?a:n,h=Math.min(r,o),d=Math.abs(o-r)/6,p=(h-2)/6,f=Math.ceil(d/p)+1,g=[c[0],c[1]],y=d,v=2;v<h;){var _=c[v-2],x=c[v-1],S=c[v++],T=c[v++],M=c[v++],b=c[v++],A=c[v++],I=c[v++];if(y<=0){g.push(S,T,M,b,A,I);continue}for(var w=Math.min(y,f-1)+1,C=1;C<=w;C++){var E=C/w;cubicSubdivide(_,S,M,A,E,l),cubicSubdivide(x,T,b,I,E,u),_=l[3],x=u[3],g.push(l[1],u[1],l[2],u[2],_,x),S=l[5],T=u[5],M=l[6],b=u[6]}y-=w-1}return c===a?[g,n]:[a,g]}function createSubpath(a,n){for(var r=a.length,o=a[r-2],l=a[r-1],u=[],c=0;c<n.length;)u[c++]=o,u[c++]=l;return u}function alignBezierCurves(a,n){for(var r,o,l,u=[],c=[],h=0;h<Math.max(a.length,n.length);h++){var d=a[h],p=n[h],f=void 0,g=void 0;d?p?(r=alignSubpath(d,p),f=r[0],g=r[1],o=f,l=g):(g=createSubpath(l||d,d),f=d):(f=createSubpath(o||p,p),g=p),u.push(f),c.push(g)}return[u,c]}function centroid(a){for(var n=0,r=0,o=0,l=a.length,u=0,c=l-2;u<l;c=u,u+=2){var h=a[c],d=a[c+1],p=a[u],f=a[u+1],g=h*f-p*d;n+=g,r+=(h+p)*g,o+=(d+f)*g}return n===0?[a[0]||0,a[1]||0]:[r/n/3,o/n/3,n]}function findBestRingOffset(a,n,r,o){for(var l=(a.length-2)/6,u=1/0,c=0,h=a.length,d=h-2,p=0;p<l;p++){for(var f=p*6,g=0,y=0;y<h;y+=2){var v=y===0?f:(f+y-2)%d+2,_=a[v]-r[0],x=a[v+1]-r[1],S=n[y]-o[0],T=n[y+1]-o[1],M=S-_,b=T-x;g+=M*M+b*b}g<u&&(u=g,c=p)}return c}function reverse(a){for(var n=[],r=a.length,o=0;o<r;o+=2)n[o]=a[r-o-2],n[o+1]=a[r-o-1];return n}function findBestMorphingRotation(a,n,r,o){for(var l=[],u,c=0;c<a.length;c++){var h=a[c],d=n[c],p=centroid(h),f=centroid(d);u==null&&(u=p[2]<0!=f[2]<0);var g=[],y=[],v=0,_=1/0,x=[],S=h.length;u&&(h=reverse(h));for(var T=findBestRingOffset(h,d,p,f)*6,M=S-2,b=0;b<M;b+=2){var A=(T+b)%M+2;g[b+2]=h[A]-p[0],g[b+3]=h[A+1]-p[1]}if(g[0]=h[T]-p[0],g[1]=h[T+1]-p[1],r>0)for(var I=o/r,w=-o/2;w<=o/2;w+=I){for(var C=Math.sin(w),E=Math.cos(w),P=0,b=0;b<h.length;b+=2){var D=g[b],L=g[b+1],R=d[b]-f[0],O=d[b+1]-f[1],N=R*E-O*C,V=R*C+O*E;x[b]=N,x[b+1]=V;var B=N-D,G=V-L;P+=B*B+G*G}if(P<_){_=P,v=w;for(var F=0;F<x.length;F++)y[F]=x[F]}}else for(var z=0;z<S;z+=2)y[z]=d[z]-f[0],y[z+1]=d[z+1]-f[1];l.push({from:g,to:y,fromCp:p,toCp:f,rotation:-v})}return l}function isCombineMorphing(a){return a.__isCombineMorphing}var SAVED_METHOD_PREFIX="__mOriginal_";function saveAndModifyMethod(a,n,r){var o=SAVED_METHOD_PREFIX+n,l=a[o]||a[n];a[o]||(a[o]=a[n]);var u=r.replace,c=r.after,h=r.before;a[n]=function(){var d=arguments,p;return h&&h.apply(this,d),u?p=u.apply(this,d):p=l.apply(this,d),c&&c.apply(this,d),p}}function restoreMethod(a,n){var r=SAVED_METHOD_PREFIX+n;a[r]&&(a[n]=a[r],a[r]=null)}function applyTransformOnBeziers(a,n){for(var r=0;r<a.length;r++)for(var o=a[r],l=0;l<o.length;){var u=o[l],c=o[l+1];o[l++]=n[0]*u+n[2]*c+n[4],o[l++]=n[1]*u+n[3]*c+n[5]}}function prepareMorphPath(a,n){var r=a.getUpdatedPathProxy(),o=n.getUpdatedPathProxy(),l=alignBezierCurves(pathToBezierCurves(r),pathToBezierCurves(o)),u=l[0],c=l[1],h=a.getComputedTransform(),d=n.getComputedTransform();function p(){this.transform=null}h&&applyTransformOnBeziers(u,h),d&&applyTransformOnBeziers(c,d),saveAndModifyMethod(n,"updateTransform",{replace:p}),n.transform=null;var f=findBestMorphingRotation(u,c,10,Math.PI),g=[];saveAndModifyMethod(n,"buildPath",{replace:function(y){for(var v=n.__morphT,_=1-v,x=[],S=0;S<f.length;S++){var T=f[S],M=T.from,b=T.to,A=T.rotation*v,I=T.fromCp,w=T.toCp,C=Math.sin(A),E=Math.cos(A);lerp$1(x,I,w,v);for(var P=0;P<M.length;P+=2){var D=M[P],L=M[P+1],R=b[P],O=b[P+1],N=D*_+R*v,V=L*_+O*v;g[P]=N*E-V*C+x[0],g[P+1]=N*C+V*E+x[1]}var B=g[0],G=g[1];y.moveTo(B,G);for(var P=2;P<M.length;){var R=g[P++],O=g[P++],F=g[P++],z=g[P++],H=g[P++],U=g[P++];B===R&&G===O&&F===H&&z===U?y.lineTo(H,U):y.bezierCurveTo(R,O,F,z,H,U),B=H,G=U}}}})}function morphPath(a,n,r){if(!a||!n)return n;var o=r.done,l=r.during;prepareMorphPath(a,n),n.__morphT=0;function u(){restoreMethod(n,"buildPath"),restoreMethod(n,"updateTransform"),n.__morphT=-1,n.createPathProxy(),n.dirtyShape()}return n.animateTo({__morphT:1},defaults({during:function(c){n.dirtyShape(),l&&l(c)},done:function(){u(),o&&o()}},r)),n}function hilbert(a,n,r,o,l,u){var c=16;a=l===r?0:Math.round(32767*(a-r)/(l-r)),n=u===o?0:Math.round(32767*(n-o)/(u-o));for(var h=0,d,p=(1<<c)/2;p>0;p/=2){var f=0,g=0;(a&p)>0&&(f=1),(n&p)>0&&(g=1),h+=p*p*(3*f^g),g===0&&(f===1&&(a=p-1-a,n=p-1-n),d=a,a=n,n=d)}return h}function sortPaths(a){var n=1/0,r=1/0,o=-1/0,l=-1/0,u=map$1(a,function(h){var d=h.getBoundingRect(),p=h.getComputedTransform(),f=d.x+d.width/2+(p?p[4]:0),g=d.y+d.height/2+(p?p[5]:0);return n=Math.min(f,n),r=Math.min(g,r),o=Math.max(f,o),l=Math.max(g,l),[f,g]}),c=map$1(u,function(h,d){return{cp:h,z:hilbert(h[0],h[1],n,r,o,l),path:a[d]}});return c.sort(function(h,d){return h.z-d.z}).map(function(h){return h.path})}function defaultDividePath(a){return split(a.path,a.count)}function createEmptyReturn(){return{fromIndividuals:[],toIndividuals:[],count:0}}function combineMorph(a,n,r){var o=[];function l(I){for(var w=0;w<I.length;w++){var C=I[w];isCombineMorphing(C)?l(C.childrenRef()):C instanceof Path$1&&o.push(C)}}l(a);var u=o.length;if(!u)return createEmptyReturn();var c=r.dividePath||defaultDividePath,h=c({path:n,count:u});if(h.length!==u)return console.error("Invalid morphing: unmatched splitted path"),createEmptyReturn();o=sortPaths(o),h=sortPaths(h);for(var d=r.done,p=r.during,f=r.individualDelay,g=new Transformable$1,y=0;y<u;y++){var v=o[y],_=h[y];_.parent=n,_.copyTransform(g),f||prepareMorphPath(v,_)}n.__isCombineMorphing=!0,n.childrenRef=function(){return h};function x(I){for(var w=0;w<h.length;w++)h[w].addSelfToZr(I)}saveAndModifyMethod(n,"addSelfToZr",{after:function(I){x(I)}}),saveAndModifyMethod(n,"removeSelfFromZr",{after:function(I){for(var w=0;w<h.length;w++)h[w].removeSelfFromZr(I)}});function S(){n.__isCombineMorphing=!1,n.__morphT=-1,n.childrenRef=null,restoreMethod(n,"addSelfToZr"),restoreMethod(n,"removeSelfFromZr")}var T=h.length;if(f)for(var M=T,b=function(){M--,M===0&&(S(),d&&d())},y=0;y<T;y++){var A=f?defaults({delay:(r.delay||0)+f(y,T,o[y],h[y]),done:b},r):r;morphPath(o[y],h[y],A)}else n.__morphT=0,n.animateTo({__morphT:1},defaults({during:function(I){for(var w=0;w<T;w++){var C=h[w];C.__morphT=n.__morphT,C.dirtyShape()}p&&p(I)},done:function(){S();for(var I=0;I<a.length;I++)restoreMethod(a[I],"updateTransform");d&&d()}},r));return n.__zr&&x(n.__zr),{fromIndividuals:o,toIndividuals:h,count:T}}function separateMorph(a,n,r){var o=n.length,l=[],u=r.dividePath||defaultDividePath;function c(v){for(var _=0;_<v.length;_++){var x=v[_];isCombineMorphing(x)?c(x.childrenRef()):x instanceof Path$1&&l.push(x)}}if(isCombineMorphing(a)){c(a.childrenRef());var h=l.length;if(h<o)for(var d=0,p=h;p<o;p++)l.push(clonePath(l[d++%h]));l.length=o}else{l=u({path:a,count:o});for(var f=a.getComputedTransform(),p=0;p<l.length;p++)l[p].setLocalTransform(f);if(l.length!==o)return console.error("Invalid morphing: unmatched splitted path"),createEmptyReturn()}l=sortPaths(l),n=sortPaths(n);for(var g=r.individualDelay,p=0;p<o;p++){var y=g?defaults({delay:(r.delay||0)+g(p,o,l[p],n[p])},r):r;morphPath(l[p],n[p],y)}return{fromIndividuals:l,toIndividuals:n,count:n.length}}function isMultiple(a){return isArray$1(a[0])}function prepareMorphBatches(a,n){for(var r=[],o=a.length,l=0;l<o;l++)r.push({one:a[l],many:[]});for(var l=0;l<n.length;l++){var u=n[l].length,c=void 0;for(c=0;c<u;c++)r[c%o].many.push(n[l][c])}for(var h=0,l=o-1;l>=0;l--)if(!r[l].many.length){var d=r[h].many;if(d.length<=1)if(h)h=0;else return r;var u=d.length,p=Math.ceil(u/2);r[l].many=d.slice(p,u),r[h].many=d.slice(0,p),h++}return r}var pathDividers={clone:function(a){for(var n=[],r=1-Math.pow(1-a.path.style.opacity,1/a.count),o=0;o<a.count;o++){var l=clonePath(a.path);l.setStyle("opacity",r),n.push(l)}return n},split:null};function applyMorphAnimation(a,n,r,o,l,u){if(!a.length||!n.length)return;var c=getAnimationConfig("update",o,l);if(!(c&&c.duration>0))return;var h=o.getModel("universalTransition").get("delay"),d=Object.assign({setToFinal:!0},c),p,f;isMultiple(a)&&(p=a,f=n),isMultiple(n)&&(p=n,f=a);function g(T,M,b,A,I){var w=T.many,C=T.one;if(w.length===1&&!I){var E=M?w[0]:C,P=M?C:w[0];if(isCombineMorphing(E))g({many:[E],one:P},!0,b,A,!0);else{var D=h?defaults({delay:h(b,A)},d):d;morphPath(E,P,D),u(E,P,E,P,D)}}else for(var L=defaults({dividePath:pathDividers[r],individualDelay:h&&function(G,F,z,H){return h(G+b,A)}},d),R=M?combineMorph(w,C,L):separateMorph(C,w,L),O=R.fromIndividuals,N=R.toIndividuals,V=O.length,B=0;B<V;B++){var D=h?defaults({delay:h(B,V)},d):d;u(O[B],N[B],M?w[B]:T.one,M?T.one:w[B],D)}}for(var y=p?p===a:a.length>n.length,v=p?prepareMorphBatches(f,p):prepareMorphBatches(y?n:a,[y?a:n]),_=0,x=0;x<v.length;x++)_+=v[x].many.length;for(var S=0,x=0;x<v.length;x++)g(v[x],y,S,_),S+=v[x].many.length}function getPathList(a){if(!a)return[];if(isArray$1(a)){for(var n=[],r=0;r<a.length;r++)n.push(getPathList(a[r]));return n}var o=[];return a.traverse(function(l){l instanceof Path$1&&!l.disableMorphing&&!l.invisible&&!l.ignore&&o.push(l)}),o}var DATA_COUNT_THRESHOLD=1e4,TRANSITION_NONE=0,TRANSITION_P2C=1,TRANSITION_C2P=2,getUniversalTransitionGlobalStore=makeInner();function getDimension(a,n){for(var r=a.dimensions,o=0;o<r.length;o++){var l=a.getDimensionInfo(r[o]);if(l&&l.otherDims[n]===0)return r[o]}}function getValueByDimension(a,n,r){var o=a.getDimensionInfo(r),l=o&&o.ordinalMeta;if(o){var u=a.get(o.name,n);return l&&l.categories[u]||u+""}}function getGroupId(a,n,r,o){var l=o?"itemChildGroupId":"itemGroupId",u=getDimension(a,l);if(u){var c=getValueByDimension(a,n,u);return c}var h=a.getRawDataItem(n),d=o?"childGroupId":"groupId";if(h&&h[d])return h[d]+"";if(!o)return r||a.getId(n)}function flattenDataDiffItems(a){var n=[];return each$f(a,function(r){var o=r.data,l=r.dataGroupId;if(o.count()>DATA_COUNT_THRESHOLD){warn("Universal transition is disabled on large data > 10k.");return}for(var u=o.getIndices(),c=0;c<u.length;c++)n.push({data:o,groupId:getGroupId(o,c,l,!1),childGroupId:getGroupId(o,c,l,!0),divide:r.divide,dataIndex:c})}),n}function fadeInElement(a,n,r){a.traverse(function(o){o instanceof Path$1&&initProps(o,{style:{opacity:0}},n,{dataIndex:r,isFrom:!0})})}function removeEl(a){if(a.parent){var n=a.getComputedTransform();a.setLocalTransform(n),a.parent.remove(a)}}function stopAnimation(a){a.stopAnimation(),a.isGroup&&a.traverse(function(n){n.stopAnimation()})}function animateElementStyles(a,n,r){var o=getAnimationConfig("update",r,n);o&&a.traverse(function(l){if(l instanceof Displayable$1){var u=getOldStyle(l);u&&l.animateFrom({style:u},o)}})}function isAllIdSame(a,n){var r=a.length;if(r!==n.length)return!1;for(var o=0;o<r;o++){var l=a[o],u=n[o];if(l.data.getId(l.dataIndex)!==u.data.getId(u.dataIndex))return!1}return!0}function transitionBetween(a,n,r){var o=flattenDataDiffItems(a),l=flattenDataDiffItems(n);function u(b,A,I,w,C){(I||b)&&A.animateFrom({style:I&&I!==b?extend(extend({},I.style),b.style):b.style},C)}var c=!1,h=TRANSITION_NONE,d=createHashMap(),p=createHashMap();o.forEach(function(b){b.groupId&&d.set(b.groupId,!0),b.childGroupId&&p.set(b.childGroupId,!0)});for(var f=0;f<l.length;f++){var g=l[f].groupId;if(p.get(g)){h=TRANSITION_P2C;break}var y=l[f].childGroupId;if(y&&d.get(y)){h=TRANSITION_C2P;break}}function v(b,A){return function(I){var w=I.data,C=I.dataIndex;return A?w.getId(C):b?h===TRANSITION_P2C?I.childGroupId:I.groupId:h===TRANSITION_C2P?I.childGroupId:I.groupId}}var _=isAllIdSame(o,l),x={};if(!_)for(var f=0;f<l.length;f++){var S=l[f],T=S.data.getItemGraphicEl(S.dataIndex);T&&(x[T.id]=!0)}function M(b,A){var I=o[A],w=l[b],C=w.data.hostModel,E=I.data.getItemGraphicEl(I.dataIndex),P=w.data.getItemGraphicEl(w.dataIndex);if(E===P){P&&animateElementStyles(P,w.dataIndex,C);return}E&&x[E.id]||P&&(stopAnimation(P),E?(stopAnimation(E),removeEl(E),c=!0,applyMorphAnimation(getPathList(E),getPathList(P),w.divide,C,b,u)):fadeInElement(P,C,b))}new DataDiffer$1(o,l,v(!0,_),v(!1,_),null,"multiple").update(M).updateManyToOne(function(b,A){var I=l[b],w=I.data,C=w.hostModel,E=w.getItemGraphicEl(I.dataIndex),P=filter(map$1(A,function(D){return o[D].data.getItemGraphicEl(o[D].dataIndex)}),function(D){return D&&D!==E&&!x[D.id]});E&&(stopAnimation(E),P.length?(each$f(P,function(D){stopAnimation(D),removeEl(D)}),c=!0,applyMorphAnimation(getPathList(P),getPathList(E),I.divide,C,b,u)):fadeInElement(E,C,I.dataIndex))}).updateOneToMany(function(b,A){var I=o[A],w=I.data.getItemGraphicEl(I.dataIndex);if(!(w&&x[w.id])){var C=filter(map$1(b,function(P){return l[P].data.getItemGraphicEl(l[P].dataIndex)}),function(P){return P&&P!==w}),E=l[b[0]].data.hostModel;C.length&&(each$f(C,function(P){return stopAnimation(P)}),w?(stopAnimation(w),removeEl(w),c=!0,applyMorphAnimation(getPathList(w),getPathList(C),I.divide,E,b[0],u)):each$f(C,function(P){return fadeInElement(P,E,b[0])}))}}).updateManyToMany(function(b,A){new DataDiffer$1(A,b,function(I){return o[I].data.getId(o[I].dataIndex)},function(I){return l[I].data.getId(l[I].dataIndex)}).update(function(I,w){M(b[I],A[w])}).execute()}).execute(),c&&each$f(n,function(b){var A=b.data,I=A.hostModel,w=I&&r.getViewOfSeriesModel(I),C=getAnimationConfig("update",I,0);w&&I.isAnimationEnabled()&&C&&C.duration>0&&w.group.traverse(function(E){E instanceof Path$1&&!E.animators.length&&E.animateFrom({style:{opacity:0}},C)})})}function getSeriesTransitionKey(a){var n=a.getModel("universalTransition").get("seriesKey");return n||a.id}function convertArraySeriesKeyToString(a){return isArray$1(a)?a.sort().join(","):a}function getDivideShapeFromData(a){if(a.hostModel)return a.hostModel.getModel("universalTransition").get("divideShape")}function findTransitionSeriesBatches(a,n){var r=createHashMap(),o=createHashMap(),l=createHashMap();each$f(a.oldSeries,function(c,h){var d=a.oldDataGroupIds[h],p=a.oldData[h],f=getSeriesTransitionKey(c),g=convertArraySeriesKeyToString(f);o.set(g,{dataGroupId:d,data:p}),isArray$1(f)&&each$f(f,function(y){l.set(y,{key:g,dataGroupId:d,data:p})})});function u(c){r.get(c)&&warn("Duplicated seriesKey in universalTransition "+c)}return each$f(n.updatedSeries,function(c){if(c.isUniversalTransitionEnabled()&&c.isAnimationEnabled()){var h=c.get("dataGroupId"),d=c.getData(),p=getSeriesTransitionKey(c),f=convertArraySeriesKeyToString(p),g=o.get(f);if(g)u(f),r.set(f,{oldSeries:[{dataGroupId:g.dataGroupId,divide:getDivideShapeFromData(g.data),data:g.data}],newSeries:[{dataGroupId:h,divide:getDivideShapeFromData(d),data:d}]});else if(isArray$1(p)){u(f);var y=[];each$f(p,function(x){var S=o.get(x);S.data&&y.push({dataGroupId:S.dataGroupId,divide:getDivideShapeFromData(S.data),data:S.data})}),y.length&&r.set(f,{oldSeries:y,newSeries:[{dataGroupId:h,data:d,divide:getDivideShapeFromData(d)}]})}else{var v=l.get(p);if(v){var _=r.get(v.key);_||(_={oldSeries:[{dataGroupId:v.dataGroupId,data:v.data,divide:getDivideShapeFromData(v.data)}],newSeries:[]},r.set(v.key,_)),_.newSeries.push({dataGroupId:h,data:d,divide:getDivideShapeFromData(d)})}}}}),r}function querySeries(a,n){for(var r=0;r<a.length;r++){var o=n.seriesIndex!=null&&n.seriesIndex===a[r].seriesIndex||n.seriesId!=null&&n.seriesId===a[r].id;if(o)return r}}function transitionSeriesFromOpt(a,n,r,o){var l=[],u=[];each$f(normalizeToArray(a.from),function(c){var h=querySeries(n.oldSeries,c);h>=0&&l.push({dataGroupId:n.oldDataGroupIds[h],data:n.oldData[h],divide:getDivideShapeFromData(n.oldData[h]),groupIdDim:c.dimension})}),each$f(normalizeToArray(a.to),function(c){var h=querySeries(r.updatedSeries,c);if(h>=0){var d=r.updatedSeries[h].getData();u.push({dataGroupId:n.oldDataGroupIds[h],data:d,divide:getDivideShapeFromData(d),groupIdDim:c.dimension})}}),l.length>0&&u.length>0&&transitionBetween(l,u,o)}function installUniversalTransition(a){a.registerUpdateLifecycle("series:beforeupdate",function(n,r,o){each$f(normalizeToArray(o.seriesTransition),function(l){each$f(normalizeToArray(l.to),function(u){for(var c=o.updatedSeries,h=0;h<c.length;h++)(u.seriesIndex!=null&&u.seriesIndex===c[h].seriesIndex||u.seriesId!=null&&u.seriesId===c[h].id)&&(c[h][SERIES_UNIVERSAL_TRANSITION_PROP]=!0)})})}),a.registerUpdateLifecycle("series:transition",function(n,r,o){var l=getUniversalTransitionGlobalStore(r);if(l.oldSeries&&o.updatedSeries&&o.optionChanged){var u=o.seriesTransition;if(u)each$f(normalizeToArray(u),function(v){transitionSeriesFromOpt(v,l,o,r)});else{var c=findTransitionSeriesBatches(l,o);each$f(c.keys(),function(v){var _=c.get(v);transitionBetween(_.oldSeries,_.newSeries,r)})}each$f(o.updatedSeries,function(v){v[SERIES_UNIVERSAL_TRANSITION_PROP]&&(v[SERIES_UNIVERSAL_TRANSITION_PROP]=!1)})}for(var h=n.getSeries(),d=l.oldSeries=[],p=l.oldDataGroupIds=[],f=l.oldData=[],g=0;g<h.length;g++){var y=h[g].getData();y.count()<DATA_COUNT_THRESHOLD&&(d.push(h[g]),p.push(h[g].get("dataGroupId")),f.push(y))}})}use([install$R]);use([install$S]);use([install$Q,install$P,install$O,install$M,install$K,install$I,install$H,install$G,install$F,install$E,install$D,install$B,install$A,install$z,install$y,install$x,install$w,install$v,install$u,install$t,install$s,install$r]);use(install$p);use(install$o);use(install$J);use(install$n);use(install$C);use(install$m);use(install$l);use(install$j);use(install$i);use(install$q);use(install$h);use(install$g);use(install$f);use(install$e);use(install$d);use(install$c);use(install$9);use(install$6);use(install$8);use(install$7);use(install$3);use(install$5);use(install$4);use(install$2);use(install$1);use(install);use(installUniversalTransition);use(installLabelLayout);const echarts=Object.freeze(Object.defineProperty({__proto__:null,registerLocale,version,dependencies,PRIORITY,init:init$1,connect,disconnect,disConnect,dispose,getInstanceByDom,getInstanceById,registerTheme,registerPreprocessor,registerProcessor,registerPostInit,registerPostUpdate,registerUpdateLifecycle,registerAction,registerCoordinateSystem,getCoordinateSystemDimensions,registerLayout,registerVisual,registerLoading,setCanvasCreator,registerMap:registerMap$1,getMap,registerTransform,dataTool,throttle,use,setPlatformAPI,parseGeoJSON,parseGeoJson:parseGeoJSON,env:env$1,Model:Model$1,Axis:Axis$1,innerDrawElementOnCanvas:brushSingle,zrender,matrix,vector,zrUtil:util$1,color,helper,number,time,graphic,format,util,List:SeriesData$1,ComponentModel:ComponentModel$1,ComponentView:ComponentView$1,SeriesModel:SeriesModel$1,ChartView:ChartView$1,extendComponentModel,extendComponentView,extendSeriesModel,extendChartView},Symbol.toStringTag,{value:"Module"})),createOptions=function(){return[function(){function a(){this.name="eChartsOption"}return a.prototype.createTarget=function(){var n=` <div class="hiprint-option-item hiprint-option-item-row">
        <div class="hiprint-option-item-label">
        echarts\u6E32\u67D3\u51FD\u6570
        </div>
        <div class="hiprint-option-item-field">
        <textarea style="height:80px;" placeholder="function(title,value,options,templateData,canvas,fabric){}" class="auto-submit"></textarea>
        </div>
    </div>`;return this.target=$(n),this.target},a.prototype.getValue=function(){var n=this.target.find("textarea").val();if(n)return n},a.prototype.setValue=function(n){this.target.find("textarea").val(n?n.toString():null)},a.prototype.destroy=function(){this.target.remove()},a}()]},typeOptions={createOptions},createPrintElement=({Config,BasePrintElement,Options,Supper,ele,eleOpt})=>{if(ele.type!=="echarts")return null;if(ele.type==="echarts")return function(t){function e(a,n){var r=t.call(this,a)||this;return r.options=new Options(n),r.options.setDefault(new Options(PrintElementConfig.echarts.default).getPrintElementOptionEntity()),r}return Supper(e,t),e.prototype.getDesignTarget=function(a){return t.prototype.getDesignTarget.call(this,a)},e.prototype.getProxyTarget=function(a){a&&this.SetProxyTargetOption(a);var n=this.createTarget();return this.updateTargetSize(n),n},e.prototype.getTitle=function(){var a=this.options.title||this.printElementType.title||"";return a},e.prototype.updateDesignViewFromOptions=function(){this.designTarget&&(this.css(this.designTarget),this.updateTarget(this.designTarget))},e.prototype.getConfigOptions=function(){return Config.echarts||PrintElementConfig.echarts},e.prototype.getData=function(a){var n=this.getField(),r=n&&n.split(".").reduce((o,l)=>o?o[l]:a?a[l]:"",!1)||"";return a?r||"":this.options.testData||this.printElementType.getData()||""},e.prototype.getEChartsOption=function(){var eChartsOption=void 0;if(this.printElementType.eChartsOption&&(eChartsOption=this.printElementType.eChartsOption),this.options.eChartsOption)try{var s="eChartsOption="+this.options.eChartsOption;eChartsOption=eval(s)}catch(a){console.log(a)}return eChartsOption},e.prototype.updateTarget=function(a){let n=this;var r=this.getEChartsOption(),o=a.find(".hiprint-printElement-content");try{o.html("");var l=this.options.getWidth()||20,u=this.options.getHeight()||20,c=parseInt(globalThis.hinnn.pt.toPx(l)),h=parseInt(globalThis.hinnn.pt.toPx(u));o.css({width:c+"px",height:h+"px"}),n.chart?(getInstanceByDom(o[0])&&getInstanceByDom(o[0]).dispose(),n.chart=init$1(o[0],null,{renderer:"svg"})):n.chart=init$1(o[0],null,{renderer:"svg"});let d=r&&r(n.options,n._currenttemplateData,echarts,n.chart);const p=`${a[0].className}`.includes("design");n.chart.setOption(Object.assign({animation:p?!0:!n._currenttemplateData},d))}catch(d){console.log(d),o.html("\u914D\u7F6E\u9519\u8BEF\u65E0\u6CD5\u6E32\u67D3")}},e.prototype.onResize=function(a,n,r,o,l){t.prototype.onResize.call(this,a,n,r,o,l),this.updateTarget(this.designTarget)},e.prototype.createTarget=function(a,n,r){var o=globalThis.$('<div class="hiprint-printElement hiprint-printElement-echarts" style="position: absolute;"><div class="hiprint-printElement-content" style="height:100%;width:100%"></div></div>');return this.updateTarget(o),o},e.prototype.getReizeableShowPoints=function(){return["r","s","e","n","w","ne","nw","se","sw"]},e.prototype.getHtml=function(a,n,r){return this.getHtml2(a,n,r)},e}(BasePrintElement)};function plugin(a){return{name:"echarts",description:"\u65B0\u589E\u6253\u5370\u5143\u7D20 echarts",hooks:[{hook:"init",name:"add style",description:"add style",priority:1,run:({Config:n,ElementTypes:r,hiprint:o})=>{n.registerItems([...typeOptions.createOptions(a)]),o.setConfig(PrintElementConfig),r.addPrintElementType({tid:"defaultModule.echarts",type:"echarts",title:"ECharts",options:{width:100,height:100,eChartsOption:`function (options, templateData, echarts, chart) {
                var pxSize = globalThis.hinnn.pt.toPx(100);
                let option = {
                  xAxis: {
                    type: "category",
                    data: ["Mon", "Tue", "Wed", "Thu", "Fri", "Sat", "Sun"],
                  },
                  yAxis: {
                    type: "value",
                  },
                  series: [
                    {
                      data: [150, 230, 224, 218, 135, 147, 260],
                      type: "line",
                    },
                  ],
                };
                return option;
              }`}});let l=r.allElementTypes.find(u=>u.tid==="defaultModule.echarts");r.getElementTypeGroups("defaultModule").find(u=>u.name=="\u63D2\u4EF6")?r.getElementTypeGroups("defaultModule").find(u=>u.name=="\u63D2\u4EF6").printElementTypes.push(l):r.getElementTypeGroups("defaultModule").splice(1,0,{name:"\u63D2\u4EF6",printElementTypes:[l]})}},{hook:"createPrintElement",name:"echarts",description:"add PrintElement echarts",priority:1,run:createPrintElement}],leastHiprintVersion:"0.1.8"}}function index(a){return plugin(a)}export{index as i};
